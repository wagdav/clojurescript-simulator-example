var shadow$provide = {};
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+c+"$"+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(c){return{value:c,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(f,g){this.$jscomp$symbol$id_=f;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:g})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",d=0,e=function(f){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new b(c+(f||"")+"_"+d++,f)};return e},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.polyfill("Symbol.asyncIterator",function(a){return a?a:Symbol("Symbol.asyncIterator")},"es9","es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};
(function(){
shadow$provide[0]=function(Eb,ob,Fc,Xa){function u(ca){if(null===ca||"object"!==typeof ca)return null;ca=fa&&ca[fa]||ca["@@iterator"];return"function"===typeof ca?ca:null}function h(ca,ha,La){this.props=ca;this.context=ha;this.refs=Va;this.updater=La||xa}function ia(){}function ab(ca,ha,La){this.props=ca;this.context=ha;this.refs=Va;this.updater=La||xa}function zb(ca,ha,La){var na,pa={},m=null,E=null;if(null!=ha)for(na in void 0!==ha.ref&&(E=ha.ref),void 0!==ha.key&&(m=""+ha.key),ha)bb.call(ha,na)&&
!Pb.hasOwnProperty(na)&&(pa[na]=ha[na]);var L=arguments.length-2;if(1===L)pa.children=La;else if(1<L){for(var w=Array(L),Q=0;Q<L;Q++)w[Q]=arguments[Q+2];pa.children=w}if(ca&&ca.defaultProps)for(na in L=ca.defaultProps,L)void 0===pa[na]&&(pa[na]=L[na]);return{$$typeof:Za,type:ca,key:m,ref:E,props:pa,_owner:tb.current}}function Yb(ca,ha){return{$$typeof:Za,type:ca.type,key:ha,ref:ca.ref,props:ca.props,_owner:ca._owner}}function ac(ca){return"object"===typeof ca&&null!==ca&&ca.$$typeof===Za}function Xb(ca){var ha=
{"\x3d":"\x3d0",":":"\x3d2"};return"$"+ca.replace(/[=:]/g,function(La){return ha[La]})}function mc(ca,ha){return"object"===typeof ca&&null!==ca&&null!=ca.key?Xb(""+ca.key):ha.toString(36)}function Cb(ca,ha,La,na,pa){var m=typeof ca;if("undefined"===m||"boolean"===m)ca=null;var E=!1;if(null===ca)E=!0;else switch(m){case "string":case "number":E=!0;break;case "object":switch(ca.$$typeof){case Za:case wb:E=!0}}if(E)return E=ca,pa=pa(E),ca=""===na?"."+mc(E,0):na,hb(pa)?(La="",null!=ca&&(La=ca.replace(eb,
"$\x26/")+"/"),Cb(pa,ha,La,"",function(Q){return Q})):null!=pa&&(ac(pa)&&(pa=Yb(pa,La+(!pa.key||E&&E.key===pa.key?"":(""+pa.key).replace(eb,"$\x26/")+"/")+ca)),ha.push(pa)),1;E=0;na=""===na?".":na+":";if(hb(ca))for(var L=0;L<ca.length;L++){m=ca[L];var w=na+mc(m,L);E+=Cb(m,ha,La,w,pa)}else if(w=u(ca),"function"===typeof w)for(ca=w.call(ca),L=0;!(m=ca.next()).done;)m=m.value,w=na+mc(m,L++),E+=Cb(m,ha,La,w,pa);else if("object"===m)throw ha=String(ca),Error("Objects are not valid as a React child (found: "+
("[object Object]"===ha?"object with keys {"+Object.keys(ca).join(", ")+"}":ha)+"). If you meant to render a collection of children, use an array instead.");return E}function Ub(ca,ha,La){if(null==ca)return ca;var na=[],pa=0;Cb(ca,na,"","",function(m){return ha.call(La,m,pa++)});return na}function jc(ca){if(-1===ca._status){var ha=ca._result;ha=ha();ha.then(function(La){if(0===ca._status||-1===ca._status)ca._status=1,ca._result=La},function(La){if(0===ca._status||-1===ca._status)ca._status=2,ca._result=
La});-1===ca._status&&(ca._status=0,ca._result=ha)}if(1===ca._status)return ca._result.default;throw ca._result;}function Ba(){throw Error("act(...) is not supported in production builds of React.");}var Za=Symbol.for("react.element"),wb=Symbol.for("react.portal");Eb=Symbol.for("react.fragment");ob=Symbol.for("react.strict_mode");Fc=Symbol.for("react.profiler");var ub=Symbol.for("react.provider"),sb=Symbol.for("react.context"),xb=Symbol.for("react.forward_ref"),ib=Symbol.for("react.suspense"),ec=
Symbol.for("react.memo"),ra=Symbol.for("react.lazy"),fa=Symbol.iterator,xa={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ra=Object.assign,Va={};h.prototype.isReactComponent={};h.prototype.setState=function(ca,ha){if("object"!==typeof ca&&"function"!==typeof ca&&null!=ca)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,
ca,ha,"setState")};h.prototype.forceUpdate=function(ca){this.updater.enqueueForceUpdate(this,ca,"forceUpdate")};ia.prototype=h.prototype;var Ga=ab.prototype=new ia;Ga.constructor=ab;Ra(Ga,h.prototype);Ga.isPureReactComponent=!0;var hb=Array.isArray,bb=Object.prototype.hasOwnProperty,tb={current:null},Pb={key:!0,ref:!0,__self:!0,__source:!0},eb=/\/+/g,T={current:null},Z={transition:null};Ga={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:Z,ReactCurrentOwner:tb};Xa.Children={map:Ub,forEach:function(ca,
ha,La){Ub(ca,function(){ha.apply(this,arguments)},La)},count:function(ca){var ha=0;Ub(ca,function(){ha++});return ha},toArray:function(ca){return Ub(ca,function(ha){return ha})||[]},only:function(ca){if(!ac(ca))throw Error("React.Children.only expected to receive a single React element child.");return ca}};Xa.Component=h;Xa.Fragment=Eb;Xa.Profiler=Fc;Xa.PureComponent=ab;Xa.StrictMode=ob;Xa.Suspense=ib;Xa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ga;Xa.act=Ba;Xa.cloneElement=function(ca,ha,
La){if(null===ca||void 0===ca)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ca+".");var na=Ra({},ca.props),pa=ca.key,m=ca.ref,E=ca._owner;if(null!=ha){void 0!==ha.ref&&(m=ha.ref,E=tb.current);void 0!==ha.key&&(pa=""+ha.key);if(ca.type&&ca.type.defaultProps)var L=ca.type.defaultProps;for(w in ha)bb.call(ha,w)&&!Pb.hasOwnProperty(w)&&(na[w]=void 0===ha[w]&&void 0!==L?L[w]:ha[w])}var w=arguments.length-2;if(1===w)na.children=La;else if(1<w){L=Array(w);for(var Q=
0;Q<w;Q++)L[Q]=arguments[Q+2];na.children=L}return{$$typeof:Za,type:ca.type,key:pa,ref:m,props:na,_owner:E}};Xa.createContext=function(ca){ca={$$typeof:sb,_currentValue:ca,_currentValue2:ca,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};ca.Provider={$$typeof:ub,_context:ca};return ca.Consumer=ca};Xa.createElement=zb;Xa.createFactory=function(ca){var ha=zb.bind(null,ca);ha.type=ca;return ha};Xa.createRef=function(){return{current:null}};Xa.forwardRef=function(ca){return{$$typeof:xb,
render:ca}};Xa.isValidElement=ac;Xa.lazy=function(ca){return{$$typeof:ra,_payload:{_status:-1,_result:ca},_init:jc}};Xa.memo=function(ca,ha){return{$$typeof:ec,type:ca,compare:void 0===ha?null:ha}};Xa.startTransition=function(ca){var ha=Z.transition;Z.transition={};try{ca()}finally{Z.transition=ha}};Xa.unstable_act=Ba;Xa.useCallback=function(ca,ha){return T.current.useCallback(ca,ha)};Xa.useContext=function(ca){return T.current.useContext(ca)};Xa.useDebugValue=function(){};Xa.useDeferredValue=function(ca){return T.current.useDeferredValue(ca)};
Xa.useEffect=function(ca,ha){return T.current.useEffect(ca,ha)};Xa.useId=function(){return T.current.useId()};Xa.useImperativeHandle=function(ca,ha,La){return T.current.useImperativeHandle(ca,ha,La)};Xa.useInsertionEffect=function(ca,ha){return T.current.useInsertionEffect(ca,ha)};Xa.useLayoutEffect=function(ca,ha){return T.current.useLayoutEffect(ca,ha)};Xa.useMemo=function(ca,ha){return T.current.useMemo(ca,ha)};Xa.useReducer=function(ca,ha,La){return T.current.useReducer(ca,ha,La)};Xa.useRef=function(ca){return T.current.useRef(ca)};
Xa.useState=function(ca){return T.current.useState(ca)};Xa.useSyncExternalStore=function(ca,ha,La){return T.current.useSyncExternalStore(ca,ha,La)};Xa.useTransition=function(){return T.current.useTransition()};Xa.version="18.3.1"};
shadow$provide[2]=function(Eb,ob,Fc,Xa){Fc.exports=ob(0)};
shadow$provide[3]=function(Eb,ob,Fc,Xa){function u(Z,ca){var ha=Z.length;Z.push(ca);a:for(;0<ha;){var La=ha-1>>>1,na=Z[La];if(0<ab(na,ca))Z[La]=ca,Z[ha]=na,ha=La;else break a}}function h(Z){return 0===Z.length?null:Z[0]}function ia(Z){if(0===Z.length)return null;var ca=Z[0],ha=Z.pop();if(ha!==ca){Z[0]=ha;var La=0,na=Z.length,pa=na>>>1;a:for(;La<pa;){var m=2*(La+1)-1,E=Z[m],L=m+1,w=Z[L];if(0>ab(E,ha))L<na&&0>ab(w,E)?(Z[La]=w,Z[L]=ha,La=L):(Z[La]=E,Z[m]=ha,La=m);else if(L<na&&0>ab(w,ha))Z[La]=w,Z[L]=
ha,La=L;else break a}}return ca}function ab(Z,ca){var ha=Z.sortIndex-ca.sortIndex;return 0!==ha?ha:Z.id-ca.id}function zb(Z){for(var ca=h(ub);null!==ca;){if(null===ca.callback)ia(ub);else if(ca.startTime<=Z)ia(ub),ca.sortIndex=ca.expirationTime,u(wb,ca);else break;ca=h(ub)}}function Yb(Z){fa=!1;zb(Z);if(!ra)if(null!==h(wb))ra=!0,Cb(ac);else{var ca=h(ub);null!==ca&&Ub(Yb,ca.startTime-Z)}}function ac(Z,ca){ra=!1;fa&&(fa=!1,Ra(bb),bb=-1);ec=!0;var ha=ib;try{zb(ca);for(xb=h(wb);null!==xb&&(!(xb.expirationTime>
ca)||Z&&!Xb());){var La=xb.callback;if("function"===typeof La){xb.callback=null;ib=xb.priorityLevel;var na=La(xb.expirationTime<=ca);ca=Xa.unstable_now();"function"===typeof na?xb.callback=na:xb===h(wb)&&ia(wb);zb(ca)}else ia(wb);xb=h(wb)}if(null!==xb)var pa=!0;else{var m=h(ub);null!==m&&Ub(Yb,m.startTime-ca);pa=!1}return pa}finally{xb=null,ib=ha,ec=!1}}function Xb(){return Xa.unstable_now()-Pb<tb?!1:!0}function mc(){if(null!==hb){var Z=Xa.unstable_now();Pb=Z;var ca=!0;try{ca=hb(!0,Z)}finally{ca?
eb():(Ga=!1,hb=null)}}else Ga=!1}function Cb(Z){hb=Z;Ga||(Ga=!0,eb())}function Ub(Z,ca){bb=xa(function(){Z(Xa.unstable_now())},ca)}if("object"===typeof performance&&"function"===typeof performance.now){var jc=performance;Xa.unstable_now=function(){return jc.now()}}else{var Ba=Date,Za=Ba.now();Xa.unstable_now=function(){return Ba.now()-Za}}var wb=[],ub=[],sb=1,xb=null,ib=3,ec=!1,ra=!1,fa=!1,xa="function"===typeof setTimeout?setTimeout:null,Ra="function"===typeof clearTimeout?clearTimeout:null,Va="undefined"!==
typeof setImmediate?setImmediate:null;"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var Ga=!1,hb=null,bb=-1,tb=5,Pb=-1;if("function"===typeof Va)var eb=function(){Va(mc)};else if("undefined"!==typeof MessageChannel){Eb=new MessageChannel;var T=Eb.port2;Eb.port1.onmessage=mc;eb=function(){T.postMessage(null)}}else eb=function(){xa(mc,0)};Xa.unstable_IdlePriority=5;Xa.unstable_ImmediatePriority=
1;Xa.unstable_LowPriority=4;Xa.unstable_NormalPriority=3;Xa.unstable_Profiling=null;Xa.unstable_UserBlockingPriority=2;Xa.unstable_cancelCallback=function(Z){Z.callback=null};Xa.unstable_continueExecution=function(){ra||ec||(ra=!0,Cb(ac))};Xa.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):tb=0<Z?Math.floor(1E3/Z):5};Xa.unstable_getCurrentPriorityLevel=function(){return ib};
Xa.unstable_getFirstCallbackNode=function(){return h(wb)};Xa.unstable_next=function(Z){switch(ib){case 1:case 2:case 3:var ca=3;break;default:ca=ib}var ha=ib;ib=ca;try{return Z()}finally{ib=ha}};Xa.unstable_pauseExecution=function(){};Xa.unstable_requestPaint=function(){};Xa.unstable_runWithPriority=function(Z,ca){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ha=ib;ib=Z;try{return ca()}finally{ib=ha}};Xa.unstable_scheduleCallback=function(Z,ca,ha){var La=Xa.unstable_now();"object"===
typeof ha&&null!==ha?(ha=ha.delay,ha="number"===typeof ha&&0<ha?La+ha:La):ha=La;switch(Z){case 1:var na=-1;break;case 2:na=250;break;case 5:na=1073741823;break;case 4:na=1E4;break;default:na=5E3}na=ha+na;Z={id:sb++,callback:ca,priorityLevel:Z,startTime:ha,expirationTime:na,sortIndex:-1};ha>La?(Z.sortIndex=ha,u(ub,Z),null===h(wb)&&Z===h(ub)&&(fa?(Ra(bb),bb=-1):fa=!0,Ub(Yb,ha-La))):(Z.sortIndex=na,u(wb,Z),ra||ec||(ra=!0,Cb(ac)));return Z};Xa.unstable_shouldYield=Xb;Xa.unstable_wrapCallback=function(Z){var ca=
ib;return function(){var ha=ib;ib=ca;try{return Z.apply(this,arguments)}finally{ib=ha}}}};
shadow$provide[5]=function(Eb,ob,Fc,Xa){Fc.exports=ob(3)};
shadow$provide[6]=function(Eb,ob,Fc,Xa){function u(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+c,k=1;k<arguments.length;k++)d+="\x26args[]\x3d"+encodeURIComponent(arguments[k]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(c,d){ia(c,d);ia(c+"Capture",d)}function ia(c,d){Wh[c]=d;for(c=0;c<d.length;c++)hi.add(d[c])}function ab(c){if(hj.call(ij,c))return!0;
if(hj.call(Hj,c))return!1;if(jj.test(c))return ij[c]=!0;Hj[c]=!0;return!1}function zb(c,d,k,v){if(null!==k&&0===k.type)return!1;switch(typeof d){case "function":case "symbol":return!0;case "boolean":if(v)return!1;if(null!==k)return!k.acceptsBooleans;c=c.toLowerCase().slice(0,5);return"data-"!==c&&"aria-"!==c;default:return!1}}function Yb(c,d,k,v){if(null===d||"undefined"===typeof d||zb(c,d,k,v))return!0;if(v)return!1;if(null!==k)switch(k.type){case 3:return!d;case 4:return!1===d;case 5:return isNaN(d);
case 6:return isNaN(d)||1>d}return!1}function ac(c,d,k,v,S,da,Ta){this.acceptsBooleans=2===d||3===d||4===d;this.attributeName=v;this.attributeNamespace=S;this.mustUseProperty=k;this.propertyName=c;this.type=d;this.sanitizeURL=da;this.removeEmptyString=Ta}function Xb(c){return c[1].toUpperCase()}function mc(c,d,k,v){var S=Zf.hasOwnProperty(d)?Zf[d]:null;if(null!==S?0!==S.type:v||!(2<d.length)||"o"!==d[0]&&"O"!==d[0]||"n"!==d[1]&&"N"!==d[1])Yb(d,k,S,v)&&(k=null),v||null===S?ab(d)&&(null===k?c.removeAttribute(d):
c.setAttribute(d,""+k)):S.mustUseProperty?c[S.propertyName]=null===k?3===S.type?!1:"":k:(d=S.attributeName,v=S.attributeNamespace,null===k?c.removeAttribute(d):(S=S.type,k=3===S||4===S&&!0===k?"":""+k,v?c.setAttributeNS(v,d,k):c.setAttribute(d,k)))}function Cb(c){if(null===c||"object"!==typeof c)return null;c=md&&c[md]||c["@@iterator"];return"function"===typeof c?c:null}function Ub(c){if(void 0===zd)try{throw Error();}catch(k){var d=k.stack.trim().match(/\n( *(at )?)/);zd=d&&d[1]||""}return"\n"+zd+
c}function jc(c,d){if(!c||Yd)return"";Yd=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error();},Object.defineProperty(d.prototype,"props",{set:function(){throw Error();}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(d,[])}catch(Uc){var v=Uc}Reflect.construct(c,[],d)}else{try{d.call()}catch(Uc){v=Uc}c.call(d.prototype)}else{try{throw Error();}catch(Uc){v=Uc}c()}}catch(Uc){if(Uc&&v&&"string"===typeof Uc.stack){for(var S=Uc.stack.split("\n"),
da=v.stack.split("\n"),Ta=S.length-1,Wb=da.length-1;1<=Ta&&0<=Wb&&S[Ta]!==da[Wb];)Wb--;for(;1<=Ta&&0<=Wb;Ta--,Wb--)if(S[Ta]!==da[Wb]){if(1!==Ta||1!==Wb){do if(Ta--,Wb--,0>Wb||S[Ta]!==da[Wb]){var lc="\n"+S[Ta].replace(" at new "," at ");c.displayName&&lc.includes("\x3canonymous\x3e")&&(lc=lc.replace("\x3canonymous\x3e",c.displayName));return lc}while(1<=Ta&&0<=Wb)}break}}}finally{Yd=!1,Error.prepareStackTrace=k}return(c=c?c.displayName||c.name:"")?Ub(c):""}function Ba(c){switch(c.tag){case 5:return Ub(c.type);
case 16:return Ub("Lazy");case 13:return Ub("Suspense");case 19:return Ub("SuspenseList");case 0:case 2:case 15:return c=jc(c.type,!1),c;case 11:return c=jc(c.type.render,!1),c;case 1:return c=jc(c.type,!0),c;default:return""}}function Za(c){if(null==c)return null;if("function"===typeof c)return c.displayName||c.name||null;if("string"===typeof c)return c;switch(c){case ii:return"Fragment";case ji:return"Portal";case G:return"Profiler";case n:return"StrictMode";case db:return"Suspense";case qb:return"SuspenseList"}if("object"===
typeof c)switch(c.$$typeof){case ka:return(c.displayName||"Context")+".Consumer";case M:return(c._context.displayName||"Context")+".Provider";case Wa:var d=c.render;(c=c.displayName)||(c=d.displayName||d.name||"",c=""!==c?"ForwardRef("+c+")":"ForwardRef");return c;case Kb:return d=c.displayName||null,null!==d?d:Za(c.type)||"Memo";case sc:d=c._payload;c=c._init;try{return Za(c(d))}catch(k){}}return null}function wb(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+
".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(""!==c?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Za(d);case 8:return d===n?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";
case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof d)return d.displayName||d.name||null;if("string"===typeof d)return d}return null}function ub(c){switch(typeof c){case "boolean":case "number":case "string":case "undefined":return c;case "object":return c;default:return""}}function sb(c){var d=c.type;return(c=c.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===d||"radio"===d)}function xb(c){var d=sb(c)?"checked":"value",k=Object.getOwnPropertyDescriptor(c.constructor.prototype,
d),v=""+c[d];if(!c.hasOwnProperty(d)&&"undefined"!==typeof k&&"function"===typeof k.get&&"function"===typeof k.set){var S=k.get,da=k.set;Object.defineProperty(c,d,{configurable:!0,get:function(){return S.call(this)},set:function(Ta){v=""+Ta;da.call(this,Ta)}});Object.defineProperty(c,d,{enumerable:k.enumerable});return{getValue:function(){return v},setValue:function(Ta){v=""+Ta},stopTracking:function(){c._valueTracker=null;delete c[d]}}}}function ib(c){c._valueTracker||(c._valueTracker=xb(c))}function ec(c){if(!c)return!1;
var d=c._valueTracker;if(!d)return!0;var k=d.getValue(),v="";c&&(v=sb(c)?c.checked?"true":"false":c.value);c=v;return c!==k?(d.setValue(c),!0):!1}function ra(c){c=c||("undefined"!==typeof document?document:void 0);if("undefined"===typeof c)return null;try{return c.activeElement||c.body}catch(d){return c.body}}function fa(c,d){var k=d.checked;return rc({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=k?k:c._wrapperState.initialChecked})}function xa(c,d){var k=null==d.defaultValue?
"":d.defaultValue,v=null!=d.checked?d.checked:d.defaultChecked;k=ub(null!=d.value?d.value:k);c._wrapperState={initialChecked:v,initialValue:k,controlled:"checkbox"===d.type||"radio"===d.type?null!=d.checked:null!=d.value}}function Ra(c,d){d=d.checked;null!=d&&mc(c,"checked",d,!1)}function Va(c,d){Ra(c,d);var k=ub(d.value),v=d.type;if(null!=k)if("number"===v){if(0===k&&""===c.value||c.value!=k)c.value=""+k}else c.value!==""+k&&(c.value=""+k);else if("submit"===v||"reset"===v){c.removeAttribute("value");
return}d.hasOwnProperty("value")?hb(c,d.type,k):d.hasOwnProperty("defaultValue")&&hb(c,d.type,ub(d.defaultValue));null==d.checked&&null!=d.defaultChecked&&(c.defaultChecked=!!d.defaultChecked)}function Ga(c,d,k){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var v=d.type;if(!("submit"!==v&&"reset"!==v||void 0!==d.value&&null!==d.value))return;d=""+c._wrapperState.initialValue;k||d===c.value||(c.value=d);c.defaultValue=d}k=c.name;""!==k&&(c.name="");c.defaultChecked=!!c._wrapperState.initialChecked;
""!==k&&(c.name=k)}function hb(c,d,k){if("number"!==d||ra(c.ownerDocument)!==c)null==k?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+k&&(c.defaultValue=""+k)}function bb(c,d,k,v){c=c.options;if(d){d={};for(var S=0;S<k.length;S++)d["$"+k[S]]=!0;for(k=0;k<c.length;k++)S=d.hasOwnProperty("$"+c[k].value),c[k].selected!==S&&(c[k].selected=S),S&&v&&(c[k].defaultSelected=!0)}else{k=""+ub(k);d=null;for(S=0;S<c.length;S++){if(c[S].value===k){c[S].selected=!0;v&&(c[S].defaultSelected=!0);
return}null!==d||c[S].disabled||(d=c[S])}null!==d&&(d.selected=!0)}}function tb(c,d){if(null!=d.dangerouslySetInnerHTML)throw Error(u(91));return rc({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Pb(c,d){var k=d.value;if(null==k){k=d.children;d=d.defaultValue;if(null!=k){if(null!=d)throw Error(u(92));if(ye(k)){if(1<k.length)throw Error(u(93));k=k[0]}d=k}null==d&&(d="");k=d}c._wrapperState={initialValue:ub(k)}}function eb(c,d){var k=ub(d.value),v=ub(d.defaultValue);
null!=k&&(k=""+k,k!==c.value&&(c.value=k),null==d.defaultValue&&c.defaultValue!==k&&(c.defaultValue=k));null!=v&&(c.defaultValue=""+v)}function T(c){var d=c.textContent;d===c._wrapperState.initialValue&&""!==d&&null!==d&&(c.value=d)}function Z(c){switch(c){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ca(c,d){return null==c||"http://www.w3.org/1999/xhtml"===c?Z(d):"http://www.w3.org/2000/svg"===
c&&"foreignObject"===d?"http://www.w3.org/1999/xhtml":c}function ha(c,d){if(d){var k=c.firstChild;if(k&&k===c.lastChild&&3===k.nodeType){k.nodeValue=d;return}}c.textContent=d}function La(c,d,k){return null==d||"boolean"===typeof d||""===d?"":k||"number"!==typeof d||0===d||Ef.hasOwnProperty(c)&&Ef[c]?(""+d).trim():d+"px"}function na(c,d){c=c.style;for(var k in d)if(d.hasOwnProperty(k)){var v=0===k.indexOf("--"),S=La(k,d[k],v);"float"===k&&(k="cssFloat");v?c.setProperty(k,S):c[k]=S}}function pa(c,d){if(d){if(tg[c]&&
(null!=d.children||null!=d.dangerouslySetInnerHTML))throw Error(u(137,c));if(null!=d.dangerouslySetInnerHTML){if(null!=d.children)throw Error(u(60));if("object"!==typeof d.dangerouslySetInnerHTML||!("__html"in d.dangerouslySetInnerHTML))throw Error(u(61));}if(null!=d.style&&"object"!==typeof d.style)throw Error(u(62));}}function m(c,d){if(-1===c.indexOf("-"))return"string"===typeof d.is;switch(c){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function E(c){c=c.target||c.srcElement||window;c.correspondingUseElement&&(c=c.correspondingUseElement);return 3===c.nodeType?c.parentNode:c}function L(c){if(c=Oc(c)){if("function"!==typeof Mf)throw Error(u(280));var d=c.stateNode;d&&(d=ce(d),Mf(c.stateNode,c.type,d))}}function w(c){ze?yf?yf.push(c):yf=[c]:ze=c}function Q(){if(ze){var c=ze,d=yf;yf=ze=null;L(c);if(d)for(c=0;c<d.length;c++)L(d[c])}}function A(c,d){return c(d)}function y(){}function N(c,d,k){if(Xh)return c(d,k);Xh=
!0;try{return A(c,d,k)}finally{if(Xh=!1,null!==ze||null!==yf)y(),Q()}}function z(c,d){var k=c.stateNode;if(null===k)return null;var v=ce(k);if(null===v)return null;k=v[d];a:switch(d){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(v=!v.disabled)||(c=c.type,v=!("button"===c||"input"===c||"select"===c||"textarea"===
c));c=!v;break a;default:c=!1}if(c)return null;if(k&&"function"!==typeof k)throw Error(u(231,d,typeof k));return k}function C(c,d,k,v,S,da,Ta,Wb,lc){var Uc=Array.prototype.slice.call(arguments,3);try{d.apply(k,Uc)}catch(ud){this.onError(ud)}}function H(c,d,k,v,S,da,Ta,Wb,lc){Pd=!1;Ed=null;C.apply(Ff,arguments)}function V(c,d,k,v,S,da,Ta,Wb,lc){H.apply(this,arguments);if(Pd){if(Pd){var Uc=Ed;Pd=!1;Ed=null}else throw Error(u(198));af||(af=!0,Tf=Uc)}}function Aa(c){var d=c,k=c;if(c.alternate)for(;d.return;)d=
d.return;else{c=d;do d=c,0!==(d.flags&4098)&&(k=d.return),c=d.return;while(c)}return 3===d.tag?k:null}function O(c){if(13===c.tag){var d=c.memoizedState;null===d&&(c=c.alternate,null!==c&&(d=c.memoizedState));if(null!==d)return d.dehydrated}return null}function la(c){if(Aa(c)!==c)throw Error(u(188));}function za(c){var d=c.alternate;if(!d){d=Aa(c);if(null===d)throw Error(u(188));return d!==c?null:c}for(var k=c,v=d;;){var S=k.return;if(null===S)break;var da=S.alternate;if(null===da){v=S.return;if(null!==
v){k=v;continue}break}if(S.child===da.child){for(da=S.child;da;){if(da===k)return la(S),c;if(da===v)return la(S),d;da=da.sibling}throw Error(u(188));}if(k.return!==v.return)k=S,v=da;else{for(var Ta=!1,Wb=S.child;Wb;){if(Wb===k){Ta=!0;k=S;v=da;break}if(Wb===v){Ta=!0;v=S;k=da;break}Wb=Wb.sibling}if(!Ta){for(Wb=da.child;Wb;){if(Wb===k){Ta=!0;k=da;v=S;break}if(Wb===v){Ta=!0;v=da;k=S;break}Wb=Wb.sibling}if(!Ta)throw Error(u(189));}}if(k.alternate!==v)throw Error(u(190));}if(3!==k.tag)throw Error(u(188));
return k.stateNode.current===k?c:d}function Ma(c){c=za(c);return null!==c?Pa(c):null}function Pa(c){if(5===c.tag||6===c.tag)return c;for(c=c.child;null!==c;){var d=Pa(c);if(null!==d)return d;c=c.sibling}return null}function Ya(c){if(Yh&&"function"===typeof Yh.onCommitFiberRoot)try{Yh.onCommitFiberRoot(Ij,c,void 0,128===(c.current.flags&128))}catch(d){}}function vb(c){c>>>=0;return 0===c?32:31-(kl(c)/Ll|0)|0}function jb(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;
case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Tb(c,d){var k=c.pendingLanes;if(0===
k)return 0;var v=0,S=c.suspendedLanes,da=c.pingedLanes,Ta=k&268435455;if(0!==Ta){var Wb=Ta&~S;0!==Wb?v=jb(Wb):(da&=Ta,0!==da&&(v=jb(da)))}else Ta=k&~S,0!==Ta?v=jb(Ta):0!==da&&(v=jb(da));if(0===v)return 0;if(0!==d&&d!==v&&0===(d&S)&&(S=v&-v,da=d&-d,S>=da||16===S&&0!==(da&4194240)))return d;0!==(v&4)&&(v|=k&16);d=c.entangledLanes;if(0!==d)for(c=c.entanglements,d&=v;0<d;)k=31-Nh(d),S=1<<k,v|=c[k],d&=~S;return v}function W(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+
5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ea(c,d){for(var k=c.suspendedLanes,v=c.pingedLanes,S=c.expirationTimes,da=c.pendingLanes;0<da;){var Ta=31-Nh(da),Wb=1<<Ta,lc=S[Ta];if(-1===lc){if(0===(Wb&k)||0!==(Wb&v))S[Ta]=W(Wb,d)}else lc<=d&&(c.expiredLanes|=Wb);da&=~Wb}}function Lb(c){c=c.pendingLanes&-1073741825;return 0!==c?c:c&1073741824?1073741824:0}function oc(){var c=
Jj;Jj<<=1;0===(Jj&4194240)&&(Jj=64);return c}function $b(c){for(var d=[],k=0;31>k;k++)d.push(c);return d}function Mb(c,d,k){c.pendingLanes|=d;536870912!==d&&(c.suspendedLanes=0,c.pingedLanes=0);c=c.eventTimes;d=31-Nh(d);c[d]=k}function Qb(c,d){var k=c.pendingLanes&~d;c.pendingLanes=d;c.suspendedLanes=0;c.pingedLanes=0;c.expiredLanes&=d;c.mutableReadLanes&=d;c.entangledLanes&=d;d=c.entanglements;var v=c.eventTimes;for(c=c.expirationTimes;0<k;){var S=31-Nh(k),da=1<<S;d[S]=0;v[S]=-1;c[S]=-1;k&=~da}}
function xc(c,d){var k=c.entangledLanes|=d;for(c=c.entanglements;k;){var v=31-Nh(k),S=1<<v;S&d|c[v]&d&&(c[v]|=d);k&=~S}}function ed(c){c&=-c;return 1<c?4<c?0!==(c&268435455)?16:536870912:4:1}function qa(c,d){switch(c){case "focusin":case "focusout":Ci=null;break;case "dragenter":case "dragleave":ki=null;break;case "mouseover":case "mouseout":Di=null;break;case "pointerover":case "pointerout":kj.delete(d.pointerId);break;case "gotpointercapture":case "lostpointercapture":lj.delete(d.pointerId)}}function Db(c,
d,k,v,S,da){if(null===c||c.nativeEvent!==da)return c={blockedOn:d,domEventName:k,eventSystemFlags:v,nativeEvent:da,targetContainers:[S]},null!==d&&(d=Oc(d),null!==d&&Fk(d)),c;c.eventSystemFlags|=v;d=c.targetContainers;null!==S&&-1===d.indexOf(S)&&d.push(S);return c}function Ua(c,d,k,v,S){switch(d){case "focusin":return Ci=Db(Ci,c,d,k,v,S),!0;case "dragenter":return ki=Db(ki,c,d,k,v,S),!0;case "mouseover":return Di=Db(Di,c,d,k,v,S),!0;case "pointerover":var da=S.pointerId;kj.set(da,Db(kj.get(da)||
null,c,d,k,v,S));return!0;case "gotpointercapture":return da=S.pointerId,lj.set(da,Db(lj.get(da)||null,c,d,k,v,S)),!0}return!1}function yb(c){var d=ad(c.target);if(null!==d){var k=Aa(d);if(null!==k)if(d=k.tag,13===d){if(d=O(k),null!==d){c.blockedOn=d;ll(c.priority,function(){Ml(k)});return}}else if(3===d&&k.stateNode.current.memoizedState.isDehydrated){c.blockedOn=3===k.tag?k.stateNode.containerInfo:null;return}}c.blockedOn=null}function Hb(c){if(null!==c.blockedOn)return!1;for(var d=c.targetContainers;0<
d.length;){var k=Ha(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(null===k){k=c.nativeEvent;var v=new k.constructor(k.type,k);zg=v;k.target.dispatchEvent(v);zg=null}else return d=Oc(k),null!==d&&Fk(d),c.blockedOn=k,!1;d.shift()}return!0}function Nb(c,d,k){Hb(c)&&k.delete(d)}function Zb(){Zj=!1;null!==Ci&&Hb(Ci)&&(Ci=null);null!==ki&&Hb(ki)&&(ki=null);null!==Di&&Hb(Di)&&(Di=null);kj.forEach(Nb);lj.forEach(Nb)}function ic(c,d){c.blockedOn===d&&(c.blockedOn=null,Zj||(Zj=!0,Ag.unstable_scheduleCallback(Ag.unstable_NormalPriority,
Zb)))}function Bc(c){function d(S){return ic(S,c)}if(0<ak.length){ic(ak[0],c);for(var k=1;k<ak.length;k++){var v=ak[k];v.blockedOn===c&&(v.blockedOn=null)}}null!==Ci&&ic(Ci,c);null!==ki&&ic(ki,c);null!==Di&&ic(Di,c);kj.forEach(d);lj.forEach(d);for(k=0;k<li.length;k++)v=li[k],v.blockedOn===c&&(v.blockedOn=null);for(;0<li.length&&(k=li[0],null===k.blockedOn);)yb(k),null===k.blockedOn&&li.shift()}function jd(c,d,k,v){var S=sf,da=mj.transition;mj.transition=null;try{sf=1,ma(c,d,k,v)}finally{sf=S,mj.transition=
da}}function Vc(c,d,k,v){var S=sf,da=mj.transition;mj.transition=null;try{sf=4,ma(c,d,k,v)}finally{sf=S,mj.transition=da}}function ma(c,d,k,v){if(bk){var S=Ha(c,d,k,v);if(null===S)He(c,d,v,ck,k),qa(c,v);else if(Ua(S,c,d,k,v))v.stopPropagation();else if(qa(c,v),d&4&&-1<ml.indexOf(c)){for(;null!==S;){var da=Oc(S);null!==da&&Nl(da);da=Ha(c,d,k,v);null===da&&He(c,d,v,ck,k);if(da===S)break;S=da}null!==S&&v.stopPropagation()}else He(c,d,v,null,k)}}function Ha(c,d,k,v){ck=null;c=E(v);c=ad(c);if(null!==c)if(d=
Aa(c),null===d)c=null;else if(k=d.tag,13===k){c=O(d);if(null!==c)return c;c=null}else if(3===k){if(d.stateNode.current.memoizedState.isDehydrated)return 3===d.tag?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);ck=c;return null}function gb(c){switch(c){case "cancel":case "click":case "close":case "contextmenu":case "copy":case "cut":case "auxclick":case "dblclick":case "dragend":case "dragstart":case "drop":case "focusin":case "focusout":case "input":case "invalid":case "keydown":case "keypress":case "keyup":case "mousedown":case "mouseup":case "paste":case "pause":case "play":case "pointercancel":case "pointerdown":case "pointerup":case "ratechange":case "reset":case "resize":case "seeked":case "submit":case "touchcancel":case "touchend":case "touchstart":case "volumechange":case "change":case "selectionchange":case "textInput":case "compositionstart":case "compositionend":case "compositionupdate":case "beforeblur":case "afterblur":case "beforeinput":case "blur":case "fullscreenchange":case "focus":case "hashchange":case "popstate":case "select":case "selectstart":return 1;
case "drag":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "mousemove":case "mouseout":case "mouseover":case "pointermove":case "pointerout":case "pointerover":case "scroll":case "toggle":case "touchmove":case "wheel":case "mouseenter":case "mouseleave":case "pointerenter":case "pointerleave":return 4;case "message":switch(Gk()){case Hk:return 1;case dk:return 4;case Ui:case nl:return 16;case Ik:return 536870912;default:return 16}default:return 16}}function R(){if(ek)return ek;
var c,d=Jk,k=d.length,v,S="value"in Ei?Ei.value:Ei.textContent,da=S.length;for(c=0;c<k&&d[c]===S[c];c++);var Ta=k-c;for(v=1;v<=Ta&&d[k-v]===S[da-v];v++);return ek=S.slice(c,1<v?1-v:void 0)}function t(c){var d=c.keyCode;"charCode"in c?(c=c.charCode,0===c&&13===d&&(c=13)):c=d;10===c&&(c=13);return 32<=c||13===c?c:0}function ba(){return!0}function va(){return!1}function Ca(c){function d(k,v,S,da,Ta){this._reactName=k;this._targetInst=S;this.type=v;this.nativeEvent=da;this.target=Ta;this.currentTarget=
null;for(var Wb in c)c.hasOwnProperty(Wb)&&(k=c[Wb],this[Wb]=k?k(da):da[Wb]);this.isDefaultPrevented=(null!=da.defaultPrevented?da.defaultPrevented:!1===da.returnValue)?ba:va;this.isPropagationStopped=va;return this}rc(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():"unknown"!==typeof k.returnValue&&(k.returnValue=!1),this.isDefaultPrevented=ba)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():
"unknown"!==typeof k.cancelBubble&&(k.cancelBubble=!0),this.isPropagationStopped=ba)},persist:function(){},isPersistent:ba});return d}function Sa(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=Ol[c])?!!d[c]:!1}function kb(){return Sa}function Rb(c,d){switch(c){case "keyup":return-1!==De.indexOf(d.keyCode);case "keydown":return 229!==d.keyCode;case "keypress":case "mousedown":case "focusout":return!0;default:return!1}}function Fb(c){c=c.detail;return"object"===typeof c&&
"data"in c?c.data:null}function Jb(c,d){switch(c){case "compositionend":return Fb(d);case "keypress":if(32!==d.which)return null;fk=!0;return Kk;case "textInput":return c=d.data,c===Kk&&fk?null:c;default:return null}}function Cc(c,d){if(mi)return"compositionend"===c||!sd&&Rb(c,d)?(c=R(),ek=Jk=Ei=null,mi=!1,c):null;switch(c){case "paste":return null;case "keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;
case "compositionend":return Lk&&"ko"!==d.locale?null:d.data;default:return null}}function Gc(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return"input"===d?!!Pl[c.type]:"textarea"===d?!0:!1}function Sc(c,d,k,v){w(v);d=tf(d,"onChange");0<d.length&&(k=new Nf("onChange","change",null,k,v),c.push({event:k,listeners:d}))}function vd(c){xd(c,0)}function od(c){var d=Nd(c);if(ec(d))return c}function gd(c,d){if("change"===c)return d}function Cd(){Vi&&(Vi.detachEvent("onpropertychange",Dd),nj=Vi=null)}
function Dd(c){if("value"===c.propertyName&&od(nj)){var d=[];Sc(d,nj,c,E(c));N(vd,d)}}function rd(c,d,k){"focusin"===c?(Cd(),Vi=d,nj=k,Vi.attachEvent("onpropertychange",Dd)):"focusout"===c&&Cd()}function we(c){if("selectionchange"===c||"keyup"===c||"keydown"===c)return od(nj)}function Bd(c,d){if("click"===c)return od(d)}function x(c,d){if("input"===c||"change"===c)return od(d)}function K(c,d){return c===d&&(0!==c||1/c===1/d)||c!==c&&d!==d}function ua(c,d){if(Oh(c,d))return!0;if("object"!==typeof c||
null===c||"object"!==typeof d||null===d)return!1;var k=Object.keys(c),v=Object.keys(d);if(k.length!==v.length)return!1;for(v=0;v<k.length;v++){var S=k[v];if(!hj.call(d,S)||!Oh(c[S],d[S]))return!1}return!0}function Ka(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function lb(c,d){var k=Ka(c);c=0;for(var v;k;){if(3===k.nodeType){v=c+k.textContent.length;if(c<=d&&v>=d)return{node:k,offset:d-c};c=v}a:{for(;k;){if(k.nextSibling){k=k.nextSibling;break a}k=k.parentNode}k=void 0}k=Ka(k)}}function Bb(c,
d){return c&&d?c===d?!0:c&&3===c.nodeType?!1:d&&3===d.nodeType?Bb(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function bc(){for(var c=window,d=ra();d instanceof c.HTMLIFrameElement;){try{var k="string"===typeof d.contentWindow.location.href}catch(v){k=!1}if(k)c=d.contentWindow;else break;d=ra(c.document)}return d}function Sb(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&("input"===d&&("text"===c.type||"search"===c.type||
"tel"===c.type||"url"===c.type||"password"===c.type)||"textarea"===d||"true"===c.contentEditable)}function nc(c){var d=bc(),k=c.focusedElem,v=c.selectionRange;if(d!==k&&k&&k.ownerDocument&&Bb(k.ownerDocument.documentElement,k)){if(null!==v&&Sb(k))if(d=v.start,c=v.end,void 0===c&&(c=d),"selectionStart"in k)k.selectionStart=d,k.selectionEnd=Math.min(c,k.value.length);else if(c=(d=k.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var S=k.textContent.length,da=Math.min(v.start,
S);v=void 0===v.end?da:Math.min(v.end,S);!c.extend&&da>v&&(S=v,v=da,da=S);S=lb(k,da);var Ta=lb(k,v);S&&Ta&&(1!==c.rangeCount||c.anchorNode!==S.node||c.anchorOffset!==S.offset||c.focusNode!==Ta.node||c.focusOffset!==Ta.offset)&&(d=d.createRange(),d.setStart(S.node,S.offset),c.removeAllRanges(),da>v?(c.addRange(d),c.extend(Ta.node,Ta.offset)):(d.setEnd(Ta.node,Ta.offset),c.addRange(d)))}d=[];for(c=k;c=c.parentNode;)1===c.nodeType&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});"function"===typeof k.focus&&
k.focus();for(k=0;k<d.length;k++)c=d[k],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}function Kc(c,d,k){var v=k.window===k?k.document:9===k.nodeType?k:k.ownerDocument;Jg||null==oj||oj!==ra(v)||(v=oj,"selectionStart"in v&&Sb(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Kj&&ua(Kj,v)||(Kj=v,v=tf(Mk,"onSelect"),
0<v.length&&(d=new Nf("onSelect","select",null,d,k),c.push({event:d,listeners:v}),d.target=oj)))}function Ac(c,d){var k={};k[c.toLowerCase()]=d.toLowerCase();k["Webkit"+c]="webkit"+d;k["Moz"+c]="moz"+d;return k}function Xc(c){if(Nk[c])return Nk[c];if(!Fi[c])return c;var d=Fi[c],k;for(k in d)if(d.hasOwnProperty(k)&&k in gk)return Nk[c]=d[k];return c}function kd(c,d){Zh.set(c,d);h(d,[c])}function pd(c,d,k){var v=c.type||"unknown-event";c.currentTarget=k;V(v,d,void 0,c);c.currentTarget=null}function xd(c,
d){d=0!==(d&4);for(var k=0;k<c.length;k++){var v=c[k],S=v.event;v=v.listeners;a:{var da=void 0;if(d)for(var Ta=v.length-1;0<=Ta;Ta--){var Wb=v[Ta],lc=Wb.instance,Uc=Wb.currentTarget;Wb=Wb.listener;if(lc!==da&&S.isPropagationStopped())break a;pd(S,Wb,Uc);da=lc}else for(Ta=0;Ta<v.length;Ta++){Wb=v[Ta];lc=Wb.instance;Uc=Wb.currentTarget;Wb=Wb.listener;if(lc!==da&&S.isPropagationStopped())break a;pd(S,Wb,Uc);da=lc}}}if(af)throw c=Tf,af=!1,Tf=null,c;}function nd(c,d){var k=d[Ok];void 0===k&&(k=d[Ok]=new Set);
var v=c+"__bubble";k.has(v)||(Me(d,c,2,!1),k.add(v))}function Jd(c,d,k){var v=0;d&&(v|=4);Me(k,c,v,d)}function me(c){if(!c[hk]){c[hk]=!0;hi.forEach(function(k){"selectionchange"!==k&&(Ql.has(k)||Jd(k,!1,c),Jd(k,!0,c))});var d=9===c.nodeType?c:c.ownerDocument;null===d||d[hk]||(d[hk]=!0,Jd("selectionchange",!1,d))}}function Me(c,d,k,v){switch(gb(d)){case 1:var S=jd;break;case 4:S=Vc;break;default:S=ma}k=S.bind(null,d,k,c);S=void 0;!Vd||"touchstart"!==d&&"touchmove"!==d&&"wheel"!==d||(S=!0);v?void 0!==
S?c.addEventListener(d,k,{capture:!0,passive:S}):c.addEventListener(d,k,!0):void 0!==S?c.addEventListener(d,k,{passive:S}):c.addEventListener(d,k,!1)}function He(c,d,k,v,S){var da=v;if(0===(d&1)&&0===(d&2)&&null!==v)a:for(;;){if(null===v)return;var Ta=v.tag;if(3===Ta||4===Ta){var Wb=v.stateNode.containerInfo;if(Wb===S||8===Wb.nodeType&&Wb.parentNode===S)break;if(4===Ta)for(Ta=v.return;null!==Ta;){var lc=Ta.tag;if(3===lc||4===lc)if(lc=Ta.stateNode.containerInfo,lc===S||8===lc.nodeType&&lc.parentNode===
S)return;Ta=Ta.return}for(;null!==Wb;){Ta=ad(Wb);if(null===Ta)return;lc=Ta.tag;if(5===lc||6===lc){v=da=Ta;continue a}Wb=Wb.parentNode}}v=v.return}N(function(){var Uc=da,ud=E(k),yd=[];a:{var td=Zh.get(c);if(void 0!==td){var Sd=Nf,de=c;switch(c){case "keypress":if(0===t(k))break a;case "keydown":case "keyup":Sd=Rl;break;case "focusin":de="focus";Sd=Pk;break;case "focusout":de="blur";Sd=Pk;break;case "beforeblur":case "afterblur":Sd=Pk;break;case "click":if(2===k.button)break a;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":Sd=
Qk;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":Sd=Rk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":Sd=Sl;break;case Ph:case ik:case ol:Sd=pl;break;case Wi:Sd=Sk;break;case "scroll":Sd=Tk;break;case "wheel":Sd=Tl;break;case "copy":case "cut":case "paste":Sd=jk;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":Sd=
ql}var je=0!==(d&4),$f=!je&&"scroll"===c,Ic=je?null!==td?td+"Capture":null:td;je=[];for(var uc=Uc,Qc;null!==uc;){Qc=uc;var Id=Qc.stateNode;5===Qc.tag&&null!==Id&&(Qc=Id,null!==Ic&&(Id=z(uc,Ic),null!=Id&&je.push(Ie(uc,Id,Qc))));if($f)break;uc=uc.return}0<je.length&&(td=new Sd(td,de,null,k,ud),yd.push({event:td,listeners:je}))}}if(0===(d&7)){td="mouseover"===c||"pointerover"===c;Sd="mouseout"===c||"pointerout"===c;if(!td||k===zg||!(de=k.relatedTarget||k.fromElement)||!ad(de)&&!de[$h])if(Sd||td){td=
ud.window===ud?ud:(td=ud.ownerDocument)?td.defaultView||td.parentWindow:window;if(Sd){if(de=k.relatedTarget||k.toElement,Sd=Uc,de=de?ad(de):null,null!==de&&($f=Aa(de),de!==$f||5!==de.tag&&6!==de.tag))de=null}else Sd=null,de=Uc;if(Sd!==de){je=Qk;Id="onMouseLeave";Ic="onMouseEnter";uc="mouse";if("pointerout"===c||"pointerover"===c)je=ql,Id="onPointerLeave",Ic="onPointerEnter",uc="pointer";$f=null==Sd?td:Nd(Sd);Qc=null==de?td:Nd(de);td=new je(Id,uc+"leave",Sd,k,ud);td.target=$f;td.relatedTarget=Qc;Id=
null;ad(ud)===Uc&&(je=new je(Ic,uc+"enter",de,k,ud),je.target=Qc,je.relatedTarget=$f,Id=je);$f=Id;if(Sd&&de)b:{je=Sd;Ic=de;uc=0;for(Qc=je;Qc;Qc=bf(Qc))uc++;Qc=0;for(Id=Ic;Id;Id=bf(Id))Qc++;for(;0<uc-Qc;)je=bf(je),uc--;for(;0<Qc-uc;)Ic=bf(Ic),Qc--;for(;uc--;){if(je===Ic||null!==Ic&&je===Ic.alternate)break b;je=bf(je);Ic=bf(Ic)}je=null}else je=null;null!==Sd&&F(yd,td,Sd,je,!1);null!==de&&null!==$f&&F(yd,$f,de,je,!0)}}td=Uc?Nd(Uc):window;Sd=td.nodeName&&td.nodeName.toLowerCase();if("select"===Sd||"input"===
Sd&&"file"===td.type)var be=gd;else if(Gc(td))if(sh)be=x;else{be=we;var oe=rd}else(Sd=td.nodeName)&&"input"===Sd.toLowerCase()&&("checkbox"===td.type||"radio"===td.type)&&(be=Bd);be&&(be=be(c,Uc))?Sc(yd,be,k,ud):(oe&&oe(c,td,Uc),"focusout"===c&&(oe=td._wrapperState)&&oe.controlled&&"number"===td.type&&hb(td,"number",td.value));oe=Uc?Nd(Uc):window;switch(c){case "focusin":if(Gc(oe)||"true"===oe.contentEditable)oj=oe,Mk=Uc,Kj=null;break;case "focusout":Kj=Mk=oj=null;break;case "mousedown":Jg=!0;break;
case "contextmenu":case "mouseup":case "dragend":Jg=!1;Kc(yd,k,ud);break;case "selectionchange":if(kk)break;case "keydown":case "keyup":Kc(yd,k,ud)}var ue;if(sd)a:{switch(c){case "compositionstart":var ee="onCompositionStart";break a;case "compositionend":ee="onCompositionEnd";break a;case "compositionupdate":ee="onCompositionUpdate";break a}ee=void 0}else mi?Rb(c,k)&&(ee="onCompositionEnd"):"keydown"===c&&229===k.keyCode&&(ee="onCompositionStart");ee&&(Lk&&"ko"!==k.locale&&(mi||"onCompositionStart"!==
ee?"onCompositionEnd"===ee&&mi&&(ue=R()):(Ei=ud,Jk="value"in Ei?Ei.value:Ei.textContent,mi=!0)),oe=tf(Uc,ee),0<oe.length&&(ee=new rl(ee,c,null,k,ud),yd.push({event:ee,listeners:oe}),ue?ee.data=ue:(ue=Fb(k),null!==ue&&(ee.data=ue))));if(ue=Gi?Jb(c,k):Cc(c,k))Uc=tf(Uc,"onBeforeInput"),0<Uc.length&&(ud=new rl("onBeforeInput","beforeinput",null,k,ud),yd.push({event:ud,listeners:Uc}),ud.data=ue)}xd(yd,d)})}function Ie(c,d,k){return{instance:c,listener:d,currentTarget:k}}function tf(c,d){for(var k=d+"Capture",
v=[];null!==c;){var S=c,da=S.stateNode;5===S.tag&&null!==da&&(S=da,da=z(c,k),null!=da&&v.unshift(Ie(c,da,S)),da=z(c,d),null!=da&&v.push(Ie(c,da,S)));c=c.return}return v}function bf(c){if(null===c)return null;do c=c.return;while(c&&5!==c.tag);return c?c:null}function F(c,d,k,v,S){for(var da=d._reactName,Ta=[];null!==k&&k!==v;){var Wb=k,lc=Wb.alternate,Uc=Wb.stateNode;if(null!==lc&&lc===v)break;5===Wb.tag&&null!==Uc&&(Wb=Uc,S?(lc=z(k,da),null!=lc&&Ta.unshift(Ie(k,lc,Wb))):S||(lc=z(k,da),null!=lc&&Ta.push(Ie(k,
lc,Wb))));k=k.return}0!==Ta.length&&c.push({event:d,listeners:Ta})}function aa(c){return("string"===typeof c?c:""+c).replace(Ul,"\n").replace(Vl,"")}function Fa(c,d,k){d=aa(d);if(aa(c)!==d&&k)throw Error(u(425));}function fb(){}function Gb(c,d){return"textarea"===c||"noscript"===c||"string"===typeof d.children||"number"===typeof d.children||"object"===typeof d.dangerouslySetInnerHTML&&null!==d.dangerouslySetInnerHTML&&null!=d.dangerouslySetInnerHTML.__html}function pc(c){setTimeout(function(){throw c;
})}function Vb(c,d){var k=d,v=0;do{var S=k.nextSibling;c.removeChild(k);if(S&&8===S.nodeType)if(k=S.data,"/$"===k){if(0===v){c.removeChild(S);Bc(d);return}v--}else"$"!==k&&"$?"!==k&&"$!"!==k||v++;k=S}while(k);Bc(d)}function Ec(c){for(;null!=c;c=c.nextSibling){var d=c.nodeType;if(1===d||3===d)break;if(8===d){d=c.data;if("$"===d||"$!"===d||"$?"===d)break;if("/$"===d)return null}}return c}function ld(c){c=c.previousSibling;for(var d=0;c;){if(8===c.nodeType){var k=c.data;if("$"===k||"$!"===k||"$?"===
k){if(0===d)return c;d--}else"/$"===k&&d++}c=c.previousSibling}return null}function ad(c){var d=c[Qh];if(d)return d;for(var k=c.parentNode;k;){if(d=k[$h]||k[Qh]){k=d.alternate;if(null!==d.child||null!==k&&null!==k.child)for(c=ld(c);null!==c;){if(k=c[Qh])return k;c=ld(c)}return d}c=k;k=c.parentNode}return null}function Oc(c){c=c[Qh]||c[$h];return!c||5!==c.tag&&6!==c.tag&&13!==c.tag&&3!==c.tag?null:c}function Nd(c){if(5===c.tag||6===c.tag)return c.stateNode;throw Error(u(33));}function ce(c){return c[Lj]||
null}function Kd(c){return{current:c}}function Md(c){0>pj||(c.current=Uk[pj],Uk[pj]=null,pj--)}function Wd(c,d){pj++;Uk[pj]=c.current;c.current=d}function ya(c,d){var k=c.type.contextTypes;if(!k)return gg;var v=c.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===d)return v.__reactInternalMemoizedMaskedChildContext;var S={},da;for(da in k)S[da]=d[da];v&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=S);return S}function Oa(c){c=
c.childContextTypes;return null!==c&&void 0!==c}function cc(){Md(ch);Md(Bg)}function id(c,d,k){if(Bg.current!==gg)throw Error(u(168));Wd(Bg,d);Wd(ch,k)}function vc(c,d,k){var v=c.stateNode;d=d.childContextTypes;if("function"!==typeof v.getChildContext)return k;v=v.getChildContext();for(var S in v)if(!(S in d))throw Error(u(108,wb(c)||"Unknown",S));return rc({},k,v)}function Hc(c){c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||gg;ni=Bg.current;Wd(Bg,c);Wd(ch,ch.current);return!0}function Jc(c,
d,k){var v=c.stateNode;if(!v)throw Error(u(169));k?(c=vc(c,d,ni),v.__reactInternalMemoizedMergedChildContext=c,Md(ch),Md(Bg),Wd(Bg,c)):Md(ch);Wd(ch,k)}function Yc(c){null===lg?lg=[c]:lg.push(c)}function Tc(c){ai=!0;Yc(c)}function qd(){if(!Vk&&null!==lg){Vk=!0;var c=0,d=sf;try{var k=lg;for(sf=1;c<k.length;c++){var v=k[c];do v=v(!0);while(null!==v)}lg=null;ai=!1}catch(S){throw null!==lg&&(lg=lg.slice(c+1)),Uf(Hk,qd),S;}finally{sf=d,Vk=!1}}return null}function bd(c,d){qj[Bh++]=lk;qj[Bh++]=mk;mk=c;lk=
d}function fe(c,d,k){Gf[th++]=Ch;Gf[th++]=oi;Gf[th++]=bi;bi=c;var v=Ch;c=oi;var S=32-Nh(v)-1;v&=~(1<<S);k+=1;var da=32-Nh(d)+S;if(30<da){var Ta=S-S%5;da=(v&(1<<Ta)-1).toString(32);v>>=Ta;S-=Ta;Ch=1<<32-Nh(d)+S|k<<S|v;oi=da+c}else Ch=1<<da|k<<S|v,oi=c}function Qe(c){null!==c.return&&(bd(c,1),fe(c,1,0))}function Ke(c){for(;c===mk;)mk=qj[--Bh],qj[Bh]=null,lk=qj[--Bh],qj[Bh]=null;for(;c===bi;)bi=Gf[--th],Gf[th]=null,oi=Gf[--th],Gf[th]=null,Ch=Gf[--th],Gf[th]=null}function ne(c,d){var k=hg(5,null,null,
0);k.elementType="DELETED";k.stateNode=d;k.return=c;d=c.deletions;null===d?(c.deletions=[k],c.flags|=16):d.push(k)}function Ye(c,d){switch(c.tag){case 5:var k=c.type;d=1!==d.nodeType||k.toLowerCase()!==d.nodeName.toLowerCase()?null:d;return null!==d?(c.stateNode=d,Qg=c,Rg=Ec(d.firstChild),!0):!1;case 6:return d=""===c.pendingProps||3!==d.nodeType?null:d,null!==d?(c.stateNode=d,Qg=c,Rg=null,!0):!1;case 13:return d=8!==d.nodeType?null:d,null!==d?(k=null!==bi?{id:Ch,overflow:oi}:null,c.memoizedState=
{dehydrated:d,treeContext:k,retryLane:1073741824},k=hg(18,null,null,0),k.stateNode=d,k.return=c,c.child=k,Qg=c,Rg=null,!0):!1;default:return!1}}function kf(c){return 0!==(c.mode&1)&&0===(c.flags&128)}function Le(c){if(Rf){var d=Rg;if(d){var k=d;if(!Ye(c,d)){if(kf(c))throw Error(u(418));d=Ec(k.nextSibling);var v=Qg;d&&Ye(c,d)?ne(v,k):(c.flags=c.flags&-4097|2,Rf=!1,Qg=c)}}else{if(kf(c))throw Error(u(418));c.flags=c.flags&-4097|2;Rf=!1;Qg=c}}}function Xe(c){for(c=c.return;null!==c&&5!==c.tag&&3!==c.tag&&
13!==c.tag;)c=c.return;Qg=c}function Ze(c){if(c!==Qg)return!1;if(!Rf)return Xe(c),Rf=!0,!1;var d;(d=3!==c.tag)&&!(d=5!==c.tag)&&(d=c.type,d="head"!==d&&"body"!==d&&!Gb(c.type,c.memoizedProps));if(d&&(d=Rg)){if(kf(c))throw Ae(),Error(u(418));for(;d;)ne(c,d),d=Ec(d.nextSibling)}Xe(c);if(13===c.tag){c=c.memoizedState;c=null!==c?c.dehydrated:null;if(!c)throw Error(u(317));a:{c=c.nextSibling;for(d=0;c;){if(8===c.nodeType){var k=c.data;if("/$"===k){if(0===d){Rg=Ec(c.nextSibling);break a}d--}else"$"!==k&&
"$!"!==k&&"$?"!==k||d++}c=c.nextSibling}Rg=null}}else Rg=Qg?Ec(c.stateNode.nextSibling):null;return!0}function Ae(){for(var c=Rg;c;)c=Ec(c.nextSibling)}function Ee(){Rg=Qg=null;Rf=!1}function qe(c){null===jh?jh=[c]:jh.push(c)}function oa(c,d,k){c=k.ref;if(null!==c&&"function"!==typeof c&&"object"!==typeof c){if(k._owner){if(k=k._owner){if(1!==k.tag)throw Error(u(309));var v=k.stateNode}if(!v)throw Error(u(147,c));var S=v,da=""+c;if(null!==d&&null!==d.ref&&"function"===typeof d.ref&&d.ref._stringRef===
da)return d.ref;d=function(Ta){var Wb=S.refs;null===Ta?delete Wb[da]:Wb[da]=Ta};d._stringRef=da;return d}if("string"!==typeof c)throw Error(u(284));if(!k._owner)throw Error(u(290,c));}return c}function l(c,d){c=Object.prototype.toString.call(d);throw Error(u(31,"[object Object]"===c?"object with keys {"+Object.keys(d).join(", ")+"}":c));}function q(c){var d=c._init;return d(c._payload)}function J(c){function d(Ic,uc){if(c){var Qc=Ic.deletions;null===Qc?(Ic.deletions=[uc],Ic.flags|=16):Qc.push(uc)}}
function k(Ic,uc){if(!c)return null;for(;null!==uc;)d(Ic,uc),uc=uc.sibling;return null}function v(Ic,uc){for(Ic=new Map;null!==uc;)null!==uc.key?Ic.set(uc.key,uc):Ic.set(uc.index,uc),uc=uc.sibling;return Ic}function S(Ic,uc){Ic=ag(Ic,uc);Ic.index=0;Ic.sibling=null;return Ic}function da(Ic,uc,Qc){Ic.index=Qc;if(!c)return Ic.flags|=1048576,uc;Qc=Ic.alternate;if(null!==Qc)return Qc=Qc.index,Qc<uc?(Ic.flags|=2,uc):Qc;Ic.flags|=2;return uc}function Ta(Ic){c&&null===Ic.alternate&&(Ic.flags|=2);return Ic}
function Wb(Ic,uc,Qc,Id){if(null===uc||6!==uc.tag)return uc=rj(Qc,Ic.mode,Id),uc.return=Ic,uc;uc=S(uc,Qc);uc.return=Ic;return uc}function lc(Ic,uc,Qc,Id){var be=Qc.type;if(be===ii)return ud(Ic,uc,Qc.props.children,Id,Qc.key);if(null!==uc&&(uc.elementType===be||"object"===typeof be&&null!==be&&be.$$typeof===sc&&q(be)===uc.type))return Id=S(uc,Qc.props),Id.ref=oa(Ic,uc,Qc),Id.return=Ic,Id;Id=Af(Qc.type,Qc.key,Qc.props,null,Ic.mode,Id);Id.ref=oa(Ic,uc,Qc);Id.return=Ic;return Id}function Uc(Ic,uc,Qc,
Id){if(null===uc||4!==uc.tag||uc.stateNode.containerInfo!==Qc.containerInfo||uc.stateNode.implementation!==Qc.implementation)return uc=sj(Qc,Ic.mode,Id),uc.return=Ic,uc;uc=S(uc,Qc.children||[]);uc.return=Ic;return uc}function ud(Ic,uc,Qc,Id,be){if(null===uc||7!==uc.tag)return uc=Cg(Qc,Ic.mode,Id,be),uc.return=Ic,uc;uc=S(uc,Qc);uc.return=Ic;return uc}function yd(Ic,uc,Qc){if("string"===typeof uc&&""!==uc||"number"===typeof uc)return uc=rj(""+uc,Ic.mode,Qc),uc.return=Ic,uc;if("object"===typeof uc&&
null!==uc){switch(uc.$$typeof){case Xi:return Qc=Af(uc.type,uc.key,uc.props,null,Ic.mode,Qc),Qc.ref=oa(Ic,null,uc),Qc.return=Ic,Qc;case ji:return uc=sj(uc,Ic.mode,Qc),uc.return=Ic,uc;case sc:var Id=uc._init;return yd(Ic,Id(uc._payload),Qc)}if(ye(uc)||Cb(uc))return uc=Cg(uc,Ic.mode,Qc,null),uc.return=Ic,uc;l(Ic,uc)}return null}function td(Ic,uc,Qc,Id){var be=null!==uc?uc.key:null;if("string"===typeof Qc&&""!==Qc||"number"===typeof Qc)return null!==be?null:Wb(Ic,uc,""+Qc,Id);if("object"===typeof Qc&&
null!==Qc){switch(Qc.$$typeof){case Xi:return Qc.key===be?lc(Ic,uc,Qc,Id):null;case ji:return Qc.key===be?Uc(Ic,uc,Qc,Id):null;case sc:return be=Qc._init,td(Ic,uc,be(Qc._payload),Id)}if(ye(Qc)||Cb(Qc))return null!==be?null:ud(Ic,uc,Qc,Id,null);l(Ic,Qc)}return null}function Sd(Ic,uc,Qc,Id,be){if("string"===typeof Id&&""!==Id||"number"===typeof Id)return Ic=Ic.get(Qc)||null,Wb(uc,Ic,""+Id,be);if("object"===typeof Id&&null!==Id){switch(Id.$$typeof){case Xi:return Ic=Ic.get(null===Id.key?Qc:Id.key)||
null,lc(uc,Ic,Id,be);case ji:return Ic=Ic.get(null===Id.key?Qc:Id.key)||null,Uc(uc,Ic,Id,be);case sc:var oe=Id._init;return Sd(Ic,uc,Qc,oe(Id._payload),be)}if(ye(Id)||Cb(Id))return Ic=Ic.get(Qc)||null,ud(uc,Ic,Id,be,null);l(uc,Id)}return null}function de(Ic,uc,Qc,Id){for(var be=null,oe=null,ue=uc,ee=uc=0,ug=null;null!==ue&&ee<Qc.length;ee++){ue.index>ee?(ug=ue,ue=null):ug=ue.sibling;var ef=td(Ic,ue,Qc[ee],Id);if(null===ef){null===ue&&(ue=ug);break}c&&ue&&null===ef.alternate&&d(Ic,ue);uc=da(ef,uc,
ee);null===oe?be=ef:oe.sibling=ef;oe=ef;ue=ug}if(ee===Qc.length)return k(Ic,ue),Rf&&bd(Ic,ee),be;if(null===ue){for(;ee<Qc.length;ee++)ue=yd(Ic,Qc[ee],Id),null!==ue&&(uc=da(ue,uc,ee),null===oe?be=ue:oe.sibling=ue,oe=ue);Rf&&bd(Ic,ee);return be}for(ue=v(Ic,ue);ee<Qc.length;ee++)ug=Sd(ue,Ic,ee,Qc[ee],Id),null!==ug&&(c&&null!==ug.alternate&&ue.delete(null===ug.key?ee:ug.key),uc=da(ug,uc,ee),null===oe?be=ug:oe.sibling=ug,oe=ug);c&&ue.forEach(function(pi){return d(Ic,pi)});Rf&&bd(Ic,ee);return be}function je(Ic,
uc,Qc,Id){var be=Cb(Qc);if("function"!==typeof be)throw Error(u(150));Qc=be.call(Qc);if(null==Qc)throw Error(u(151));for(var oe=be=null,ue=uc,ee=uc=0,ug=null,ef=Qc.next();null!==ue&&!ef.done;ee++,ef=Qc.next()){ue.index>ee?(ug=ue,ue=null):ug=ue.sibling;var pi=td(Ic,ue,ef.value,Id);if(null===pi){null===ue&&(ue=ug);break}c&&ue&&null===pi.alternate&&d(Ic,ue);uc=da(pi,uc,ee);null===oe?be=pi:oe.sibling=pi;oe=pi;ue=ug}if(ef.done)return k(Ic,ue),Rf&&bd(Ic,ee),be;if(null===ue){for(;!ef.done;ee++,ef=Qc.next())ef=
yd(Ic,ef.value,Id),null!==ef&&(uc=da(ef,uc,ee),null===oe?be=ef:oe.sibling=ef,oe=ef);Rf&&bd(Ic,ee);return be}for(ue=v(Ic,ue);!ef.done;ee++,ef=Qc.next())ef=Sd(ue,Ic,ee,ef.value,Id),null!==ef&&(c&&null!==ef.alternate&&ue.delete(null===ef.key?ee:ef.key),uc=da(ef,uc,ee),null===oe?be=ef:oe.sibling=ef,oe=ef);c&&ue.forEach(function(Wl){return d(Ic,Wl)});Rf&&bd(Ic,ee);return be}function $f(Ic,uc,Qc,Id){"object"===typeof Qc&&null!==Qc&&Qc.type===ii&&null===Qc.key&&(Qc=Qc.props.children);if("object"===typeof Qc&&
null!==Qc){switch(Qc.$$typeof){case Xi:a:{for(var be=Qc.key,oe=uc;null!==oe;){if(oe.key===be){be=Qc.type;if(be===ii){if(7===oe.tag){k(Ic,oe.sibling);uc=S(oe,Qc.props.children);uc.return=Ic;Ic=uc;break a}}else if(oe.elementType===be||"object"===typeof be&&null!==be&&be.$$typeof===sc&&q(be)===oe.type){k(Ic,oe.sibling);uc=S(oe,Qc.props);uc.ref=oa(Ic,oe,Qc);uc.return=Ic;Ic=uc;break a}k(Ic,oe);break}else d(Ic,oe);oe=oe.sibling}Qc.type===ii?(uc=Cg(Qc.props.children,Ic.mode,Id,Qc.key),uc.return=Ic,Ic=uc):
(Id=Af(Qc.type,Qc.key,Qc.props,null,Ic.mode,Id),Id.ref=oa(Ic,uc,Qc),Id.return=Ic,Ic=Id)}return Ta(Ic);case ji:a:{for(oe=Qc.key;null!==uc;){if(uc.key===oe)if(4===uc.tag&&uc.stateNode.containerInfo===Qc.containerInfo&&uc.stateNode.implementation===Qc.implementation){k(Ic,uc.sibling);uc=S(uc,Qc.children||[]);uc.return=Ic;Ic=uc;break a}else{k(Ic,uc);break}else d(Ic,uc);uc=uc.sibling}uc=sj(Qc,Ic.mode,Id);uc.return=Ic;Ic=uc}return Ta(Ic);case sc:return oe=Qc._init,$f(Ic,uc,oe(Qc._payload),Id)}if(ye(Qc))return de(Ic,
uc,Qc,Id);if(Cb(Qc))return je(Ic,uc,Qc,Id);l(Ic,Qc)}return"string"===typeof Qc&&""!==Qc||"number"===typeof Qc?(Qc=""+Qc,null!==uc&&6===uc.tag?(k(Ic,uc.sibling),uc=S(uc,Qc),uc.return=Ic,Ic=uc):(k(Ic,uc),uc=rj(Qc,Ic.mode,Id),uc.return=Ic,Ic=uc),Ta(Ic)):k(Ic,uc)}return $f}function ja(c){var d=tj.current;Md(tj);c._currentValue=d}function Da(c,d,k){for(;null!==c;){var v=c.alternate;(c.childLanes&d)!==d?(c.childLanes|=d,null!==v&&(v.childLanes|=d)):null!==v&&(v.childLanes&d)!==d&&(v.childLanes|=d);if(c===
k)break;c=c.return}}function Qa(c,d){Hi=c;Mj=qi=null;c=c.dependencies;null!==c&&null!==c.firstContext&&(0!==(c.lanes&d)&&(dh=!0),c.firstContext=null)}function Ia(c){var d=c._currentValue;if(Mj!==c)if(c={context:c,memoizedValue:d,next:null},null===qi){if(null===Hi)throw Error(u(308));qi=c;Hi.dependencies={lanes:0,firstContext:c}}else qi=qi.next=c;return d}function rb(c){null===Yi?Yi=[c]:Yi.push(c)}function nb(c,d,k,v){var S=d.interleaved;null===S?(k.next=k,rb(d)):(k.next=S.next,S.next=k);d.interleaved=
k;return tc(c,v)}function tc(c,d){c.lanes|=d;var k=c.alternate;null!==k&&(k.lanes|=d);k=c;for(c=c.return;null!==c;)c.childLanes|=d,k=c.alternate,null!==k&&(k.childLanes|=d),k=c,c=c.return;return 3===k.tag?k.stateNode:null}function wc(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zc(c,d){c=c.updateQueue;d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,
lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function yc(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function Rc(c,d,k){var v=c.updateQueue;if(null===v)return null;v=v.shared;if(0!==(cf&2)){var S=v.pending;null===S?d.next=d:(d.next=S.next,S.next=d);v.pending=d;return tc(c,k)}S=v.interleaved;null===S?(d.next=d,rb(v)):(d.next=S.next,S.next=d);v.interleaved=d;return tc(c,k)}function fd(c,d,k){d=d.updateQueue;if(null!==d&&(d=d.shared,0!==(k&4194240))){var v=
d.lanes;v&=c.pendingLanes;k|=v;d.lanes=k;xc(c,k)}}function Td(c,d){var k=c.updateQueue,v=c.alternate;if(null!==v&&(v=v.updateQueue,k===v)){var S=null,da=null;k=k.firstBaseUpdate;if(null!==k){do{var Ta={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};null===da?S=da=Ta:da=da.next=Ta;k=k.next}while(null!==k);null===da?S=da=d:da=da.next=d}else S=da=d;k={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:da,shared:v.shared,effects:v.effects};c.updateQueue=
k}else c=k.lastBaseUpdate,null===c?k.firstBaseUpdate=d:c.next=d,k.lastBaseUpdate=d}function Ad(c,d,k,v){var S=c.updateQueue;ri=!1;var da=S.firstBaseUpdate,Ta=S.lastBaseUpdate,Wb=S.shared.pending;if(null!==Wb){S.shared.pending=null;var lc=Wb,Uc=lc.next;lc.next=null;null===Ta?da=Uc:Ta.next=Uc;var ud=c.alternate;null!==ud&&(ud=ud.updateQueue,Wb=ud.lastBaseUpdate,Wb!==lc&&(null===Wb?ud.firstBaseUpdate=Uc:Wb.next=Uc,ud.lastBaseUpdate=lc))}if(null!==da){var yd=S.baseState;Ta=0;ud=Uc=lc=null;Wb=da;do{var td=
Wb.lane,Sd=Wb.eventTime;if((v&td)===td){null!==ud&&(ud=ud.next={eventTime:Sd,lane:0,tag:Wb.tag,payload:Wb.payload,callback:Wb.callback,next:null});a:{var de=c,je=Wb;td=d;Sd=k;switch(je.tag){case 1:de=je.payload;if("function"===typeof de){yd=de.call(Sd,yd,td);break a}yd=de;break a;case 3:de.flags=de.flags&-65537|128;case 0:de=je.payload;td="function"===typeof de?de.call(Sd,yd,td):de;if(null===td||void 0===td)break a;yd=rc({},yd,td);break a;case 2:ri=!0}}null!==Wb.callback&&0!==Wb.lane&&(c.flags|=64,
td=S.effects,null===td?S.effects=[Wb]:td.push(Wb))}else Sd={eventTime:Sd,lane:td,tag:Wb.tag,payload:Wb.payload,callback:Wb.callback,next:null},null===ud?(Uc=ud=Sd,lc=yd):ud=ud.next=Sd,Ta|=td;Wb=Wb.next;if(null===Wb)if(Wb=S.shared.pending,null===Wb)break;else td=Wb,Wb=td.next,td.next=null,S.lastBaseUpdate=td,S.shared.pending=null}while(1);null===ud&&(lc=yd);S.baseState=lc;S.firstBaseUpdate=Uc;S.lastBaseUpdate=ud;d=S.shared.interleaved;if(null!==d){S=d;do Ta|=S.lane,S=S.next;while(S!==d)}else null===
da&&(S.shared.lanes=0);nf|=Ta;c.lanes=Ta;c.memoizedState=yd}}function Ld(c,d,k){c=d.effects;d.effects=null;if(null!==c)for(d=0;d<c.length;d++){var v=c[d],S=v.callback;if(null!==S){v.callback=null;v=k;if("function"!==typeof S)throw Error(u(191,S));S.call(v)}}}function Ud(c){if(c===uj)throw Error(u(174));return c}function qc(c,d){Wd(vj,d);Wd(wj,c);Wd(ci,uj);c=d.nodeType;switch(c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:ca(null,"");break;default:c=8===c?d.parentNode:d,d=c.namespaceURI||
null,c=c.tagName,d=ca(d,c)}Md(ci);Wd(ci,d)}function Fd(){Md(ci);Md(wj);Md(vj)}function Be(c){Ud(vj.current);var d=Ud(ci.current),k=ca(d,c.type);d!==k&&(Wd(wj,c),Wd(ci,k))}function te(c){wj.current===c&&(Md(ci),Md(wj))}function ke(c){for(var d=c;null!==d;){if(13===d.tag){var k=d.memoizedState;if(null!==k&&(k=k.dehydrated,null===k||"$?"===k.data||"$!"===k.data))return d}else if(19===d.tag&&void 0!==d.memoizedProps.revealOrder){if(0!==(d.flags&128))return d}else if(null!==d.child){d.child.return=d;d=
d.child;continue}if(d===c)break;for(;null===d.sibling;){if(null===d.return||d.return===c)return null;d=d.return}d.sibling.return=d.return;d=d.sibling}return null}function Qd(){for(var c=0;c<Ii.length;c++)Ii[c]._workInProgressVersionPrimary=null;Ii.length=0}function Od(){throw Error(u(321));}function xe(c,d){if(null===d)return!1;for(var k=0;k<d.length&&k<c.length;k++)if(!Oh(c[k],d[k]))return!1;return!0}function Fe(c,d,k,v,S,da){Zi=da;uf=d;d.memoizedState=null;d.updateQueue=null;d.lanes=0;Nj.current=
null===c||null===c.memoizedState?Xl:sl;c=k(v,S);if(Oj){da=0;do{Oj=!1;Pj=0;if(25<=da)throw Error(u(301));da+=1;vg=mg=null;d.updateQueue=null;Nj.current=tl;c=k(v,S)}while(Oj)}Nj.current=Qj;d=null!==mg&&null!==mg.next;Zi=0;vg=mg=uf=null;$i=!1;if(d)throw Error(u(300));return c}function re(){var c=0!==Pj;Pj=0;return c}function Ne(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===vg?uf.memoizedState=vg=c:vg=vg.next=c;return vg}function hd(){if(null===mg){var c=uf.alternate;
c=null!==c?c.memoizedState:null}else c=mg.next;var d=null===vg?uf.memoizedState:vg.next;if(null!==d)vg=d,mg=c;else{if(null===c)throw Error(u(310));mg=c;c={memoizedState:mg.memoizedState,baseState:mg.baseState,baseQueue:mg.baseQueue,queue:mg.queue,next:null};null===vg?uf.memoizedState=vg=c:vg=vg.next=c}return vg}function ve(c,d){return"function"===typeof d?d(c):d}function ff(c){var d=hd(),k=d.queue;if(null===k)throw Error(u(311));k.lastRenderedReducer=c;var v=mg,S=v.baseQueue,da=k.pending;if(null!==
da){if(null!==S){var Ta=S.next;S.next=da.next;da.next=Ta}v.baseQueue=S=da;k.pending=null}if(null!==S){da=S.next;v=v.baseState;var Wb=Ta=null,lc=null,Uc=da;do{var ud=Uc.lane;if((Zi&ud)===ud)null!==lc&&(lc=lc.next={lane:0,action:Uc.action,hasEagerState:Uc.hasEagerState,eagerState:Uc.eagerState,next:null}),v=Uc.hasEagerState?Uc.eagerState:c(v,Uc.action);else{var yd={lane:ud,action:Uc.action,hasEagerState:Uc.hasEagerState,eagerState:Uc.eagerState,next:null};null===lc?(Wb=lc=yd,Ta=v):lc=lc.next=yd;uf.lanes|=
ud;nf|=ud}Uc=Uc.next}while(null!==Uc&&Uc!==da);null===lc?Ta=v:lc.next=Wb;Oh(v,d.memoizedState)||(dh=!0);d.memoizedState=v;d.baseState=Ta;d.baseQueue=lc;k.lastRenderedState=v}c=k.interleaved;if(null!==c){S=c;do da=S.lane,uf.lanes|=da,nf|=da,S=S.next;while(S!==c)}else null===S&&(k.lanes=0);return[d.memoizedState,k.dispatch]}function lf(c){var d=hd(),k=d.queue;if(null===k)throw Error(u(311));k.lastRenderedReducer=c;var v=k.dispatch,S=k.pending,da=d.memoizedState;if(null!==S){k.pending=null;var Ta=S=
S.next;do da=c(da,Ta.action),Ta=Ta.next;while(Ta!==S);Oh(da,d.memoizedState)||(dh=!0);d.memoizedState=da;null===d.baseQueue&&(d.baseState=da);k.lastRenderedState=da}return[da,v]}function Dg(){}function vf(c,d){var k=uf,v=hd(),S=d(),da=!Oh(v.memoizedState,S);da&&(v.memoizedState=S,dh=!0);v=v.queue;Sg(gf.bind(null,k,v,c),[c]);if(v.getSnapshot!==d||da||null!==vg&&vg.memoizedState.tag&1){k.flags|=2048;Bf(9,bg.bind(null,k,v,S,d),void 0,null);if(null===ng)throw Error(u(349));0!==(Zi&30)||Of(k,d,S)}return S}
function Of(c,d,k){c.flags|=16384;c={getSnapshot:d,value:k};d=uf.updateQueue;null===d?(d={lastEffect:null,stores:null},uf.updateQueue=d,d.stores=[c]):(k=d.stores,null===k?d.stores=[c]:k.push(c))}function bg(c,d,k,v){d.value=k;d.getSnapshot=v;Re(d)&&cg(c)}function gf(c,d,k){return k(function(){Re(d)&&cg(c)})}function Re(c){var d=c.getSnapshot;c=c.value;try{var k=d();return!Oh(c,k)}catch(v){return!0}}function cg(c){var d=tc(c,1);null!==d&&r(d,c,1,-1)}function Tg(c){var d=Ne();"function"===typeof c&&
(c=c());d.memoizedState=d.baseState=c;c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ve,lastRenderedState:c};d.queue=c;c=c.dispatch=Xd.bind(null,uf,c);return[d.memoizedState,c]}function Bf(c,d,k,v){c={tag:c,create:d,destroy:k,deps:v,next:null};d=uf.updateQueue;null===d?(d={lastEffect:null,stores:null},uf.updateQueue=d,d.lastEffect=c.next=c):(k=d.lastEffect,null===k?d.lastEffect=c.next=c:(v=k.next,k.next=c,c.next=v,d.lastEffect=c));return c}function dg(){return hd().memoizedState}
function Hf(c,d,k,v){var S=Ne();uf.flags|=c;S.memoizedState=Bf(1|d,k,void 0,void 0===v?null:v)}function Ug(c,d,k,v){var S=hd();v=void 0===v?null:v;var da=void 0;if(null!==mg){var Ta=mg.memoizedState;da=Ta.destroy;if(null!==v&&xe(v,Ta.deps)){S.memoizedState=Bf(d,k,da,v);return}}uf.flags|=c;S.memoizedState=Bf(1|d,k,da,v)}function eh(c,d){return Hf(8390656,8,c,d)}function Sg(c,d){return Ug(2048,8,c,d)}function Vg(c,d){return Ug(4,2,c,d)}function Wg(c,d){return Ug(4,4,c,d)}function kh(c,d){if("function"===
typeof d)return c=c(),d(c),function(){d(null)};if(null!==d&&void 0!==d)return c=c(),d.current=c,function(){d.current=null}}function If(c,d,k){k=null!==k&&void 0!==k?k.concat([c]):null;return Ug(4,4,kh.bind(null,d,c),k)}function U(){}function Ja(c,d){var k=hd();d=void 0===d?null:d;var v=k.memoizedState;if(null!==v&&null!==d&&xe(d,v[1]))return v[0];k.memoizedState=[c,d];return c}function mb(c,d){var k=hd();d=void 0===d?null:d;var v=k.memoizedState;if(null!==v&&null!==d&&xe(d,v[1]))return v[0];c=c();
k.memoizedState=[c,d];return c}function Dc(c,d,k){if(0===(Zi&21))return c.baseState&&(c.baseState=!1,dh=!0),c.memoizedState=k;Oh(k,d)||(k=oc(),uf.lanes|=k,nf|=k,c.baseState=!0);return d}function Lc(c,d){var k=sf;sf=0!==k&&4>k?k:4;c(!0);var v=nk.transition;nk.transition={};try{c(!1),d()}finally{sf=k,nk.transition=v}}function Gd(){return hd().memoizedState}function le(c,d,k){var v=dc(c);k={lane:v,action:k,hasEagerState:!1,eagerState:null,next:null};if(Jf(c))mf(d,k);else if(k=nb(c,d,k,v),null!==k){var S=
Ab();r(k,c,v,S);wg(k,d,v)}}function Xd(c,d,k){var v=dc(c),S={lane:v,action:k,hasEagerState:!1,eagerState:null,next:null};if(Jf(c))mf(d,S);else{var da=c.alternate;if(0===c.lanes&&(null===da||0===da.lanes)&&(da=d.lastRenderedReducer,null!==da))try{var Ta=d.lastRenderedState,Wb=da(Ta,k);S.hasEagerState=!0;S.eagerState=Wb;if(Oh(Wb,Ta)){var lc=d.interleaved;null===lc?(S.next=S,rb(d)):(S.next=lc.next,lc.next=S);d.interleaved=S;return}}catch(Uc){}finally{}k=nb(c,d,S,v);null!==k&&(S=Ab(),r(k,c,v,S),wg(k,
d,v))}}function Jf(c){var d=c.alternate;return c===uf||null!==d&&d===uf}function mf(c,d){Oj=$i=!0;var k=c.pending;null===k?d.next=d:(d.next=k.next,k.next=d);c.pending=d}function wg(c,d,k){if(0!==(k&4194240)){var v=d.lanes;v&=c.pendingLanes;k|=v;d.lanes=k;xc(c,k)}}function Vf(c,d){if(c&&c.defaultProps){d=rc({},d);c=c.defaultProps;for(var k in c)void 0===d[k]&&(d[k]=c[k])}return d}function Xg(c,d,k,v){d=c.memoizedState;k=k(v,d);k=null===k||void 0===k?d:rc({},d,k);c.memoizedState=k;0===c.lanes&&(c.updateQueue.baseState=
k)}function ig(c,d,k,v,S,da,Ta){c=c.stateNode;return"function"===typeof c.shouldComponentUpdate?c.shouldComponentUpdate(v,da,Ta):d.prototype&&d.prototype.isPureReactComponent?!ua(k,v)||!ua(S,da):!0}function Kg(c,d,k){var v=!1,S=gg,da=d.contextType;"object"===typeof da&&null!==da?da=Ia(da):(S=Oa(d)?ni:Bg.current,v=d.contextTypes,da=(v=null!==v&&void 0!==v)?ya(c,S):gg);d=new d(k,da);c.memoizedState=null!==d.state&&void 0!==d.state?d.state:null;d.updater=ok;c.stateNode=d;d._reactInternals=c;v&&(c=c.stateNode,
c.__reactInternalMemoizedUnmaskedChildContext=S,c.__reactInternalMemoizedMaskedChildContext=da);return d}function Dh(c,d,k,v){c=d.state;"function"===typeof d.componentWillReceiveProps&&d.componentWillReceiveProps(k,v);"function"===typeof d.UNSAFE_componentWillReceiveProps&&d.UNSAFE_componentWillReceiveProps(k,v);d.state!==c&&ok.enqueueReplaceState(d,d.state,null)}function Zd(c,d,k,v){var S=c.stateNode;S.props=k;S.state=c.memoizedState;S.refs={};wc(c);var da=d.contextType;"object"===typeof da&&null!==
da?S.context=Ia(da):(da=Oa(d)?ni:Bg.current,S.context=ya(c,da));S.state=c.memoizedState;da=d.getDerivedStateFromProps;"function"===typeof da&&(Xg(c,d,da,k),S.state=c.memoizedState);"function"===typeof d.getDerivedStateFromProps||"function"===typeof S.getSnapshotBeforeUpdate||"function"!==typeof S.UNSAFE_componentWillMount&&"function"!==typeof S.componentWillMount||(d=S.state,"function"===typeof S.componentWillMount&&S.componentWillMount(),"function"===typeof S.UNSAFE_componentWillMount&&S.UNSAFE_componentWillMount(),
d!==S.state&&ok.enqueueReplaceState(S,S.state,null),Ad(c,k,S,v),S.state=c.memoizedState);"function"===typeof S.componentDidMount&&(c.flags|=4194308)}function ge(c,d){try{var k="",v=d;do k+=Ba(v),v=v.return;while(v)}catch(S){k="\nError generating stack: "+S.message+"\n"+S.stack}return{value:c,source:d,stack:k,digest:null}}function of(c,d,k){return{value:c,source:null,stack:null!=k?k:null,digest:null!=d?d:null}}function Ge(c,d){try{console.error(d.value)}catch(k){setTimeout(function(){throw k;})}}function hf(c,
d,k){k=yc(-1,k);k.tag=3;k.payload={element:null};var v=d.value;k.callback=function(){pk||(pk=!0,qk=v);Ge(c,d)};return k}function Ue(c,d,k){k=yc(-1,k);k.tag=3;var v=c.type.getDerivedStateFromError;if("function"===typeof v){var S=d.value;k.payload=function(){return v(S)};k.callback=function(){Ge(c,d)}}var da=c.stateNode;null!==da&&"function"===typeof da.componentDidCatch&&(k.callback=function(){Ge(c,d);"function"!==typeof v&&(null===si?si=new Set([this]):si.add(this));var Ta=d.stack;this.componentDidCatch(d.value,
{componentStack:null!==Ta?Ta:""})});return k}function pf(c,d,k){var v=c.pingCache;if(null===v){v=c.pingCache=new Yl;var S=new Set;v.set(d,S)}else S=v.get(d),void 0===S&&(S=new Set,v.set(d,S));S.has(k)||(S.add(k),c=zf.bind(null,c,d,k),d.then(c,c))}function Wf(c){do{var d;if(d=13===c.tag)d=c.memoizedState,d=null!==d?null!==d.dehydrated?!0:!1:!0;if(d)return c;c=c.return}while(null!==c);return null}function Pf(c,d,k,v,S){if(0===(c.mode&1))return c===d?c.flags|=65536:(c.flags|=128,k.flags|=131072,k.flags&=
-52805,1===k.tag&&(null===k.alternate?k.tag=17:(d=yc(-1,1),d.tag=2,Rc(k,d,1))),k.lanes|=1),c;c.flags|=65536;c.lanes=S;return c}function $e(c,d,k,v){d.child=null===c?ul(d,null,k,v):Ji(d,c.child,k,v)}function Yg(c,d,k,v,S){k=k.render;var da=d.ref;Qa(d,S);v=Fe(c,d,k,v,da,S);k=re();if(null!==c&&!dh)return d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~S,Eg(c,d,S);Rf&&k&&Qe(d);d.flags|=1;$e(c,d,v,S);return d.child}function xg(c,d,k,v,S){if(null===c){var da=k.type;if("function"===typeof da&&!Eh(da)&&
void 0===da.defaultProps&&null===k.compare&&void 0===k.defaultProps)return d.tag=15,d.type=da,lh(c,d,da,v,S);c=Af(k.type,null,v,d,d.mode,S);c.ref=d.ref;c.return=d;return d.child=c}da=c.child;if(0===(c.lanes&S)){var Ta=da.memoizedProps;k=k.compare;k=null!==k?k:ua;if(k(Ta,v)&&c.ref===d.ref)return Eg(c,d,S)}d.flags|=1;c=ag(da,v);c.ref=d.ref;c.return=d;return d.child=c}function lh(c,d,k,v,S){if(null!==c){var da=c.memoizedProps;if(ua(da,v)&&c.ref===d.ref)if(dh=!1,d.pendingProps=v=da,0!==(c.lanes&S))0!==
(c.flags&131072)&&(dh=!0);else return d.lanes=c.lanes,Eg(c,d,S)}return og(c,d,k,v,S)}function Qf(c,d,k){var v=d.pendingProps,S=v.children,da=null!==c?c.memoizedState:null;if("hidden"===v.mode)if(0===(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wd(xj,uh),uh|=k;else{if(0===(k&1073741824))return c=null!==da?da.baseLanes|k:k,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,Wd(xj,uh),uh|=c,null;d.memoizedState=
{baseLanes:0,cachePool:null,transitions:null};v=null!==da?da.baseLanes:k;Wd(xj,uh);uh|=v}else null!==da?(v=da.baseLanes|k,d.memoizedState=null):v=k,Wd(xj,uh),uh|=v;$e(c,d,S,k);return d.child}function Rh(c,d){var k=d.ref;if(null===c&&null!==k||null!==c&&c.ref!==k)d.flags|=512,d.flags|=2097152}function og(c,d,k,v,S){var da=Oa(k)?ni:Bg.current;da=ya(d,da);Qa(d,S);k=Fe(c,d,k,v,da,S);v=re();if(null!==c&&!dh)return d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~S,Eg(c,d,S);Rf&&v&&Qe(d);d.flags|=1;
$e(c,d,k,S);return d.child}function vh(c,d,k,v,S){if(Oa(k)){var da=!0;Hc(d)}else da=!1;Qa(d,S);if(null===d.stateNode)Fh(c,d),Kg(d,k,v),Zd(d,k,v,S),v=!0;else if(null===c){var Ta=d.stateNode,Wb=d.memoizedProps;Ta.props=Wb;var lc=Ta.context,Uc=k.contextType;"object"===typeof Uc&&null!==Uc?Uc=Ia(Uc):(Uc=Oa(k)?ni:Bg.current,Uc=ya(d,Uc));var ud=k.getDerivedStateFromProps,yd="function"===typeof ud||"function"===typeof Ta.getSnapshotBeforeUpdate;yd||"function"!==typeof Ta.UNSAFE_componentWillReceiveProps&&
"function"!==typeof Ta.componentWillReceiveProps||(Wb!==v||lc!==Uc)&&Dh(d,Ta,v,Uc);ri=!1;var td=d.memoizedState;Ta.state=td;Ad(d,v,Ta,S);lc=d.memoizedState;Wb!==v||td!==lc||ch.current||ri?("function"===typeof ud&&(Xg(d,k,ud,v),lc=d.memoizedState),(Wb=ri||ig(d,k,Wb,v,td,lc,Uc))?(yd||"function"!==typeof Ta.UNSAFE_componentWillMount&&"function"!==typeof Ta.componentWillMount||("function"===typeof Ta.componentWillMount&&Ta.componentWillMount(),"function"===typeof Ta.UNSAFE_componentWillMount&&Ta.UNSAFE_componentWillMount()),
"function"===typeof Ta.componentDidMount&&(d.flags|=4194308)):("function"===typeof Ta.componentDidMount&&(d.flags|=4194308),d.memoizedProps=v,d.memoizedState=lc),Ta.props=v,Ta.state=lc,Ta.context=Uc,v=Wb):("function"===typeof Ta.componentDidMount&&(d.flags|=4194308),v=!1)}else{Ta=d.stateNode;zc(c,d);Wb=d.memoizedProps;Uc=d.type===d.elementType?Wb:Vf(d.type,Wb);Ta.props=Uc;yd=d.pendingProps;td=Ta.context;lc=k.contextType;"object"===typeof lc&&null!==lc?lc=Ia(lc):(lc=Oa(k)?ni:Bg.current,lc=ya(d,lc));
var Sd=k.getDerivedStateFromProps;(ud="function"===typeof Sd||"function"===typeof Ta.getSnapshotBeforeUpdate)||"function"!==typeof Ta.UNSAFE_componentWillReceiveProps&&"function"!==typeof Ta.componentWillReceiveProps||(Wb!==yd||td!==lc)&&Dh(d,Ta,v,lc);ri=!1;td=d.memoizedState;Ta.state=td;Ad(d,v,Ta,S);var de=d.memoizedState;Wb!==yd||td!==de||ch.current||ri?("function"===typeof Sd&&(Xg(d,k,Sd,v),de=d.memoizedState),(Uc=ri||ig(d,k,Uc,v,td,de,lc)||!1)?(ud||"function"!==typeof Ta.UNSAFE_componentWillUpdate&&
"function"!==typeof Ta.componentWillUpdate||("function"===typeof Ta.componentWillUpdate&&Ta.componentWillUpdate(v,de,lc),"function"===typeof Ta.UNSAFE_componentWillUpdate&&Ta.UNSAFE_componentWillUpdate(v,de,lc)),"function"===typeof Ta.componentDidUpdate&&(d.flags|=4),"function"===typeof Ta.getSnapshotBeforeUpdate&&(d.flags|=1024)):("function"!==typeof Ta.componentDidUpdate||Wb===c.memoizedProps&&td===c.memoizedState||(d.flags|=4),"function"!==typeof Ta.getSnapshotBeforeUpdate||Wb===c.memoizedProps&&
td===c.memoizedState||(d.flags|=1024),d.memoizedProps=v,d.memoizedState=de),Ta.props=v,Ta.state=de,Ta.context=lc,v=Uc):("function"!==typeof Ta.componentDidUpdate||Wb===c.memoizedProps&&td===c.memoizedState||(d.flags|=4),"function"!==typeof Ta.getSnapshotBeforeUpdate||Wb===c.memoizedProps&&td===c.memoizedState||(d.flags|=1024),v=!1)}return jg(c,d,k,v,da,S)}function jg(c,d,k,v,S,da){Rh(c,d);var Ta=0!==(d.flags&128);if(!v&&!Ta)return S&&Jc(d,k,!1),Eg(c,d,da);v=d.stateNode;vl.current=d;var Wb=Ta&&"function"!==
typeof k.getDerivedStateFromError?null:v.render();d.flags|=1;null!==c&&Ta?(d.child=Ji(d,c.child,null,da),d.child=Ji(d,null,Wb,da)):$e(c,d,Wb,da);d.memoizedState=v.state;S&&Jc(d,k,!0);return d.child}function Sh(c){var d=c.stateNode;d.pendingContext?id(c,d.pendingContext,d.pendingContext!==d.context):d.context&&id(c,d.context,!1);qc(c,d.containerInfo)}function aj(c){return{baseLanes:c,cachePool:null,transitions:null}}function Fg(c,d,k){var v=d.pendingProps,S=Cf.current,da=!1,Ta=0!==(d.flags&128),Wb;
(Wb=Ta)||(Wb=null!==c&&null===c.memoizedState?!1:0!==(S&2));if(Wb)da=!0,d.flags&=-129;else if(null===c||null!==c.memoizedState)S|=1;Wd(Cf,S&1);if(null===c){Le(d);c=d.memoizedState;if(null!==c&&(c=c.dehydrated,null!==c))return 0===(d.mode&1)?d.lanes=1:"$!"===c.data?d.lanes=8:d.lanes=1073741824,null;Ta=v.children;c=v.fallback;return da?(v=d.mode,da=d.child,Ta={mode:"hidden",children:Ta},0===(v&1)&&null!==da?(da.childLanes=0,da.pendingProps=Ta):da=Ki(Ta,v,0,null),c=Cg(c,v,k,null),da.return=d,c.return=
d,da.sibling=c,d.child=da,d.child.memoizedState=aj(k),d.memoizedState=Wk,c):ti(d,Ta)}S=c.memoizedState;if(null!==S&&(Wb=S.dehydrated,null!==Wb))return bj(c,d,Ta,v,Wb,S,k);if(da){da=v.fallback;Ta=d.mode;S=c.child;Wb=S.sibling;var lc={mode:"hidden",children:v.children};0===(Ta&1)&&d.child!==S?(v=d.child,v.childLanes=0,v.pendingProps=lc,d.deletions=null):(v=ag(S,lc),v.subtreeFlags=S.subtreeFlags&14680064);null!==Wb?da=ag(Wb,da):(da=Cg(da,Ta,k,null),da.flags|=2);da.return=d;v.return=d;v.sibling=da;d.child=
v;v=da;da=d.child;Ta=c.child.memoizedState;Ta=null===Ta?aj(k):{baseLanes:Ta.baseLanes|k,cachePool:null,transitions:Ta.transitions};da.memoizedState=Ta;da.childLanes=c.childLanes&~k;d.memoizedState=Wk;return v}da=c.child;c=da.sibling;v=ag(da,{mode:"visible",children:v.children});0===(d.mode&1)&&(v.lanes=k);v.return=d;v.sibling=null;null!==c&&(k=d.deletions,null===k?(d.deletions=[c],d.flags|=16):k.push(c));d.child=v;d.memoizedState=null;return v}function ti(c,d){d=Ki({mode:"visible",children:d},c.mode,
0,null);d.return=c;return c.child=d}function di(c,d,k,v){null!==v&&qe(v);Ji(d,c.child,null,k);c=ti(d,d.pendingProps.children);c.flags|=2;d.memoizedState=null;return c}function bj(c,d,k,v,S,da,Ta){if(k){if(d.flags&256)return d.flags&=-257,v=of(Error(u(422))),di(c,d,Ta,v);if(null!==d.memoizedState)return d.child=c.child,d.flags|=128,null;da=v.fallback;S=d.mode;v=Ki({mode:"visible",children:v.children},S,0,null);da=Cg(da,S,Ta,null);da.flags|=2;v.return=d;da.return=d;v.sibling=da;d.child=v;0!==(d.mode&
1)&&Ji(d,c.child,null,Ta);d.child.memoizedState=aj(Ta);d.memoizedState=Wk;return da}if(0===(d.mode&1))return di(c,d,Ta,null);if("$!"===S.data){if(v=S.nextSibling&&S.nextSibling.dataset)var Wb=v.dgst;v=Wb;da=Error(u(419));v=of(da,v,void 0);return di(c,d,Ta,v)}Wb=0!==(Ta&c.childLanes);if(dh||Wb){v=ng;if(null!==v){switch(Ta&-Ta){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=
32;break;case 536870912:S=268435456;break;default:S=0}S=0!==(S&(v.suspendedLanes|Ta))?0:S;0!==S&&S!==da.retryLane&&(da.retryLane=S,tc(c,S),r(v,c,S,-1))}Je();v=of(Error(u(421)));return di(c,d,Ta,v)}if("$?"===S.data)return d.flags|=128,d.child=c.child,d=mh.bind(null,c),S._reactRetry=d,null;c=da.treeContext;Rg=Ec(S.nextSibling);Qg=d;Rf=!0;jh=null;null!==c&&(Gf[th++]=Ch,Gf[th++]=oi,Gf[th++]=bi,Ch=c.id,oi=c.overflow,bi=d);d=ti(d,v.children);d.flags|=4096;return d}function ui(c,d,k){c.lanes|=d;var v=c.alternate;
null!==v&&(v.lanes|=d);Da(c.return,d,k)}function wh(c,d,k,v,S){var da=c.memoizedState;null===da?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:v,tail:k,tailMode:S}:(da.isBackwards=d,da.rendering=null,da.renderingStartTime=0,da.last=v,da.tail=k,da.tailMode=S)}function Li(c,d,k){var v=d.pendingProps,S=v.revealOrder,da=v.tail;$e(c,d,v.children,k);v=Cf.current;if(0!==(v&2))v=v&1|2,d.flags|=128;else{if(null!==c&&0!==(c.flags&128))a:for(c=d.child;null!==c;){if(13===c.tag)null!==
c.memoizedState&&ui(c,k,d);else if(19===c.tag)ui(c,k,d);else if(null!==c.child){c.child.return=c;c=c.child;continue}if(c===d)break a;for(;null===c.sibling;){if(null===c.return||c.return===d)break a;c=c.return}c.sibling.return=c.return;c=c.sibling}v&=1}Wd(Cf,v);if(0===(d.mode&1))d.memoizedState=null;else switch(S){case "forwards":k=d.child;for(S=null;null!==k;)c=k.alternate,null!==c&&null===ke(c)&&(S=k),k=k.sibling;k=S;null===k?(S=d.child,d.child=null):(S=k.sibling,k.sibling=null);wh(d,!1,S,k,da);
break;case "backwards":k=null;S=d.child;for(d.child=null;null!==S;){c=S.alternate;if(null!==c&&null===ke(c)){d.child=S;break}c=S.sibling;S.sibling=k;k=S;S=c}wh(d,!0,k,null,da);break;case "together":wh(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Fh(c,d){0===(d.mode&1)&&null!==c&&(c.alternate=null,d.alternate=null,d.flags|=2)}function Eg(c,d,k){null!==c&&(d.dependencies=c.dependencies);nf|=d.lanes;if(0===(k&d.childLanes))return null;if(null!==c&&d.child!==c.child)throw Error(u(153));
if(null!==d.child){c=d.child;k=ag(c,c.pendingProps);d.child=k;for(k.return=d;null!==c.sibling;)c=c.sibling,k=k.sibling=ag(c,c.pendingProps),k.return=d;k.sibling=null}return d.child}function Gh(c,d,k){switch(d.tag){case 3:Sh(d);Ee();break;case 5:Be(d);break;case 1:Oa(d.type)&&Hc(d);break;case 4:qc(d,d.stateNode.containerInfo);break;case 10:var v=d.type._context,S=d.memoizedProps.value;Wd(tj,v._currentValue);v._currentValue=S;break;case 13:v=d.memoizedState;if(null!==v){if(null!==v.dehydrated)return Wd(Cf,
Cf.current&1),d.flags|=128,null;if(0!==(k&d.child.childLanes))return Fg(c,d,k);Wd(Cf,Cf.current&1);c=Eg(c,d,k);return null!==c?c.sibling:null}Wd(Cf,Cf.current&1);break;case 19:v=0!==(k&d.childLanes);if(0!==(c.flags&128)){if(v)return Li(c,d,k);d.flags|=128}S=d.memoizedState;null!==S&&(S.rendering=null,S.tail=null,S.lastEffect=null);Wd(Cf,Cf.current);if(v)break;else return null;case 22:case 23:return d.lanes=0,Qf(c,d,k)}return Eg(c,d,k)}function Hh(c,d){if(!Rf)switch(c.tailMode){case "hidden":d=c.tail;
for(var k=null;null!==d;)null!==d.alternate&&(k=d),d=d.sibling;null===k?c.tail=null:k.sibling=null;break;case "collapsed":k=c.tail;for(var v=null;null!==k;)null!==k.alternate&&(v=k),k=k.sibling;null===v?d||null===c.tail?c.tail=null:c.tail.sibling=null:v.sibling=null}}function eg(c){var d=null!==c.alternate&&c.alternate.child===c.child,k=0,v=0;if(d)for(var S=c.child;null!==S;)k|=S.lanes|S.childLanes,v|=S.subtreeFlags&14680064,v|=S.flags&14680064,S.return=c,S=S.sibling;else for(S=c.child;null!==S;)k|=
S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=c,S=S.sibling;c.subtreeFlags|=v;c.childLanes=k;return d}function cj(c,d,k){var v=d.pendingProps;Ke(d);switch(d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return eg(d),null;case 1:return Oa(d.type)&&cc(),eg(d),null;case 3:v=d.stateNode;Fd();Md(ch);Md(Bg);Qd();v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null);if(null===c||null===c.child)Ze(d)?d.flags|=4:null===c||c.memoizedState.isDehydrated&&
0===(d.flags&256)||(d.flags|=1024,null!==jh&&($a(jh),jh=null));ei(c,d);eg(d);return null;case 5:te(d);var S=Ud(vj.current);k=d.type;if(null!==c&&null!=d.stateNode)wl(c,d,k,v,S),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!v){if(null===d.stateNode)throw Error(u(166));eg(d);return null}c=Ud(ci.current);if(Ze(d)){v=d.stateNode;k=d.type;var da=d.memoizedProps;v[Qh]=d;v[Lj]=da;c=0!==(d.mode&1);switch(k){case "dialog":nd("cancel",v);nd("close",v);break;case "iframe":case "object":case "embed":nd("load",
v);break;case "video":case "audio":for(S=0;S<yj.length;S++)nd(yj[S],v);break;case "source":nd("error",v);break;case "img":case "image":case "link":nd("error",v);nd("load",v);break;case "details":nd("toggle",v);break;case "input":xa(v,da);nd("invalid",v);break;case "select":v._wrapperState={wasMultiple:!!da.multiple};nd("invalid",v);break;case "textarea":Pb(v,da),nd("invalid",v)}pa(k,da);S=null;for(var Ta in da)if(da.hasOwnProperty(Ta)){var Wb=da[Ta];"children"===Ta?"string"===typeof Wb?v.textContent!==
Wb&&(!0!==da.suppressHydrationWarning&&Fa(v.textContent,Wb,c),S=["children",Wb]):"number"===typeof Wb&&v.textContent!==""+Wb&&(!0!==da.suppressHydrationWarning&&Fa(v.textContent,Wb,c),S=["children",""+Wb]):Wh.hasOwnProperty(Ta)&&null!=Wb&&"onScroll"===Ta&&nd("scroll",v)}switch(k){case "input":ib(v);Ga(v,da,!0);break;case "textarea":ib(v);T(v);break;case "select":case "option":break;default:"function"===typeof da.onClick&&(v.onclick=fb)}v=S;d.updateQueue=v;null!==v&&(d.flags|=4)}else{Ta=9===S.nodeType?
S:S.ownerDocument;"http://www.w3.org/1999/xhtml"===c&&(c=Z(k));"http://www.w3.org/1999/xhtml"===c?"script"===k?(c=Ta.createElement("div"),c.innerHTML="\x3cscript\x3e\x3c/script\x3e",c=c.removeChild(c.firstChild)):"string"===typeof v.is?c=Ta.createElement(k,{is:v.is}):(c=Ta.createElement(k),"select"===k&&(Ta=c,v.multiple?Ta.multiple=!0:v.size&&(Ta.size=v.size))):c=Ta.createElementNS(c,k);c[Qh]=d;c[Lj]=v;Zl(c,d,!1,!1);d.stateNode=c;a:{Ta=m(k,v);switch(k){case "dialog":nd("cancel",c);nd("close",c);S=
v;break;case "iframe":case "object":case "embed":nd("load",c);S=v;break;case "video":case "audio":for(S=0;S<yj.length;S++)nd(yj[S],c);S=v;break;case "source":nd("error",c);S=v;break;case "img":case "image":case "link":nd("error",c);nd("load",c);S=v;break;case "details":nd("toggle",c);S=v;break;case "input":xa(c,v);S=fa(c,v);nd("invalid",c);break;case "option":S=v;break;case "select":c._wrapperState={wasMultiple:!!v.multiple};S=rc({},v,{value:void 0});nd("invalid",c);break;case "textarea":Pb(c,v);
S=tb(c,v);nd("invalid",c);break;default:S=v}pa(k,S);Wb=S;for(da in Wb)if(Wb.hasOwnProperty(da)){var lc=Wb[da];"style"===da?na(c,lc):"dangerouslySetInnerHTML"===da?(lc=lc?lc.__html:void 0,null!=lc&&Te(c,lc)):"children"===da?"string"===typeof lc?("textarea"!==k||""!==lc)&&ha(c,lc):"number"===typeof lc&&ha(c,""+lc):"suppressContentEditableWarning"!==da&&"suppressHydrationWarning"!==da&&"autoFocus"!==da&&(Wh.hasOwnProperty(da)?null!=lc&&"onScroll"===da&&nd("scroll",c):null!=lc&&mc(c,da,lc,Ta))}switch(k){case "input":ib(c);
Ga(c,v,!1);break;case "textarea":ib(c);T(c);break;case "option":null!=v.value&&c.setAttribute("value",""+ub(v.value));break;case "select":c.multiple=!!v.multiple;da=v.value;null!=da?bb(c,!!v.multiple,da,!1):null!=v.defaultValue&&bb(c,!!v.multiple,v.defaultValue,!0);break;default:"function"===typeof S.onClick&&(c.onclick=fb)}switch(k){case "button":case "input":case "select":case "textarea":v=!!v.autoFocus;break a;case "img":v=!0;break a;default:v=!1}}v&&(d.flags|=4)}null!==d.ref&&(d.flags|=512,d.flags|=
2097152)}eg(d);return null;case 6:if(c&&null!=d.stateNode)xl(c,d,c.memoizedProps,v);else{if("string"!==typeof v&&null===d.stateNode)throw Error(u(166));k=Ud(vj.current);Ud(ci.current);if(Ze(d)){v=d.stateNode;k=d.memoizedProps;v[Qh]=d;if(da=v.nodeValue!==k)if(c=Qg,null!==c)switch(c.tag){case 3:Fa(v.nodeValue,k,0!==(c.mode&1));break;case 5:!0!==c.memoizedProps.suppressHydrationWarning&&Fa(v.nodeValue,k,0!==(c.mode&1))}da&&(d.flags|=4)}else v=(9===k.nodeType?k:k.ownerDocument).createTextNode(v),v[Qh]=
d,d.stateNode=v}eg(d);return null;case 13:Md(Cf);v=d.memoizedState;if(null===c||null!==c.memoizedState&&null!==c.memoizedState.dehydrated){if(Rf&&null!==Rg&&0!==(d.mode&1)&&0===(d.flags&128))Ae(),Ee(),d.flags|=98560,da=!1;else if(da=Ze(d),null!==v&&null!==v.dehydrated){if(null===c){if(!da)throw Error(u(318));da=d.memoizedState;da=null!==da?da.dehydrated:null;if(!da)throw Error(u(317));da[Qh]=d}else Ee(),0===(d.flags&128)&&(d.memoizedState=null),d.flags|=4;eg(d);da=!1}else null!==jh&&($a(jh),jh=null),
da=!0;if(!da)return d.flags&65536?d:null}if(0!==(d.flags&128))return d.lanes=k,d;v=null!==v;v!==(null!==c&&null!==c.memoizedState)&&v&&(d.child.flags|=8192,0!==(d.mode&1)&&(null===c||0!==(Cf.current&1)?0===Kf&&(Kf=3):Je()));null!==d.updateQueue&&(d.flags|=4);eg(d);return null;case 4:return Fd(),ei(c,d),null===c&&me(d.stateNode.containerInfo),eg(d),null;case 10:return ja(d.type._context),eg(d),null;case 17:return Oa(d.type)&&cc(),eg(d),null;case 19:Md(Cf);da=d.memoizedState;if(null===da)return eg(d),
null;v=0!==(d.flags&128);Ta=da.rendering;if(null===Ta)if(v)Hh(da,!1);else{if(0!==Kf||null!==c&&0!==(c.flags&128))for(c=d.child;null!==c;){Ta=ke(c);if(null!==Ta){d.flags|=128;Hh(da,!1);v=Ta.updateQueue;null!==v&&(d.updateQueue=v,d.flags|=4);d.subtreeFlags=0;v=k;for(k=d.child;null!==k;)da=k,c=v,da.flags&=14680066,Ta=da.alternate,null===Ta?(da.childLanes=0,da.lanes=c,da.child=null,da.subtreeFlags=0,da.memoizedProps=null,da.memoizedState=null,da.updateQueue=null,da.dependencies=null,da.stateNode=null):
(da.childLanes=Ta.childLanes,da.lanes=Ta.lanes,da.child=Ta.child,da.subtreeFlags=0,da.deletions=null,da.memoizedProps=Ta.memoizedProps,da.memoizedState=Ta.memoizedState,da.updateQueue=Ta.updateQueue,da.type=Ta.type,c=Ta.dependencies,da.dependencies=null===c?null:{lanes:c.lanes,firstContext:c.firstContext}),k=k.sibling;Wd(Cf,Cf.current&1|2);return d.child}c=c.sibling}null!==da.tail&&fg()>zj&&(d.flags|=128,v=!0,Hh(da,!1),d.lanes=4194304)}else{if(!v)if(c=ke(Ta),null!==c){if(d.flags|=128,v=!0,k=c.updateQueue,
null!==k&&(d.updateQueue=k,d.flags|=4),Hh(da,!0),null===da.tail&&"hidden"===da.tailMode&&!Ta.alternate&&!Rf)return eg(d),null}else 2*fg()-da.renderingStartTime>zj&&1073741824!==k&&(d.flags|=128,v=!0,Hh(da,!1),d.lanes=4194304);da.isBackwards?(Ta.sibling=d.child,d.child=Ta):(k=da.last,null!==k?k.sibling=Ta:d.child=Ta,da.last=Ta)}if(null!==da.tail)return d=da.tail,da.rendering=d,da.tail=d.sibling,da.renderingStartTime=fg(),d.sibling=null,k=Cf.current,Wd(Cf,v?k&1|2:k&1),d;eg(d);return null;case 22:case 23:return Wc(),
v=null!==d.memoizedState,null!==c&&null!==c.memoizedState!==v&&(d.flags|=8192),v&&0!==(d.mode&1)?0!==(uh&1073741824)&&(eg(d),d.subtreeFlags&6&&(d.flags|=8192)):eg(d),null;case 24:return null;case 25:return null}throw Error(u(156,d.tag));}function fi(c,d){Ke(d);switch(d.tag){case 1:return Oa(d.type)&&cc(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return Fd(),Md(ch),Md(Bg),Qd(),c=d.flags,0!==(c&65536)&&0===(c&128)?(d.flags=c&-65537|128,d):null;case 5:return te(d),null;case 13:Md(Cf);c=
d.memoizedState;if(null!==c&&null!==c.dehydrated){if(null===d.alternate)throw Error(u(340));Ee()}c=d.flags;return c&65536?(d.flags=c&-65537|128,d):null;case 19:return Md(Cf),null;case 4:return Fd(),null;case 10:return ja(d.type._context),null;case 22:case 23:return Wc(),null;case 24:return null;default:return null}}function fh(c,d){var k=c.ref;if(null!==k)if("function"===typeof k)try{k(null)}catch(v){wf(c,d,v)}else k.current=null}function vi(c,d,k){try{k()}catch(v){wf(c,d,v)}}function Aj(c,d){Xk=
bk;c=bc();if(Sb(c)){if("selectionStart"in c)var k={start:c.selectionStart,end:c.selectionEnd};else a:{k=(k=c.ownerDocument)&&k.defaultView||window;var v=k.getSelection&&k.getSelection();if(v&&0!==v.rangeCount){k=v.anchorNode;var S=v.anchorOffset,da=v.focusNode;v=v.focusOffset;try{k.nodeType,da.nodeType}catch(Id){k=null;break a}var Ta=0,Wb=-1,lc=-1,Uc=0,ud=0,yd=c,td=null;b:for(;;){for(var Sd;;){yd!==k||0!==S&&3!==yd.nodeType||(Wb=Ta+S);yd!==da||0!==v&&3!==yd.nodeType||(lc=Ta+v);3===yd.nodeType&&(Ta+=
yd.nodeValue.length);if(null===(Sd=yd.firstChild))break;td=yd;yd=Sd}for(;;){if(yd===c)break b;td===k&&++Uc===S&&(Wb=Ta);td===da&&++ud===v&&(lc=Ta);if(null!==(Sd=yd.nextSibling))break;yd=td;td=yd.parentNode}yd=Sd}k=-1===Wb||-1===lc?null:{start:Wb,end:lc}}else k=null}k=k||{start:0,end:0}}else k=null;Yk={focusedElem:c,selectionRange:k};bk=!1;for(ae=d;null!==ae;)if(d=ae,c=d.child,0!==(d.subtreeFlags&1028)&&null!==c)c.return=d,ae=c;else for(;null!==ae;){d=ae;try{var de=d.alternate;if(0!==(d.flags&1024))switch(d.tag){case 0:case 11:case 15:break;
case 1:if(null!==de){var je=de.memoizedProps,$f=de.memoizedState,Ic=d.stateNode,uc=Ic.getSnapshotBeforeUpdate(d.elementType===d.type?je:Vf(d.type,je),$f);Ic.__reactInternalSnapshotBeforeUpdate=uc}break;case 3:var Qc=d.stateNode.containerInfo;1===Qc.nodeType?Qc.textContent="":9===Qc.nodeType&&Qc.documentElement&&Qc.removeChild(Qc.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163));}}catch(Id){wf(d,d.return,Id)}c=d.sibling;if(null!==c){c.return=d.return;ae=c;break}ae=
d.return}de=rk;rk=!1;return de}function gh(c,d,k){var v=d.updateQueue;v=null!==v?v.lastEffect:null;if(null!==v){var S=v=v.next;do{if((S.tag&c)===c){var da=S.destroy;S.destroy=void 0;void 0!==da&&vi(d,k,da)}S=S.next}while(S!==v)}}function nh(c,d){d=d.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var k=d=d.next;do{if((k.tag&c)===c){var v=k.create;k.destroy=v()}k=k.next}while(k!==d)}}function Gg(c){var d=c.ref;if(null!==d){var k=c.stateNode;switch(c.tag){case 5:c=k;break;default:c=k}"function"===
typeof d?d(c):d.current=c}}function Se(c){var d=c.alternate;null!==d&&(c.alternate=null,Se(d));c.child=null;c.deletions=null;c.sibling=null;5===c.tag&&(d=c.stateNode,null!==d&&(delete d[Qh],delete d[Lj],delete d[Ok],delete d[yl],delete d[Zk]));c.stateNode=null;c.return=null;c.dependencies=null;c.memoizedProps=null;c.memoizedState=null;c.pendingProps=null;c.stateNode=null;c.updateQueue=null}function Ih(c){return 5===c.tag||3===c.tag||4===c.tag}function Lg(c){a:for(;;){for(;null===c.sibling;){if(null===
c.return||Ih(c.return))return null;c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.flags&2)continue a;if(null===c.child||4===c.tag)continue a;else c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function xf(c,d,k){var v=c.tag;if(5===v||6===v)c=c.stateNode,d?8===k.nodeType?k.parentNode.insertBefore(c,d):k.insertBefore(c,d):(8===k.nodeType?(d=k.parentNode,d.insertBefore(c,k)):(d=k,d.appendChild(c)),k=k._reactRootContainer,null!==k&&void 0!==
k||null!==d.onclick||(d.onclick=fb));else if(4!==v&&(c=c.child,null!==c))for(xf(c,d,k),c=c.sibling;null!==c;)xf(c,d,k),c=c.sibling}function Mi(c,d,k){var v=c.tag;if(5===v||6===v)c=c.stateNode,d?k.insertBefore(c,d):k.appendChild(c);else if(4!==v&&(c=c.child,null!==c))for(Mi(c,d,k),c=c.sibling;null!==c;)Mi(c,d,k),c=c.sibling}function pg(c,d,k){for(k=k.child;null!==k;)Mg(c,d,k),k=k.sibling}function Mg(c,d,k){if(Yh&&"function"===typeof Yh.onCommitFiberUnmount)try{Yh.onCommitFiberUnmount(Ij,k)}catch(Wb){}switch(k.tag){case 5:Zg||
fh(k,d);case 6:var v=Ng,S=Th;Ng=null;pg(c,d,k);Ng=v;Th=S;null!==Ng&&(Th?(c=Ng,k=k.stateNode,8===c.nodeType?c.parentNode.removeChild(k):c.removeChild(k)):Ng.removeChild(k.stateNode));break;case 18:null!==Ng&&(Th?(c=Ng,k=k.stateNode,8===c.nodeType?Vb(c.parentNode,k):1===c.nodeType&&Vb(c,k),Bc(c)):Vb(Ng,k.stateNode));break;case 4:v=Ng;S=Th;Ng=k.stateNode.containerInfo;Th=!0;pg(c,d,k);Ng=v;Th=S;break;case 0:case 11:case 14:case 15:if(!Zg&&(v=k.updateQueue,null!==v&&(v=v.lastEffect,null!==v))){S=v=v.next;
do{var da=S,Ta=da.destroy;da=da.tag;void 0!==Ta&&(0!==(da&2)?vi(k,d,Ta):0!==(da&4)&&vi(k,d,Ta));S=S.next}while(S!==v)}pg(c,d,k);break;case 1:if(!Zg&&(fh(k,d),v=k.stateNode,"function"===typeof v.componentWillUnmount))try{v.props=k.memoizedProps,v.state=k.memoizedState,v.componentWillUnmount()}catch(Wb){wf(k,d,Wb)}pg(c,d,k);break;case 21:pg(c,d,k);break;case 22:k.mode&1?(Zg=(v=Zg)||null!==k.memoizedState,pg(c,d,k),Zg=v):pg(c,d,k);break;default:pg(c,d,k)}}function oh(c){var d=c.updateQueue;if(null!==
d){c.updateQueue=null;var k=c.stateNode;null===k&&(k=c.stateNode=new $l);d.forEach(function(v){var S=Df.bind(null,c,v);k.has(v)||(k.add(v),v.then(S,S))})}}function $g(c,d){var k=d.deletions;if(null!==k)for(var v=0;v<k.length;v++){var S=k[v];try{var da=c,Ta=d,Wb=Ta;a:for(;null!==Wb;){switch(Wb.tag){case 5:Ng=Wb.stateNode;Th=!1;break a;case 3:Ng=Wb.stateNode.containerInfo;Th=!0;break a;case 4:Ng=Wb.stateNode.containerInfo;Th=!0;break a}Wb=Wb.return}if(null===Ng)throw Error(u(160));Mg(da,Ta,S);Ng=null;
Th=!1;var lc=S.alternate;null!==lc&&(lc.return=null);S.return=null}catch(Uc){wf(S,d,Uc)}}if(d.subtreeFlags&12854)for(d=d.child;null!==d;)Jh(d,c),d=d.sibling}function Jh(c,d){var k=c.alternate,v=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:$g(d,c);ah(c);if(v&4){try{gh(3,c,c.return),nh(3,c)}catch(je){wf(c,c.return,je)}try{gh(5,c,c.return)}catch(je){wf(c,c.return,je)}}break;case 1:$g(d,c);ah(c);v&512&&null!==k&&fh(k,k.return);break;case 5:$g(d,c);ah(c);v&512&&null!==k&&fh(k,k.return);if(c.flags&
32){var S=c.stateNode;try{ha(S,"")}catch(je){wf(c,c.return,je)}}if(v&4&&(S=c.stateNode,null!=S)){var da=c.memoizedProps,Ta=null!==k?k.memoizedProps:da,Wb=c.type,lc=c.updateQueue;c.updateQueue=null;if(null!==lc)try{"input"===Wb&&"radio"===da.type&&null!=da.name&&Ra(S,da);m(Wb,Ta);var Uc=m(Wb,da);for(Ta=0;Ta<lc.length;Ta+=2){var ud=lc[Ta],yd=lc[Ta+1];"style"===ud?na(S,yd):"dangerouslySetInnerHTML"===ud?Te(S,yd):"children"===ud?ha(S,yd):mc(S,ud,yd,Uc)}switch(Wb){case "input":Va(S,da);break;case "textarea":eb(S,
da);break;case "select":var td=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!da.multiple;var Sd=da.value;null!=Sd?bb(S,!!da.multiple,Sd,!1):td!==!!da.multiple&&(null!=da.defaultValue?bb(S,!!da.multiple,da.defaultValue,!0):bb(S,!!da.multiple,da.multiple?[]:"",!1))}S[Lj]=da}catch(je){wf(c,c.return,je)}}break;case 6:$g(d,c);ah(c);if(v&4){if(null===c.stateNode)throw Error(u(162));S=c.stateNode;da=c.memoizedProps;try{S.nodeValue=da}catch(je){wf(c,c.return,je)}}break;case 3:$g(d,c);ah(c);if(v&
4&&null!==k&&k.memoizedState.isDehydrated)try{Bc(d.containerInfo)}catch(je){wf(c,c.return,je)}break;case 4:$g(d,c);ah(c);break;case 13:$g(d,c);ah(c);S=c.child;S.flags&8192&&(da=null!==S.memoizedState,S.stateNode.isHidden=da,!da||null!==S.alternate&&null!==S.alternate.memoizedState||(Uh=fg()));v&4&&oh(c);break;case 22:ud=null!==k&&null!==k.memoizedState;c.mode&1?(Zg=(Uc=Zg)||ud,$g(d,c),Zg=Uc):$g(d,c);ah(c);if(v&8192){Uc=null!==c.memoizedState;if((c.stateNode.isHidden=Uc)&&!ud&&0!==(c.mode&1))for(ae=
c,ud=c.child;null!==ud;){for(yd=ae=ud;null!==ae;){td=ae;Sd=td.child;switch(td.tag){case 0:case 11:case 14:case 15:gh(4,td,td.return);break;case 1:fh(td,td.return);var de=td.stateNode;if("function"===typeof de.componentWillUnmount){v=td;k=td.return;try{d=v,de.props=d.memoizedProps,de.state=d.memoizedState,de.componentWillUnmount()}catch(je){wf(v,k,je)}}break;case 5:fh(td,td.return);break;case 22:if(null!==td.memoizedState){Na(yd);continue}}null!==Sd?(Sd.return=td,ae=Sd):Na(yd)}ud=ud.sibling}ud=null;
yd=c;a:for(;;){if(5===yd.tag){if(null===ud){ud=yd;try{S=yd.stateNode,Uc?(da=S.style,"function"===typeof da.setProperty?da.setProperty("display","none","important"):da.display="none"):(Wb=yd.stateNode,lc=yd.memoizedProps.style,Ta=void 0!==lc&&null!==lc&&lc.hasOwnProperty("display")?lc.display:null,Wb.style.display=La("display",Ta))}catch(je){wf(c,c.return,je)}}}else if(6===yd.tag){if(null===ud)try{yd.stateNode.nodeValue=Uc?"":yd.memoizedProps}catch(je){wf(c,c.return,je)}}else if((22!==yd.tag&&23!==
yd.tag||null===yd.memoizedState||yd===c)&&null!==yd.child){yd.child.return=yd;yd=yd.child;continue}if(yd===c)break a;for(;null===yd.sibling;){if(null===yd.return||yd.return===c)break a;ud===yd&&(ud=null);yd=yd.return}ud===yd&&(ud=null);yd.sibling.return=yd.return;yd=yd.sibling}}break;case 19:$g(d,c);ah(c);v&4&&oh(c);break;case 21:break;default:$g(d,c),ah(c)}}function ah(c){var d=c.flags;if(d&2){try{a:{for(var k=c.return;null!==k;){if(Ih(k))break a;k=k.return}throw Error(u(160));}switch(k.tag){case 5:var v=
k.stateNode;k.flags&32&&(ha(v,""),k.flags&=-33);var S=Lg(c);Mi(c,S,v);break;case 3:case 4:var da=k.stateNode.containerInfo,Ta=Lg(c);xf(c,Ta,da);break;default:throw Error(u(161));}}catch(Wb){wf(c,c.return,Wb)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function D(c,d,k){ae=c;Y(c,d,k)}function Y(c,d,k){for(var v=0!==(c.mode&1);null!==ae;){var S=ae,da=S.child;if(22===S.tag&&v){var Ta=null!==S.memoizedState||sk;if(!Ta){var Wb=S.alternate,lc=null!==Wb&&null!==Wb.memoizedState||Zg;Wb=sk;var Uc=Zg;sk=Ta;if((Zg=
lc)&&!Uc)for(ae=S;null!==ae;)Ta=ae,lc=Ta.child,22===Ta.tag&&null!==Ta.memoizedState?Ib(S):null!==lc?(lc.return=Ta,ae=lc):Ib(S);for(;null!==da;)ae=da,Y(da,d,k),da=da.sibling;ae=S;sk=Wb;Zg=Uc}wa(c,d,k)}else 0!==(S.subtreeFlags&8772)&&null!==da?(da.return=S,ae=da):wa(c,d,k)}}function wa(c){for(;null!==ae;){var d=ae;if(0!==(d.flags&8772)){var k=d.alternate;try{if(0!==(d.flags&8772))switch(d.tag){case 0:case 11:case 15:Zg||nh(5,d);break;case 1:var v=d.stateNode;if(d.flags&4&&!Zg)if(null===k)v.componentDidMount();
else{var S=d.elementType===d.type?k.memoizedProps:Vf(d.type,k.memoizedProps);v.componentDidUpdate(S,k.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var da=d.updateQueue;null!==da&&Ld(d,da,v);break;case 3:var Ta=d.updateQueue;if(null!==Ta){k=null;if(null!==d.child)switch(d.child.tag){case 5:k=d.child.stateNode;break;case 1:k=d.child.stateNode}Ld(d,Ta,k)}break;case 5:var Wb=d.stateNode;if(null===k&&d.flags&4){k=Wb;var lc=d.memoizedProps;switch(d.type){case "button":case "input":case "select":case "textarea":lc.autoFocus&&
k.focus();break;case "img":lc.src&&(k.src=lc.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===d.memoizedState){var Uc=d.alternate;if(null!==Uc){var ud=Uc.memoizedState;if(null!==ud){var yd=ud.dehydrated;null!==yd&&Bc(yd)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(u(163));}Zg||d.flags&512&&Gg(d)}catch(td){wf(d,d.return,td)}}if(d===c){ae=null;break}k=d.sibling;if(null!==k){k.return=d.return;ae=k;break}ae=d.return}}function Na(c){for(;null!==
ae;){var d=ae;if(d===c){ae=null;break}var k=d.sibling;if(null!==k){k.return=d.return;ae=k;break}ae=d.return}}function Ib(c){for(;null!==ae;){var d=ae;try{switch(d.tag){case 0:case 11:case 15:var k=d.return;try{nh(4,d)}catch(lc){wf(d,k,lc)}break;case 1:var v=d.stateNode;if("function"===typeof v.componentDidMount){var S=d.return;try{v.componentDidMount()}catch(lc){wf(d,S,lc)}}var da=d.return;try{Gg(d)}catch(lc){wf(d,da,lc)}break;case 5:var Ta=d.return;try{Gg(d)}catch(lc){wf(d,Ta,lc)}}}catch(lc){wf(d,
d.return,lc)}if(d===c){ae=null;break}var Wb=d.sibling;if(null!==Wb){Wb.return=d.return;ae=Wb;break}ae=d.return}}function Ab(){return 0!==(cf&6)?fg():-1!==Ni?Ni:Ni=fg()}function dc(c){if(0===(c.mode&1))return 1;if(0!==(cf&2)&&0!==Og)return Og&-Og;if(null!==zl.transition)return 0===Bj&&(Bj=oc()),Bj;c=sf;if(0!==c)return c;c=window.event;return c=void 0===c?16:gb(c.type)}function r(c,d,k,v){if(50<wi)throw wi=0,tk=null,Error(u(185));Mb(c,k,v);if(0===(cf&2)||c!==ng)c===ng&&(0===(cf&2)&&(jf|=k),4===Kf&&
hc(c,Og)),I(c,v),1===k&&0===cf&&0===(d.mode&1)&&(zj=fg()+500,ai&&qd())}function I(c,d){var k=c.callbackNode;Ea(c,d);var v=Tb(c,c===ng?Og:0);if(0===v)null!==k&&qg(k),c.callbackNode=null,c.callbackPriority=0;else if(d=v&-v,c.callbackPriority!==d){null!=k&&qg(k);if(1===d)0===c.tag?Tc(Mc.bind(null,c)):Yc(Mc.bind(null,c)),Al(function(){0===(cf&6)&&qd()}),k=null;else{switch(ed(v)){case 1:k=Hk;break;case 4:k=dk;break;case 16:k=Ui;break;case 536870912:k=Ik;break;default:k=Ui}k=qf(k,ea.bind(null,c))}c.callbackPriority=
d;c.callbackNode=k}}function ea(c,d){Ni=-1;Bj=0;if(0!==(cf&6))throw Error(u(327));var k=c.callbackNode;if(ph()&&c.callbackNode!==k)return null;var v=Tb(c,c===ng?Og:0);if(0===v)return null;if(0!==(v&30)||0!==(v&c.expiredLanes)||d)d=rf(c,v);else{d=v;var S=cf;cf|=2;var da=se();if(ng!==c||Og!==d)xi=null,zj=fg()+500,Hd(c,d);do try{for(;null!==rg&&!Vh();)df(rg);break}catch(Wb){he(c,Wb)}while(1);Mj=qi=Hi=null;uk.current=da;cf=S;null!==rg?d=0:(ng=null,Og=0,d=Kf)}if(0!==d){2===d&&(S=Lb(c),0!==S&&(v=S,d=sa(c,
S)));if(1===d)throw k=Rj,Hd(c,0),hc(c,v),I(c,fg()),k;if(6===d)hc(c,v);else{S=c.current.alternate;if(0===(v&30)&&!Ob(S)&&(d=rf(c,v),2===d&&(da=Lb(c),0!==da&&(v=da,d=sa(c,da))),1===d))throw k=Rj,Hd(c,0),hc(c,v),I(c,fg()),k;c.finishedWork=S;c.finishedLanes=v;switch(d){case 0:case 1:throw Error(u(345));case 2:pe(c,qh,xi);break;case 3:hc(c,v);if((v&130023424)===v&&(d=Uh+500-fg(),10<d)){if(0!==Tb(c,0))break;S=c.suspendedLanes;if((S&v)!==v){Ab();c.pingedLanes|=c.suspendedLanes&S;break}c.timeoutHandle=$k(pe.bind(null,
c,qh,xi),d);break}pe(c,qh,xi);break;case 4:hc(c,v);if((v&4194240)===v)break;d=c.eventTimes;for(S=-1;0<v;){var Ta=31-Nh(v);da=1<<Ta;Ta=d[Ta];Ta>S&&(S=Ta);v&=~da}v=S;v=fg()-v;v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3E3>v?3E3:4320>v?4320:1960*am(v/1960))-v;if(10<v){c.timeoutHandle=$k(pe.bind(null,c,qh,xi),v);break}pe(c,qh,xi);break;case 5:pe(c,qh,xi);break;default:throw Error(u(329));}}}I(c,fg());return c.callbackNode===k?ea.bind(null,c):null}function sa(c,d){var k=xh;c.current.memoizedState.isDehydrated&&
(Hd(c,d).flags|=256);c=rf(c,d);2!==c&&(d=qh,qh=k,null!==d&&$a(d));return c}function $a(c){null===qh?qh=c:qh.push.apply(qh,c)}function Ob(c){for(var d=c;;){if(d.flags&16384){var k=d.updateQueue;if(null!==k&&(k=k.stores,null!==k))for(var v=0;v<k.length;v++){var S=k[v],da=S.getSnapshot;S=S.value;try{if(!Oh(da(),S))return!1}catch(Ta){return!1}}}k=d.child;if(d.subtreeFlags&16384&&null!==k)k.return=d,d=k;else{if(d===c)break;for(;null===d.sibling;){if(null===d.return||d.return===c)return!0;d=d.return}d.sibling.return=
d.return;d=d.sibling}}return!0}function hc(c,d){d&=~Pg;d&=~jf;c.suspendedLanes|=d;c.pingedLanes&=~d;for(c=c.expirationTimes;0<d;){var k=31-Nh(d),v=1<<k;c[k]=-1;d&=~v}}function Mc(c){if(0!==(cf&6))throw Error(u(327));ph();var d=Tb(c,0);if(0===(d&1))return I(c,fg()),null;var k=rf(c,d);if(0!==c.tag&&2===k){var v=Lb(c);0!==v&&(d=v,k=sa(c,v))}if(1===k)throw k=Rj,Hd(c,0),hc(c,d),I(c,fg()),k;if(6===k)throw Error(u(345));c.finishedWork=c.current.alternate;c.finishedLanes=d;pe(c,qh,xi);I(c,fg());return null}
function fc(c,d){var k=cf;cf|=1;try{return c(d)}finally{cf=k,0===cf&&(zj=fg()+500,ai&&qd())}}function $c(c){null!==yi&&0===yi.tag&&0===(cf&6)&&ph();var d=cf;cf|=1;var k=Kh.transition,v=sf;try{if(Kh.transition=null,sf=1,c)return c()}finally{sf=v,Kh.transition=k,cf=d,0===(cf&6)&&qd()}}function Wc(){uh=xj.current;Md(xj)}function Hd(c,d){c.finishedWork=null;c.finishedLanes=0;var k=c.timeoutHandle;-1!==k&&(c.timeoutHandle=-1,bm(k));if(null!==rg)for(k=rg.return;null!==k;){var v=k;Ke(v);switch(v.tag){case 1:v=
v.type.childContextTypes;null!==v&&void 0!==v&&cc();break;case 3:Fd();Md(ch);Md(Bg);Qd();break;case 5:te(v);break;case 4:Fd();break;case 13:Md(Cf);break;case 19:Md(Cf);break;case 10:ja(v.type._context);break;case 22:case 23:Wc()}k=k.return}ng=c;rg=c=ag(c.current,null);Og=uh=d;Kf=0;Rj=null;Pg=jf=nf=0;qh=xh=null;if(null!==Yi){for(d=0;d<Yi.length;d++)if(k=Yi[d],v=k.interleaved,null!==v){k.interleaved=null;var S=v.next,da=k.pending;if(null!==da){var Ta=da.next;da.next=S;v.next=Ta}k.pending=v}Yi=null}return c}
function he(c,d){do{var k=rg;try{Mj=qi=Hi=null;Nj.current=Qj;if($i){for(var v=uf.memoizedState;null!==v;){var S=v.queue;null!==S&&(S.pending=null);v=v.next}$i=!1}Zi=0;vg=mg=uf=null;Oj=!1;Pj=0;al.current=null;if(null===k||null===k.return){Kf=1;Rj=d;rg=null;break}a:{var da=c,Ta=k.return,Wb=k,lc=d;d=Og;Wb.flags|=32768;if(null!==lc&&"object"===typeof lc&&"function"===typeof lc.then){var Uc=lc,ud=Wb,yd=ud.tag;if(0===(ud.mode&1)&&(0===yd||11===yd||15===yd)){var td=ud.alternate;td?(ud.updateQueue=td.updateQueue,
ud.memoizedState=td.memoizedState,ud.lanes=td.lanes):(ud.updateQueue=null,ud.memoizedState=null)}var Sd=Wf(Ta);if(null!==Sd){Sd.flags&=-257;Pf(Sd,Ta,Wb,da,d);Sd.mode&1&&pf(da,Uc,d);d=Sd;lc=Uc;var de=d.updateQueue;if(null===de){var je=new Set;je.add(lc);d.updateQueue=je}else de.add(lc);break a}else{if(0===(d&1)){pf(da,Uc,d);Je();break a}lc=Error(u(426))}}else if(Rf&&Wb.mode&1){var $f=Wf(Ta);if(null!==$f){0===($f.flags&65536)&&($f.flags|=256);Pf($f,Ta,Wb,da,d);qe(ge(lc,Wb));break a}}da=lc=ge(lc,Wb);
4!==Kf&&(Kf=2);null===xh?xh=[da]:xh.push(da);da=Ta;do{switch(da.tag){case 3:da.flags|=65536;d&=-d;da.lanes|=d;var Ic=hf(da,lc,d);Td(da,Ic);break a;case 1:Wb=lc;var uc=da.type,Qc=da.stateNode;if(0===(da.flags&128)&&("function"===typeof uc.getDerivedStateFromError||null!==Qc&&"function"===typeof Qc.componentDidCatch&&(null===si||!si.has(Qc)))){da.flags|=65536;d&=-d;da.lanes|=d;var Id=Ue(da,Wb,d);Td(da,Id);break a}}da=da.return}while(null!==da)}bh(k)}catch(be){d=be;rg===k&&null!==k&&(rg=k.return);continue}break}while(1)}
function se(){var c=uk.current;uk.current=Qj;return null===c?Qj:c}function Je(){if(0===Kf||3===Kf||2===Kf)Kf=4;null===ng||0===(nf&268435455)&&0===(jf&268435455)||hc(ng,Og)}function rf(c,d){var k=cf;cf|=2;var v=se();if(ng!==c||Og!==d)xi=null,Hd(c,d);do try{for(;null!==rg;)df(rg);break}catch(S){he(c,S)}while(1);Mj=qi=Hi=null;cf=k;uk.current=v;if(null!==rg)throw Error(u(261));ng=null;Og=0;return Kf}function df(c){var d=bl(c.alternate,c,uh);c.memoizedProps=c.pendingProps;null===d?bh(c):rg=d;al.current=
null}function bh(c){var d=c;do{var k=d.alternate;c=d.return;if(0===(d.flags&32768)){if(k=cj(k,d,uh),null!==k){rg=k;return}}else{k=fi(k,d);if(null!==k){k.flags&=32767;rg=k;return}if(null!==c)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Kf=6;rg=null;return}}d=d.sibling;if(null!==d){rg=d;return}rg=d=c}while(null!==d);0===Kf&&(Kf=5)}function pe(c,d,k){var v=sf,S=Kh.transition;try{Kh.transition=null,sf=1,Pe(c,d,k,v)}finally{Kh.transition=S,sf=v}return null}function Pe(c,d,k,v){do ph();while(null!==
yi);if(0!==(cf&6))throw Error(u(327));k=c.finishedWork;var S=c.finishedLanes;if(null===k)return null;c.finishedWork=null;c.finishedLanes=0;if(k===c.current)throw Error(u(177));c.callbackNode=null;c.callbackPriority=0;var da=k.lanes|k.childLanes;Qb(c,da);c===ng&&(rg=ng=null,Og=0);0===(k.subtreeFlags&2064)&&0===(k.flags&2064)||Sj||(Sj=!0,qf(Ui,function(){ph();return null}));da=0!==(k.flags&15990);if(0!==(k.subtreeFlags&15990)||da){da=Kh.transition;Kh.transition=null;var Ta=sf;sf=1;var Wb=cf;cf|=4;al.current=
null;Aj(c,k);Jh(k,c);nc(Yk);bk=!!Xk;Yk=Xk=null;c.current=k;D(k,c,S);cm();cf=Wb;sf=Ta;Kh.transition=da}else c.current=k;Sj&&(Sj=!1,yi=c,dj=S);da=c.pendingLanes;0===da&&(si=null);Ya(k.stateNode,v);I(c,fg());if(null!==d)for(v=c.onRecoverableError,k=0;k<d.length;k++)S=d[k],v(S.value,{componentStack:S.stack,digest:S.digest});if(pk)throw pk=!1,c=qk,qk=null,c;0!==(dj&1)&&0!==c.tag&&ph();da=c.pendingLanes;0!==(da&1)?c===tk?wi++:(wi=0,tk=c):wi=0;qd();return null}function ph(){if(null!==yi){var c=ed(dj),d=
Kh.transition,k=sf;try{Kh.transition=null;sf=16>c?16:c;if(null===yi)var v=!1;else{c=yi;yi=null;dj=0;if(0!==(cf&6))throw Error(u(331));var S=cf;cf|=4;for(ae=c.current;null!==ae;){var da=ae,Ta=da.child;if(0!==(ae.flags&16)){var Wb=da.deletions;if(null!==Wb){for(var lc=0;lc<Wb.length;lc++){var Uc=Wb[lc];for(ae=Uc;null!==ae;){var ud=ae;switch(ud.tag){case 0:case 11:case 15:gh(8,ud,da)}var yd=ud.child;if(null!==yd)yd.return=ud,ae=yd;else for(;null!==ae;){ud=ae;var td=ud.sibling,Sd=ud.return;Se(ud);if(ud===
Uc){ae=null;break}if(null!==td){td.return=Sd;ae=td;break}ae=Sd}}}var de=da.alternate;if(null!==de){var je=de.child;if(null!==je){de.child=null;do{var $f=je.sibling;je.sibling=null;je=$f}while(null!==je)}}ae=da}}if(0!==(da.subtreeFlags&2064)&&null!==Ta)Ta.return=da,ae=Ta;else a:for(;null!==ae;){da=ae;if(0!==(da.flags&2048))switch(da.tag){case 0:case 11:case 15:gh(9,da,da.return)}var Ic=da.sibling;if(null!==Ic){Ic.return=da.return;ae=Ic;break a}ae=da.return}}var uc=c.current;for(ae=uc;null!==ae;){Ta=
ae;var Qc=Ta.child;if(0!==(Ta.subtreeFlags&2064)&&null!==Qc)Qc.return=Ta,ae=Qc;else a:for(Ta=uc;null!==ae;){Wb=ae;if(0!==(Wb.flags&2048))try{switch(Wb.tag){case 0:case 11:case 15:nh(9,Wb)}}catch(be){wf(Wb,Wb.return,be)}if(Wb===Ta){ae=null;break a}var Id=Wb.sibling;if(null!==Id){Id.return=Wb.return;ae=Id;break a}ae=Wb.return}}cf=S;qd();if(Yh&&"function"===typeof Yh.onPostCommitFiberRoot)try{Yh.onPostCommitFiberRoot(Ij,c)}catch(be){}v=!0}return v}finally{sf=k,Kh.transition=d}}return!1}function rh(c,
d,k){d=ge(k,d);d=hf(c,d,1);c=Rc(c,d,1);d=Ab();null!==c&&(Mb(c,1,d),I(c,d))}function wf(c,d,k){if(3===c.tag)rh(c,c,k);else for(;null!==d;){if(3===d.tag){rh(d,c,k);break}else if(1===d.tag){var v=d.stateNode;if("function"===typeof d.type.getDerivedStateFromError||"function"===typeof v.componentDidCatch&&(null===si||!si.has(v))){c=ge(k,c);c=Ue(d,c,1);d=Rc(d,c,1);c=Ab();null!==d&&(Mb(d,1,c),I(d,c));break}}d=d.return}}function zf(c,d,k){var v=c.pingCache;null!==v&&v.delete(d);d=Ab();c.pingedLanes|=c.suspendedLanes&
k;ng===c&&(Og&k)===k&&(4===Kf||3===Kf&&(Og&130023424)===Og&&500>fg()-Uh?Hd(c,0):Pg|=k);I(c,d)}function yg(c,d){0===d&&(0===(c.mode&1)?d=1:(d=Tj,Tj<<=1,0===(Tj&130023424)&&(Tj=4194304)));var k=Ab();c=tc(c,d);null!==c&&(Mb(c,d,k),I(c,k))}function mh(c){var d=c.memoizedState,k=0;null!==d&&(k=d.retryLane);yg(c,k)}function Df(c,d){var k=0;switch(c.tag){case 13:var v=c.stateNode,S=c.memoizedState;null!==S&&(k=S.retryLane);break;case 19:v=c.stateNode;break;default:throw Error(u(314));}null!==v&&v.delete(d);
yg(c,k)}function qf(c,d){return Uf(c,d)}function Hg(c,d,k,v){this.tag=c;this.key=k;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=d;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=v;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function hg(c,d,k,v){return new Hg(c,d,k,v)}function Eh(c){c=c.prototype;return!(!c||!c.isReactComponent)}
function gi(c){if("function"===typeof c)return Eh(c)?1:0;if(void 0!==c&&null!==c){c=c.$$typeof;if(c===Wa)return 11;if(c===Kb)return 14}return 2}function ag(c,d){var k=c.alternate;null===k?(k=hg(c.tag,d,c.key,c.mode),k.elementType=c.elementType,k.type=c.type,k.stateNode=c.stateNode,k.alternate=c,c.alternate=k):(k.pendingProps=d,k.type=c.type,k.flags=0,k.subtreeFlags=0,k.deletions=null);k.flags=c.flags&14680064;k.childLanes=c.childLanes;k.lanes=c.lanes;k.child=c.child;k.memoizedProps=c.memoizedProps;
k.memoizedState=c.memoizedState;k.updateQueue=c.updateQueue;d=c.dependencies;k.dependencies=null===d?null:{lanes:d.lanes,firstContext:d.firstContext};k.sibling=c.sibling;k.index=c.index;k.ref=c.ref;return k}function Af(c,d,k,v,S,da){var Ta=2;v=c;if("function"===typeof c)Eh(c)&&(Ta=1);else if("string"===typeof c)Ta=5;else a:switch(c){case ii:return Cg(k.children,S,da,d);case n:Ta=8;S|=8;break;case G:return c=hg(12,k,d,S|2),c.elementType=G,c.lanes=da,c;case db:return c=hg(13,k,d,S),c.elementType=db,
c.lanes=da,c;case qb:return c=hg(19,k,d,S),c.elementType=qb,c.lanes=da,c;case cd:return Ki(k,S,da,d);default:if("object"===typeof c&&null!==c)switch(c.$$typeof){case M:Ta=10;break a;case ka:Ta=9;break a;case Wa:Ta=11;break a;case Kb:Ta=14;break a;case sc:Ta=16;v=null;break a}throw Error(u(130,null==c?c:typeof c,""));}d=hg(Ta,k,d,S);d.elementType=c;d.type=v;d.lanes=da;return d}function Cg(c,d,k,v){c=hg(7,c,v,d);c.lanes=k;return c}function Ki(c,d,k,v){c=hg(22,c,v,d);c.elementType=cd;c.lanes=k;c.stateNode=
{isHidden:!1};return c}function rj(c,d,k){c=hg(6,c,null,d);c.lanes=k;return c}function sj(c,d,k){d=hg(4,null!==c.children?c.children:[],c.key,d);d.lanes=k;d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation};return d}function vk(c,d,k,v,S){this.tag=d;this.containerInfo=c;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=
$b(0);this.expirationTimes=$b(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=$b(0);this.identifierPrefix=v;this.onRecoverableError=S;this.mutableSourceEagerHydrationData=null}function ej(c,d,k,v,S,da,Ta,Wb,lc){c=new vk(c,d,k,Wb,lc);1===d?(d=1,!0===da&&(d|=8)):d=0;da=hg(3,null,null,d);c.current=da;da.stateNode=c;da.memoizedState={element:v,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null};
wc(da);return c}function Xf(c,d,k){var v=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ji,key:null==v?null:""+v,children:c,containerInfo:d,implementation:k}}function wk(c){if(!c)return gg;c=c._reactInternals;a:{if(Aa(c)!==c||1!==c.tag)throw Error(u(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break a;case 1:if(Oa(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break a}}d=d.return}while(null!==d);throw Error(u(171));}if(1===c.tag){var k=
c.type;if(Oa(k))return vc(c,k,d)}return d}function Cj(c,d,k,v,S,da,Ta,Wb,lc){c=ej(k,v,!0,c,S,da,Ta,Wb,lc);c.context=wk(null);k=c.current;v=Ab();S=dc(k);da=yc(v,S);da.callback=void 0!==d&&null!==d?d:null;Rc(k,da,S);c.current.lanes=S;Mb(c,S,v);I(c,v);return c}function hh(c,d,k,v){var S=d.current,da=Ab(),Ta=dc(S);k=wk(k);null===d.context?d.context=k:d.pendingContext=k;d=yc(da,Ta);d.payload={element:c};v=void 0===v?null:v;null!==v&&(d.callback=v);c=Rc(S,d,Ta);null!==c&&(r(c,S,Ta,da),fd(c,S,Ta));return Ta}
function Oi(c){c=c.current;if(!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function Uj(c,d){c=c.memoizedState;if(null!==c&&null!==c.dehydrated){var k=c.retryLane;c.retryLane=0!==k&&k<d?k:d}}function Dj(c,d){Uj(c,d);(c=c.alternate)&&Uj(c,d)}function cl(){return null}function Pi(c){this._internalRoot=c}function zi(c){this._internalRoot=c}function Vj(c){return!(!c||1!==c.nodeType&&9!==c.nodeType&&11!==c.nodeType)}function Qi(c){return!(!c||
1!==c.nodeType&&9!==c.nodeType&&11!==c.nodeType&&(8!==c.nodeType||" react-mount-point-unstable "!==c.nodeValue))}function Wj(){}function xk(c,d,k,v,S){if(S){if("function"===typeof v){var da=v;v=function(){var Uc=Oi(Ta);da.call(Uc)}}var Ta=Cj(d,v,c,0,null,!1,!1,"",Wj);c._reactRootContainer=Ta;c[$h]=Ta.current;me(8===c.nodeType?c.parentNode:c);$c();return Ta}for(;S=c.lastChild;)c.removeChild(S);if("function"===typeof v){var Wb=v;v=function(){var Uc=Oi(lc);Wb.call(Uc)}}var lc=ej(c,0,!1,null,null,!1,
!1,"",Wj);c._reactRootContainer=lc;c[$h]=lc.current;me(8===c.nodeType?c.parentNode:c);$c(function(){hh(d,lc,k,v)});return lc}function fj(c,d,k,v,S){var da=k._reactRootContainer;if(da){var Ta=da;if("function"===typeof S){var Wb=S;S=function(){var lc=Oi(Ta);Wb.call(lc)}}hh(d,Ta,c,S)}else Ta=xk(k,d,c,S,v);return Oi(Ta)}var Ri=ob(2),Ag=ob(5),hi=new Set,Wh={},Lh=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),hj=Object.prototype.hasOwnProperty,
jj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hj={},ij={},Zf={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){Zf[c]=
new ac(c,0,!1,c,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];Zf[d]=new ac(d,1,!1,c[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(c){Zf[c]=new ac(c,2,!1,c.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){Zf[c]=new ac(c,2,!1,c,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){Zf[c]=
new ac(c,3,!1,c.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(c){Zf[c]=new ac(c,3,!0,c,null,!1,!1)});["capture","download"].forEach(function(c){Zf[c]=new ac(c,4,!1,c,null,!1,!1)});["cols","rows","size","span"].forEach(function(c){Zf[c]=new ac(c,6,!1,c,null,!1,!1)});["rowSpan","start"].forEach(function(c){Zf[c]=new ac(c,5,!1,c.toLowerCase(),null,!1,!1)});var Si=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=
c.replace(Si,Xb);Zf[d]=new ac(d,1,!1,c,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(Si,Xb);Zf[d]=new ac(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(Si,Xb);Zf[d]=new ac(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(c){Zf[c]=new ac(c,1,!1,c.toLowerCase(),null,!1,!1)});Zf.xlinkHref=
new ac("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(c){Zf[c]=new ac(c,1,!1,c.toLowerCase(),null,!0,!0)});var yh=Ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xi=Symbol.for("react.element"),ji=Symbol.for("react.portal"),ii=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),ka=Symbol.for("react.context"),Wa=Symbol.for("react.forward_ref"),db=
Symbol.for("react.suspense"),qb=Symbol.for("react.suspense_list"),Kb=Symbol.for("react.memo"),sc=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var cd=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var md=Symbol.iterator,rc=Object.assign,zd,Yd=!1,ye=Array.isArray,Rd,Te=function(c){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(d,k,v,S){MSApp.execUnsafeLocalFunction(function(){return c(d,
k,v,S)})}:c}(function(c,d){if("http://www.w3.org/2000/svg"!==c.namespaceURI||"innerHTML"in c)c.innerHTML=d;else{Rd=Rd||document.createElement("div");Rd.innerHTML="\x3csvg\x3e"+d.valueOf().toString()+"\x3c/svg\x3e";for(d=Rd.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}}),Ef={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,
flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sg=["Webkit","ms","Moz","O"];Object.keys(Ef).forEach(function(c){sg.forEach(function(d){d=
d+c.charAt(0).toUpperCase()+c.substring(1);Ef[d]=Ef[c]})});var tg=rc({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),zg=null,Mf=null,ze=null,yf=null,Xh=!1,Vd=!1;if(Lh)try{var wd={};Object.defineProperty(wd,"passive",{get:function(){Vd=!0}});window.addEventListener("test",wd,wd);window.removeEventListener("test",wd,wd)}catch(c){Vd=!1}var Pd=!1,Ed=null,af=!1,Tf=null,Ff={onError:function(c){Pd=!0;Ed=c}},Uf=Ag.unstable_scheduleCallback,
qg=Ag.unstable_cancelCallback,Vh=Ag.unstable_shouldYield,cm=Ag.unstable_requestPaint,fg=Ag.unstable_now,Gk=Ag.unstable_getCurrentPriorityLevel,Hk=Ag.unstable_ImmediatePriority,dk=Ag.unstable_UserBlockingPriority,Ui=Ag.unstable_NormalPriority,nl=Ag.unstable_LowPriority,Ik=Ag.unstable_IdlePriority,Ij=null,Yh=null,Nh=Math.clz32?Math.clz32:vb,kl=Math.log,Ll=Math.LN2,Jj=64,Tj=4194304,sf=0,Zj=!1,ak=[],Ci=null,ki=null,Di=null,kj=new Map,lj=new Map,li=[],ml="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "),
mj=yh.ReactCurrentBatchConfig,bk=!0,ck=null,Ei=null,Jk=null,ek=null,gj={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nf=Ca(gj),ih=rc({},gj,{view:0,detail:0}),Tk=Ca(ih),Ti,yk,Xj,zk=rc({},ih,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kb,button:0,buttons:0,relatedTarget:function(c){return void 0===c.relatedTarget?c.fromElement===c.srcElement?c.toElement:
c.fromElement:c.relatedTarget},movementX:function(c){if("movementX"in c)return c.movementX;c!==Xj&&(Xj&&"mousemove"===c.type?(Ti=c.screenX-Xj.screenX,yk=c.screenY-Xj.screenY):yk=Ti=0,Xj=c);return Ti},movementY:function(c){return"movementY"in c?c.movementY:yk}}),Qk=Ca(zk),Bl=rc({},zk,{dataTransfer:0}),Rk=Ca(Bl),Ak=rc({},ih,{relatedTarget:0}),Pk=Ca(Ak),dl=rc({},gj,{animationName:0,elapsedTime:0,pseudoElement:0}),pl=Ca(dl),dm=rc({},gj,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:
window.clipboardData}}),jk=Ca(dm),em=rc({},gj,{data:0}),rl=Ca(em),fm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",
45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ol={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},hm=rc({},ih,{key:function(c){if(c.key){var d=fm[c.key]||c.key;if("Unidentified"!==d)return d}return"keypress"===c.type?(c=t(c),13===c?"Enter":String.fromCharCode(c)):"keydown"===c.type||"keyup"===c.type?gm[c.keyCode]||"Unidentified":""},code:0,location:0,
ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kb,charCode:function(c){return"keypress"===c.type?t(c):0},keyCode:function(c){return"keydown"===c.type||"keyup"===c.type?c.keyCode:0},which:function(c){return"keypress"===c.type?t(c):"keydown"===c.type||"keyup"===c.type?c.keyCode:0}}),Rl=Ca(hm),el=rc({},zk,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ql=Ca(el),im=rc({},ih,{touches:0,targetTouches:0,changedTouches:0,
altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kb}),Sl=Ca(im),jm=rc({},gj,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sk=Ca(jm),fl=rc({},zk,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Tl=Ca(fl),De=[9,13,27,32],sd=Lh&&"CompositionEvent"in window,kg=null;Lh&&"documentMode"in document&&(kg=document.documentMode);
var Gi=Lh&&"TextEvent"in window&&!kg,Lk=Lh&&(!sd||kg&&8<kg&&11>=kg),Kk=String.fromCharCode(32),fk=!1,mi=!1,Pl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Vi=null,nj=null,sh=!1;if(Lh){if(Lh){var Ej="oninput"in document;if(!Ej){var Cl=document.createElement("div");Cl.setAttribute("oninput","return;");Ej="function"===typeof Cl.oninput}var Yj=Ej}else Yj=!1;sh=Yj&&(!document.documentMode||9<document.documentMode)}var Oh=
"function"===typeof Object.is?Object.is:K,kk=Lh&&"documentMode"in document&&11>=document.documentMode,oj=null,Mk=null,Kj=null,Jg=!1,Fi={animationend:Ac("Animation","AnimationEnd"),animationiteration:Ac("Animation","AnimationIteration"),animationstart:Ac("Animation","AnimationStart"),transitionend:Ac("Transition","TransitionEnd")},Nk={},gk={};Lh&&(gk=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),
"TransitionEvent"in window||delete Fi.transitionend.transition);for(var Ph=Xc("animationend"),ik=Xc("animationiteration"),ol=Xc("animationstart"),Wi=Xc("transitionend"),Zh=new Map,gl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" "),
hl=0;hl<gl.length;hl++){var Mh=gl[hl],Bk=Mh.toLowerCase(),Dl=Mh[0].toUpperCase()+Mh.slice(1);kd(Bk,"on"+Dl)}kd(Ph,"onAnimationEnd");kd(ik,"onAnimationIteration");kd(ol,"onAnimationStart");kd("dblclick","onDoubleClick");kd("focusin","onFocus");kd("focusout","onBlur");kd(Wi,"onTransitionEnd");ia("onMouseEnter",["mouseout","mouseover"]);ia("onMouseLeave",["mouseout","mouseover"]);ia("onPointerEnter",["pointerout","pointerover"]);ia("onPointerLeave",["pointerout","pointerover"]);h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));
h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));h("onBeforeInput",["compositionend","keypress","textInput","paste"]);h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yj="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),
Ql=new Set("cancel close invalid load scroll toggle".split(" ").concat(yj)),hk="_reactListening"+Math.random().toString(36).slice(2),Ul=/\r\n?/g,Vl=/\u0000|\uFFFD/g,Xk=null,Yk=null,$k="function"===typeof setTimeout?setTimeout:void 0,bm="function"===typeof clearTimeout?clearTimeout:void 0,Ck="function"===typeof Promise?Promise:void 0,Al="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Ck?function(c){return Ck.resolve(null).then(c).catch(pc)}:$k,Ai=Math.random().toString(36).slice(2),
Qh="__reactFiber$"+Ai,Lj="__reactProps$"+Ai,$h="__reactContainer$"+Ai,Ok="__reactEvents$"+Ai,yl="__reactListeners$"+Ai,Zk="__reactHandles$"+Ai,Uk=[],pj=-1,gg={},Bg=Kd(gg),ch=Kd(!1),ni=gg,lg=null,ai=!1,Vk=!1,qj=[],Bh=0,mk=null,lk=0,Gf=[],th=0,bi=null,Ch=1,oi="",Qg=null,Rg=null,Rf=!1,jh=null,zl=yh.ReactCurrentBatchConfig,Ji=J(!0),ul=J(!1),tj=Kd(null),Hi=null,qi=null,Mj=null,Yi=null,ri=!1,uj={},ci=Kd(uj),wj=Kd(uj),vj=Kd(uj),Cf=Kd(0),Ii=[],Nj=yh.ReactCurrentDispatcher,nk=yh.ReactCurrentBatchConfig,Zi=
0,uf=null,mg=null,vg=null,$i=!1,Oj=!1,Pj=0,km=0,Qj={readContext:Ia,useCallback:Od,useContext:Od,useEffect:Od,useImperativeHandle:Od,useInsertionEffect:Od,useLayoutEffect:Od,useMemo:Od,useReducer:Od,useRef:Od,useState:Od,useDebugValue:Od,useDeferredValue:Od,useTransition:Od,useMutableSource:Od,useSyncExternalStore:Od,useId:Od,unstable_isNewReconciler:!1},Xl={readContext:Ia,useCallback:function(c,d){Ne().memoizedState=[c,void 0===d?null:d];return c},useContext:Ia,useEffect:eh,useImperativeHandle:function(c,
d,k){k=null!==k&&void 0!==k?k.concat([c]):null;return Hf(4194308,4,kh.bind(null,d,c),k)},useLayoutEffect:function(c,d){return Hf(4194308,4,c,d)},useInsertionEffect:function(c,d){return Hf(4,2,c,d)},useMemo:function(c,d){var k=Ne();d=void 0===d?null:d;c=c();k.memoizedState=[c,d];return c},useReducer:function(c,d,k){var v=Ne();d=void 0!==k?k(d):d;v.memoizedState=v.baseState=d;c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d};v.queue=c;c=c.dispatch=le.bind(null,
uf,c);return[v.memoizedState,c]},useRef:function(c){var d=Ne();c={current:c};return d.memoizedState=c},useState:Tg,useDebugValue:U,useDeferredValue:function(c){return Ne().memoizedState=c},useTransition:function(){var c=Tg(!1),d=c[0];c=Lc.bind(null,c[1]);Ne().memoizedState=c;return[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,k){var v=uf,S=Ne();if(Rf){if(void 0===k)throw Error(u(407));k=k()}else{k=d();if(null===ng)throw Error(u(349));0!==(Zi&30)||Of(v,d,k)}S.memoizedState=
k;var da={value:k,getSnapshot:d};S.queue=da;eh(gf.bind(null,v,da,c),[c]);v.flags|=2048;Bf(9,bg.bind(null,v,da,k,d),void 0,null);return k},useId:function(){var c=Ne(),d=ng.identifierPrefix;if(Rf){var k=oi,v=Ch;k=(v&~(1<<32-Nh(v)-1)).toString(32)+k;d=":"+d+"R"+k;k=Pj++;0<k&&(d+="H"+k.toString(32));d+=":"}else k=km++,d=":"+d+"r"+k.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},sl={readContext:Ia,useCallback:Ja,useContext:Ia,useEffect:Sg,useImperativeHandle:If,useInsertionEffect:Vg,
useLayoutEffect:Wg,useMemo:mb,useReducer:ff,useRef:dg,useState:function(){return ff(ve)},useDebugValue:U,useDeferredValue:function(c){var d=hd();return Dc(d,mg.memoizedState,c)},useTransition:function(){var c=ff(ve)[0],d=hd().memoizedState;return[c,d]},useMutableSource:Dg,useSyncExternalStore:vf,useId:Gd,unstable_isNewReconciler:!1},tl={readContext:Ia,useCallback:Ja,useContext:Ia,useEffect:Sg,useImperativeHandle:If,useInsertionEffect:Vg,useLayoutEffect:Wg,useMemo:mb,useReducer:lf,useRef:dg,useState:function(){return lf(ve)},
useDebugValue:U,useDeferredValue:function(c){var d=hd();return null===mg?d.memoizedState=c:Dc(d,mg.memoizedState,c)},useTransition:function(){var c=lf(ve)[0],d=hd().memoizedState;return[c,d]},useMutableSource:Dg,useSyncExternalStore:vf,useId:Gd,unstable_isNewReconciler:!1},ok={isMounted:function(c){return(c=c._reactInternals)?Aa(c)===c:!1},enqueueSetState:function(c,d,k){c=c._reactInternals;var v=Ab(),S=dc(c),da=yc(v,S);da.payload=d;void 0!==k&&null!==k&&(da.callback=k);d=Rc(c,da,S);null!==d&&(r(d,
c,S,v),fd(d,c,S))},enqueueReplaceState:function(c,d,k){c=c._reactInternals;var v=Ab(),S=dc(c),da=yc(v,S);da.tag=1;da.payload=d;void 0!==k&&null!==k&&(da.callback=k);d=Rc(c,da,S);null!==d&&(r(d,c,S,v),fd(d,c,S))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var k=Ab(),v=dc(c),S=yc(k,v);S.tag=2;void 0!==d&&null!==d&&(S.callback=d);d=Rc(c,S,v);null!==d&&(r(d,c,v,k),fd(d,c,v))}},Yl="function"===typeof WeakMap?WeakMap:Map,vl=yh.ReactCurrentOwner,dh=!1,Wk={dehydrated:null,treeContext:null,retryLane:0};
var Zl=function(c,d){for(var k=d.child;null!==k;){if(5===k.tag||6===k.tag)c.appendChild(k.stateNode);else if(4!==k.tag&&null!==k.child){k.child.return=k;k=k.child;continue}if(k===d)break;for(;null===k.sibling;){if(null===k.return||k.return===d)return;k=k.return}k.sibling.return=k.return;k=k.sibling}};var ei=function(){};var wl=function(c,d,k,v){var S=c.memoizedProps;if(S!==v){c=d.stateNode;Ud(ci.current);var da=null;switch(k){case "input":S=fa(c,S);v=fa(c,v);da=[];break;case "select":S=rc({},S,{value:void 0});
v=rc({},v,{value:void 0});da=[];break;case "textarea":S=tb(c,S);v=tb(c,v);da=[];break;default:"function"!==typeof S.onClick&&"function"===typeof v.onClick&&(c.onclick=fb)}pa(k,v);var Ta;k=null;for(Uc in S)if(!v.hasOwnProperty(Uc)&&S.hasOwnProperty(Uc)&&null!=S[Uc])if("style"===Uc){var Wb=S[Uc];for(Ta in Wb)Wb.hasOwnProperty(Ta)&&(k||(k={}),k[Ta]="")}else"dangerouslySetInnerHTML"!==Uc&&"children"!==Uc&&"suppressContentEditableWarning"!==Uc&&"suppressHydrationWarning"!==Uc&&"autoFocus"!==Uc&&(Wh.hasOwnProperty(Uc)?
da||(da=[]):(da=da||[]).push(Uc,null));for(Uc in v){var lc=v[Uc];Wb=null!=S?S[Uc]:void 0;if(v.hasOwnProperty(Uc)&&lc!==Wb&&(null!=lc||null!=Wb))if("style"===Uc)if(Wb){for(Ta in Wb)!Wb.hasOwnProperty(Ta)||lc&&lc.hasOwnProperty(Ta)||(k||(k={}),k[Ta]="");for(Ta in lc)lc.hasOwnProperty(Ta)&&Wb[Ta]!==lc[Ta]&&(k||(k={}),k[Ta]=lc[Ta])}else k||(da||(da=[]),da.push(Uc,k)),k=lc;else"dangerouslySetInnerHTML"===Uc?(lc=lc?lc.__html:void 0,Wb=Wb?Wb.__html:void 0,null!=lc&&Wb!==lc&&(da=da||[]).push(Uc,lc)):"children"===
Uc?"string"!==typeof lc&&"number"!==typeof lc||(da=da||[]).push(Uc,""+lc):"suppressContentEditableWarning"!==Uc&&"suppressHydrationWarning"!==Uc&&(Wh.hasOwnProperty(Uc)?(null!=lc&&"onScroll"===Uc&&nd("scroll",c),da||Wb===lc||(da=[])):(da=da||[]).push(Uc,lc))}k&&(da=da||[]).push("style",k);var Uc;if(d.updateQueue=da)d.flags|=4}};var xl=function(c,d,k,v){k!==v&&(d.flags|=4)};var sk=!1,Zg=!1,$l="function"===typeof WeakSet?WeakSet:Set,ae=null,rk=!1,Ng=null,Th=!1,am=Math.ceil,uk=yh.ReactCurrentDispatcher,
al=yh.ReactCurrentOwner,Kh=yh.ReactCurrentBatchConfig,cf=0,ng=null,rg=null,Og=0,uh=0,xj=Kd(0),Kf=0,Rj=null,nf=0,jf=0,Pg=0,xh=null,qh=null,Uh=0,zj=Infinity,xi=null,pk=!1,qk=null,si=null,Sj=!1,yi=null,dj=0,wi=0,tk=null,Ni=-1,Bj=0;var bl=function(c,d,k){if(null!==c)if(c.memoizedProps!==d.pendingProps||ch.current)dh=!0;else{if(0===(c.lanes&k)&&0===(d.flags&128))return dh=!1,Gh(c,d,k);dh=0!==(c.flags&131072)?!0:!1}else dh=!1,Rf&&0!==(d.flags&1048576)&&fe(d,lk,d.index);d.lanes=0;switch(d.tag){case 2:var v=
d.type;Fh(c,d);c=d.pendingProps;var S=ya(d,Bg.current);Qa(d,k);S=Fe(null,d,v,c,S,k);var da=re();d.flags|=1;"object"===typeof S&&null!==S&&"function"===typeof S.render&&void 0===S.$$typeof?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Oa(v)?(da=!0,Hc(d)):da=!1,d.memoizedState=null!==S.state&&void 0!==S.state?S.state:null,wc(d),S.updater=ok,d.stateNode=S,S._reactInternals=d,Zd(d,v,c,k),d=jg(null,d,v,!0,da,k)):(d.tag=0,Rf&&da&&Qe(d),$e(null,d,S,k),d=d.child);return d;case 16:v=d.elementType;a:{Fh(c,
d);c=d.pendingProps;S=v._init;v=S(v._payload);d.type=v;S=d.tag=gi(v);c=Vf(v,c);switch(S){case 0:d=og(null,d,v,c,k);break a;case 1:d=vh(null,d,v,c,k);break a;case 11:d=Yg(null,d,v,c,k);break a;case 14:d=xg(null,d,v,Vf(v.type,c),k);break a}throw Error(u(306,v,""));}return d;case 0:return v=d.type,S=d.pendingProps,S=d.elementType===v?S:Vf(v,S),og(c,d,v,S,k);case 1:return v=d.type,S=d.pendingProps,S=d.elementType===v?S:Vf(v,S),vh(c,d,v,S,k);case 3:a:{Sh(d);if(null===c)throw Error(u(387));v=d.pendingProps;
da=d.memoizedState;S=da.element;zc(c,d);Ad(d,v,null,k);var Ta=d.memoizedState;v=Ta.element;if(da.isDehydrated)if(da={element:v,isDehydrated:!1,cache:Ta.cache,pendingSuspenseBoundaries:Ta.pendingSuspenseBoundaries,transitions:Ta.transitions},d.updateQueue.baseState=da,d.memoizedState=da,d.flags&256){S=ge(Error(u(423)),d);Ee();qe(S);d.flags|=256;$e(c,d,v,k);d=d.child;break a}else if(v!==S){S=ge(Error(u(424)),d);Ee();qe(S);d.flags|=256;$e(c,d,v,k);d=d.child;break a}else for(Rg=Ec(d.stateNode.containerInfo.firstChild),
Qg=d,Rf=!0,jh=null,k=ul(d,null,v,k),d.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{Ee();if(v===S){d=Eg(c,d,k);break a}$e(c,d,v,k)}d=d.child}return d;case 5:return Be(d),null===c&&Le(d),v=d.type,S=d.pendingProps,da=null!==c?c.memoizedProps:null,Ta=S.children,Gb(v,S)?Ta=null:null!==da&&Gb(v,da)&&(d.flags|=32),Rh(c,d),$e(c,d,Ta,k),d.child;case 6:return null===c&&Le(d),null;case 13:return Fg(c,d,k);case 4:return qc(d,d.stateNode.containerInfo),v=d.pendingProps,null===c?d.child=Ji(d,null,v,k):$e(c,
d,v,k),d.child;case 11:return v=d.type,S=d.pendingProps,S=d.elementType===v?S:Vf(v,S),Yg(c,d,v,S,k);case 7:return $e(c,d,d.pendingProps,k),d.child;case 8:return $e(c,d,d.pendingProps.children,k),d.child;case 12:return $e(c,d,d.pendingProps.children,k),d.child;case 10:a:{v=d.type._context;S=d.pendingProps;da=d.memoizedProps;Ta=S.value;Wd(tj,v._currentValue);v._currentValue=Ta;if(null!==da)if(Oh(da.value,Ta)){if(da.children===S.children&&!ch.current){d=Eg(c,d,k);break a}}else for(da=d.child,null!==
da&&(da.return=d);null!==da;){var Wb=da.dependencies;if(null!==Wb){Ta=da.child;for(var lc=Wb.firstContext;null!==lc;){if(lc.context===v){if(1===da.tag){lc=yc(-1,k&-k);lc.tag=2;var Uc=da.updateQueue;if(null!==Uc){Uc=Uc.shared;var ud=Uc.pending;null===ud?lc.next=lc:(lc.next=ud.next,ud.next=lc);Uc.pending=lc}}da.lanes|=k;lc=da.alternate;null!==lc&&(lc.lanes|=k);Da(da.return,k,d);Wb.lanes|=k;break}lc=lc.next}}else if(10===da.tag)Ta=da.type===d.type?null:da.child;else if(18===da.tag){Ta=da.return;if(null===
Ta)throw Error(u(341));Ta.lanes|=k;Wb=Ta.alternate;null!==Wb&&(Wb.lanes|=k);Da(Ta,k,d);Ta=da.sibling}else Ta=da.child;if(null!==Ta)Ta.return=da;else for(Ta=da;null!==Ta;){if(Ta===d){Ta=null;break}da=Ta.sibling;if(null!==da){da.return=Ta.return;Ta=da;break}Ta=Ta.return}da=Ta}$e(c,d,S.children,k);d=d.child}return d;case 9:return S=d.type,v=d.pendingProps.children,Qa(d,k),S=Ia(S),v=v(S),d.flags|=1,$e(c,d,v,k),d.child;case 14:return v=d.type,S=Vf(v,d.pendingProps),S=Vf(v.type,S),xg(c,d,v,S,k);case 15:return lh(c,
d,d.type,d.pendingProps,k);case 17:return v=d.type,S=d.pendingProps,S=d.elementType===v?S:Vf(v,S),Fh(c,d),d.tag=1,Oa(v)?(c=!0,Hc(d)):c=!1,Qa(d,k),Kg(d,v,S),Zd(d,v,S,k),jg(null,d,v,!0,c,k);case 19:return Li(c,d,k);case 22:return Qf(c,d,k)}throw Error(u(156,d.tag));};var El="function"===typeof reportError?reportError:function(c){console.error(c)};zi.prototype.render=Pi.prototype.render=function(c){var d=this._internalRoot;if(null===d)throw Error(u(409));hh(c,d,null,null)};zi.prototype.unmount=Pi.prototype.unmount=
function(){var c=this._internalRoot;if(null!==c){this._internalRoot=null;var d=c.containerInfo;$c(function(){hh(null,c,null,null)});d[$h]=null}};zi.prototype.unstable_scheduleHydration=function(c){if(c){var d=Fl();c={blockedOn:null,target:c,priority:d};for(var k=0;k<li.length&&0!==d&&d<li[k].priority;k++);li.splice(k,0,c);0===k&&yb(c)}};var Nl=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var k=jb(d.pendingLanes);0!==k&&(xc(d,k|1),I(d,fg()),0===(cf&6)&&
(zj=fg()+500,qd()))}break;case 13:$c(function(){var v=tc(c,1);if(null!==v){var S=Ab();r(v,c,1,S)}}),Dj(c,1)}};var Fk=function(c){if(13===c.tag){var d=tc(c,134217728);if(null!==d){var k=Ab();r(d,c,134217728,k)}Dj(c,134217728)}};var Ml=function(c){if(13===c.tag){var d=dc(c),k=tc(c,d);if(null!==k){var v=Ab();r(k,c,d,v)}Dj(c,d)}};var Fl=function(){return sf};var ll=function(c,d){var k=sf;try{return sf=c,d()}finally{sf=k}};Mf=function(c,d,k){switch(d){case "input":Va(c,k);d=k.name;if("radio"===k.type&&
null!=d){for(k=c;k.parentNode;)k=k.parentNode;k=k.querySelectorAll("input[name\x3d"+JSON.stringify(""+d)+'][type\x3d"radio"]');for(d=0;d<k.length;d++){var v=k[d];if(v!==c&&v.form===c.form){var S=ce(v);if(!S)throw Error(u(90));ec(v);Va(v,S)}}}break;case "textarea":eb(c,k);break;case "select":d=k.value,null!=d&&bb(c,!!k.multiple,d,!1)}};A=fc;y=$c;var lm={usingClientEntryPoint:!1,Events:[Oc,Nd,ce,w,Q,fc]},Fj={findFiberByHostInstance:ad,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bi=
{bundleType:Fj.bundleType,version:Fj.version,rendererPackageName:Fj.rendererPackageName,rendererConfig:Fj.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yh.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){c=Ma(c);return null===c?null:c.stateNode},findFiberByHostInstance:Fj.findFiberByHostInstance||
cl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zh.isDisabled&&zh.supportsFiber)try{Ij=zh.inject(Bi),Yh=zh}catch(c){}}Xa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lm;Xa.createPortal=function(c,d){var k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Vj(d))throw Error(u(200));
return Xf(c,d,null,k)};Xa.createRoot=function(c,d){if(!Vj(c))throw Error(u(299));var k=!1,v="",S=El;null!==d&&void 0!==d&&(!0===d.unstable_strictMode&&(k=!0),void 0!==d.identifierPrefix&&(v=d.identifierPrefix),void 0!==d.onRecoverableError&&(S=d.onRecoverableError));d=ej(c,1,!1,null,null,k,!1,v,S);c[$h]=d.current;me(8===c.nodeType?c.parentNode:c);return new Pi(d)};Xa.findDOMNode=function(c){if(null==c)return null;if(1===c.nodeType)return c;var d=c._reactInternals;if(void 0===d){if("function"===typeof c.render)throw Error(u(188));
c=Object.keys(c).join(",");throw Error(u(268,c));}c=Ma(d);return c=null===c?null:c.stateNode};Xa.flushSync=function(c){return $c(c)};Xa.hydrate=function(c,d,k){if(!Qi(d))throw Error(u(200));return fj(null,c,d,!0,k)};Xa.hydrateRoot=function(c,d,k){if(!Vj(c))throw Error(u(405));var v=null!=k&&k.hydratedSources||null,S=!1,da="",Ta=El;null!==k&&void 0!==k&&(!0===k.unstable_strictMode&&(S=!0),void 0!==k.identifierPrefix&&(da=k.identifierPrefix),void 0!==k.onRecoverableError&&(Ta=k.onRecoverableError));
d=Cj(d,null,c,1,null!=k?k:null,S,!1,da,Ta);c[$h]=d.current;me(c);if(v)for(c=0;c<v.length;c++)k=v[c],S=k._getVersion,S=S(k._source),null==d.mutableSourceEagerHydrationData?d.mutableSourceEagerHydrationData=[k,S]:d.mutableSourceEagerHydrationData.push(k,S);return new zi(d)};Xa.render=function(c,d,k){if(!Qi(d))throw Error(u(200));return fj(null,c,d,!1,k)};Xa.unmountComponentAtNode=function(c){if(!Qi(c))throw Error(u(40));return c._reactRootContainer?($c(function(){fj(null,null,c,!1,function(){c._reactRootContainer=
null;c[$h]=null})}),!0):!1};Xa.unstable_batchedUpdates=fc;Xa.unstable_renderSubtreeIntoContainer=function(c,d,k,v){if(!Qi(k))throw Error(u(200));if(null==c||void 0===c._reactInternals)throw Error(u(38));return fj(c,d,k,!1,v)};Xa.version="18.3.1-next-f1338f8080-20240426"};
shadow$provide[8]=function(Eb,ob,Fc,Xa){function u(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(h){console.error(h)}}u();Fc.exports=ob(6)};
shadow$provide[9]=function(Eb,ob,Fc,Xa){Eb=ob(8);Xa.createRoot=Eb.createRoot;Xa.hydrateRoot=Eb.hydrateRoot};
shadow$provide[14]=function(Eb,ob,Fc,Xa){Fc.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"};
shadow$provide[18]=function(Eb,ob,Fc,Xa){function u(){}function h(){}var ia=ob(14);h.resetWarningCache=u;Fc.exports=function(){function ab(ac,Xb,mc,Cb,Ub,jc){if(jc!==ia)throw ac=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types"),ac.name="Invariant Violation",ac;}function zb(){return ab}ab.isRequired=ab;var Yb={array:ab,bigint:ab,bool:ab,func:ab,number:ab,object:ab,
string:ab,symbol:ab,any:ab,arrayOf:zb,element:ab,elementType:ab,instanceOf:zb,node:ab,objectOf:zb,oneOf:zb,oneOfType:zb,shape:zb,exact:zb,checkPropTypes:h,resetWarningCache:u};return Yb.PropTypes=Yb}};
shadow$provide[19]=function(Eb,ob,Fc,Xa){Fc.exports=ob(18)()};
shadow$provide[20]=function(Eb,ob,Fc,Xa){Xa.__esModule=!0;Xa.default=function(h,ia){void 0===h&&(h=u);void 0===ia&&(ia=u);const ab=Object.keys(h),zb=Object.keys(ia);return h===ia||ab.length===zb.length&&ab.every(Yb=>h[Yb]===ia[Yb])};const u={}};
shadow$provide[21]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa):"function"===typeof define&&define.amd?define(["exports"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={}))})(this,function(u){function h(y,N,z){y.fields=N||[];y.fname=z;return y}function ia(y){return null==y?null:y.fields}function ab(y){return 1===y.length?Va(y[0]):Ga(y)}function zb(y){throw Error(y);}function Yb(y){function N(){z.push(Aa+y.substring(O,la));Aa="";O=la+
1}const z=[],C=y.length;let H=null,V=0,Aa="",O,la,za;y+="";for(O=la=0;la<C;++la)(za=y[la],"\\"===za)?(Aa+=y.substring(O,la++),O=la):za===H?(N(),H=null,V=-1):H||(O===V&&'"'===za?(O=la+1,H=za):O===V&&"'"===za?(O=la+1,H=za):"."!==za||V?"["===za?(la>O&&N(),V=O=la+1):"]"===za&&(V||zb("Access path missing open bracket: "+y),0<V&&N(),V=0,O=la+1):la>O?N():O=la+1);V&&zb("Access path missing closing bracket: "+y);H&&zb("Access path missing closing quote: "+y);la>O&&(la++,N());return z}function ac(y,N,z){const C=
Yb(y);y=1===C.length?C[0]:y;return h((z&&z.get||ab)(C),[y],N||y)}function Xb(y,N,z){N=[N].concat([].slice.call(z));console[y].apply(console,N)}function mc(y){return y===Object(y)}function Cb(y,N,z,C){if("__proto__"!==N){var H;if(mc(z)&&!Z(z))for(H in y=mc(y[N])?y[N]:y[N]={},z)C&&(!0===C||C[H])?Cb(y,H,z[H]):"__proto__"!==H&&(y[H]=z[H]);else y[N]=z}}function Ub(y,N){function z(V){C[V.name]||(C[V.name]=1,H.push(V))}if(null==y)return N;const C={},H=[];N.forEach(z);y.forEach(z);return H}function jc(y){return y[y.length-
1]}function Ba(y){return null==y||""===y?null:+y}function Za(y,N,z,C){const H=z(y[0]);y=z(jc(y));N*=y-H;return[C(H-N),C(y-N)]}function wb(y,N,z,C,H){const V=C(y[0]);y=C(jc(y));N=null!=N?C(N):(V+y)/2;return[H(N+(V-N)*z),H(N+(y-N)*z)]}function ub(y){return null!=y?Z(y)?y:[y]:[]}function sb(y){return"function"===typeof y}function xb(y){for(let N,z,C=1,H=arguments.length;C<H;++C)for(z in N=arguments[C],N)y[z]=N[z];return y}function ib(y,N){return Object.hasOwn(y,N)}function ec(y){return"[object Date]"===
Object.prototype.toString.call(y)}function ra(y){return"number"===typeof y}function fa(y){return"string"===typeof y}function xa(y,N){let z="";for(;0<=--N;)z+=y;return z}function Ra(y){return Z(y)?"["+y.map(Ra)+"]":mc(y)||fa(y)?JSON.stringify(y).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):y}const Va=y=>function(N){return N[y]},Ga=y=>{const N=y.length;return function(z){for(let C=0;C<N;++C)z=z[y[C]];return z}},hb=ac("id"),bb=h(y=>y,[],"identity"),tb=h(()=>0,[],"zero"),Pb=h(()=>1,[],"one"),
eb=h(()=>!0,[],"true"),T=h(()=>!1,[],"false");var Z=Array.isArray;const ca=y=>N=>y*Math.exp(N),ha=y=>N=>Math.log(y*N),La=y=>N=>Math.sign(N)*Math.log1p(Math.abs(N/y)),na=y=>N=>Math.sign(N)*Math.expm1(Math.abs(N))*y,pa=y=>N=>0>N?-Math.pow(-N,y):Math.pow(N,y),m=(y,N)=>(y<N||null==y)&&null!=N?-1:(y>N||null==N)&&null!=y?1:(N=N instanceof Date?+N:N,y=y instanceof Date?+y:y)!==y&&N===N?-1:N!==N&&y===y?1:0,E=(y,N)=>1===y.length?L(y[0],N[0]):w(y,N,y.length),L=(y,N)=>function(z,C){return m(y(z),y(C))*N},w=
(y,N,z)=>{N.push(0);return function(C,H){var V=0;let Aa=-1;for(;0===V&&++Aa<z;)V=y[Aa],V=m(V(C),V(H));return V*N[Aa]}},Q={},A=y=>ra(y)?y:ec(y)?y:Date.parse(y);u.Debug=4;u.Error=1;u.Info=3;u.None=0;u.Warn=2;u.accessor=h;u.accessorFields=ia;u.accessorName=function(y){return null==y?null:y.fname};u.array=ub;u.ascending=m;u.clampRange=function(y,N,z){let C=y[0];y=y[1];let H;y<C&&(H=y,y=C,C=H);H=y-C;return H>=z-N?[N,z]:[C=Math.min(Math.max(C,N),z-H),C+H]};u.compare=function(y,N,z){z=z||{};N=ub(N)||[];
const C=[],H=[],V={},Aa=z.comparator||E;ub(y).forEach((O,la)=>{null!=O&&(C.push("descending"===N[la]?-1:1),H.push(O=sb(O)?O:ac(O,null,z)),(ia(O)||[]).forEach(za=>V[za]=1))});return 0===H.length?null:h(Aa(H,C),Object.keys(V))};u.constant=function(y){return sb(y)?y:()=>y};u.debounce=function(y,N){let z;return C=>{z&&clearTimeout(z);z=setTimeout(()=>(N(C),z=null),y)}};u.error=zb;u.extend=xb;u.extent=function(y,N){let z=0,C,H,V,Aa;if(y&&(C=y.length))if(null==N){for(H=y[z];z<C&&(null==H||H!==H);H=y[++z]);
for(V=Aa=H;z<C;++z)H=y[z],null!=H&&(H<V&&(V=H),H>Aa&&(Aa=H))}else{for(H=N(y[z]);z<C&&(null==H||H!==H);H=N(y[++z]));for(V=Aa=H;z<C;++z)H=N(y[z]),null!=H&&(H<V&&(V=H),H>Aa&&(Aa=H))}return[V,Aa]};u.extentIndex=function(y,N){const z=y.length;let C=-1,H,V,Aa,O,la;if(null==N){for(;++C<z;)if(V=y[C],null!=V&&V>=V){H=Aa=V;break}if(C===z)return[-1,-1];for(O=la=C;++C<z;)V=y[C],null!=V&&(H>V&&(H=V,O=C),Aa<V&&(Aa=V,la=C))}else{for(;++C<z;)if(V=N(y[C],C,y),null!=V&&V>=V){H=Aa=V;break}if(C===z)return[-1,-1];for(O=
la=C;++C<z;)V=N(y[C],C,y),null!=V&&(H>V&&(H=V,O=C),Aa<V&&(Aa=V,la=C))}return[O,la]};u.falsy=T;u.fastmap=function(y){function N(V){return ib(z,V)&&z[V]!==Q}let z={},C;const H={size:0,empty:0,object:z,has:N,get(V){return N(V)?z[V]:void 0},set(V,Aa){N(V)||(++H.size,z[V]===Q&&--H.empty);z[V]=Aa;return this},delete(V){N(V)&&(--H.size,++H.empty,z[V]=Q);return this},clear(){H.size=H.empty=0;H.object=z={}},test(V){return arguments.length?(C=V,H):C},clean(){const V={};let Aa=0;for(const O in z){const la=z[O];
la===Q||C&&C(la)||(V[O]=la,++Aa)}H.size=Aa;H.empty=0;H.object=z=V}};y&&Object.keys(y).forEach(V=>{H.set(V,y[V])});return H};u.field=ac;u.flush=function(y,N,z,C,H,V){if(!z&&0!==z)return V;z=+z;let Aa=y[0],O=jc(y);O<Aa&&(y=Aa,Aa=O,O=y);y=Math.abs(N-Aa);N=Math.abs(O-N);return y<N&&y<=z?C:N<=z?H:V};u.hasOwnProperty=ib;u.id=hb;u.identity=bb;u.inherits=function(y,N,z){N=y.prototype=Object.create(N.prototype);Object.defineProperty(N,"constructor",{value:y,writable:!0,enumerable:!0,configurable:!0});return xb(N,
z)};u.inrange=function(y,N,z,C){let H=N[0];N=N[N.length-1];let V;H>N&&(V=H,H=N,N=V);return(void 0===z||z?H<=y:H<y)&&(void 0===C||C?y<=N:y<N)};u.isArray=Z;u.isBoolean=function(y){return"boolean"===typeof y};u.isDate=ec;u.isFunction=sb;u.isIterable=function(y){return y&&sb(y[Symbol.iterator])};u.isNumber=ra;u.isObject=mc;u.isRegExp=function(y){return"[object RegExp]"===Object.prototype.toString.call(y)};u.isString=fa;u.key=function(y,N,z){y&&(y=N?ub(y).map(V=>V.replace(/\\(.)/g,"$1")):ub(y));const C=
y&&y.length,H=z&&z.get||ab;z=V=>H(N?[V]:Yb(V));if(C)if(1===C){const V=z(y[0]);z=function(Aa){return""+V(Aa)}}else{const V=y.map(z);z=function(Aa){let O=""+V[0](Aa),la=0;for(;++la<C;)O+="|"+V[la](Aa);return O}}else z=function(){return""};return h(z,y,"key")};u.lerp=function(y,N){const z=y[0];y=jc(y);return(N=+N)?1===N?y:z+N*(y-z):z};u.logger=function(y,N,z=Xb){let C=y||0;return{level(H){return arguments.length?(C=+H,this):C},error(){1<=C&&z(N||"error","ERROR",arguments);return this},warn(){2<=C&&z(N||
"warn","WARN",arguments);return this},info(){3<=C&&z(N||"log","INFO",arguments);return this},debug(){4<=C&&z(N||"log","DEBUG",arguments);return this}}};u.lruCache=function(y){y=+y||1E4;let N,z,C;const H=()=>{N={};z={};C=0},V=(Aa,O)=>{++C>y&&(z=N,N={},C=1);return N[Aa]=O};H();return{clear:H,has:Aa=>ib(N,Aa)||ib(z,Aa),get:Aa=>ib(N,Aa)?N[Aa]:ib(z,Aa)?V(Aa,z[Aa]):void 0,set:(Aa,O)=>ib(N,Aa)?N[Aa]=O:V(Aa,O)}};u.merge=function(y,N,z,C){const H=N.length,V=z.length;if(!V)return N;if(!H)return z;C=C||new N.constructor(H+
V);let Aa=0,O=0,la=0;for(;Aa<H&&O<V;++la)C[la]=0<y(N[Aa],z[O])?z[O++]:N[Aa++];for(;Aa<H;++Aa,++la)C[la]=N[Aa];for(;O<V;++O,++la)C[la]=z[O];return C};u.mergeConfig=function(...y){return y.reduce((N,z)=>{for(const C in z)"signals"===C?N.signals=Ub(N.signals,z.signals):Cb(N,C,z[C],"legend"===C?{layout:1}:"style"===C?!0:null);return N},{})};u.one=Pb;u.pad=function(y,N,z,C){z=z||" ";y+="";N-=y.length;return 0>=N?y:"left"===C?xa(z,N)+y:"center"===C?xa(z,~~(N/2))+y+xa(z,Math.ceil(N/2)):y+xa(z,N)};u.panLinear=
function(y,N){return Za(y,N,Ba,bb)};u.panLog=function(y,N){var z=Math.sign(y[0]);return Za(y,N,ha(z),ca(z))};u.panPow=function(y,N,z){return Za(y,N,pa(z),pa(1/z))};u.panSymlog=function(y,N,z){return Za(y,N,La(z),na(z))};u.peek=jc;u.quarter=function(y){return 1+~~((new Date(y)).getMonth()/3)};u.repeat=xa;u.span=function(y){return y&&jc(y)-y[0]||0};u.splitAccessPath=Yb;u.stringValue=Ra;u.toBoolean=function(y){return null==y||""===y?null:y&&"false"!==y&&"0"!==y?!!y:!1};u.toDate=function(y,N){N=N||A;
return null==y||""===y?null:N(y)};u.toNumber=Ba;u.toSet=function(y){const N={},z=y.length;for(let C=0;C<z;++C)N[y[C]]=!0;return N};u.toString=function(y){return null==y||""===y?null:y+""};u.truncate=function(y,N,z,C){C=null!=C?C:"…";y+="";const H=y.length,V=Math.max(0,N-C.length);return H<=N?y:"left"===z?C+y.slice(H-V):"center"===z?y.slice(0,Math.ceil(V/2))+C+y.slice(H-~~(V/2)):y.slice(0,V)+C};u.truthy=eb;u.utcquarter=function(y){return 1+~~((new Date(y)).getUTCMonth()/3)};u.visitArray=function(y,
N,z){if(y)if(N){const C=y.length;for(let H=0;H<C;++H){const V=N(y[H]);V&&z(V,H,y)}}else y.forEach(z)};u.writeConfig=Cb;u.zero=tb;u.zoomLinear=function(y,N,z){return wb(y,N,z,Ba,bb)};u.zoomLog=function(y,N,z){const C=Math.sign(y[0]);return wb(y,N,z,ha(C),ca(C))};u.zoomPow=function(y,N,z,C){return wb(y,N,z,pa(C),pa(1/C))};u.zoomSymlog=function(y,N,z,C){return wb(y,N,z,La(C),na(C))}})};
shadow$provide[22]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa):"function"===typeof define&&define.amd?define(["exports"],h):(u=u||self,h(u.topojson=u.topojson||{}))})(this,function(u){function h(Ba){return Ba}function ia(Ba){if(null==Ba)return h;var Za,wb,ub=Ba.scale[0],sb=Ba.scale[1],xb=Ba.translate[0],ib=Ba.translate[1];return function(ec,ra){ra||(Za=wb=0);ra=2;var fa=ec.length,xa=Array(fa);xa[0]=(Za+=ec[0])*ub+xb;for(xa[1]=(wb+=ec[1])*sb+ib;ra<fa;)xa[ra]=
ec[ra],++ra;return xa}}function ab(Ba){function Za(fa){fa=ub(fa);fa[0]<xb&&(xb=fa[0]);fa[0]>ec&&(ec=fa[0]);fa[1]<ib&&(ib=fa[1]);fa[1]>ra&&(ra=fa[1])}function wb(fa){switch(fa.type){case "GeometryCollection":fa.geometries.forEach(wb);break;case "Point":Za(fa.coordinates);break;case "MultiPoint":fa.coordinates.forEach(Za)}}var ub=ia(Ba.transform),sb,xb=Infinity,ib=xb,ec=-xb,ra=-xb;Ba.arcs.forEach(function(fa){for(var xa=-1,Ra=fa.length,Va;++xa<Ra;)Va=ub(fa[xa],xa),Va[0]<xb&&(xb=Va[0]),Va[0]>ec&&(ec=
Va[0]),Va[1]<ib&&(ib=Va[1]),Va[1]>ra&&(ra=Va[1])});for(sb in Ba.objects)wb(Ba.objects[sb]);return[xb,ib,ec,ra]}function zb(Ba,Za){var wb=Za.id,ub=Za.bbox,sb=null==Za.properties?{}:Za.properties;Ba=Yb(Ba,Za);return null==wb&&null==ub?{type:"Feature",properties:sb,geometry:Ba}:null==ub?{type:"Feature",id:wb,properties:sb,geometry:Ba}:{type:"Feature",id:wb,bbox:ub,properties:sb,geometry:Ba}}function Yb(Ba,Za){function wb(fa){return ec(fa)}function ub(fa){for(var xa=[],Ra=0,Va=fa.length;Ra<Va;++Ra){var Ga=
fa[Ra],hb=xa;hb.length&&hb.pop();for(var bb=ra[0>Ga?~Ga:Ga],tb=0,Pb=bb.length;tb<Pb;++tb)hb.push(ec(bb[tb],tb));if(0>Ga)for(Ga=hb,hb=Ga.length,bb=hb-Pb;bb<--hb;)Pb=Ga[bb],Ga[bb++]=Ga[hb],Ga[hb]=Pb}2>xa.length&&xa.push(xa[0]);return xa}function sb(fa){for(fa=ub(fa);4>fa.length;)fa.push(fa[0]);return fa}function xb(fa){return fa.map(sb)}function ib(fa){var xa=fa.type;switch(xa){case "GeometryCollection":return{type:xa,geometries:fa.geometries.map(ib)};case "Point":fa=ec(fa.coordinates);break;case "MultiPoint":fa=
fa.coordinates.map(wb);break;case "LineString":fa=ub(fa.arcs);break;case "MultiLineString":fa=fa.arcs.map(ub);break;case "Polygon":fa=xb(fa.arcs);break;case "MultiPolygon":fa=fa.arcs.map(xb);break;default:return null}return{type:xa,coordinates:fa}}var ec=ia(Ba.transform),ra=Ba.arcs;return ib(Za)}function ac(Ba,Za){function wb(fa){var xa=Ba.arcs[0>fa?~fa:fa],Ra=xa[0];if(Ba.transform){var Va=[0,0];xa.forEach(function(Ga){Va[0]+=Ga[0];Va[1]+=Ga[1]})}else Va=xa[xa.length-1];return 0>fa?[Va,Ra]:[Ra,Va]}
function ub(fa,xa){for(var Ra in fa){var Va=fa[Ra];delete xa[Va.start];delete Va.start;delete Va.end;Va.forEach(function(Ga){sb[0>Ga?~Ga:Ga]=1});ec.push(Va)}}var sb={},xb={},ib={},ec=[],ra=-1;Za.forEach(function(fa,xa){var Ra=Ba.arcs[0>fa?~fa:fa];3>Ra.length&&!Ra[1][0]&&!Ra[1][1]&&(Ra=Za[++ra],Za[ra]=fa,Za[xa]=Ra)});Za.forEach(function(fa){var xa=wb(fa),Ra=xa[0],Va=xa[1];(xa=ib[Ra])?(delete ib[xa.end],xa.push(fa),xa.end=Va,(fa=xb[Va])?(delete xb[fa.start],Ra=fa===xa?xa:xa.concat(fa),xb[Ra.start=xa.start]=
ib[Ra.end=fa.end]=Ra):xb[xa.start]=ib[xa.end]=xa):(xa=xb[Va])?(delete xb[xa.start],xa.unshift(fa),xa.start=Ra,(fa=ib[Ra])?(delete ib[fa.end],Ra=fa===xa?xa:fa.concat(xa),xb[Ra.start=fa.start]=ib[Ra.end=xa.end]=Ra):xb[xa.start]=ib[xa.end]=xa):(xa=[fa],xb[xa.start=Ra]=ib[xa.end=Va]=xa)});ub(ib,xb);ub(xb,ib);Za.forEach(function(fa){sb[0>fa?~fa:fa]||ec.push([fa])});return ec}function Xb(Ba,Za,wb){var ub;if(1<arguments.length)var sb=mc(Ba,Za,wb);else{var xb=0;for(sb=Array(ub=Ba.arcs.length);xb<ub;++xb)sb[xb]=
xb}return{type:"MultiLineString",arcs:ac(Ba,sb)}}function mc(Ba,Za,wb){function ub(xa){var Ra=0>xa?~xa:xa;(ra[Ra]||(ra[Ra]=[])).push({i:xa,g:fa})}function sb(xa){xa.forEach(ub)}function xb(xa){xa.forEach(sb)}function ib(xa){switch(fa=xa,xa.type){case "GeometryCollection":xa.geometries.forEach(ib);break;case "LineString":sb(xa.arcs);break;case "MultiLineString":case "Polygon":xb(xa.arcs);break;case "MultiPolygon":xa.arcs.forEach(xb)}}var ec=[],ra=[],fa;ib(Za);ra.forEach(null==wb?function(xa){ec.push(xa[0].i)}:
function(xa){wb(xa[0].g,xa[xa.length-1].g)&&ec.push(xa[0].i)});return ec}function Cb(Ba,Za){function wb(ra){switch(ra.type){case "GeometryCollection":ra.geometries.forEach(wb);break;case "Polygon":ub(ra.arcs);break;case "MultiPolygon":ra.arcs.forEach(ub)}}function ub(ra){ra.forEach(function(fa){fa.forEach(function(xa){(xb[xa=0>xa?~xa:xa]||(xb[xa]=[])).push(ra)})});ib.push(ra)}function sb(ra){ra=Yb(Ba,{type:"Polygon",arcs:[ra]}).coordinates[0];for(var fa=-1,xa=ra.length,Ra,Va=ra[xa-1],Ga=0;++fa<xa;)Ra=
Va,Va=ra[fa],Ga+=Ra[0]*Va[1]-Ra[1]*Va[0];return Math.abs(Ga)}var xb={},ib=[],ec=[];Za.forEach(wb);ib.forEach(function(ra){if(!ra._){var fa=[],xa=[ra];ra._=1;for(ec.push(fa);ra=xa.pop();)fa.push(ra),ra.forEach(function(Ra){Ra.forEach(function(Va){xb[0>Va?~Va:Va].forEach(function(Ga){Ga._||(Ga._=1,xa.push(Ga))})})})}});ib.forEach(function(ra){delete ra._});return{type:"MultiPolygon",arcs:ec.map(function(ra){var fa=[];ra.forEach(function(Ga){Ga.forEach(function(hb){hb.forEach(function(bb){2>xb[0>bb?
~bb:bb].length&&fa.push(bb)})})});fa=ac(Ba,fa);if(1<(ra=fa.length))for(var xa=1,Ra=sb(fa[0]),Va;xa<ra;++xa)(Va=sb(fa[xa]))>Ra&&(Ra=fa[0],fa[0]=fa[xa],fa[xa]=Ra,Ra=Va);return fa}).filter(function(ra){return 0<ra.length})}}function Ub(Ba,Za){for(var wb=0,ub=Ba.length;wb<ub;){var sb=wb+ub>>>1;Ba[sb]<Za?wb=sb+1:ub=sb}return wb}function jc(Ba){if(null==Ba)return h;var Za,wb,ub=Ba.scale[0],sb=Ba.scale[1],xb=Ba.translate[0],ib=Ba.translate[1];return function(ec,ra){ra||(Za=wb=0);ra=2;var fa=ec.length,xa=
Array(fa),Ra=Math.round((ec[0]-xb)/ub),Va=Math.round((ec[1]-ib)/sb);xa[0]=Ra-Za;Za=Ra;xa[1]=Va-wb;for(wb=Va;ra<fa;)xa[ra]=ec[ra],++ra;return xa}}u.bbox=ab;u.feature=function(Ba,Za){"string"===typeof Za&&(Za=Ba.objects[Za]);return"GeometryCollection"===Za.type?{type:"FeatureCollection",features:Za.geometries.map(function(wb){return zb(Ba,wb)})}:zb(Ba,Za)};u.merge=function(Ba){return Yb(Ba,Cb.apply(this,arguments))};u.mergeArcs=Cb;u.mesh=function(Ba){return Yb(Ba,Xb.apply(this,arguments))};u.meshArcs=
Xb;u.neighbors=function(Ba){function Za(hb,bb){hb.forEach(function(tb){0>tb&&(tb=~tb);var Pb=sb[tb];Pb?Pb.push(bb):sb[tb]=[bb]})}function wb(hb,bb){hb.forEach(function(tb){Za(tb,bb)})}function ub(hb,bb){if("GeometryCollection"===hb.type)hb.geometries.forEach(function(tb){ub(tb,bb)});else if(hb.type in ib)ib[hb.type](hb.arcs,bb)}var sb={},xb=Ba.map(function(){return[]}),ib={LineString:Za,MultiLineString:wb,Polygon:wb,MultiPolygon:function(hb,bb){hb.forEach(function(tb){wb(tb,bb)})}};Ba.forEach(ub);
for(var ec in sb){Ba=sb[ec];for(var ra=Ba.length,fa=0;fa<ra;++fa)for(var xa=fa+1;xa<ra;++xa){var Ra=Ba[fa],Va=Ba[xa],Ga;(Ga=xb[Ra])[ec=Ub(Ga,Va)]!==Va&&Ga.splice(ec,0,Va);(Ga=xb[Va])[ec=Ub(Ga,Ra)]!==Ra&&Ga.splice(ec,0,Ra)}}return xb};u.quantize=function(Ba,Za){function wb(Ra){return fa(Ra)}function ub(Ra){switch(Ra.type){case "GeometryCollection":var Va={type:"GeometryCollection",geometries:Ra.geometries.map(ub)};break;case "Point":Va={type:"Point",coordinates:fa(Ra.coordinates)};break;case "MultiPoint":Va=
{type:"MultiPoint",coordinates:Ra.coordinates.map(wb)};break;default:return Ra}null!=Ra.id&&(Va.id=Ra.id);null!=Ra.bbox&&(Va.bbox=Ra.bbox);null!=Ra.properties&&(Va.properties=Ra.properties);return Va}if(Ba.transform)throw Error("already quantized");if(Za&&Za.scale)var sb=Ba.bbox;else{if(!(2<=(ra=Math.floor(Za))))throw Error("n must be ≥2");sb=Ba.bbox||ab(Ba);Za=sb[0];var xb=sb[1],ib=sb[2],ec=sb[3],ra;Za={scale:[ib-Za?(ib-Za)/(ra-1):1,ec-xb?(ec-xb)/(ra-1):1],translate:[Za,xb]}}var fa=jc(Za),xa;xb=
Ba.objects;ib={};for(xa in xb)ib[xa]=ub(xb[xa]);return{type:"Topology",bbox:sb,transform:Za,objects:ib,arcs:Ba.arcs.map(function(Ra){var Va=0,Ga=1,hb=Ra.length,bb,tb=Array(hb);for(tb[0]=fa(Ra[0],0);++Va<hb;)if((bb=fa(Ra[Va],Va))[0]||bb[1])tb[Ga++]=bb;1===Ga&&(tb[Ga++]=[0,0]);tb.length=Ga;return tb})}};u.transform=ia;u.untransform=jc;Object.defineProperty(u,"__esModule",{value:!0})})};
shadow$provide[23]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(21)):"function"===typeof define&&define.amd?define(["exports","vega-util"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega))})(this,function(u,h){function ia(W){const Ea=h.array(W).slice(),Lb={};Ea.length||h.error("Missing time unit.");Ea.forEach(oc=>{h.hasOwnProperty(Ga,oc)?Lb[oc]=1:h.error(`Invalid time unit: ${oc}.`)});1<(Lb.week||Lb.day?1:0)+(Lb.quarter||Lb.month||
Lb.date?1:0)+(Lb.dayofyear?1:0)&&h.error(`Incompatible time units: ${W}`);Ea.sort((oc,$b)=>Ga[oc]-Ga[$b]);return Ea}function ab(W,Ea,Lb,oc){function $b(Mb){return W(Mb=0===arguments.length?new Date:new Date(+Mb)),Mb}$b.floor=Mb=>(W(Mb=new Date(+Mb)),Mb);$b.ceil=Mb=>(W(Mb=new Date(Mb-1)),Ea(Mb,1),W(Mb),Mb);$b.round=Mb=>{const Qb=$b(Mb),xc=$b.ceil(Mb);return Mb-Qb<xc-Mb?Qb:xc};$b.offset=(Mb,Qb)=>(Ea(Mb=new Date(+Mb),null==Qb?1:Math.floor(Qb)),Mb);$b.range=(Mb,Qb,xc)=>{const ed=[];Mb=$b.ceil(Mb);xc=
null==xc?1:Math.floor(xc);if(!(Mb<Qb&&0<xc))return ed;let qa;do ed.push(qa=new Date(+Mb)),Ea(Mb,xc),W(Mb);while(qa<Mb&&Mb<Qb);return ed};$b.filter=Mb=>ab(Qb=>{if(Qb>=Qb)for(;W(Qb),!Mb(Qb);)Qb.setTime(Qb-1)},(Qb,xc)=>{if(Qb>=Qb)if(0>xc)for(;0>=++xc;)for(;Ea(Qb,-1),!Mb(Qb););else for(;0<=--xc;)for(;Ea(Qb,1),!Mb(Qb););});Lb&&($b.count=(Mb,Qb)=>{bb.setTime(+Mb);tb.setTime(+Qb);W(bb);W(tb);return Math.floor(Lb(bb,tb))},$b.every=Mb=>{Mb=Math.floor(Mb);return isFinite(Mb)&&0<Mb?1<Mb?$b.filter(oc?Qb=>0===
oc(Qb)%Mb:Qb=>0===$b.count(0,Qb)%Mb):$b:null});return $b}function zb(W){return ab(Ea=>{Ea.setDate(Ea.getDate()-(Ea.getDay()+7-W)%7);Ea.setHours(0,0,0,0)},(Ea,Lb)=>{Ea.setDate(Ea.getDate()+7*Lb)},(Ea,Lb)=>(Lb-Ea-6E4*(Lb.getTimezoneOffset()-Ea.getTimezoneOffset()))/eb)}function Yb(W){return ab(Ea=>{Ea.setUTCDate(Ea.getUTCDate()-(Ea.getUTCDay()+7-W)%7);Ea.setUTCHours(0,0,0,0)},(Ea,Lb)=>{Ea.setUTCDate(Ea.getUTCDate()+7*Lb)},(Ea,Lb)=>(Lb-Ea)/eb)}function ac(W,Ea){return null==W||null==Ea?NaN:W<Ea?-1:W>
Ea?1:W>=Ea?0:NaN}function Xb(W,Ea){return null==W||null==Ea?NaN:Ea<W?-1:Ea>W?1:Ea>=W?0:NaN}function mc(W){function Ea(Mb,Qb,xc=0,ed=Mb.length){if(xc<ed){if(0!==Lb(Qb,Qb))return ed;do{const qa=xc+ed>>>1;0>oc(Mb[qa],Qb)?xc=qa+1:ed=qa}while(xc<ed)}return xc}let Lb,oc,$b;2!==W.length?(Lb=ac,oc=(Mb,Qb)=>ac(W(Mb),Qb),$b=(Mb,Qb)=>W(Mb)-Qb):(Lb=W===ac||W===Xb?W:Cb,$b=oc=W);return{left:Ea,center:function(Mb,Qb,xc=0,ed=Mb.length){ed=Ea(Mb,Qb,xc,ed-1);return ed>xc&&$b(Mb[ed-1],Qb)>-$b(Mb[ed],Qb)?ed-1:ed},right:function(Mb,
Qb,xc=0,ed=Mb.length){if(xc<ed){if(0!==Lb(Qb,Qb))return ed;do{const qa=xc+ed>>>1;0>=oc(Mb[qa],Qb)?xc=qa+1:ed=qa}while(xc<ed)}return xc}}}function Cb(){return 0}function Ub(W,Ea,Lb){var oc=(Ea-W)/Math.max(0,Lb),$b=Math.floor(Math.log10(oc));oc/=Math.pow(10,$b);oc=oc>=z?10:oc>=C?5:oc>=H?2:1;let Mb;0>$b?(Mb=Math.pow(10,-$b)/oc,$b=Math.round(W*Mb),oc=Math.round(Ea*Mb),$b/Mb<W&&++$b,oc/Mb>Ea&&--oc,Mb=-Mb):(Mb=Math.pow(10,$b)*oc,$b=Math.round(W/Mb),oc=Math.round(Ea/Mb),$b*Mb<W&&++$b,oc*Mb>Ea&&--oc);return oc<
$b&&.5<=Lb&&2>Lb?Ub(W,Ea,2*Lb):[$b,oc,Mb]}function jc(W,Ea,Lb){return Ub(+W,+Ea,+Lb)[2]}function Ba(W,Ea,Lb){Ea=+Ea;W=+W;Lb=+Lb;const oc=Ea<W;W=oc?jc(Ea,W,Lb):jc(W,Ea,Lb);return(oc?-1:1)*(0>W?1/-W:W)}function Za(W){V.setFullYear(W);V.setMonth(0);V.setDate(1);V.setHours(0,0,0,0);return V}function wb(W){return na.count(Za(W.getFullYear())-1,W)}function ub(W){return E.count(Za(W.getFullYear())-1,W)}function sb(W,Ea,Lb,oc,$b,Mb,Qb){return 0<=W&&100>W?(Ea=new Date(-1,Ea,Lb,oc,$b,Mb,Qb),Ea.setFullYear(W),
Ea):new Date(W,Ea,Lb,oc,$b,Mb,Qb)}function xb(W){const Ea=Date.UTC(W.getUTCFullYear(),0,1);return pa.count(Ea-1,W)}function ib(W){const Ea=Date.UTC(W.getUTCFullYear(),0,1);return N.count(Ea-1,W)}function ec(W){V.setTime(Date.UTC(W,0,1));return V.getUTCDay()}function ra(W,Ea,Lb,oc,$b,Mb,Qb){return 0<=W&&100>W?(W=new Date(Date.UTC(-1,Ea,Lb,oc,$b,Mb,Qb)),W.setUTCFullYear(Lb.y),W):new Date(Date.UTC(W,Ea,Lb,oc,$b,Mb,Qb))}function fa(W,Ea,Lb,oc,$b){const Mb=Ea||1,Qb=h.peek(W);Ea=(Zb,ic,Bc)=>{Bc=Bc||Zb;
return xa(Lb[Bc],oc[Bc],Zb===Qb&&Mb,ic)};const xc=new Date;W=h.toSet(W);const ed=W.year?Ea("year"):h.constant(2012),qa=W.month?Ea("month"):W.quarter?Ea("quarter"):h.zero,Db=W.week&&W.day?Ea("day",1,"weekday"):W.week?Ea("week",1):W.day?Ea("day",1):W.date?Ea("date",1):W.dayofyear?Ea("dayofyear",1):h.one,Ua=W.hours?Ea("hours"):h.zero,yb=W.minutes?Ea("minutes"):h.zero,Hb=W.seconds?Ea("seconds"):h.zero,Nb=W.milliseconds?Ea("milliseconds"):h.zero;return function(Zb){xc.setTime(+Zb);Zb=ed(xc);return $b(Zb,
qa(xc),Db(xc,Zb),Ua(xc),yb(xc),Hb(xc),Nb(xc))}}function xa(W,Ea,Lb,oc){const $b=1>=Lb?W:oc?(Mb,Qb)=>oc+Lb*Math.floor((W(Mb,Qb)-oc)/Lb):(Mb,Qb)=>Lb*Math.floor(W(Mb,Qb)/Lb);return Ea?(Mb,Qb)=>Ea($b(Mb,Qb),Qb):$b}function Ra(W,Ea,Lb){return Ea+7*W-(Lb+6)%7}const Va="year quarter month week date day dayofyear hours minutes seconds milliseconds".split(" "),Ga=Va.reduce((W,Ea,Lb)=>(W[Ea]=1+Lb,W),{}),hb={year:"%Y ",quarter:"Q%q ",month:"%b ",date:"%d ",week:"W%U ",day:"%a ",dayofyear:"%j ",hours:"%H:00",
minutes:"00:%M",seconds:":%S",milliseconds:".%L",["year-month"]:"%Y-%m ",["year-month-date"]:"%Y-%m-%d ",["hours-minutes"]:"%H:%M"},bb=new Date,tb=new Date,Pb=ab(()=>{},(W,Ea)=>{W.setTime(+W+Ea)},(W,Ea)=>Ea-W);Pb.every=W=>{W=Math.floor(W);return isFinite(W)&&0<W?1<W?ab(Ea=>{Ea.setTime(Math.floor(Ea/W)*W)},(Ea,Lb)=>{Ea.setTime(+Ea+Lb*W)},(Ea,Lb)=>(Lb-Ea)/W):Pb:null};Pb.range;const eb=6048E5;var T=ab(W=>{W.setTime(W-W.getMilliseconds())},(W,Ea)=>{W.setTime(+W+1E3*Ea)},(W,Ea)=>(Ea-W)/1E3,W=>W.getUTCSeconds());
T.range;var Z=ab(W=>{W.setTime(W-W.getMilliseconds()-1E3*W.getSeconds())},(W,Ea)=>{W.setTime(+W+6E4*Ea)},(W,Ea)=>(Ea-W)/6E4,W=>W.getMinutes());Z.range;var ca=ab(W=>{W.setUTCSeconds(0,0)},(W,Ea)=>{W.setTime(+W+6E4*Ea)},(W,Ea)=>(Ea-W)/6E4,W=>W.getUTCMinutes());ca.range;var ha=ab(W=>{W.setTime(W-W.getMilliseconds()-1E3*W.getSeconds()-6E4*W.getMinutes())},(W,Ea)=>{W.setTime(+W+36E5*Ea)},(W,Ea)=>(Ea-W)/36E5,W=>W.getHours());ha.range;var La=ab(W=>{W.setUTCMinutes(0,0,0)},(W,Ea)=>{W.setTime(+W+36E5*Ea)},
(W,Ea)=>(Ea-W)/36E5,W=>W.getUTCHours());La.range;const na=ab(W=>W.setHours(0,0,0,0),(W,Ea)=>W.setDate(W.getDate()+Ea),(W,Ea)=>(Ea-W-6E4*(Ea.getTimezoneOffset()-W.getTimezoneOffset()))/864E5,W=>W.getDate()-1);na.range;const pa=ab(W=>{W.setUTCHours(0,0,0,0)},(W,Ea)=>{W.setUTCDate(W.getUTCDate()+Ea)},(W,Ea)=>(Ea-W)/864E5,W=>W.getUTCDate()-1);pa.range;var m=ab(W=>{W.setUTCHours(0,0,0,0)},(W,Ea)=>{W.setUTCDate(W.getUTCDate()+Ea)},(W,Ea)=>(Ea-W)/864E5,W=>Math.floor(W/864E5));m.range;const E=zb(0);m=zb(1);
var L=zb(2),w=zb(3),Q=zb(4),A=zb(5),y=zb(6);E.range;m.range;L.range;w.range;Q.range;A.range;y.range;const N=Yb(0);m=Yb(1);L=Yb(2);w=Yb(3);Q=Yb(4);A=Yb(5);y=Yb(6);N.range;m.range;L.range;w.range;Q.range;A.range;y.range;m=ab(W=>{W.setDate(1);W.setHours(0,0,0,0)},(W,Ea)=>{W.setMonth(W.getMonth()+Ea)},(W,Ea)=>Ea.getMonth()-W.getMonth()+12*(Ea.getFullYear()-W.getFullYear()),W=>W.getMonth());m.range;L=ab(W=>{W.setUTCDate(1);W.setUTCHours(0,0,0,0)},(W,Ea)=>{W.setUTCMonth(W.getUTCMonth()+Ea)},(W,Ea)=>Ea.getUTCMonth()-
W.getUTCMonth()+12*(Ea.getUTCFullYear()-W.getUTCFullYear()),W=>W.getUTCMonth());L.range;w=ab(W=>{W.setMonth(0,1);W.setHours(0,0,0,0)},(W,Ea)=>{W.setFullYear(W.getFullYear()+Ea)},(W,Ea)=>Ea.getFullYear()-W.getFullYear(),W=>W.getFullYear());w.every=W=>isFinite(W=Math.floor(W))&&0<W?ab(Ea=>{Ea.setFullYear(Math.floor(Ea.getFullYear()/W)*W);Ea.setMonth(0,1);Ea.setHours(0,0,0,0)},(Ea,Lb)=>{Ea.setFullYear(Ea.getFullYear()+Lb*W)}):null;w.range;Q=ab(W=>{W.setUTCMonth(0,1);W.setUTCHours(0,0,0,0)},(W,Ea)=>{W.setUTCFullYear(W.getUTCFullYear()+
Ea)},(W,Ea)=>Ea.getUTCFullYear()-W.getUTCFullYear(),W=>W.getUTCFullYear());Q.every=W=>isFinite(W=Math.floor(W))&&0<W?ab(Ea=>{Ea.setUTCFullYear(Math.floor(Ea.getUTCFullYear()/W)*W);Ea.setUTCMonth(0,1);Ea.setUTCHours(0,0,0,0)},(Ea,Lb)=>{Ea.setUTCFullYear(Ea.getUTCFullYear()+Lb*W)}):null;Q.range;const z=Math.sqrt(50),C=Math.sqrt(10),H=Math.sqrt(2),V=new Date,Aa={year:W=>W.getFullYear(),quarter:W=>Math.floor(W.getMonth()/3),month:W=>W.getMonth(),date:W=>W.getDate(),hours:W=>W.getHours(),minutes:W=>W.getMinutes(),
seconds:W=>W.getSeconds(),milliseconds:W=>W.getMilliseconds(),dayofyear:W=>wb(W),week:W=>ub(W),weekday:(W,Ea)=>Ra(ub(W),W.getDay(),Za(Ea).getDay()),day:(W,Ea)=>Ra(1,W.getDay(),Za(Ea).getDay())},O={quarter:W=>3*W,week:(W,Ea)=>Ra(W,0,Za(Ea).getDay())},la={year:W=>W.getUTCFullYear(),quarter:W=>Math.floor(W.getUTCMonth()/3),month:W=>W.getUTCMonth(),date:W=>W.getUTCDate(),hours:W=>W.getUTCHours(),minutes:W=>W.getUTCMinutes(),seconds:W=>W.getUTCSeconds(),milliseconds:W=>W.getUTCMilliseconds(),dayofyear:W=>
xb(W),week:W=>ib(W),day:(W,Ea)=>Ra(1,W.getUTCDay(),ec(Ea)),weekday:(W,Ea)=>Ra(ib(W),W.getUTCDay(),ec(Ea))},za={quarter:W=>3*W,week:(W,Ea)=>Ra(W,0,ec(Ea))},Ma={year:w,quarter:m.every(3),month:m,week:E,date:na,day:na,dayofyear:na,hours:ha,minutes:Z,seconds:T,milliseconds:Pb},Pa={year:Q,quarter:L.every(3),month:L,week:N,date:pa,day:pa,dayofyear:pa,hours:La,minutes:ca,seconds:T,milliseconds:Pb};T=6048E5;Z=2592E6;const Ya=31536E6,vb="year month date hours minutes seconds milliseconds".split(" ");ca=vb.slice(0,
-1);ha=ca.slice(0,-1);La=ha.slice(0,-1);m=La.slice(0,-1);L=["year","month"];const jb=["year"],Tb=[[ca,1,1E3],[ca,5,5E3],[ca,15,15E3],[ca,30,3E4],[ha,1,6E4],[ha,5,3E5],[ha,15,9E5],[ha,30,18E5],[La,1,36E5],[La,3,108E5],[La,6,216E5],[La,12,432E5],[m,1,864E5],[["year","week"],1,T],[L,1,Z],[L,3,3*Z],[jb,1,Ya]];u.DATE="date";u.DAY="day";u.DAYOFYEAR="dayofyear";u.HOURS="hours";u.MILLISECONDS="milliseconds";u.MINUTES="minutes";u.MONTH="month";u.QUARTER="quarter";u.SECONDS="seconds";u.TIME_UNITS=Va;u.WEEK=
"week";u.YEAR="year";u.dayofyear=function(W){return wb(new Date(W))};u.timeBin=function(W){var Ea=W.extent;W=W.maxbins||40;var Lb=Math.abs(h.span(Ea))/W;let oc=mc($b=>$b[2]).right(Tb,Lb);oc===Tb.length?(Lb=jb,Ea=Ba(Ea[0]/Ya,Ea[1]/Ya,W)):oc?(oc=Tb[Lb/Tb[oc-1][2]<Tb[oc][2]/Lb?oc-1:oc],Lb=oc[0],Ea=oc[1]):(Lb=vb,Ea=Math.max(Ba(Ea[0],Ea[1],W),1));return{units:Lb,step:Ea}};u.timeFloor=function(W,Ea){return fa(W,Ea||1,Aa,O,sb)};u.timeInterval=function(W){return Ma[W]};u.timeOffset=function(W,Ea,Lb){return(W=
Ma[W])?W.offset(Ea,Lb):void 0};u.timeSequence=function(W,Ea,Lb,oc){return(W=Ma[W])?W.range(Ea,Lb,oc):void 0};u.timeUnitSpecifier=function(W,Ea){Ea=h.extend({},hb,Ea);W=ia(W);const Lb=W.length;let oc="",$b,Mb,Qb;for($b=0;$b<Lb;)for(Mb=W.length;Mb>$b;--Mb)if(Qb=W.slice($b,Mb).join("-"),null!=Ea[Qb]){oc+=Ea[Qb];$b=Mb;break}return oc.trim()};u.timeUnits=ia;u.utcFloor=function(W,Ea){return fa(W,Ea||1,la,za,ra)};u.utcInterval=function(W){return Pa[W]};u.utcOffset=function(W,Ea,Lb){return(W=Pa[W])?W.offset(Ea,
Lb):void 0};u.utcSequence=function(W,Ea,Lb,oc){return(W=Pa[W])?W.range(Ea,Lb,oc):void 0};u.utcdayofyear=function(W){return xb(new Date(W))};u.utcweek=function(W){return ib(new Date(W))};u.week=function(W){return ub(new Date(W))}})};
shadow$provide[24]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(23),ob(21)):"function"===typeof define&&define.amd?define(["exports","vega-time","vega-util"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega))})(this,function(u,h,ia){function ab(ya){const Oa={};return cc=>Oa[cc]||(Oa[cc]=ya(cc))}function zb(ya,Oa,cc){var id=(Oa-ya)/Math.max(0,cc),vc=Math.floor(Math.log10(id));id/=Math.pow(10,vc);id=id>=Dd?10:id>=rd?5:id>=
we?2:1;let Hc;0>vc?(Hc=Math.pow(10,-vc)/id,vc=Math.round(ya*Hc),id=Math.round(Oa*Hc),vc/Hc<ya&&++vc,id/Hc>Oa&&--id,Hc=-Hc):(Hc=Math.pow(10,vc)*id,vc=Math.round(ya/Hc),id=Math.round(Oa/Hc),vc*Hc<ya&&++vc,id*Hc>Oa&&--id);return id<vc&&.5<=cc&&2>cc?zb(ya,Oa,2*cc):[vc,id,Hc]}function Yb(ya,Oa,cc){return zb(+ya,+Oa,+cc)[2]}function ac(ya,Oa){if(0>(Oa=(ya=Oa?ya.toExponential(Oa-1):ya.toExponential()).indexOf("e")))return null;var cc=ya.slice(0,Oa);return[1<cc.length?cc[0]+cc.slice(2):cc,+ya.slice(Oa+1)]}
function Xb(ya){return ya=ac(Math.abs(ya)),ya?ya[1]:NaN}function mc(ya,Oa){return function(cc,id){for(var vc=cc.length,Hc=[],Jc=0,Yc=ya[0],Tc=0;0<vc&&0<Yc;){Tc+Yc+1>id&&(Yc=Math.max(1,id-Tc));Hc.push(cc.substring(vc-=Yc,vc+Yc));if((Tc+=Yc+1)>id)break;Yc=ya[Jc=(Jc+1)%ya.length]}return Hc.reverse().join(Oa)}}function Cb(ya){return function(Oa){return Oa.replace(/[0-9]/g,function(cc){return ya[+cc]})}}function Ub(ya){if(!(Oa=Bd.exec(ya)))throw Error("invalid format: "+ya);var Oa;return new jc({fill:Oa[1],
align:Oa[2],sign:Oa[3],symbol:Oa[4],zero:Oa[5],width:Oa[6],comma:Oa[7],precision:Oa[8]&&Oa[8].slice(1),trim:Oa[9],type:Oa[10]})}function jc(ya){this.fill=void 0===ya.fill?" ":ya.fill+"";this.align=void 0===ya.align?"\x3e":ya.align+"";this.sign=void 0===ya.sign?"-":ya.sign+"";this.symbol=void 0===ya.symbol?"":ya.symbol+"";this.zero=!!ya.zero;this.width=void 0===ya.width?void 0:+ya.width;this.comma=!!ya.comma;this.precision=void 0===ya.precision?void 0:+ya.precision;this.trim=!!ya.trim;this.type=void 0===
ya.type?"":ya.type+""}function Ba(ya,Oa){Oa=ac(ya,Oa);if(!Oa)return ya+"";ya=Oa[0];Oa=Oa[1];return 0>Oa?"0."+Array(-Oa).join("0")+ya:ya.length>Oa+1?ya.slice(0,Oa+1)+"."+ya.slice(Oa+1):ya+Array(Oa-ya.length+2).join("0")}function Za(ya){return ya}function wb(ya){function Oa(bd){function fe(J){var ja=qe,Da=oa,Qa,Ia;if("c"===Ee)Da=l(J)+Da,J="";else{J=+J;var rb=0>J||0>1/J;J=isNaN(J)?qd:l(Math.abs(J),Ze);if(Ae){var nb=J.length,tc=1,wc=-1;a:for(;tc<nb;++tc)switch(J[tc]){case ".":wc=Qa=tc;break;case "0":0===
wc&&(wc=tc);Qa=tc;break;default:if(!+J[tc])break a;0<wc&&(wc=0)}J=0<wc?J.slice(0,wc)+J.slice(Qa+1):J}rb&&0===+J&&"+"!==ne&&(rb=!1);ja=(rb?"("===ne?ne:Tc:"-"===ne||"("===ne?"":ne)+ja;Da=("s"===Ee?Ka[8+x/3]:"")+Da+(rb&&"("===ne?")":"");if(q)for(rb=-1,Qa=J.length;++rb<Qa;)if(Ia=J.charCodeAt(rb),48>Ia||57<Ia){Da=(46===Ia?Hc+J.slice(rb+1):J.slice(rb))+Da;J=J.slice(0,rb);break}}Xe&&!kf&&(J=cc(J,Infinity));Ia=ja.length+J.length+Da.length;rb=Ia<Le?Array(Le-Ia+1).join(Qe):"";Xe&&kf&&(J=cc(rb+J,rb.length?Le-
Da.length:Infinity),rb="");switch(Ke){case "\x3c":J=ja+J+Da+rb;break;case "\x3d":J=ja+rb+J+Da;break;case "^":J=rb.slice(0,Ia=rb.length>>1)+ja+J+Da+rb.slice(Ia);break;default:J=rb+ja+J+Da}return Jc(J)}bd=Ub(bd);var Qe=bd.fill,Ke=bd.align,ne=bd.sign,Ye=bd.symbol,kf=bd.zero,Le=bd.width,Xe=bd.comma,Ze=bd.precision,Ae=bd.trim,Ee=bd.type;"n"===Ee?(Xe=!0,Ee="g"):K[Ee]||(void 0===Ze&&(Ze=12),Ae=!0,Ee="g");if(kf||"0"===Qe&&"\x3d"===Ke)kf=!0,Qe="0",Ke="\x3d";var qe="$"===Ye?id:"#"===Ye&&/[boxX]/.test(Ee)?"0"+
Ee.toLowerCase():"",oa="$"===Ye?vc:/[%p]/.test(Ee)?Yc:"",l=K[Ee],q=/[defgprs%]/.test(Ee);Ze=void 0===Ze?6:/[gprs]/.test(Ee)?Math.max(1,Math.min(21,Ze)):Math.max(0,Math.min(20,Ze));fe.toString=function(){return bd+""};return fe}var cc=void 0===ya.grouping||void 0===ya.thousands?Za:mc(ua.call(ya.grouping,Number),ya.thousands+""),id=void 0===ya.currency?"":ya.currency[0]+"",vc=void 0===ya.currency?"":ya.currency[1]+"",Hc=void 0===ya.decimal?".":ya.decimal+"",Jc=void 0===ya.numerals?Za:Cb(ua.call(ya.numerals,
String)),Yc=void 0===ya.percent?"%":ya.percent+"",Tc=void 0===ya.minus?"−":ya.minus+"",qd=void 0===ya.nan?"NaN":ya.nan+"";return{format:Oa,formatPrefix:function(bd,fe){var Qe=Oa((bd=Ub(bd),bd.type="f",bd));bd=3*Math.max(-8,Math.min(8,Math.floor(Xb(fe)/3)));var Ke=Math.pow(10,-bd),ne=Ka[8+bd/3];return function(Ye){return Qe(Ke*Ye)+ne}}}}function ub(ya,Oa){return cc=>{cc=ya(cc);const id=cc.indexOf(Oa);if(0>id)return cc;a:{var vc=cc.lastIndexOf("e");if(!(0<vc)){for(vc=cc.length;--vc>id;){var Hc=cc.charCodeAt(vc);
if(48<=Hc&&57>=Hc){vc+=1;break a}}vc=void 0}}for(Hc=vc<cc.length?cc.slice(vc):"";--vc>id;)if("0"!==cc[vc]){++vc;break}return cc.slice(0,vc)+Hc}}function sb(ya){const Oa=ab(ya.format),cc=ya.formatPrefix;return{format:Oa,formatPrefix:cc,formatFloat(id){id=Ub(id||",");if(null==id.precision){id.precision=12;switch(id.type){case "%":id.precision-=2;break;case "e":--id.precision}return ub(Oa(id),Oa(".1f")(1)[1])}return Oa(id)},formatSpan(id,vc,Hc,Jc){Jc=Ub(null==Jc?",f":Jc);var Yc=+vc;var Tc=+id;var qd=
+Hc;Tc=(Hc=Yc<Tc)?Yb(Yc,Tc,qd):Yb(Tc,Yc,qd);Tc=(Hc?-1:1)*(0>Tc?1/-Tc:Tc);id=Math.max(Math.abs(id),Math.abs(vc));if(null==Jc.precision)switch(Jc.type){case "s":return vc=isNaN,Tc=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Xb(id)/3)))-Xb(Math.abs(Tc))),vc(vc=Tc)||(Jc.precision=vc),cc(Jc,id);case "":case "e":case "g":case "p":case "r":vc=isNaN;Tc=Math.abs(Tc);id=Math.abs(id)-Tc;id=Math.max(0,Xb(id)-Xb(Tc))+1;vc(vc=id)||(Jc.precision=vc-("e"===Jc.type));break;case "f":case "%":isNaN(vc=Math.max(0,
-Xb(Math.abs(Tc))))||(Jc.precision=vc-2*("%"===Jc.type))}return Oa(Jc)}}}function xb(){return Sb=sb({format:Bb,formatPrefix:bc})}function ib(ya){return sb(wb(ya))}function ec(ya){return arguments.length?Sb=ib(ya):Sb}function ra(ya,Oa,cc,id){function vc(Hc){return ya(Hc=0===arguments.length?new Date:new Date(+Hc)),Hc}vc.floor=Hc=>(ya(Hc=new Date(+Hc)),Hc);vc.ceil=Hc=>(ya(Hc=new Date(Hc-1)),Oa(Hc,1),ya(Hc),Hc);vc.round=Hc=>{const Jc=vc(Hc),Yc=vc.ceil(Hc);return Hc-Jc<Yc-Hc?Jc:Yc};vc.offset=(Hc,Jc)=>
(Oa(Hc=new Date(+Hc),null==Jc?1:Math.floor(Jc)),Hc);vc.range=(Hc,Jc,Yc)=>{const Tc=[];Hc=vc.ceil(Hc);Yc=null==Yc?1:Math.floor(Yc);if(!(Hc<Jc&&0<Yc))return Tc;let qd;do Tc.push(qd=new Date(+Hc)),Oa(Hc,Yc),ya(Hc);while(qd<Hc&&Hc<Jc);return Tc};vc.filter=Hc=>ra(Jc=>{if(Jc>=Jc)for(;ya(Jc),!Hc(Jc);)Jc.setTime(Jc-1)},(Jc,Yc)=>{if(Jc>=Jc)if(0>Yc)for(;0>=++Yc;)for(;Oa(Jc,-1),!Hc(Jc););else for(;0<=--Yc;)for(;Oa(Jc,1),!Hc(Jc););});cc&&(vc.count=(Hc,Jc)=>{nc.setTime(+Hc);Kc.setTime(+Jc);ya(nc);ya(Kc);return Math.floor(cc(nc,
Kc))},vc.every=Hc=>{Hc=Math.floor(Hc);return isFinite(Hc)&&0<Hc?1<Hc?vc.filter(id?Jc=>0===id(Jc)%Hc:Jc=>0===vc.count(0,Jc)%Hc):vc:null});return vc}function fa(ya){return ra(Oa=>{Oa.setDate(Oa.getDate()-(Oa.getDay()+7-ya)%7);Oa.setHours(0,0,0,0)},(Oa,cc)=>{Oa.setDate(Oa.getDate()+7*cc)},(Oa,cc)=>(cc-Oa-6E4*(cc.getTimezoneOffset()-Oa.getTimezoneOffset()))/6048E5)}function xa(ya){return ra(Oa=>{Oa.setUTCDate(Oa.getUTCDate()-(Oa.getUTCDay()+7-ya)%7);Oa.setUTCHours(0,0,0,0)},(Oa,cc)=>{Oa.setUTCDate(Oa.getUTCDate()+
7*cc)},(Oa,cc)=>(cc-Oa)/6048E5)}function Ra(ya){if(0<=ya.y&&100>ya.y){var Oa=new Date(-1,ya.m,ya.d,ya.H,ya.M,ya.S,ya.L);Oa.setFullYear(ya.y);return Oa}return new Date(ya.y,ya.m,ya.d,ya.H,ya.M,ya.S,ya.L)}function Va(ya){if(0<=ya.y&&100>ya.y){var Oa=new Date(Date.UTC(-1,ya.m,ya.d,ya.H,ya.M,ya.S,ya.L));Oa.setUTCFullYear(ya.y);return Oa}return new Date(Date.UTC(ya.y,ya.m,ya.d,ya.H,ya.M,ya.S,ya.L))}function Ga(ya,Oa,cc){return{y:ya,m:Oa,d:cc,H:0,M:0,S:0,L:0}}function hb(ya){function Oa(q,J){return function(ja){var Da=
[],Qa=-1,Ia=0,rb=q.length,nb,tc;for(ja instanceof Date||(ja=new Date(+ja));++Qa<rb;)if(37===q.charCodeAt(Qa)){Da.push(q.slice(Ia,Qa));null!=(Ia=Vb[nb=q.charAt(++Qa)])?nb=q.charAt(++Qa):Ia="e"===nb?" ":"0";if(tc=J[nb])nb=tc(ja,Ia);Da.push(nb);Ia=Qa+1}Da.push(q.slice(Ia,Qa));return Da.join("")}}function cc(q,J){return function(ja){var Da=Ga(1900,void 0,1);if(id(Da,q,ja+="",0)!=ja.length)return null;if("Q"in Da)return new Date(Da.Q);if("s"in Da)return new Date(1E3*Da.s+("L"in Da?Da.L:0));!J||"Z"in Da||
(Da.Z=0);"p"in Da&&(Da.H=Da.H%12+12*Da.p);void 0===Da.m&&(Da.m="q"in Da?Da.q:0);if("V"in Da){if(1>Da.V||53<Da.V)return null;"w"in Da||(Da.w=1);if("Z"in Da){ja=Va(Ga(Da.y,0,1));var Qa=ja.getUTCDay();ja=4<Qa||0===Qa?tf.ceil(ja):tf(ja);ja=Xc.offset(ja,7*(Da.V-1));Da.y=ja.getUTCFullYear();Da.m=ja.getUTCMonth();Da.d=ja.getUTCDate()+(Da.w+6)%7}else ja=Ra(Ga(Da.y,0,1)),Qa=ja.getDay(),ja=4<Qa||0===Qa?xd.ceil(ja):xd(ja),ja=Ac.offset(ja,7*(Da.V-1)),Da.y=ja.getFullYear(),Da.m=ja.getMonth(),Da.d=ja.getDate()+
(Da.w+6)%7}else if("W"in Da||"U"in Da)"w"in Da||(Da.w="u"in Da?Da.u%7:"W"in Da?1:0),Qa="Z"in Da?Va(Ga(Da.y,0,1)).getUTCDay():Ra(Ga(Da.y,0,1)).getDay(),Da.m=0,Da.d="W"in Da?(Da.w+6)%7+7*Da.W-(Qa+5)%7:Da.w+7*Da.U-(Qa+6)%7;return"Z"in Da?(Da.H+=Da.Z/100|0,Da.M+=Da.Z%100,Va(Da)):Ra(Da)}}function id(q,J,ja,Da){for(var Qa=0,Ia=J.length,rb=ja.length,nb;Qa<Ia;){if(Da>=rb)return-1;nb=J.charCodeAt(Qa++);if(37===nb){if(nb=J.charAt(Qa++),nb=l[nb in Vb?J.charAt(Qa++):nb],!nb||0>(Da=nb(q,ja,Da)))return-1}else if(nb!=
ja.charCodeAt(Da++))return-1}return Da}var vc=ya.dateTime,Hc=ya.date,Jc=ya.time,Yc=ya.periods,Tc=ya.days,qd=ya.shortDays,bd=ya.months,fe=ya.shortMonths,Qe=Pb(Yc),Ke=eb(Yc),ne=Pb(Tc),Ye=eb(Tc),kf=Pb(qd),Le=eb(qd),Xe=Pb(bd),Ze=eb(bd),Ae=Pb(fe),Ee=eb(fe),qe={a:function(q){return qd[q.getDay()]},A:function(q){return Tc[q.getDay()]},b:function(q){return fe[q.getMonth()]},B:function(q){return bd[q.getMonth()]},c:null,d:O,e:O,f:Ya,g:xc,G:qa,H:la,I:za,j:Ma,L:Pa,m:vb,M:jb,p:function(q){return Yc[+(12<=q.getHours())]},
q:function(q){return 1+~~(q.getMonth()/3)},Q:Jb,s:Cc,S:Tb,u:W,U:Ea,V:oc,w:$b,W:Mb,x:null,X:null,y:Qb,Y:ed,Z:Db,"%":Fb},oa={a:function(q){return qd[q.getUTCDay()]},A:function(q){return Tc[q.getUTCDay()]},b:function(q){return fe[q.getUTCMonth()]},B:function(q){return bd[q.getUTCMonth()]},c:null,d:Ua,e:Ua,f:ic,g:Ca,G:kb,H:yb,I:Hb,j:Nb,L:Zb,m:Bc,M:jd,p:function(q){return Yc[+(12<=q.getUTCHours())]},q:function(q){return 1+~~(q.getUTCMonth()/3)},Q:Jb,s:Cc,S:Vc,u:ma,U:Ha,V:R,w:t,W:ba,x:null,X:null,y:va,
Y:Sa,Z:Rb,"%":Fb},l={a:function(q,J,ja){return(J=kf.exec(J.slice(ja)))?(q.w=Le.get(J[0].toLowerCase()),ja+J[0].length):-1},A:function(q,J,ja){return(J=ne.exec(J.slice(ja)))?(q.w=Ye.get(J[0].toLowerCase()),ja+J[0].length):-1},b:function(q,J,ja){return(J=Ae.exec(J.slice(ja)))?(q.m=Ee.get(J[0].toLowerCase()),ja+J[0].length):-1},B:function(q,J,ja){return(J=Xe.exec(J.slice(ja)))?(q.m=Ze.get(J[0].toLowerCase()),ja+J[0].length):-1},c:function(q,J,ja){return id(q,vc,J,ja)},d:w,e:w,f:C,g:pa,G:na,H:A,I:A,j:Q,
L:z,m:L,M:y,p:function(q,J,ja){return(J=Qe.exec(J.slice(ja)))?(q.p=Ke.get(J[0].toLowerCase()),ja+J[0].length):-1},q:E,Q:V,s:Aa,S:N,u:Z,U:ca,V:ha,w:T,W:La,x:function(q,J,ja){return id(q,Hc,J,ja)},X:function(q,J,ja){return id(q,Jc,J,ja)},y:pa,Y:na,Z:m,"%":H};qe.x=Oa(Hc,qe);qe.X=Oa(Jc,qe);qe.c=Oa(vc,qe);oa.x=Oa(Hc,oa);oa.X=Oa(Jc,oa);oa.c=Oa(vc,oa);return{format:function(q){var J=Oa(q+="",qe);J.toString=function(){return q};return J},parse:function(q){var J=cc(q+="",!1);J.toString=function(){return q};
return J},utcFormat:function(q){var J=Oa(q+="",oa);J.toString=function(){return q};return J},utcParse:function(q){var J=cc(q+="",!0);J.toString=function(){return q};return J}}}function bb(ya,Oa,cc){var id=0>ya?"-":"";ya=(id?-ya:ya)+"";var vc=ya.length;return id+(vc<cc?Array(cc-vc+1).join(Oa)+ya:ya)}function tb(ya){return ya.replace(ad,"\\$\x26")}function Pb(ya){return new RegExp("^(?:"+ya.map(tb).join("|")+")","i")}function eb(ya){return new Map(ya.map((Oa,cc)=>[Oa.toLowerCase(),cc]))}function T(ya,
Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+1)))?(ya.w=+Oa[0],cc+Oa[0].length):-1}function Z(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+1)))?(ya.u=+Oa[0],cc+Oa[0].length):-1}function ca(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+2)))?(ya.U=+Oa[0],cc+Oa[0].length):-1}function ha(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+2)))?(ya.V=+Oa[0],cc+Oa[0].length):-1}function La(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+2)))?(ya.W=+Oa[0],cc+Oa[0].length):-1}function na(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,
cc+4)))?(ya.y=+Oa[0],cc+Oa[0].length):-1}function pa(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+2)))?(ya.y=+Oa[0]+(68<+Oa[0]?1900:2E3),cc+Oa[0].length):-1}function m(ya,Oa,cc){return(Oa=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Oa.slice(cc,cc+6)))?(ya.Z=Oa[1]?0:-(Oa[2]+(Oa[3]||"00")),cc+Oa[0].length):-1}function E(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+1)))?(ya.q=3*Oa[0]-3,cc+Oa[0].length):-1}function L(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+2)))?(ya.m=Oa[0]-1,cc+Oa[0].length):-1}function w(ya,
Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+2)))?(ya.d=+Oa[0],cc+Oa[0].length):-1}function Q(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+3)))?(ya.m=0,ya.d=+Oa[0],cc+Oa[0].length):-1}function A(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+2)))?(ya.H=+Oa[0],cc+Oa[0].length):-1}function y(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+2)))?(ya.M=+Oa[0],cc+Oa[0].length):-1}function N(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+2)))?(ya.S=+Oa[0],cc+Oa[0].length):-1}function z(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,
cc+3)))?(ya.L=+Oa[0],cc+Oa[0].length):-1}function C(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc,cc+6)))?(ya.L=Math.floor(Oa[0]/1E3),cc+Oa[0].length):-1}function H(ya,Oa,cc){return(ya=ld.exec(Oa.slice(cc,cc+1)))?cc+ya[0].length:-1}function V(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc)))?(ya.Q=+Oa[0],cc+Oa[0].length):-1}function Aa(ya,Oa,cc){return(Oa=Ec.exec(Oa.slice(cc)))?(ya.s=+Oa[0],cc+Oa[0].length):-1}function O(ya,Oa){return bb(ya.getDate(),Oa,2)}function la(ya,Oa){return bb(ya.getHours(),Oa,2)}function za(ya,
Oa){return bb(ya.getHours()%12||12,Oa,2)}function Ma(ya,Oa){return bb(1+Ac.count(Gb(ya),ya),Oa,3)}function Pa(ya,Oa){return bb(ya.getMilliseconds(),Oa,3)}function Ya(ya,Oa){return Pa(ya,Oa)+"000"}function vb(ya,Oa){return bb(ya.getMonth()+1,Oa,2)}function jb(ya,Oa){return bb(ya.getMinutes(),Oa,2)}function Tb(ya,Oa){return bb(ya.getSeconds(),Oa,2)}function W(ya){ya=ya.getDay();return 0===ya?7:ya}function Ea(ya,Oa){return bb(pd.count(Gb(ya)-1,ya),Oa,2)}function Lb(ya){var Oa=ya.getDay();return 4<=Oa||
0===Oa?me(ya):me.ceil(ya)}function oc(ya,Oa){ya=Lb(ya);return bb(me.count(Gb(ya),ya)+(4===Gb(ya).getDay()),Oa,2)}function $b(ya){return ya.getDay()}function Mb(ya,Oa){return bb(xd.count(Gb(ya)-1,ya),Oa,2)}function Qb(ya,Oa){return bb(ya.getFullYear()%100,Oa,2)}function xc(ya,Oa){ya=Lb(ya);return bb(ya.getFullYear()%100,Oa,2)}function ed(ya,Oa){return bb(ya.getFullYear()%1E4,Oa,4)}function qa(ya,Oa){var cc=ya.getDay();ya=4<=cc||0===cc?me(ya):me.ceil(ya);return bb(ya.getFullYear()%1E4,Oa,4)}function Db(ya){ya=
ya.getTimezoneOffset();return(0<ya?"-":(ya*=-1,"+"))+bb(ya/60|0,"0",2)+bb(ya%60,"0",2)}function Ua(ya,Oa){return bb(ya.getUTCDate(),Oa,2)}function yb(ya,Oa){return bb(ya.getUTCHours(),Oa,2)}function Hb(ya,Oa){return bb(ya.getUTCHours()%12||12,Oa,2)}function Nb(ya,Oa){return bb(1+Xc.count(pc(ya),ya),Oa,3)}function Zb(ya,Oa){return bb(ya.getUTCMilliseconds(),Oa,3)}function ic(ya,Oa){return Zb(ya,Oa)+"000"}function Bc(ya,Oa){return bb(ya.getUTCMonth()+1,Oa,2)}function jd(ya,Oa){return bb(ya.getUTCMinutes(),
Oa,2)}function Vc(ya,Oa){return bb(ya.getUTCSeconds(),Oa,2)}function ma(ya){ya=ya.getUTCDay();return 0===ya?7:ya}function Ha(ya,Oa){return bb(Ie.count(pc(ya)-1,ya),Oa,2)}function gb(ya){var Oa=ya.getUTCDay();return 4<=Oa||0===Oa?aa(ya):aa.ceil(ya)}function R(ya,Oa){ya=gb(ya);return bb(aa.count(pc(ya),ya)+(4===pc(ya).getUTCDay()),Oa,2)}function t(ya){return ya.getUTCDay()}function ba(ya,Oa){return bb(tf.count(pc(ya)-1,ya),Oa,2)}function va(ya,Oa){return bb(ya.getUTCFullYear()%100,Oa,2)}function Ca(ya,
Oa){ya=gb(ya);return bb(ya.getUTCFullYear()%100,Oa,2)}function Sa(ya,Oa){return bb(ya.getUTCFullYear()%1E4,Oa,4)}function kb(ya,Oa){var cc=ya.getUTCDay();ya=4<=cc||0===cc?aa(ya):aa.ceil(ya);return bb(ya.getUTCFullYear()%1E4,Oa,4)}function Rb(){return"+0000"}function Fb(){return"%"}function Jb(ya){return+ya}function Cc(ya){return Math.floor(+ya/1E3)}function Gc(ya,Oa,cc){cc=cc||{};ia.isObject(cc)||ia.error(`Invalid time multi-format specifier: ${cc}`);const id=Oa(h.SECONDS),vc=Oa(h.MINUTES),Hc=Oa(h.HOURS),
Jc=Oa(h.DATE),Yc=Oa(h.WEEK),Tc=Oa(h.MONTH),qd=Oa(h.QUARTER),bd=Oa(h.YEAR),fe=ya(cc[h.MILLISECONDS]||".%L"),Qe=ya(cc[h.SECONDS]||":%S"),Ke=ya(cc[h.MINUTES]||"%I:%M"),ne=ya(cc[h.HOURS]||"%I %p"),Ye=ya(cc[h.DATE]||cc[h.DAY]||"%a %d"),kf=ya(cc[h.WEEK]||"%b %d"),Le=ya(cc[h.MONTH]||"%B"),Xe=ya(cc[h.QUARTER]||"%B"),Ze=ya(cc[h.YEAR]||"%Y");return Ae=>(id(Ae)<Ae?fe:vc(Ae)<Ae?Qe:Hc(Ae)<Ae?Ke:Jc(Ae)<Ae?ne:Tc(Ae)<Ae?Yc(Ae)<Ae?Ye:kf:bd(Ae)<Ae?qd(Ae)<Ae?Le:Xe:Ze)(Ae)}function Sc(ya){const Oa=ab(ya.format),cc=ab(ya.utcFormat);
return{timeFormat:id=>ia.isString(id)?Oa(id):Gc(Oa,h.timeInterval,id),utcFormat:id=>ia.isString(id)?cc(id):Gc(cc,h.utcInterval,id),timeParse:ab(ya.parse),utcParse:ab(ya.utcParse)}}function vd(){return Wd=Sc({format:Nd,parse:ce,utcFormat:Kd,utcParse:Md})}function od(ya){return Sc(hb(ya))}function gd(ya){return arguments.length?Wd=od(ya):Wd}function Cd(ya,Oa){var cc=arguments.length;cc&&2!==cc&&ia.error("defaultLocale expects either zero or two arguments.");if(cc){cc=ec(ya);var id=gd(Oa);cc=ia.extend({},
cc,id)}else cc=ec(),id=gd(),cc=ia.extend({},cc,id);return cc}const Dd=Math.sqrt(50),rd=Math.sqrt(10),we=Math.sqrt(2);var Bd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Ub.prototype=jc.prototype;jc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var x,K={"%":(ya,
Oa)=>(100*ya).toFixed(Oa),b:ya=>Math.round(ya).toString(2),c:ya=>ya+"",d:function(ya){return 1E21<=Math.abs(ya=Math.round(ya))?ya.toLocaleString("en").replace(/,/g,""):ya.toString(10)},e:(ya,Oa)=>ya.toExponential(Oa),f:(ya,Oa)=>ya.toFixed(Oa),g:(ya,Oa)=>ya.toPrecision(Oa),o:ya=>Math.round(ya).toString(8),p:(ya,Oa)=>Ba(100*ya,Oa),r:Ba,s:function(ya,Oa){var cc=ac(ya,Oa);if(!cc)return ya+"";var id=cc[0];cc=cc[1];cc=cc-(x=3*Math.max(-8,Math.min(8,Math.floor(cc/3))))+1;var vc=id.length;return cc===vc?
id:cc>vc?id+Array(cc-vc+1).join("0"):0<cc?id.slice(0,cc)+"."+id.slice(cc):"0."+Array(1-cc).join("0")+ac(ya,Math.max(0,Oa+cc-1))[0]},X:ya=>Math.round(ya).toString(16).toUpperCase(),x:ya=>Math.round(ya).toString(16)},ua=Array.prototype.map,Ka="y z a f p n µ m  k M G T P E Z Y".split(" "),lb,Bb,bc;(function(ya){lb=wb(ya);Bb=lb.format;bc=lb.formatPrefix;return lb})({thousands:",",grouping:[3],currency:["$",""]});let Sb;xb();const nc=new Date,Kc=new Date,Ac=ra(ya=>ya.setHours(0,0,0,0),(ya,Oa)=>ya.setDate(ya.getDate()+
Oa),(ya,Oa)=>(Oa-ya-6E4*(Oa.getTimezoneOffset()-ya.getTimezoneOffset()))/864E5,ya=>ya.getDate()-1);Ac.range;const Xc=ra(ya=>{ya.setUTCHours(0,0,0,0)},(ya,Oa)=>{ya.setUTCDate(ya.getUTCDate()+Oa)},(ya,Oa)=>(Oa-ya)/864E5,ya=>ya.getUTCDate()-1);Xc.range;const kd=ra(ya=>{ya.setUTCHours(0,0,0,0)},(ya,Oa)=>{ya.setUTCDate(ya.getUTCDate()+Oa)},(ya,Oa)=>(Oa-ya)/864E5,ya=>Math.floor(ya/864E5));kd.range;const pd=fa(0),xd=fa(1),nd=fa(2),Jd=fa(3),me=fa(4),Me=fa(5),He=fa(6);pd.range;xd.range;nd.range;Jd.range;me.range;
Me.range;He.range;const Ie=xa(0),tf=xa(1),bf=xa(2),F=xa(3),aa=xa(4),Fa=xa(5),fb=xa(6);Ie.range;tf.range;bf.range;F.range;aa.range;Fa.range;fb.range;const Gb=ra(ya=>{ya.setMonth(0,1);ya.setHours(0,0,0,0)},(ya,Oa)=>{ya.setFullYear(ya.getFullYear()+Oa)},(ya,Oa)=>Oa.getFullYear()-ya.getFullYear(),ya=>ya.getFullYear());Gb.every=ya=>isFinite(ya=Math.floor(ya))&&0<ya?ra(Oa=>{Oa.setFullYear(Math.floor(Oa.getFullYear()/ya)*ya);Oa.setMonth(0,1);Oa.setHours(0,0,0,0)},(Oa,cc)=>{Oa.setFullYear(Oa.getFullYear()+
cc*ya)}):null;Gb.range;const pc=ra(ya=>{ya.setUTCMonth(0,1);ya.setUTCHours(0,0,0,0)},(ya,Oa)=>{ya.setUTCFullYear(ya.getUTCFullYear()+Oa)},(ya,Oa)=>Oa.getUTCFullYear()-ya.getUTCFullYear(),ya=>ya.getUTCFullYear());pc.every=ya=>isFinite(ya=Math.floor(ya))&&0<ya?ra(Oa=>{Oa.setUTCFullYear(Math.floor(Oa.getUTCFullYear()/ya)*ya);Oa.setUTCMonth(0,1);Oa.setUTCHours(0,0,0,0)},(Oa,cc)=>{Oa.setUTCFullYear(Oa.getUTCFullYear()+cc*ya)}):null;pc.range;var Vb={"-":"",_:" ",0:"0"},Ec=/^\s*\d+/,ld=/^%/,ad=/[\\^$*+?|[\]().{}]/g,
Oc,Nd,ce,Kd,Md;(function(ya){Oc=hb(ya);Nd=Oc.format;ce=Oc.parse;Kd=Oc.utcFormat;Md=Oc.utcParse;return Oc})({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});let Wd;vd();
u.defaultLocale=Cd;u.locale=function(ya,Oa){ya=ya?ib(ya):ec();Oa=Oa?od(Oa):gd();return ia.extend({},ya,Oa)};u.numberFormatDefaultLocale=ec;u.numberFormatLocale=ib;u.resetDefaultLocale=function(){xb();vd();return Cd()};u.resetNumberFormatDefaultLocale=xb;u.resetTimeFormatDefaultLocale=vd;u.timeFormatDefaultLocale=gd;u.timeFormatLocale=od})};
shadow$provide[25]=function(Eb,ob,Fc,Xa){function u(zb){var Yb=zb.length;if(0<Yb%4)throw Error("Invalid string. Length must be a multiple of 4");zb=zb.indexOf("\x3d");-1===zb&&(zb=Yb);return[zb,zb===Yb?0:4-zb%4]}Xa.byteLength=function(zb){zb=u(zb);var Yb=zb[1];return 3*(zb[0]+Yb)/4-Yb};Xa.toByteArray=function(zb){var Yb=u(zb);var ac=Yb[0];Yb=Yb[1];var Xb=new ab(3*(ac+Yb)/4-Yb),mc=0,Cb=0<Yb?ac-4:ac,Ub;for(Ub=0;Ub<Cb;Ub+=4)ac=ia[zb.charCodeAt(Ub)]<<18|ia[zb.charCodeAt(Ub+1)]<<12|ia[zb.charCodeAt(Ub+
2)]<<6|ia[zb.charCodeAt(Ub+3)],Xb[mc++]=ac>>16&255,Xb[mc++]=ac>>8&255,Xb[mc++]=ac&255;2===Yb&&(ac=ia[zb.charCodeAt(Ub)]<<2|ia[zb.charCodeAt(Ub+1)]>>4,Xb[mc++]=ac&255);1===Yb&&(ac=ia[zb.charCodeAt(Ub)]<<10|ia[zb.charCodeAt(Ub+1)]<<4|ia[zb.charCodeAt(Ub+2)]>>2,Xb[mc++]=ac>>8&255,Xb[mc++]=ac&255);return Xb};Xa.fromByteArray=function(zb){for(var Yb=zb.length,ac=Yb%3,Xb=[],mc=0,Cb=Yb-ac;mc<Cb;mc+=16383){for(var Ub=Xb,jc=Ub.push,Ba,Za=zb,wb=mc+16383>Cb?Cb:mc+16383,ub=[],sb=mc;sb<wb;sb+=3)Ba=(Za[sb]<<16&
16711680)+(Za[sb+1]<<8&65280)+(Za[sb+2]&255),ub.push(h[Ba>>18&63]+h[Ba>>12&63]+h[Ba>>6&63]+h[Ba&63]);Ba=ub.join("");jc.call(Ub,Ba)}1===ac?(zb=zb[Yb-1],Xb.push(h[zb>>2]+h[zb<<4&63]+"\x3d\x3d")):2===ac&&(zb=(zb[Yb-2]<<8)+zb[Yb-1],Xb.push(h[zb>>10]+h[zb>>4&63]+h[zb<<2&63]+"\x3d"));return Xb.join("")};var h=[],ia=[],ab="undefined"!==typeof Uint8Array?Uint8Array:Array;for(Eb=0;64>Eb;++Eb)h[Eb]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[Eb],ia["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Eb)]=
Eb;ia[45]=62;ia[95]=63};
shadow$provide[26]=function(Eb,ob,Fc,Xa){Xa.read=function(u,h,ia,ab,zb){var Yb=8*zb-ab-1;var ac=(1<<Yb)-1,Xb=ac>>1,mc=-7;zb=ia?zb-1:0;var Cb=ia?-1:1,Ub=u[h+zb];zb+=Cb;ia=Ub&(1<<-mc)-1;Ub>>=-mc;for(mc+=Yb;0<mc;ia=256*ia+u[h+zb],zb+=Cb,mc-=8);Yb=ia&(1<<-mc)-1;ia>>=-mc;for(mc+=ab;0<mc;Yb=256*Yb+u[h+zb],zb+=Cb,mc-=8);if(0===ia)ia=1-Xb;else{if(ia===ac)return Yb?NaN:Infinity*(Ub?-1:1);Yb+=Math.pow(2,ab);ia-=Xb}return(Ub?-1:1)*Yb*Math.pow(2,ia-ab)};Xa.write=function(u,h,ia,ab,zb,Yb){var ac,Xb=8*Yb-zb-1,
mc=(1<<Xb)-1,Cb=mc>>1,Ub=23===zb?Math.pow(2,-24)-Math.pow(2,-77):0;Yb=ab?0:Yb-1;var jc=ab?1:-1,Ba=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);isNaN(h)||Infinity===h?(h=isNaN(h)?1:0,ab=mc):(ab=Math.floor(Math.log(h)/Math.LN2),1>h*(ac=Math.pow(2,-ab))&&(ab--,ac*=2),h=1<=ab+Cb?h+Ub/ac:h+Ub*Math.pow(2,1-Cb),2<=h*ac&&(ab++,ac/=2),ab+Cb>=mc?(h=0,ab=mc):1<=ab+Cb?(h=(h*ac-1)*Math.pow(2,zb),ab+=Cb):(h=h*Math.pow(2,Cb-1)*Math.pow(2,zb),ab=0));for(;8<=zb;u[ia+Yb]=h&255,Yb+=jc,h/=256,zb-=8);ab=ab<<zb|h;for(Xb+=zb;0<
Xb;u[ia+Yb]=ab&255,Yb+=jc,ab/=256,Xb-=8);u[ia+Yb-jc]|=128*Ba}};
shadow$provide[27]=function(Eb,ob,Fc,Xa){function u(m){if(2147483647<m)throw new RangeError('The value "'+m+'" is invalid for option "size"');m=new Uint8Array(m);Object.setPrototypeOf(m,h.prototype);return m}function h(m,E,L){if("number"===typeof m){if("string"===typeof E)throw new TypeError('The "string" argument must be of type string. Received type number');return zb(m)}return ia(m,E,L)}function ia(m,E,L){if("string"===typeof m){var w=E;if("string"!==typeof w||""===w)w="utf8";if(!h.isEncoding(w))throw new TypeError("Unknown encoding: "+
w);E=Cb(m,w)|0;L=u(E);m=L.write(m,w);m!==E&&(L=L.slice(0,m));return L}if(ArrayBuffer.isView(m))return eb(m,Uint8Array)?(m=new Uint8Array(m),m=ac(m.buffer,m.byteOffset,m.byteLength)):m=Yb(m),m;if(null==m)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(eb(m,ArrayBuffer)||m&&eb(m.buffer,ArrayBuffer)||"undefined"!==typeof SharedArrayBuffer&&(eb(m,SharedArrayBuffer)||m&&eb(m.buffer,SharedArrayBuffer)))return ac(m,
E,L);if("number"===typeof m)throw new TypeError('The "value" argument must not be of type number. Received type number');w=m.valueOf&&m.valueOf();if(null!=w&&w!==m)return h.from(w,E,L);if(w=Xb(m))return w;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof m[Symbol.toPrimitive])return h.from(m[Symbol.toPrimitive]("string"),E,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);}
function ab(m){if("number"!==typeof m)throw new TypeError('"size" argument must be of type number');if(0>m)throw new RangeError('The value "'+m+'" is invalid for option "size"');}function zb(m){ab(m);return u(0>m?0:mc(m)|0)}function Yb(m){const E=0>m.length?0:mc(m.length)|0,L=u(E);for(let w=0;w<E;w+=1)L[w]=m[w]&255;return L}function ac(m,E,L){if(0>E||m.byteLength<E)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<E+(L||0))throw new RangeError('"length" is outside of buffer bounds');
m=void 0===E&&void 0===L?new Uint8Array(m):void 0===L?new Uint8Array(m,E):new Uint8Array(m,E,L);Object.setPrototypeOf(m,h.prototype);return m}function Xb(m){if(h.isBuffer(m)){var E=mc(m.length)|0;const L=u(E);if(0===L.length)return L;m.copy(L,0,0,E);return L}if(void 0!==m.length)return(E="number"!==typeof m.length)||(E=m.length,E=E!==E),E?u(0):Yb(m);if("Buffer"===m.type&&Array.isArray(m.data))return Yb(m.data)}function mc(m){if(2147483647<=m)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
(2147483647).toString(16)+" bytes");return m|0}function Cb(m,E){if(h.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||eb(m,ArrayBuffer))return m.byteLength;if("string"!==typeof m)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const L=m.length,w=2<arguments.length&&!0===arguments[2];if(!w&&0===L)return 0;let Q=!1;for(;;)switch(E){case "ascii":case "latin1":case "binary":return L;case "utf8":case "utf-8":return bb(m).length;
case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*L;case "hex":return L>>>1;case "base64":return tb(m).length;default:if(Q)return w?-1:bb(m).length;E=(""+E).toLowerCase();Q=!0}}function Ub(m,E,L){let w=!1;if(void 0===E||0>E)E=0;if(E>this.length)return"";if(void 0===L||L>this.length)L=this.length;if(0>=L)return"";L>>>=0;E>>>=0;if(L<=E)return"";for(m||(m="utf8");;)switch(m){case "hex":m=E;E=this.length;if(!m||0>m)m=0;if(!L||0>L||L>E)L=E;for(E="";m<L;++m)E+=pa[this[m]];return E;case "utf8":case "utf-8":return wb(this,
E,L);case "ascii":m=E;E="";for(L=Math.min(this.length,L);m<L;++m)E+=String.fromCharCode(this[m]&127);return E;case "latin1":case "binary":m=E;E="";for(L=Math.min(this.length,L);m<L;++m)E+=String.fromCharCode(this[m]);return E;case "base64":return m=E,L=0===m&&L===this.length?ca.fromByteArray(this):ca.fromByteArray(this.slice(m,L)),L;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":L=this.slice(E,L);m="";for(E=0;E<L.length-1;E+=2)m+=String.fromCharCode(L[E]+256*L[E+1]);return m;default:if(w)throw new TypeError("Unknown encoding: "+
m);m=(m+"").toLowerCase();w=!0}}function jc(m,E,L){const w=m[E];m[E]=m[L];m[L]=w}function Ba(m,E,L,w,Q){if(0===m.length)return-1;"string"===typeof L?(w=L,L=0):2147483647<L?L=2147483647:-2147483648>L&&(L=-2147483648);L=+L;L!==L&&(L=Q?0:m.length-1);0>L&&(L=m.length+L);if(L>=m.length){if(Q)return-1;L=m.length-1}else if(0>L)if(Q)L=0;else return-1;"string"===typeof E&&(E=h.from(E,w));if(h.isBuffer(E))return 0===E.length?-1:Za(m,E,L,w,Q);if("number"===typeof E)return E&=255,"function"===typeof Uint8Array.prototype.indexOf?
Q?Uint8Array.prototype.indexOf.call(m,E,L):Uint8Array.prototype.lastIndexOf.call(m,E,L):Za(m,[E],L,w,Q);throw new TypeError("val must be string, number or Buffer");}function Za(m,E,L,w,Q){function A(C,H){return 1===y?C[H]:C.readUInt16BE(H*y)}let y=1;var N=m.length;let z=E.length;if(void 0!==w&&(w=String(w).toLowerCase(),"ucs2"===w||"ucs-2"===w||"utf16le"===w||"utf-16le"===w)){if(2>m.length||2>E.length)return-1;y=2;N/=2;z/=2;L/=2}if(Q)for(w=-1;L<N;L++)if(A(m,L)===A(E,-1===w?0:L-w)){if(-1===w&&(w=L),
L-w+1===z)return w*y}else-1!==w&&(L-=L-w),w=-1;else for(L+z>N&&(L=N-z);0<=L;L--){N=!0;for(w=0;w<z;w++)if(A(m,L+w)!==A(E,w)){N=!1;break}if(N)return L}return-1}function wb(m,E,L){L=Math.min(m.length,L);for(var w=[];E<L;){var Q=m[E];let A=null,y=239<Q?4:223<Q?3:191<Q?2:1;if(E+y<=L){let N,z,C;switch(y){case 1:128>Q&&(A=Q);break;case 2:N=m[E+1];128===(N&192)&&(Q=(Q&31)<<6|N&63,127<Q&&(A=Q));break;case 3:N=m[E+1];z=m[E+2];128===(N&192)&&128===(z&192)&&(Q=(Q&15)<<12|(N&63)<<6|z&63,2047<Q&&(55296>Q||57343<
Q)&&(A=Q));break;case 4:N=m[E+1],z=m[E+2],C=m[E+3],128===(N&192)&&128===(z&192)&&128===(C&192)&&(Q=(Q&15)<<18|(N&63)<<12|(z&63)<<6|C&63,65535<Q&&1114112>Q&&(A=Q))}}null===A?(A=65533,y=1):65535<A&&(A-=65536,w.push(A>>>10&1023|55296),A=56320|A&1023);w.push(A);E+=y}E=w.length;if(4096>=E)w=String.fromCharCode.apply(String,w);else{m="";for(L=0;L<E;)m+=String.fromCharCode.apply(String,w.slice(L,L+=4096));w=m}return w}function ub(m,E,L){if(0!==m%1||0>m)throw new RangeError("offset is not uint");if(m+E>L)throw new RangeError("Trying to access beyond buffer length");
}function sb(m,E,L,w,Q,A){if(!h.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(E>Q||E<A)throw new RangeError('"value" argument is out of bounds');if(L+w>m.length)throw new RangeError("Index out of range");}function xb(m,E,L,w,Q){Va(E,w,Q,m,L,7);w=Number(E&BigInt(4294967295));m[L++]=w;w>>=8;m[L++]=w;w>>=8;m[L++]=w;m[L++]=w>>8;E=Number(E>>BigInt(32)&BigInt(4294967295));m[L++]=E;E>>=8;m[L++]=E;E>>=8;m[L++]=E;m[L++]=E>>8;return L}function ib(m,E,L,w,Q){Va(E,w,Q,m,L,
7);w=Number(E&BigInt(4294967295));m[L+7]=w;w>>=8;m[L+6]=w;w>>=8;m[L+5]=w;m[L+4]=w>>8;E=Number(E>>BigInt(32)&BigInt(4294967295));m[L+3]=E;E>>=8;m[L+2]=E;E>>=8;m[L+1]=E;m[L]=E>>8;return L+8}function ec(m,E,L,w,Q,A){if(L+w>m.length)throw new RangeError("Index out of range");if(0>L)throw new RangeError("Index out of range");}function ra(m,E,L,w,Q){E=+E;L>>>=0;Q||ec(m,E,L,4,3.4028234663852886E38,-3.4028234663852886E38);ha.write(m,E,L,w,23,4);return L+4}function fa(m,E,L,w,Q){E=+E;L>>>=0;Q||ec(m,E,L,8,
1.7976931348623157E308,-1.7976931348623157E308);ha.write(m,E,L,w,52,8);return L+8}function xa(m,E,L){La[m]=class extends L{constructor(){super();Object.defineProperty(this,"message",{value:E.apply(this,arguments),writable:!0,configurable:!0});this.name=`${this.name} [${m}]`;this.stack;delete this.name}get code(){return m}set code(w){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:w,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}function Ra(m){let E=
"",L=m.length;const w="-"===m[0]?1:0;for(;L>=w+4;L-=3)E=`_${m.slice(L-3,L)}${E}`;return`${m.slice(0,L)}${E}`}function Va(m,E,L,w,Q,A){if(m>L||m<E)throw w="bigint"===typeof E?"n":"",new La.ERR_OUT_OF_RANGE("value",3<A?0===E||E===BigInt(0)?`>= 0${w} and < 2${w} ** ${8*(A+1)}${w}`:`>= -(2${w} ** ${8*(A+1)-1}${w}) and < 2 ** `+`${8*(A+1)-1}${w}`:`>= ${E}${w} and <= ${L}${w}`,m);Ga(Q,"offset");void 0!==w[Q]&&void 0!==w[Q+A]||hb(Q,w.length-(A+1))}function Ga(m,E){if("number"!==typeof m)throw new La.ERR_INVALID_ARG_TYPE(E,
"number",m);}function hb(m,E,L){if(Math.floor(m)!==m)throw Ga(m,L),new La.ERR_OUT_OF_RANGE(L||"offset","an integer",m);if(0>E)throw new La.ERR_BUFFER_OUT_OF_BOUNDS;throw new La.ERR_OUT_OF_RANGE(L||"offset",`>= ${L?1:0} and <= ${E}`,m);}function bb(m,E){E=E||Infinity;let L;const w=m.length;let Q=null;const A=[];for(let y=0;y<w;++y){L=m.charCodeAt(y);if(55295<L&&57344>L){if(!Q){if(56319<L){-1<(E-=3)&&A.push(239,191,189);continue}else if(y+1===w){-1<(E-=3)&&A.push(239,191,189);continue}Q=L;continue}if(56320>
L){-1<(E-=3)&&A.push(239,191,189);Q=L;continue}L=(Q-55296<<10|L-56320)+65536}else Q&&-1<(E-=3)&&A.push(239,191,189);Q=null;if(128>L){if(0>--E)break;A.push(L)}else if(2048>L){if(0>(E-=2))break;A.push(L>>6|192,L&63|128)}else if(65536>L){if(0>(E-=3))break;A.push(L>>12|224,L>>6&63|128,L&63|128)}else if(1114112>L){if(0>(E-=4))break;A.push(L>>18|240,L>>12&63|128,L>>6&63|128,L&63|128)}else throw Error("Invalid code point");}return A}function tb(m){var E=ca,L=E.toByteArray;m=m.split("\x3d")[0];m=m.trim().replace(na,
"");if(2>m.length)m="";else for(;0!==m.length%4;)m+="\x3d";return L.call(E,m)}function Pb(m,E,L,w){let Q;for(Q=0;Q<w&&!(Q+L>=E.length||Q>=m.length);++Q)E[Q+L]=m[Q];return Q}function eb(m,E){return m instanceof E||null!=m&&null!=m.constructor&&null!=m.constructor.name&&m.constructor.name===E.name}function T(m){return"undefined"===typeof BigInt?Z:m}function Z(){throw Error("BigInt not supported");}const ca=ob(25),ha=ob(26);Eb="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):
null;Xa.Buffer=h;Xa.SlowBuffer=function(m){+m!=m&&(m=0);return h.alloc(+m)};Xa.INSPECT_MAX_BYTES=50;Xa.kMaxLength=2147483647;h.TYPED_ARRAY_SUPPORT=function(){try{const m=new Uint8Array(1),E={foo:function(){return 42}};Object.setPrototypeOf(E,Uint8Array.prototype);Object.setPrototypeOf(m,E);return 42===m.foo()}catch(m){return!1}}();h.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}});Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});h.poolSize=8192;h.from=function(m,E,L){return ia(m,E,L)};Object.setPrototypeOf(h.prototype,Uint8Array.prototype);Object.setPrototypeOf(h,Uint8Array);h.alloc=function(m,E,L){ab(m);m=0>=m?u(m):void 0!==E?"string"===typeof L?u(m).fill(E,L):u(m).fill(E):u(m);return m};h.allocUnsafe=
function(m){return zb(m)};h.allocUnsafeSlow=function(m){return zb(m)};h.isBuffer=function(m){return null!=m&&!0===m._isBuffer&&m!==h.prototype};h.compare=function(m,E){eb(m,Uint8Array)&&(m=h.from(m,m.offset,m.byteLength));eb(E,Uint8Array)&&(E=h.from(E,E.offset,E.byteLength));if(!h.isBuffer(m)||!h.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===E)return 0;let L=m.length,w=E.length;for(let Q=0,A=Math.min(L,w);Q<A;++Q)if(m[Q]!==E[Q]){L=
m[Q];w=E[Q];break}return L<w?-1:w<L?1:0};h.isEncoding=function(m){switch(String(m).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};h.concat=function(m,E){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(0===m.length)return h.alloc(0);let L;if(void 0===E)for(L=E=0;L<m.length;++L)E+=m[L].length;E=h.allocUnsafe(E);let w=
0;for(L=0;L<m.length;++L){let Q=m[L];if(eb(Q,Uint8Array))w+Q.length>E.length?(h.isBuffer(Q)||(Q=h.from(Q)),Q.copy(E,w)):Uint8Array.prototype.set.call(E,Q,w);else if(h.isBuffer(Q))Q.copy(E,w);else throw new TypeError('"list" argument must be an Array of Buffers');w+=Q.length}return E};h.byteLength=Cb;h.prototype._isBuffer=!0;h.prototype.swap16=function(){const m=this.length;if(0!==m%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<m;E+=2)jc(this,E,E+1);return this};
h.prototype.swap32=function(){const m=this.length;if(0!==m%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<m;E+=4)jc(this,E,E+3),jc(this,E+1,E+2);return this};h.prototype.swap64=function(){const m=this.length;if(0!==m%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<m;E+=8)jc(this,E,E+7),jc(this,E+1,E+6),jc(this,E+2,E+5),jc(this,E+3,E+4);return this};h.prototype.toString=function(){const m=this.length;return 0===m?"":0===arguments.length?
wb(this,0,m):Ub.apply(this,arguments)};h.prototype.toLocaleString=h.prototype.toString;h.prototype.equals=function(m){if(!h.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:0===h.compare(this,m)};h.prototype.inspect=function(){let m;const E=Xa.INSPECT_MAX_BYTES;m=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim();this.length>E&&(m+=" ... ");return"\x3cBuffer "+m+"\x3e"};Eb&&(h.prototype[Eb]=h.prototype.inspect);h.prototype.compare=function(m,E,L,w,Q){eb(m,Uint8Array)&&
(m=h.from(m,m.offset,m.byteLength));if(!h.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);void 0===E&&(E=0);void 0===L&&(L=m?m.length:0);void 0===w&&(w=0);void 0===Q&&(Q=this.length);if(0>E||L>m.length||0>w||Q>this.length)throw new RangeError("out of range index");if(w>=Q&&E>=L)return 0;if(w>=Q)return-1;if(E>=L)return 1;E>>>=0;L>>>=0;w>>>=0;Q>>>=0;if(this===m)return 0;let A=Q-w,y=L-E;const N=Math.min(A,y);w=this.slice(w,Q);
m=m.slice(E,L);for(E=0;E<N;++E)if(w[E]!==m[E]){A=w[E];y=m[E];break}return A<y?-1:y<A?1:0};h.prototype.includes=function(m,E,L){return-1!==this.indexOf(m,E,L)};h.prototype.indexOf=function(m,E,L){return Ba(this,m,E,L,!0)};h.prototype.lastIndexOf=function(m,E,L){return Ba(this,m,E,L,!1)};h.prototype.write=function(m,E,L,w){if(void 0===E)w="utf8",L=this.length,E=0;else if(void 0===L&&"string"===typeof E)w=E,L=this.length,E=0;else if(isFinite(E))E>>>=0,isFinite(L)?(L>>>=0,void 0===w&&(w="utf8")):(w=L,
L=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Q=this.length-E;if(void 0===L||L>Q)L=Q;if(0<m.length&&(0>L||0>E)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");for(Q=!1;;)switch(w){case "hex":a:{E=Number(E)||0;w=this.length-E;L?(L=Number(L),L>w&&(L=w)):L=w;w=m.length;L>w/2&&(L=w/2);for(w=0;w<L;++w){Q=parseInt(m.substr(2*w,2),16);if(Q!==Q){m=w;break a}this[E+w]=Q}m=w}return m;case "utf8":case "utf-8":return Pb(bb(m,
this.length-E),this,E,L);case "ascii":case "latin1":case "binary":w=[];for(Q=0;Q<m.length;++Q)w.push(m.charCodeAt(Q)&255);return Pb(w,this,E,L);case "base64":return Pb(tb(m),this,E,L);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":var A=void 0;w=this.length-E;const y=[];for(let N=0;N<m.length&&!(0>(w-=2));++N)A=m.charCodeAt(N),Q=A>>8,A%=256,y.push(A),y.push(Q);return Pb(y,this,E,L);default:if(Q)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase();Q=!0}};h.prototype.toJSON=function(){return{type:"Buffer",
data:Array.prototype.slice.call(this._arr||this,0)}};h.prototype.slice=function(m,E){const L=this.length;m=~~m;E=void 0===E?L:~~E;0>m?(m+=L,0>m&&(m=0)):m>L&&(m=L);0>E?(E+=L,0>E&&(E=0)):E>L&&(E=L);E<m&&(E=m);m=this.subarray(m,E);Object.setPrototypeOf(m,h.prototype);return m};h.prototype.readUintLE=h.prototype.readUIntLE=function(m,E,L){m>>>=0;E>>>=0;L||ub(m,E,this.length);L=this[m];let w=1,Q=0;for(;++Q<E&&(w*=256);)L+=this[m+Q]*w;return L};h.prototype.readUintBE=h.prototype.readUIntBE=function(m,E,
L){m>>>=0;E>>>=0;L||ub(m,E,this.length);L=this[m+--E];let w=1;for(;0<E&&(w*=256);)L+=this[m+--E]*w;return L};h.prototype.readUint8=h.prototype.readUInt8=function(m,E){m>>>=0;E||ub(m,1,this.length);return this[m]};h.prototype.readUint16LE=h.prototype.readUInt16LE=function(m,E){m>>>=0;E||ub(m,2,this.length);return this[m]|this[m+1]<<8};h.prototype.readUint16BE=h.prototype.readUInt16BE=function(m,E){m>>>=0;E||ub(m,2,this.length);return this[m]<<8|this[m+1]};h.prototype.readUint32LE=h.prototype.readUInt32LE=
function(m,E){m>>>=0;E||ub(m,4,this.length);return(this[m]|this[m+1]<<8|this[m+2]<<16)+16777216*this[m+3]};h.prototype.readUint32BE=h.prototype.readUInt32BE=function(m,E){m>>>=0;E||ub(m,4,this.length);return 16777216*this[m]+(this[m+1]<<16|this[m+2]<<8|this[m+3])};h.prototype.readBigUInt64LE=T(function(m){m>>>=0;Ga(m,"offset");var E=this[m];const L=this[m+7];void 0!==E&&void 0!==L||hb(m,this.length-8);E=E+this[++m]*Math.pow(2,8)+this[++m]*Math.pow(2,16)+this[++m]*Math.pow(2,24);m=this[++m]+this[++m]*
Math.pow(2,8)+this[++m]*Math.pow(2,16)+L*Math.pow(2,24);return BigInt(E)+(BigInt(m)<<BigInt(32))});h.prototype.readBigUInt64BE=T(function(m){m>>>=0;Ga(m,"offset");var E=this[m];const L=this[m+7];void 0!==E&&void 0!==L||hb(m,this.length-8);E=E*Math.pow(2,24)+this[++m]*Math.pow(2,16)+this[++m]*Math.pow(2,8)+this[++m];m=this[++m]*Math.pow(2,24)+this[++m]*Math.pow(2,16)+this[++m]*Math.pow(2,8)+L;return(BigInt(E)<<BigInt(32))+BigInt(m)});h.prototype.readIntLE=function(m,E,L){m>>>=0;E>>>=0;L||ub(m,E,this.length);
L=this[m];let w=1,Q=0;for(;++Q<E&&(w*=256);)L+=this[m+Q]*w;L>=128*w&&(L-=Math.pow(2,8*E));return L};h.prototype.readIntBE=function(m,E,L){m>>>=0;E>>>=0;L||ub(m,E,this.length);L=E;let w=1,Q=this[m+--L];for(;0<L&&(w*=256);)Q+=this[m+--L]*w;Q>=128*w&&(Q-=Math.pow(2,8*E));return Q};h.prototype.readInt8=function(m,E){m>>>=0;E||ub(m,1,this.length);return this[m]&128?-1*(255-this[m]+1):this[m]};h.prototype.readInt16LE=function(m,E){m>>>=0;E||ub(m,2,this.length);m=this[m]|this[m+1]<<8;return m&32768?m|4294901760:
m};h.prototype.readInt16BE=function(m,E){m>>>=0;E||ub(m,2,this.length);m=this[m+1]|this[m]<<8;return m&32768?m|4294901760:m};h.prototype.readInt32LE=function(m,E){m>>>=0;E||ub(m,4,this.length);return this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24};h.prototype.readInt32BE=function(m,E){m>>>=0;E||ub(m,4,this.length);return this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]};h.prototype.readBigInt64LE=T(function(m){m>>>=0;Ga(m,"offset");const E=this[m],L=this[m+7];void 0!==E&&void 0!==L||hb(m,this.length-
8);return(BigInt(this[m+4]+this[m+5]*Math.pow(2,8)+this[m+6]*Math.pow(2,16)+(L<<24))<<BigInt(32))+BigInt(E+this[++m]*Math.pow(2,8)+this[++m]*Math.pow(2,16)+this[++m]*Math.pow(2,24))});h.prototype.readBigInt64BE=T(function(m){m>>>=0;Ga(m,"offset");var E=this[m];const L=this[m+7];void 0!==E&&void 0!==L||hb(m,this.length-8);E=(E<<24)+this[++m]*Math.pow(2,16)+this[++m]*Math.pow(2,8)+this[++m];return(BigInt(E)<<BigInt(32))+BigInt(this[++m]*Math.pow(2,24)+this[++m]*Math.pow(2,16)+this[++m]*Math.pow(2,8)+
L)});h.prototype.readFloatLE=function(m,E){m>>>=0;E||ub(m,4,this.length);return ha.read(this,m,!0,23,4)};h.prototype.readFloatBE=function(m,E){m>>>=0;E||ub(m,4,this.length);return ha.read(this,m,!1,23,4)};h.prototype.readDoubleLE=function(m,E){m>>>=0;E||ub(m,8,this.length);return ha.read(this,m,!0,52,8)};h.prototype.readDoubleBE=function(m,E){m>>>=0;E||ub(m,8,this.length);return ha.read(this,m,!1,52,8)};h.prototype.writeUintLE=h.prototype.writeUIntLE=function(m,E,L,w){m=+m;E>>>=0;L>>>=0;w||sb(this,
m,E,L,Math.pow(2,8*L)-1,0);w=1;let Q=0;for(this[E]=m&255;++Q<L&&(w*=256);)this[E+Q]=m/w&255;return E+L};h.prototype.writeUintBE=h.prototype.writeUIntBE=function(m,E,L,w){m=+m;E>>>=0;L>>>=0;w||sb(this,m,E,L,Math.pow(2,8*L)-1,0);w=L-1;let Q=1;for(this[E+w]=m&255;0<=--w&&(Q*=256);)this[E+w]=m/Q&255;return E+L};h.prototype.writeUint8=h.prototype.writeUInt8=function(m,E,L){m=+m;E>>>=0;L||sb(this,m,E,1,255,0);this[E]=m&255;return E+1};h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(m,E,L){m=
+m;E>>>=0;L||sb(this,m,E,2,65535,0);this[E]=m&255;this[E+1]=m>>>8;return E+2};h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(m,E,L){m=+m;E>>>=0;L||sb(this,m,E,2,65535,0);this[E]=m>>>8;this[E+1]=m&255;return E+2};h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(m,E,L){m=+m;E>>>=0;L||sb(this,m,E,4,4294967295,0);this[E+3]=m>>>24;this[E+2]=m>>>16;this[E+1]=m>>>8;this[E]=m&255;return E+4};h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(m,E,L){m=+m;E>>>=0;L||sb(this,
m,E,4,4294967295,0);this[E]=m>>>24;this[E+1]=m>>>16;this[E+2]=m>>>8;this[E+3]=m&255;return E+4};h.prototype.writeBigUInt64LE=T(function(m,E=0){return xb(this,m,E,BigInt(0),BigInt("0xffffffffffffffff"))});h.prototype.writeBigUInt64BE=T(function(m,E=0){return ib(this,m,E,BigInt(0),BigInt("0xffffffffffffffff"))});h.prototype.writeIntLE=function(m,E,L,w){m=+m;E>>>=0;w||(w=Math.pow(2,8*L-1),sb(this,m,E,L,w-1,-w));w=0;let Q=1,A=0;for(this[E]=m&255;++w<L&&(Q*=256);)0>m&&0===A&&0!==this[E+w-1]&&(A=1),this[E+
w]=(m/Q>>0)-A&255;return E+L};h.prototype.writeIntBE=function(m,E,L,w){m=+m;E>>>=0;w||(w=Math.pow(2,8*L-1),sb(this,m,E,L,w-1,-w));w=L-1;let Q=1,A=0;for(this[E+w]=m&255;0<=--w&&(Q*=256);)0>m&&0===A&&0!==this[E+w+1]&&(A=1),this[E+w]=(m/Q>>0)-A&255;return E+L};h.prototype.writeInt8=function(m,E,L){m=+m;E>>>=0;L||sb(this,m,E,1,127,-128);0>m&&(m=255+m+1);this[E]=m&255;return E+1};h.prototype.writeInt16LE=function(m,E,L){m=+m;E>>>=0;L||sb(this,m,E,2,32767,-32768);this[E]=m&255;this[E+1]=m>>>8;return E+
2};h.prototype.writeInt16BE=function(m,E,L){m=+m;E>>>=0;L||sb(this,m,E,2,32767,-32768);this[E]=m>>>8;this[E+1]=m&255;return E+2};h.prototype.writeInt32LE=function(m,E,L){m=+m;E>>>=0;L||sb(this,m,E,4,2147483647,-2147483648);this[E]=m&255;this[E+1]=m>>>8;this[E+2]=m>>>16;this[E+3]=m>>>24;return E+4};h.prototype.writeInt32BE=function(m,E,L){m=+m;E>>>=0;L||sb(this,m,E,4,2147483647,-2147483648);0>m&&(m=4294967295+m+1);this[E]=m>>>24;this[E+1]=m>>>16;this[E+2]=m>>>8;this[E+3]=m&255;return E+4};h.prototype.writeBigInt64LE=
T(function(m,E=0){return xb(this,m,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});h.prototype.writeBigInt64BE=T(function(m,E=0){return ib(this,m,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});h.prototype.writeFloatLE=function(m,E,L){return ra(this,m,E,!0,L)};h.prototype.writeFloatBE=function(m,E,L){return ra(this,m,E,!1,L)};h.prototype.writeDoubleLE=function(m,E,L){return fa(this,m,E,!0,L)};h.prototype.writeDoubleBE=function(m,E,L){return fa(this,m,E,!1,L)};h.prototype.copy=
function(m,E,L,w){if(!h.isBuffer(m))throw new TypeError("argument should be a Buffer");L||(L=0);w||0===w||(w=this.length);E>=m.length&&(E=m.length);E||(E=0);0<w&&w<L&&(w=L);if(w===L||0===m.length||0===this.length)return 0;if(0>E)throw new RangeError("targetStart out of bounds");if(0>L||L>=this.length)throw new RangeError("Index out of range");if(0>w)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length);m.length-E<w-L&&(w=m.length-E+L);const Q=w-L;this===m&&"function"===typeof Uint8Array.prototype.copyWithin?
this.copyWithin(E,L,w):Uint8Array.prototype.set.call(m,this.subarray(L,w),E);return Q};h.prototype.fill=function(m,E,L,w){if("string"===typeof m){"string"===typeof E?(w=E,E=0,L=this.length):"string"===typeof L&&(w=L,L=this.length);if(void 0!==w&&"string"!==typeof w)throw new TypeError("encoding must be a string");if("string"===typeof w&&!h.isEncoding(w))throw new TypeError("Unknown encoding: "+w);if(1===m.length){var Q=m.charCodeAt(0);if("utf8"===w&&128>Q||"latin1"===w)m=Q}}else"number"===typeof m?
m&=255:"boolean"===typeof m&&(m=Number(m));if(0>E||this.length<E||this.length<L)throw new RangeError("Out of range index");if(L<=E)return this;E>>>=0;L=void 0===L?this.length:L>>>0;m||(m=0);if("number"===typeof m)for(w=E;w<L;++w)this[w]=m;else{Q=h.isBuffer(m)?m:h.from(m,w);const A=Q.length;if(0===A)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(w=0;w<L-E;++w)this[w+E]=Q[w%A]}return this};const La={};xa("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:
"Attempt to access memory outside buffer bounds"},RangeError);xa("ERR_INVALID_ARG_TYPE",function(m,E){return`The "${m}" argument must be of type number. Received type ${typeof E}`},TypeError);xa("ERR_OUT_OF_RANGE",function(m,E,L){m=`The value of "${m}" is out of range.`;let w=L;if(Number.isInteger(L)&&Math.abs(L)>Math.pow(2,32))w=Ra(String(L));else if("bigint"===typeof L){w=String(L);if(L>Math.pow(BigInt(2),BigInt(32))||L<-Math.pow(BigInt(2),BigInt(32)))w=Ra(w);w+="n"}return m+` It must be ${E}. Received ${w}`},
RangeError);const na=/[^+/0-9A-Za-z-_]/g,pa=function(){const m=Array(256);for(let E=0;16>E;++E){const L=16*E;for(let w=0;16>w;++w)m[L+w]="0123456789abcdef"[E]+"0123456789abcdef"[w]}return m}()};
shadow$provide[28]=function(Eb,ob,Fc,Xa){var u=ob(27).Buffer;(function(h,ia){"object"===typeof Xa&&"undefined"!==typeof Fc?ia(Xa,ob(21),ob(22),ob(24)):"function"===typeof define&&define.amd?define(["exports","vega-util","topojson-client","vega-format"],ia):(h="undefined"!==typeof globalThis?globalThis:h||self,ia(h.vega={},h.vega,h.topojson,h.vega))})(this,function(h,ia,ab,zb){function Yb(na,pa){const m=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const E=yield m.sanitize(na,
pa),L=E.href;return E.localFile?m.file(L):m.http(L,pa)})}function ac(na,pa){const m=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){pa=ia.extend({},m.options,pa);const E=m.fileAccess,L={href:null};var w;let Q;var A=Ga.test(na.replace(hb,""));null!=na&&"string"===typeof na&&A||ia.error("Sanitize failure, invalid URI: "+ia.stringValue(na));A=Va.test(na);(w=pa.baseURL)&&!A&&(na.startsWith("/")||w.endsWith("/")||(na="/"+na),na=w+na);Q=(w=na.startsWith("file://"))||"file"===pa.mode||
"http"!==pa.mode&&!A&&E;w?na=na.slice(7):na.startsWith("//")&&("file"===pa.defaultProtocol?(na=na.slice(2),Q=!0):na=(pa.defaultProtocol||"http")+":"+na);Object.defineProperty(L,"localFile",{value:!!Q});L.href=na;pa.target&&(L.target=pa.target+"");pa.rel&&(L.rel=pa.rel+"");"image"===pa.context&&pa.crossOrigin&&(L.crossOrigin=pa.crossOrigin+"");return L})}function Xb(na){return na?pa=>new Promise((m,E)=>{na.readFile(pa,(L,w)=>{L?E(L):m(w)})}):mc}function mc(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){ia.error("No file system access.")})}
function Cb(na){return na?function(pa,m){const E=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var L=ia.extend({},E.options.http,m);const w=m&&m.response;L=yield na(pa,L);return L.ok?ia.isFunction(L[w])?L[w]():L.text():ia.error(L.status+""+L.statusText)})}:Ub}function Ub(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){ia.error("No HTTP fetch method available.")})}function jc(na,pa){if(!na||!na.length)return"unknown";const m=na.length,E=Pb.length,L=Pb.map((w,
Q)=>Q+1);for(let w=0,Q=0,A,y;w<m;++w)for(y=pa?na[w][pa]:na[w],A=0;A<E;++A)if(L[A]&&null!=y&&y===y&&!Pb[A](y)&&(L[A]=0,++Q,Q===Pb.length))return"string";return eb[L.reduce((w,Q)=>0===w?Q:w,0)-1]}function Ba(na,pa){return pa.reduce((m,E)=>{m[E]=jc(na,E);return m},{})}function Za(na){return new Function("d","return {"+na.map(function(pa,m){return JSON.stringify(pa)+": d["+m+'] || ""'}).join(",")+"}")}function wb(na,pa){var m=Za(na);return function(E,L){return pa(m(E),L,na)}}function ub(na){var pa=Object.create(null),
m=[];na.forEach(function(E){for(var L in E)L in pa||m.push(pa[L]=L)});return m}function sb(na,pa){na+="";var m=na.length;return m<pa?Array(pa-m+1).join(0)+na:na}function xb(na){function pa(A,y){function N(){if(O)return Z;if(la)return la=!1,T;var Ma,Pa=H,Ya;if(34===A.charCodeAt(Pa)){for(;H++<C&&34!==A.charCodeAt(H)||34===A.charCodeAt(++H););(Ma=H)>=C?O=!0:10===(Ya=A.charCodeAt(H++))?la=!0:13===Ya&&(la=!0,10===A.charCodeAt(H)&&++H);return A.slice(Pa+1,Ma-1).replace(/""/g,'"')}for(;H<C;){if(10===(Ya=
A.charCodeAt(Ma=H++)))la=!0;else if(13===Ya)la=!0,10===A.charCodeAt(H)&&++H;else if(Ya!==Q)continue;return A.slice(Pa,Ma)}return O=!0,A.slice(Pa,C)}var z=[],C=A.length,H=0,V=0,Aa,O=0>=C,la=!1;10===A.charCodeAt(C-1)&&--C;for(13===A.charCodeAt(C-1)&&--C;(Aa=N())!==Z;){for(var za=[];Aa!==T&&Aa!==Z;)za.push(Aa),Aa=N();y&&null==(za=y(za,V++))||z.push(za)}return z}function m(A,y){return A.map(function(N){return y.map(function(z){return L(N[z])}).join(na)})}function E(A){return A.map(L).join(na)}function L(A){if(null==
A)A="";else{if(A instanceof Date){var y=A.getUTCHours();var N=A.getUTCMinutes(),z=A.getUTCSeconds(),C=A.getUTCMilliseconds();if(isNaN(A))A="Invalid Date";else{var H=A.getUTCFullYear();A=(0>H?"-"+sb(-H,6):9999<H?"+"+sb(H,6):sb(H,4))+"-"+sb(A.getUTCMonth()+1,2)+"-"+sb(A.getUTCDate(),2)+(C?"T"+sb(y,2)+":"+sb(N,2)+":"+sb(z,2)+"."+sb(C,3)+"Z":z?"T"+sb(y,2)+":"+sb(N,2)+":"+sb(z,2)+"Z":N||y?"T"+sb(y,2)+":"+sb(N,2)+"Z":"")}y=A}else y=w.test(A+="")?'"'+A.replace(/"/g,'""')+'"':A;A=y}return A}var w=new RegExp('["'+
na+"\n\r]"),Q=na.charCodeAt(0);return{parse:function(A,y){var N,z;A=pa(A,function(C,H){if(N)return N(C,H-1);z=C;N=y?wb(C,y):Za(C)});A.columns=z||[];return A},parseRows:pa,format:function(A,y){null==y&&(y=ub(A));return[y.map(L).join(na)].concat(m(A,y)).join("\n")},formatBody:function(A,y){null==y&&(y=ub(A));return m(A,y).join("\n")},formatRows:function(A){return A.map(E).join("\n")},formatRow:E,formatValue:L}}function ib(na){const pa=function(m,E){const L={delimiter:na};return ec(m,E?ia.extend(E,L):
L)};pa.responseType="text";return pa}function ec(na,pa){pa.header&&(na=pa.header.map(ia.stringValue).join(pa.delimiter)+"\n"+na);return xb(pa.delimiter).parse(na+"")}function ra(na,pa){const m=pa&&pa.property?ia.field(pa.property):ia.identity;var E;if(E=ia.isObject(na))E=!("function"===typeof u&&ia.isFunction(u.isBuffer)&&u.isBuffer(na));E?(na=m(na),!ia.isArray(na)&&ia.isIterable(na)&&(na=[...na]),pa=pa&&pa.copy?JSON.parse(JSON.stringify(na)):na):pa=m(JSON.parse(na));return pa}function fa(na,pa){let m,
E,L,w;na=ra(na,pa);pa&&pa.feature?(m=ab.feature,L=pa.feature):pa&&pa.mesh?(m=ab.mesh,L=pa.mesh,w=ca[pa.filter]):ia.error("Missing TopoJSON feature or mesh parameter.");return(E=(E=na.objects[L])?m(na,E,w):ia.error("Invalid TopoJSON object: "+L))&&E.features||[E]}function xa(na,pa){return 1<arguments.length?(ha[na]=pa,this):ia.hasOwnProperty(ha,na)?ha[na]:null}function Ra(na,pa,m,E){if(na.length){var L=zb.timeFormatDefaultLocale();m=m||L.timeParse;E=E||L.utcParse;L=na.columns||Object.keys(na[0]);var w,
Q;"auto"===pa&&(pa=Ba(na,L));L=Object.keys(pa);var A=L.map(H=>{var V=pa[H];if(V&&(V.startsWith("date:")||V.startsWith("utc:"))){H=V.split(/:(.+)?/,2);V=H[1];if("'"===V[0]&&"'"===V[V.length-1]||'"'===V[0]&&'"'===V[V.length-1])V=V.slice(1,-1);return("utc"===H[0]?E:m)(V)}if(!tb[V])throw Error("Illegal format pattern: "+H+":"+V);return tb[V]});var y=0;var N=na.length;for(Q=L.length;y<N;++y){var z=na[y];for(w=0;w<Q;++w){var C=L[w];z[C]=A[w](z[C])}}}}const Va=/^(data:|([A-Za-z]+:)?\/\/)/,Ga=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,
hb=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,bb=na=>!Number.isNaN(+na)&&!(na instanceof Date),tb={boolean:ia.toBoolean,integer:ia.toNumber,number:ia.toNumber,date:ia.toDate,string:ia.toString,unknown:ia.identity},Pb=[na=>"true"===na||"false"===na||!0===na||!1===na,na=>bb(na)&&Number.isInteger(+na),bb,na=>!Number.isNaN(Date.parse(na))],eb=["boolean","integer","number","date"];var T={},Z={};ec.responseType="text";ra.responseType="json";const ca={interior:(na,pa)=>na!==pa,exterior:(na,
pa)=>na===pa};fa.responseType="json";const ha={dsv:ec,csv:ib(","),tsv:ib("\t"),json:ra,topojson:fa},La=function(na,pa){return m=>({options:m||{},sanitize:ac,load:Yb,fileAccess:!1,file:Xb(pa),http:Cb(na)})}("undefined"!==typeof fetch&&fetch,null);h.format=ha;h.formats=xa;h.inferType=jc;h.inferTypes=Ba;h.loader=La;h.read=function(na,pa,m,E){pa=pa||{};const L=xa(pa.type||"json");L||ia.error("Unknown data format type: "+pa.type);na=L(na,pa);pa.parse&&Ra(na,pa.parse,m,E);ia.hasOwnProperty(na,"columns")&&
delete na.columns;return na};h.responseType=function(na){return(na=xa(na))&&na.responseType||"text"};h.typeParsers=tb})};
shadow$provide[29]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(21),ob(28),ob(24)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-loader","vega-format"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega,u.vega))})(this,function(u,h,ia,ab){function zb(w){const Q=w||h.identity,A=[],y={};A.add=N=>{const z=Q(N);y[z]||(y[z]=1,A.push(N));return A};A.remove=N=>{const z=Q(N);y[z]&&(y[z]=0,N=A.indexOf(N),
0<=N&&A.splice(N,1));return A};return A}function Yb(w,Q){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{yield Q(w)}catch(A){w.error(A)}})}function ac(w){w=w===Object(w)?w:{data:w};if(!w[Z]){var Q=ca++;w[Z]=Q}return w}function Xb(w,Q){for(const A in w)Q[A]=w[A];return Q}function mc(w){return w&&w.constructor===Cb}function Cb(){const w=[],Q=[],A=[],y=[],N=[];let z=null,C=!1;return{constructor:Cb,insert(H){H=h.array(H);const V=H.length;for(let Aa=0;Aa<V;++Aa)w.push(H[Aa]);return this},
remove(H){const V=h.isFunction(H)?y:Q;H=h.array(H);const Aa=H.length;for(let O=0;O<Aa;++O)V.push(H[O]);return this},modify(H,V,Aa){V={field:V,value:h.constant(Aa)};h.isFunction(H)?(V.filter=H,N.push(V)):(V.tuple=H,A.push(V));return this},encode(H,V){h.isFunction(H)?N.push({filter:H,field:V}):A.push({tuple:H,field:V});return this},clean(H){z=H;return this},reflow(){C=!0;return this},pulse(H,V){function Aa(Tb,W,Ea){Ea?Tb[W]=Ea(Tb):H.encode=W;C||(la[Tb[Z]]=Tb)}const O={},la={};let za,Ma,Pa,Ya,vb,jb;
za=0;for(Ma=V.length;za<Ma;++za)O[V[za][Z]]=1;za=0;for(Ma=Q.length;za<Ma;++za)vb=Q[za],O[vb[Z]]=-1;za=0;for(Ma=y.length;za<Ma;++za)Ya=y[za],V.forEach(Tb=>{Ya(Tb)&&(O[Tb[Z]]=-1)});za=0;for(Ma=w.length;za<Ma;++za)vb=w[za],jb=vb[Z],O[jb]?O[jb]=1:H.add.push(ac(w[za]));za=0;for(Ma=V.length;za<Ma;++za)vb=V[za],0>O[vb[Z]]&&H.rem.push(vb);za=0;for(Ma=A.length;za<Ma;++za)Pa=A[za],vb=Pa.tuple,Ya=Pa.field,jb=O[vb[Z]],0<jb&&(Aa(vb,Ya,Pa.value),H.modifies(Ya));za=0;for(Ma=N.length;za<Ma;++za)Pa=N[za],Ya=Pa.filter,
V.forEach(Tb=>{Ya(Tb)&&0<O[Tb[Z]]&&Aa(Tb,Pa.field,Pa.value)}),H.modifies(Pa.field);if(C)H.mod=Q.length||y.length?V.filter(Tb=>0<O[Tb[Z]]):V.slice();else for(jb in la)H.mod.push(la[jb]);(z||null==z&&(Q.length||y.length))&&H.clean(!0);return H}}}function Ub(){Object.defineProperty(this,"_:mod:_",{writable:!0,value:{}})}function jc(w,Q,A,y){this.id=++ha;this.value=w;this.qrank=this.rank=this.stamp=-1;this.flags=0;Q&&(this._update=Q);A&&this.parameters(A,y)}function Ba(w){return function(Q){const A=this.flags;
if(0===arguments.length)return!!(A&w);this.flags=Q?A|w:A&~w;return this}}function Za(w,Q,A){this.id=++na;this.value=null;A&&(this.receive=A);w&&(this._filter=w);Q&&(this._apply=Q)}function wb(w,Q,A){return new Za(w,Q,A)}function ub(w){let Q;const A=new Promise(y=>Q=y);A.requests=0;A.done=()=>{0===--A.requests&&(w._pending=null,Q(w))};return w._pending=A}function sb(w,Q,A,y,N,z){const C=h.extend({},z,pa);let H;h.isFunction(A)||(A=h.constant(A));void 0===y?N=V=>w.touch(A(V)):h.isFunction(y)?(H=new jc(null,
y,N,!1),N=V=>{H.evaluate(V);V=A(V);const Aa=H.value;mc(Aa)?w.pulse(V,Aa,z):w.update(V,Aa,C)}):N=V=>w.update(A(V),y,C);Q.apply(N)}function xb(w,Q,A,y,N,z){void 0===y?Q.targets().add(A):(z=z||{},y=new jc(null,ib(A,y),N,!1),y.modified(z.force),y.rank=Q.rank,Q.targets().add(y),A&&(y.skip(!0),y.value=A.value,y.targets().add(A),w.connect(A,[y])))}function ib(w,Q){Q=h.isFunction(Q)?Q:h.constant(Q);return w?function(A,y){A=Q(A,y);w.skip()||(w.skip(A!==this.value).value=A);return A}:Q}function ec(w,Q,A){this.dataflow=
w;this.stamp=null==Q?-1:Q;this.add=[];this.rem=[];this.mod=[];this.fields=null;this.encode=A||null}function ra(w,Q){const A=[];h.visitArray(w,Q,y=>A.push(y));return A}function fa(w,Q){const A={};w.visit(Q,y=>{A[y[Z]]=1});return y=>A[y[Z]]?null:y}function xa(w,Q){return w?(A,y)=>w(A,y)&&Q(A,y):Q}function Ra(w,Q,A,y){let N=0;this.dataflow=w;this.stamp=Q;this.fields=null;this.encode=y||null;this.pulses=A;for(const z of A)if(z.stamp===Q){if(z.fields){w=this.fields||(this.fields={});for(const C in z.fields)w[C]=
1}z.changed(this.ADD)&&(N|=this.ADD);z.changed(this.REM)&&(N|=this.REM);z.changed(this.MOD)&&(N|=this.MOD)}this.changes=N}function Va(w){w.error("Dataflow already running. Use runAsync() to chain invocations.");return w}function Ga(w,Q){if(Q&&Q.stamp===w.stamp)return Q;w=w.fork();Q&&Q!==m&&(w.source=Q.source);return w}function hb(w){let Q=[];return{clear:()=>Q=[],size:()=>Q.length,peek:()=>Q[0],push:A=>{Q.push(A);return bb(Q,0,Q.length-1,w)},pop:()=>{var A=Q.pop();let y;if(Q.length){y=Q[0];Q[0]=A;
A=Q;var N=0;const z=N,C=A.length,H=A[N];let V=(N<<1)+1,Aa;for(;V<C;)Aa=V+1,Aa<C&&0<=w(A[V],A[Aa])&&(V=Aa),A[N]=A[V],N=V,V=(N<<1)+1;A[N]=H;bb(A,z,N,w)}else y=A;return y}}}function bb(w,Q,A,y){let N,z;const C=w[A];for(;A>Q;)if(z=A-1>>1,N=w[z],0>y(C,N))w[A]=N,A=z;else break;return w[A]=C}function tb(){this.logger(h.logger());this.logLevel(h.Error);this._rank=this._clock=0;this._locale=ab.defaultLocale();try{this._loader=ia.loader()}catch(w){}this._touched=zb(h.id);this._input={};this._pulse=null;this._heap=
hb((w,Q)=>w.qrank-Q.qrank);this._postrun=[]}function Pb(w){return function(){return this._log[w].apply(this,arguments)}}function eb(w,Q){jc.call(this,w,null,Q)}function T(w){w=w&&w.toLowerCase();return h.hasOwnProperty(L,w)?L[w]:null}const Z=Symbol("vega_id");let ca=1;Ub.prototype={set(w,Q,A,y){const N=this[w],z=this["_:mod:_"];if(null!=Q&&0<=Q){if(N[Q]!==A||y)N[Q]=A,z[Q+":"+w]=-1,z[w]=-1}else if(N!==A||y)this[w]=A,z[w]=h.isArray(A)?1+A.length:-1;return this},modified(w,Q){const A=this["_:mod:_"];
if(!arguments.length){for(var y in A)if(A[y])return!0;return!1}if(h.isArray(w)){for(y=0;y<w.length;++y)if(A[w[y]])return!0;return!1}return null!=Q&&0<=Q?Q+1<A[w]||!!A[Q+":"+w]:!!A[w]},clear(){this["_:mod:_"]={};return this}};let ha=0;const La=new Ub;jc.prototype={targets(){return this._targets||(this._targets=zb(h.id))},set(w){return this.value!==w?(this.value=w,1):0},skip:Ba(1),modified:Ba(2),parameters(w,Q,A){Q=!1!==Q;const y=this._argval=this._argval||new Ub,N=this._argops=this._argops||[],z=[];
let C,H,V,Aa;const O=(la,za,Ma)=>{Ma instanceof jc?(Ma!==this&&(Q&&Ma.targets().add(this),z.push(Ma)),N.push({op:Ma,name:la,index:za})):y.set(la,za,Ma)};for(C in w)if(H=w[C],"pulse"===C)h.array(H).forEach(la=>{la instanceof jc?la!==this&&(la.targets().add(this),z.push(la)):h.error("Pulse parameters must be operator instances.")}),this.source=H;else if(h.isArray(H))for(y.set(C,-1,Array(V=H.length)),Aa=0;Aa<V;++Aa)O(C,Aa,H[Aa]);else O(C,-1,H);this.marshall().clear();A&&(N.initonly=!0);return z},marshall(w){const Q=
this._argval||La,A=this._argops;let y,N,z,C;if(A){const H=A.length;for(N=0;N<H;++N)y=A[N],z=y.op,C=z.modified()&&z.stamp===w,Q.set(y.name,y.index,z.value,C);if(A.initonly){for(N=0;N<H;++N)y=A[N],y.op.targets().remove(this);this._update=this._argops=null}}return Q},detach(){const w=this._argops;let Q,A;if(w)for(Q=0,A=w.length;Q<A;++Q){var y=w[Q];y=y.op;y._targets&&y._targets.remove(this)}this.source=this.pulse=null},evaluate(w){var Q=this._update;if(Q){const A=this.marshall(w.stamp);Q=Q.call(this,
A,w);A.clear();if(Q!==this.value)this.value=Q;else if(!this.modified())return w.StopPropagation}},run(w){if(w.stamp<this.stamp)return w.StopPropagation;let Q;this.skip()?(this.skip(!1),Q=0):Q=this.evaluate(w);return this.pulse=Q||w}};let na=0;Za.prototype={_filter:h.truthy,_apply:h.identity,targets(){return this._targets||(this._targets=zb(h.id))},consume(w){if(!arguments.length)return!!this._consume;this._consume=!!w;return this},receive(w){if(this._filter(w)){const Q=this.value=this._apply(w),A=
this._targets,y=A?A.length:0;for(let N=0;N<y;++N)A[N].receive(Q);this._consume&&(w.preventDefault(),w.stopPropagation())}},filter(w){w=wb(w);this.targets().add(w);return w},apply(w){w=wb(null,w);this.targets().add(w);return w},merge(){const w=wb();this.targets().add(w);for(let Q=0,A=arguments.length;Q<A;++Q)arguments[Q].targets().add(w);return w},throttle(w){let Q=-1;return this.filter(()=>{const A=Date.now();return A-Q>w?(Q=A,1):0})},debounce(w){const Q=wb();this.targets().add(wb(null,null,h.debounce(w,
A=>{const y=A.dataflow;Q.receive(A);y&&y.run&&y.run()})));return Q},between(w,Q){let A=!1;w.targets().add(wb(null,null,()=>A=!0));Q.targets().add(wb(null,null,()=>A=!1));return this.filter(()=>A)},detach(){this._filter=h.truthy;this._targets=null}};const pa={skip:!0},m={};ec.prototype={StopPropagation:m,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(w){return(new ec(this.dataflow)).init(this,w)},clone(){const w=this.fork(7);w.add=w.add.slice();w.rem=
w.rem.slice();w.mod=w.mod.slice();w.source&&(w.source=w.source.slice());return w.materialize(23)},addAll(){let w=this;w.source&&w.add!==w.rem&&(w.rem.length||w.source.length!==w.add.length)&&(w=(new ec(this.dataflow)).init(this),w.add=w.source,w.rem=[]);return w},init(w,Q){this.stamp=w.stamp;this.encode=w.encode;!w.fields||Q&64||(this.fields=w.fields);Q&1?(this.addF=w.addF,this.add=w.add):(this.addF=null,this.add=[]);Q&2?(this.remF=w.remF,this.rem=w.rem):(this.remF=null,this.rem=[]);Q&4?(this.modF=
w.modF,this.mod=w.mod):(this.modF=null,this.mod=[]);Q&32?this.source=this.srcF=null:(this.srcF=w.srcF,this.source=w.source,w.cleans&&(this.cleans=w.cleans));return this},runAfter(w){this.dataflow.runAfter(w)},changed(w){w=w||7;return w&1&&this.add.length||w&2&&this.rem.length||w&4&&this.mod.length},reflow(w){if(w)return this.fork(7).reflow();w=this.add.length;const Q=this.source&&this.source.length;Q&&Q!==w&&(this.mod=this.source,w&&this.filter(4,fa(this,1)));return this},clean(w){return arguments.length?
(this.cleans=!!w,this):this.cleans},modifies(w){const Q=this.fields||(this.fields={});h.isArray(w)?w.forEach(A=>Q[A]=!0):Q[w]=!0;return this},modified(w,Q){const A=this.fields;return(Q||this.mod.length)&&A?arguments.length?h.isArray(w)?w.some(y=>A[y]):A[w]:!!A:!1},filter(w,Q){w&1&&(this.addF=xa(this.addF,Q));w&2&&(this.remF=xa(this.remF,Q));w&4&&(this.modF=xa(this.modF,Q));w&16&&(this.srcF=xa(this.srcF,Q));return this},materialize(w){w=w||7;w&1&&this.addF&&(this.add=ra(this.add,this.addF),this.addF=
null);w&2&&this.remF&&(this.rem=ra(this.rem,this.remF),this.remF=null);w&4&&this.modF&&(this.mod=ra(this.mod,this.modF),this.modF=null);w&16&&this.srcF&&(this.source=this.source.filter(this.srcF),this.srcF=null);return this},visit(w,Q){if(w&16)return h.visitArray(this.source,this.srcF,Q),this;w&1&&h.visitArray(this.add,this.addF,Q);w&2&&h.visitArray(this.rem,this.remF,Q);w&4&&h.visitArray(this.mod,this.modF,Q);const A=this.source;w&8&&A&&(w=this.add.length+this.mod.length,w!==A.length&&(w?h.visitArray(A,
fa(this,5),Q):h.visitArray(A,this.srcF,Q)));return this}};h.inherits(Ra,ec,{fork(w){const Q=(new ec(this.dataflow)).init(this,w&this.NO_FIELDS);void 0!==w&&(w&Q.ADD&&this.visit(Q.ADD,A=>Q.add.push(A)),w&Q.REM&&this.visit(Q.REM,A=>Q.rem.push(A)),w&Q.MOD&&this.visit(Q.MOD,A=>Q.mod.push(A)));return Q},changed(w){return this.changes&w},modified(w){const Q=this.fields;return Q&&this.changes&this.MOD?h.isArray(w)?w.some(A=>Q[A]):Q[w]:0},filter(){h.error("MultiPulse does not support filtering.")},materialize(){h.error("MultiPulse does not support materialization.")},
visit(w,Q){const A=this.pulses,y=A.length;let N=0;if(w&this.SOURCE)for(;N<y;++N)A[N].visit(w,Q);else for(;N<y;++N)A[N].stamp===this.stamp&&A[N].visit(w,Q);return this}});const E={skip:!1,force:!1};tb.prototype={stamp(){return this._clock},loader(w){return arguments.length?(this._loader=w,this):this._loader},locale(w){return arguments.length?(this._locale=w,this):this._locale},logger(w){return arguments.length?(this._log=w,this):this._log},error:Pb("error"),warn:Pb("warn"),info:Pb("info"),debug:Pb("debug"),
logLevel:Pb("level"),cleanThreshold:1E4,add:function(w,Q,A,y){let N=1;w instanceof jc||(w&&w.prototype instanceof jc?w=new w:h.isFunction(w)?w=new jc(null,w):(N=0,w=new jc(w,Q)));this.rank(w);N&&(y=A,A=Q);A&&this.connect(w,w.parameters(A,y));this.touch(w);return w},connect:function(w,Q){const A=w.rank,y=Q.length;for(let N=0;N<y;++N)if(A<Q[N].rank){this.rerank(w);break}},rank:function(w){w.rank=++this._rank},rerank:function(w){const Q=[w];let A,y,N;for(;Q.length;)if(this.rank(A=Q.pop()),y=A._targets)for(N=
y.length;0<=--N;)Q.push(A=y[N]),A===w&&h.error("Cycle detected in dataflow graph.")},pulse:function(w,Q,A){this.touch(w,A||E);A=new ec(this,this._clock+(this._pulse?0:1));const y=w.pulse&&w.pulse.source||[];A.target=w;this._input[w.id]=Q.pulse(A,y);return this},touch:function(w,Q){Q=Q||E;this._pulse?this._enqueue(w):this._touched.add(w);Q.skip&&w.skip(!0);return this},update:function(w,Q,A){A=A||E;(w.set(Q)||A.force)&&this.touch(w,A);return this},changeset:Cb,ingest:function(w,Q,A){Q=this.parse(Q,
A);return this.pulse(w,this.changeset().insert(Q))},parse:function(w,Q){const A=this.locale();return ia.read(w,Q,A.timeParse,A.utcParse)},preload:function(w,Q,A){const y=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const N=y._pending||ub(y);N.requests+=1;const z=yield y.request(Q,A);y.pulse(w,y.changeset().remove(h.truthy).insert(z.data||[]));N.done();return z})},request:function(w,Q){const A=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){let y=0,N;try{N=
yield A.loader().load(w,{context:"dataflow",response:ia.responseType(Q&&Q.type)});try{N=A.parse(N,Q)}catch(z){y=-2,A.warn("Data ingestion failed",w,z)}}catch(z){y=-1,A.warn("Loading failed",w,z)}return{data:N,status:y}})},events:function(w,Q,A,y){const N=this,z=wb(A,y);A=function(C){C.dataflow=N;try{z.receive(C)}catch(H){N.error(H)}finally{N.run()}};w="string"===typeof w&&"undefined"!==typeof document?document.querySelectorAll(w):h.array(w);y=w.length;for(let C=0;C<y;++C)w[C].addEventListener(Q,A);
return z},on:function(w,Q,A,y,N){(w instanceof jc?xb:sb)(this,w,Q,A,y,N);return this},evaluate:function(w,Q,A){const y=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const N=[];if(y._pulse)return Va(y);y._pending&&(yield y._pending);Q&&(yield Yb(y,Q));if(!y._touched.length)return y.debug("Dataflow invoked, but nothing to do."),y;var z=++y._clock;y._pulse=new ec(y,z,w);y._touched.forEach(O=>y._enqueue(O,!0));y._touched=zb(h.id);var C=0;let H,V,Aa;try{for(;0<y._heap.size();)H=
y._heap.pop(),H.rank!==H.qrank?y._enqueue(H,!0):(V=H.run(y._getPulse(H,w)),V.then?V=yield V:V.async&&(N.push(V.async),V=m),V!==m&&H._targets&&H._targets.forEach(O=>y._enqueue(O)),++C)}catch(O){y._heap.clear(),Aa=O}y._input={};y._pulse=null;y.debug(`Pulse ${z}: ${C} operators`);Aa&&(y._postrun=[],y.error(Aa));if(y._postrun.length)for(z=y._postrun.sort((O,la)=>la.priority-O.priority),y._postrun=[],C=0;C<z.length;++C)yield Yb(y,z[C].callback);A&&(yield Yb(y,A));N.length&&Promise.all(N).then(O=>y.runAsync(null,
()=>{O.forEach(la=>{try{la(y)}catch(za){y.error(za)}})}));return y})},run:function(w,Q,A){return this._pulse?Va(this):(this.evaluate(w,Q,A),this)},runAsync:function(w,Q,A){const y=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){for(;y._running;)yield y._running;const N=()=>y._running=null;(y._running=y.evaluate(w,Q,A)).then(N,N);return y._running})},runAfter:function(w,Q,A){if(this._pulse||Q)this._postrun.push({priority:A||0,callback:w});else try{w(this)}catch(y){this.error(y)}},
_enqueue:function(w,Q){const A=w.stamp<this._clock;A&&(w.stamp=this._clock);if(A||Q)w.qrank=w.rank,this._heap.push(w)},_getPulse:function(w,Q){const A=w.source,y=this._clock;return A&&h.isArray(A)?new Ra(this,y,A.map(N=>N.pulse),Q):this._input[w.id]||Ga(this._pulse,A&&A.pulse)}};h.inherits(eb,jc,{run(w){if(w.stamp<this.stamp)return w.StopPropagation;let Q;this.skip()?this.skip(!1):Q=this.evaluate(w);Q=Q||w;Q.then?Q=Q.then(A=>this.pulse=A):Q!==w.StopPropagation&&(this.pulse=Q);return Q},evaluate(w){const Q=
this.marshall(w.stamp);w=this.transform(Q,w);Q.clear();return w},transform(){}});const L={};u.Dataflow=tb;u.EventStream=Za;u.MultiPulse=Ra;u.Operator=jc;u.Parameters=Ub;u.Pulse=ec;u.Transform=eb;u.UniqueList=zb;u.asyncCallback=Yb;u.changeset=Cb;u.definition=function(w){return(w=T(w))&&w.Definition||null};u.derive=function(w){return Xb(w,ac({}))};u.ingest=ac;u.isChangeSet=mc;u.isTuple=function(w){return!(!w||!w[Z])};u.rederive=Xb;u.replace=function(w,Q){Q[Z]=w[Z];return Q};u.stableCompare=function(w,
Q){return w?Q?(A,y)=>w(A,y)||Q(A)[Z]-Q(y)[Z]:(A,y)=>w(A,y)||A[Z]-y[Z]:null};u.transform=T;u.transforms=L;u.tupleid=function(w){return w[Z]}})};
shadow$provide[30]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa):"function"===typeof define&&define.amd?define(["exports"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={}))})(this,function(u){function*h(A,y){if(null==y)for(var N of A)null!=N&&""!==N&&(N=+N)>=N&&(yield N);else{N=-1;for(let z of A)z=y(z,++N,A),null!=z&&""!==z&&(z=+z)>=z&&(yield z)}}function ia(A,y){return null==A||null==y?NaN:A<y?-1:A>y?1:A>=y?0:NaN}function ab(A){return null===
A?NaN:+A}function*zb(A,y){if(void 0===y)for(var N of A)null!=N&&(N=+N)>=N&&(yield N);else{N=-1;for(let z of A)null!=(z=y(z,++N,A))&&(z=+z)>=z&&(yield z)}}function Yb(A=ia){if(A===ia)return ac;if("function"!==typeof A)throw new TypeError("compare is not a function");return(y,N)=>{const z=A(y,N);return z||0===z?z:(0===A(N,N))-(0===A(y,y))}}function ac(A,y){return(null==A||!(A>=A))-(null==y||!(y>=y))||(A<y?-1:A>y?1:0)}function Xb(A,y){let N;if(void 0===y)for(var z of A)null!=z&&(N<z||void 0===N&&z>=
z)&&(N=z);else{z=-1;for(let C of A)null!=(C=y(C,++z,A))&&(N<C||void 0===N&&C>=C)&&(N=C)}return N}function mc(A,y){let N;if(void 0===y)for(var z of A)null!=z&&(N>z||void 0===N&&z>=z)&&(N=z);else{z=-1;for(let C of A)null!=(C=y(C,++z,A))&&(N>C||void 0===N&&C>=C)&&(N=C)}return N}function Cb(A,y,N=0,z=Infinity,C){y=Math.floor(y);N=Math.floor(Math.max(0,N));z=Math.floor(Math.min(A.length-1,z));if(!(N<=y&&y<=z))return A;for(C=void 0===C?ac:Yb(C);z>N;){if(600<z-N){var H=z-N+1,V=y-N+1,Aa=Math.log(H),O=.5*
Math.exp(2*Aa/3);Aa=.5*Math.sqrt(Aa*O*(H-O)/H)*(0>V-H/2?-1:1);Cb(A,y,Math.max(N,Math.floor(y-V*O/H+Aa)),Math.min(z,Math.floor(y+(H-V)*O/H+Aa)),C)}H=A[y];V=N;O=z;Ub(A,N,y);for(0<C(A[z],H)&&Ub(A,N,z);V<O;){Ub(A,V,O);++V;for(--O;0>C(A[V],H);)++V;for(;0<C(A[O],H);)--O}0===C(A[N],H)?Ub(A,N,O):(++O,Ub(A,O,z));O<=y&&(N=O+1);y<=O&&(z=O-1)}return A}function Ub(A,y,N){const z=A[y];A[y]=A[N];A[N]=z}function jc(A,y,N){A=Float64Array.from(zb(A,N));if((N=A.length)&&!isNaN(y=+y)){if(0>=y||2>N)return mc(A);if(1<=
y)return Xb(A);y*=N-1;N=Math.floor(y);var z=Xb(Cb(A,N).subarray(0,N+1));A=mc(A.subarray(N+1));return z+(A-z)*(y-N)}}function Ba(A,y,N=ab){if((z=A.length)&&!isNaN(y=+y)){if(0>=y||2>z)return+N(A[0],0,A);if(1<=y)return+N(A[z-1],z-1,A);var z;y*=z-1;z=Math.floor(y);var C=+N(A[z],z,A);A=+N(A[z+1],z+1,A);return C+(A-C)*(y-z)}}function Za(A,y,N){const z=Float64Array.from(h(A,N));z.sort(ia);return y.map(C=>Ba(z,C))}function wb(A,y){return Za(A,[.25,.5,.75],y)}function ub(A,y){const N=A.length;{var z=0;let H,
V=0,Aa=0;if(void 0===y)for(var C of A)null!=C&&(C=+C)>=C&&(H=C-V,V+=H/++z,Aa+=H*(C-V));else{C=-1;for(let O of A)null!=(O=y(O,++C,A))&&(O=+O)>=O&&(H=O-V,V+=H/++z,Aa+=H*(O-V))}z=1<z?Aa/(z-1):void 0}z=z?Math.sqrt(z):z;A=wb(A,y);return 1.06*(Math.min(z,(A[2]-A[0])/1.34)||z||Math.abs(A[0])||1)*Math.pow(N,-.2)}function sb(A,y){const N=A.length;let z=0,C=1,H,V;for(;A[z]===A[C];)++C;for(;C<N;){for(H=C+1;A[C]===A[H];)++H;if(A[C]-A[C-1]<y){for(V=C+(z+H-C-C>>1);V<C;)A[V++]=A[C];for(;V>C;)A[V--]=A[z]}z=C;C=H}return A}
function xb(A,y){A=A||0;y=null==y?1:y;let N,z;if(w===w)N=w,w=NaN;else{do{N=2*u.random()-1;z=2*u.random()-1;var C=N*N+z*z}while(0===C||1<C);C=Math.sqrt(-2*Math.log(C)/C);N*=C;w=z*C}return A+N*y}function ib(A,y,N){N=null==N?1:N;A=(A-(y||0))/N;return Math.exp(-.5*A*A)/(N*E)}function ec(A,y,N){A=(A-(y||0))/(null==N?1:N);y=Math.abs(A);37<y?N=0:(N=Math.exp(-y*y/2),7.07106781186547>y?(N*=(((((.0352624965998911*y+.700383064443688)*y+6.37396220353165)*y+33.912866078383)*y+112.079291497871)*y+221.213596169931)*
y+220.206867912376,N/=((((((.0883883476483184*y+1.75566716318264)*y+16.064177579207)*y+86.7807322029461)*y+296.564248779674)*y+637.333633378831)*y+793.826512519948)*y+440.413735824752):N=N/(y+1/(y+2/(y+3/(y+4/(y+.65)))))/2.506628274631);return 0<A?1-N:N}function ra(A,y,N){if(0>A||1<A)return NaN;A=2*A-1;var z=-Math.log((1-A)*(1+A));6.25>z?(z-=3.125,z=1.6536545626831027+(.24015818242558962+(-.006033670871430149+(-7.40702534166267E-4+(1.8673420803405714E-4+(-1.3882523362786469E-5+(-1.3654692000834679E-6+
(4.2347877827932404E-7+(-2.9070369957882005E-8+(-4.112633980346984E-9+(1.0512122733215323E-9+(-5.415412054294628E-11+(-1.2975133253453532E-11+(2.6335093153082323E-12+(-8.151934197605472E-14+(-4.054566272975207E-14+(6.637638134358324E-15+(2.0972767875968562E-17+(-1.333171662854621E-16+(1.1157877678025181E-17+(1.28584807152564E-18+(-1.6850591381820166E-19+-3.64441206401782E-21*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z):16>z?(z=Math.sqrt(z)-3.25,z=3.0838856104922208+(1.0052589676941592+
(.005370914553590064+(-.003751208507569241+(.002491442096107851+(-.0016882755560235047+(9.532893797373805E-4+(-3.550375203628475E-4+(2.4031110387097894E-5+(6.828485145957318E-5+(-4.7318229009055734E-5+(1.2475304481671779E-5+(2.9234449089955446E-6+(-4.013867526981546E-6+(1.5027403968909828E-6+(1.8239629214389228E-8+(-2.7517406297064545E-7+(9.075656193888539E-8+2.2137376921775787E-9*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z):Number.isFinite(z)?(z=Math.sqrt(z)-5,z=4.849906401408584+(1.0103004648645344+
(-1.3871931833623122E-4+(-2.1503011930044477E-4+(7.599527703001776E-5+(-1.968177810553167E-5+(4.526062597223154E-6+(-9.9298272942317E-7+(2.2900482228026655E-7+(-6.771199775845234E-8+(2.914795345090108E-8+(-1.496002662714924E-8+(7.61570120807834E-9+(-3.789465440126737E-9+(1.5076572693500548E-9+(-2.555641816996525E-10+-2.7109920616438573E-11*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z)*z):z=Infinity;return(y||0)+(null==N?1:N)*L*z*A}function fa(A,y){let N,z;const C={mean(H){return arguments.length?(N=
H||0,C):N},stdev(H){return arguments.length?(z=null==H?1:H,C):z},sample:()=>xb(N,z),pdf:H=>ib(H,N,z),cdf:H=>ec(H,N,z),icdf:H=>ra(H,N,z)};return C.mean(A).stdev(y)}function xa(A,y){y=null==y?1:y;return Math.exp((A||0)+xb()*y)}function Ra(A,y,N){if(0>=A)return 0;N=null==N?1:N;y=(Math.log(A)-(y||0))/N;return Math.exp(-.5*y*y)/(N*E*A)}function Va(A,y,N){return ec(Math.log(A),y,N)}function Ga(A,y,N){return Math.exp(ra(A,y,N))}function hb(A,y){null==y&&(y=null==A?1:A,A=0);return A+(y-A)*u.random()}function bb(A,
y,N){null==N&&(N=null==y?1:y,y=0);return A>=y&&A<=N?1/(N-y):0}function tb(A,y,N){null==N&&(N=null==y?1:y,y=0);return A<y?0:A>N?1:(A-y)/(N-y)}function Pb(A,y,N){null==N&&(N=null==y?1:y,y=0);return 0<=A&&1>=A?y+A*(N-y):NaN}function eb(A,y,N){let z=0,C=0;for(const H of A)A=N(H),null==y(H)||null==A||isNaN(A)||(z+=(A-z)/++C);return{coef:[z],predict:()=>z,rSquared:0}}function T(A,y,N,z){z-=A*A;N=1E-24>Math.abs(z)?0:(N-A*y)/z;return[y-N*A,N]}function Z(A,y,N,z){A=A.filter(Ma=>{let Pa=y(Ma);Ma=N(Ma);return null!=
Pa&&(Pa=+Pa)>=Pa&&null!=Ma&&(Ma=+Ma)>=Ma});z&&A.sort((Ma,Pa)=>y(Ma)-y(Pa));z=A.length;const C=new Float64Array(z),H=new Float64Array(z);let V=0,Aa=0,O=0,la,za;for(za of A)C[V]=A=+y(za),H[V]=la=+N(za),++V,Aa+=(A-Aa)/V,O+=(la-O)/V;for(V=0;V<z;++V)C[V]-=Aa,H[V]-=O;return[C,H,Aa,O]}function ca(A,y,N,z){let C=-1,H;for(const V of A)A=y(V),H=N(V),null!=A&&(A=+A)>=A&&null!=H&&(H=+H)>=H&&z(A,H,++C)}function ha(A,y,N,z,C){let H=0,V=0;ca(A,y,N,(Aa,O)=>{Aa=O-C(Aa);O-=z;H+=Aa*Aa;V+=O*O});return 1-H/V}function La(A,
y,N){let z=0,C=0,H=0,V=0,Aa=0;ca(A,y,N,(za,Ma)=>{++Aa;z+=(za-z)/Aa;C+=(Ma-C)/Aa;H+=(za*Ma-H)/Aa;V+=(za*za-V)/Aa});const O=T(z,C,H,V),la=za=>O[0]+O[1]*za;return{coef:O,predict:la,rSquared:ha(A,y,N,C,la)}}function na(A,y,N){const [z,C,H,V]=Z(A,y,N);var Aa=z.length,O=0;let la=0;var za=0;let Ma=0,Pa=0,Ya,vb,jb,Tb;for(Ya=0;Ya<Aa;)vb=z[Ya],jb=C[Ya++],Tb=vb*vb,O+=(Tb-O)/Ya,la+=(Tb*vb-la)/Ya,za+=(Tb*Tb-za)/Ya,Ma+=(vb*jb-Ma)/Ya,Pa+=(Tb*jb-Pa)/Ya;Aa=za-O*O;za=O*Aa-la*la;const W=(Pa*O-Ma*la)/za,Ea=(Ma*Aa-Pa*
la)/za,Lb=-W*O;O=oc=>{oc-=H;return W*oc*oc+Ea*oc+Lb+V};return{coef:[Lb-Ea*H+W*H*H+V,Ea-2*W*H,W],predict:O,rSquared:ha(A,y,N,V,O)}}function pa(A,y,N,z){const C=Array(A);let H,V,Aa;for(H=0;H<A;++H)C[H]=0;for(H=A-1;0<=H;--H)for(V=y[H],Aa=1,C[H]+=V,A=1;A<=H;++A)Aa*=(H+1-A)/A,C[H-A]+=V*Math.pow(N,A)*Aa;C[0]+=z;return C}function m(A){const y=A.length-1,N=[];let z,C,H,V,Aa;for(z=0;z<y;++z){V=z;for(C=z+1;C<y;++C)Math.abs(A[z][C])>Math.abs(A[z][V])&&(V=C);for(H=z;H<y+1;++H)Aa=A[H][z],A[H][z]=A[H][V],A[H][V]=
Aa;for(C=z+1;C<y;++C)for(H=y;H>=z;H--)A[H][C]-=A[H][z]*A[z][C]/A[z][z]}for(C=y-1;0<=C;--C){Aa=0;for(H=C+1;H<y;++H)Aa+=A[H][C]*N[H];N[C]=(A[y][C]-Aa)/A[C][C]}return N}u.random=Math.random;const E=Math.sqrt(2*Math.PI),L=Math.SQRT2;let w=NaN;const Q=.5*Math.PI/180;u.bandwidthNRD=ub;u.bin=function(A){var y=A.maxbins||20;const N=A.base||10,z=Math.log(N),C=A.divide||[5,2];let H=A.extent[0],V=A.extent[1];let Aa,O,la,za;const Ma=A.span||V-H||Math.abs(H)||1;if(A.step)var Pa=A.step;else if(A.steps){O=Ma/y;
la=0;for(za=A.steps.length;la<za&&A.steps[la]<O;++la);Pa=A.steps[Math.max(0,la-1)]}else{Pa=Math.ceil(Math.log(y)/z);Aa=A.minstep||0;for(Pa=Math.max(Aa,Math.pow(N,Math.round(Math.log(Ma)/z)-Pa));Math.ceil(Ma/Pa)>y;)Pa*=N;la=0;for(za=C.length;la<za;++la)O=Pa/C[la],O>=Aa&&Ma/O<=y&&(Pa=O)}O=Math.log(Pa);y=Math.pow(N,-(0<=O?0:~~(-O/z)+1)-1);if(A.nice||void 0===A.nice)O=Math.floor(H/Pa+y)*Pa,H=H<O?O-Pa:O,V=Math.ceil(V/Pa)*Pa;return{start:H,stop:V===H?H+Pa:V,step:Pa}};u.bootstrapCI=function(A,y,N,z){if(!A.length)return[void 0,
void 0];A=Float64Array.from(h(A,z));z=A.length;let C,H,V,Aa;V=0;for(Aa=Array(y);V<y;++V){for(H=C=0;H<z;++H)C+=A[~~(u.random()*z)];Aa[V]=C/z}Aa.sort(ia);return[jc(Aa,N/2),jc(Aa,1-N/2)]};u.cumulativeLogNormal=Va;u.cumulativeNormal=ec;u.cumulativeUniform=tb;u.densityLogNormal=Ra;u.densityNormal=ib;u.densityUniform=bb;u.dotbin=function(A,y,N,z){z=z||(Pa=>Pa);const C=A.length,H=new Float64Array(C);let V=0,Aa=1,O=z(A[0]),la=O,za=O+y,Ma;for(;Aa<C;++Aa){Ma=z(A[Aa]);if(Ma>=za){for(la=(O+la)/2;V<Aa;++V)H[V]=
la;za=Ma+y;O=Ma}la=Ma}for(la=(O+la)/2;V<Aa;++V)H[V]=la;return N?sb(H,y+y/4):H};u.quantileLogNormal=Ga;u.quantileNormal=ra;u.quantileUniform=Pb;u.quantiles=Za;u.quartiles=wb;u.randomInteger=function(A,y){null==y&&(y=A,A=0);let N,z,C;const H={min(V){return arguments.length?(N=V||0,C=z-N,H):N},max(V){return arguments.length?(z=V||0,C=z-N,H):z},sample(){return N+Math.floor(C*u.random())},pdf(V){return V===Math.floor(V)&&V>=N&&V<z?1/C:0},cdf(V){V=Math.floor(V);return V<N?0:V>=z?1:(V-N+1)/C},icdf(V){return 0<=
V&&1>=V?N-1+Math.floor(V*C):NaN}};return H.min(A).max(y)};u.randomKDE=function(A,y){const N=fa();let z=0;const C={data(H){return arguments.length?(z=(A=H)?H.length:0,C.bandwidth(y)):A},bandwidth(H){if(!arguments.length)return y;y=H;!y&&A&&(y=ub(A));return C},sample(){return A[~~(u.random()*z)]+y*N.sample()},pdf(H){let V=0,Aa=0;for(;Aa<z;++Aa)V+=N.pdf((H-A[Aa])/y);return V/y/z},cdf(H){let V=0,Aa=0;for(;Aa<z;++Aa)V+=N.cdf((H-A[Aa])/y);return V/z},icdf(){throw Error("KDE icdf not supported.");}};return C.data(A)};
u.randomLCG=function(A){return function(){A=(1103515245*A+12345)%2147483647;return A/2147483647}};u.randomLogNormal=function(A,y){let N,z;const C={mean(H){return arguments.length?(N=H||0,C):N},stdev(H){return arguments.length?(z=null==H?1:H,C):z},sample:()=>xa(N,z),pdf:H=>Ra(H,N,z),cdf:H=>Va(H,N,z),icdf:H=>Ga(H,N,z)};return C.mean(A).stdev(y)};u.randomMixture=function(A,y){let N=0,z;const C={weights(H){if(arguments.length){var V=y=H||[];const Aa=[];let O=0,la;for(la=0;la<N;++la)O+=Aa[la]=null==V[la]?
1:+V[la];for(la=0;la<N;++la)Aa[la]/=O;z=Aa;return C}return y},distributions(H){return arguments.length?(H?(N=H.length,A=H):(N=0,A=[]),C.weights(y)):A},sample(){const H=u.random();let V=A[N-1],Aa=z[0],O=0;for(;O<N-1;Aa+=z[++O])if(H<Aa){V=A[O];break}return V.sample()},pdf(H){let V=0,Aa=0;for(;Aa<N;++Aa)V+=z[Aa]*A[Aa].pdf(H);return V},cdf(H){let V=0,Aa=0;for(;Aa<N;++Aa)V+=z[Aa]*A[Aa].cdf(H);return V},icdf(){throw Error("Mixture icdf not supported.");}};return C.distributions(A).weights(y)};u.randomNormal=
fa;u.randomUniform=function(A,y){let N,z;const C={min(H){return arguments.length?(N=H||0,C):N},max(H){return arguments.length?(z=null==H?1:H,C):z},sample:()=>hb(N,z),pdf:H=>bb(H,N,z),cdf:H=>tb(H,N,z),icdf:H=>Pb(H,N,z)};null==y&&(y=null==A?1:A,A=0);return C.min(A).max(y)};u.regressionConstant=eb;u.regressionExp=function(A,y,N){const [z,,C,H]=Z(A,y,N);let V=0,Aa=0,O=0,la=0,za=0,Ma,Pa,Ya;ca(A,y,N,(W,Ea)=>{Ma=z[za++];Pa=Math.log(Ea);Ya=Ma*Ea;V+=(Ea*Pa-V)/za;Aa+=(Ya-Aa)/za;O+=(Ya*Pa-O)/za;la+=(Ma*Ya-la)/
za});const [vb,jb]=T(Aa/H,V/H,O/H,la/H),Tb=W=>Math.exp(vb+jb*(W-C));return{coef:[Math.exp(vb-jb*C),jb],predict:Tb,rSquared:ha(A,y,N,H,Tb)}};u.regressionLinear=La;u.regressionLoess=function(A,y,N,z){const [C,H,V,Aa]=Z(A,y,N,!0);A=C.length;y=Math.max(2,~~(z*A));z=new Float64Array(A);N=new Float64Array(A);var O=(new Float64Array(A)).fill(1);for(var la=-1;2>=++la;){var za=[0,y-1];for(let Lb=0;Lb<A;++Lb){var Ma=C[Lb],Pa=za[0],Ya=za[1],vb=0,jb=0,Tb=0,W=0;let oc=0;const $b=1/Math.abs(C[Ma-C[Pa]>C[Ya]-Ma?
Pa:Ya]-Ma||1);for(;Pa<=Ya;++Pa){const xc=C[Pa],ed=H[Pa];var Ea=Math.abs(Ma-xc)*$b;const qa=(Ea=1-Ea*Ea*Ea)*Ea*Ea*O[Pa];Ea=xc*qa;vb+=qa;jb+=Ea;Tb+=ed*qa;W+=ed*Ea;oc+=xc*Ea}const [Mb,Qb]=T(jb/vb,Tb/vb,W/vb,oc/vb);z[Lb]=Mb+Qb*Ma;N[Lb]=Math.abs(H[Lb]-z[Lb]);Ma=C;Ya=Lb+1;vb=za;jb=Ma[Ya];Tb=vb[0];W=vb[1]+1;if(!(W>=Ma.length))for(;Ya>Tb&&Ma[W]-jb<=jb-Ma[Tb];)vb[0]=++Tb,vb[1]=W,++W}if(2===la)break;za=jc(N,.5,void 0);if(1E-12>Math.abs(za))break;for(let Lb=0,oc,$b;Lb<A;++Lb)oc=N[Lb]/(6*za),O[Lb]=1<=oc?1E-12:
($b=1-oc*oc)*$b}A=C.length;y=[];O=N=0;for(la=[];N<A;++N)za=C[N]+V,la[0]===za?la[1]+=(z[N]-la[1])/++O:(O=0,la[1]+=Aa,la=[za,z[N]],y.push(la));la[1]+=Aa;return y};u.regressionLog=function(A,y,N){let z=0,C=0,H=0,V=0,Aa=0;ca(A,y,N,(za,Ma)=>{++Aa;za=Math.log(za);z+=(za-z)/Aa;C+=(Ma-C)/Aa;H+=(za*Ma-H)/Aa;V+=(za*za-V)/Aa});const O=T(z,C,H,V),la=za=>O[0]+O[1]*Math.log(za);return{coef:O,predict:la,rSquared:ha(A,y,N,C,la)}};u.regressionPoly=function(A,y,N,z){if(0===z)return eb(A,y,N);if(1===z)return La(A,y,
N);if(2===z)return na(A,y,N);const [C,H,V,Aa]=Z(A,y,N);var O=C.length;const la=[],za=[],Ma=z+1;let Pa,Ya,vb,jb;for(Pa=0;Pa<Ma;++Pa){for(vb=Ya=0;Ya<O;++Ya)vb+=Math.pow(C[Ya],Pa)*H[Ya];la.push(vb);jb=new Float64Array(Ma);for(z=0;z<Ma;++z){for(vb=Ya=0;Ya<O;++Ya)vb+=Math.pow(C[Ya],Pa+z);jb[z]=vb}za.push(jb)}za.push(la);const Tb=m(za);O=W=>{W-=V;let Ea=Aa+Tb[0]+Tb[1]*W+Tb[2]*W*W;for(Pa=3;Pa<Ma;++Pa)Ea+=Tb[Pa]*Math.pow(W,Pa);return Ea};return{coef:pa(Ma,Tb,-V,Aa),predict:O,rSquared:ha(A,y,N,Aa,O)}};u.regressionPow=
function(A,y,N){let z=0,C=0,H=0,V=0,Aa=0,O=0;ca(A,y,N,(Ma,Pa)=>{Ma=Math.log(Ma);const Ya=Math.log(Pa);++O;z+=(Ma-z)/O;C+=(Ya-C)/O;H+=(Ma*Ya-H)/O;V+=(Ma*Ma-V)/O;Aa+=(Pa-Aa)/O});const la=T(z,C,H,V),za=Ma=>la[0]*Math.pow(Ma,la[1]);la[0]=Math.exp(la[0]);return{coef:la,predict:za,rSquared:ha(A,y,N,Aa,za)}};u.regressionQuad=na;u.sampleCurve=function(A,y,N,z){N=N||25;z=Math.max(N,z||200);var C=y[0],H=y[1],V=H-C,Aa=V/z;y=[[C,A(C)]];var O=[];if(N===z){for(var la=1;la<z;++la){Aa=y;O=Aa.push;var za=C+la/N*V;
za=[za,A(za)];O.call(Aa,za)}y.push([H,A(H)]);return y}O.push([H,A(H)]);for(la=N;0<--la;)z=O,H=z.push,za=C+la/N*V,za=[za,A(za)],H.call(z,za);N=y[0];C=O[O.length-1];V=1/V;z=H=N[1];la=O.length;for(za=0;za<la;++za){const Ma=O[za][1];Ma<z&&(z=Ma);Ma>H&&(H=Ma)}for(z=1/(H-z);C;)H=(N[0]+C[0])/2,H=[H,A(H)],H[0]-N[0]>=Aa&&Math.abs(Math.atan2(z*(C[1]-N[1]),V*(C[0]-N[0]))-Math.atan2(z*(H[1]-N[1]),V*(H[0]-N[0])))>Q?O.push(H):(N=C,y.push(C),O.pop()),C=O[O.length-1];return y};u.sampleLogNormal=xa;u.sampleNormal=
xb;u.sampleUniform=hb;u.setRandom=function(A){u.random=A}})};
shadow$provide[31]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(21),ob(29),ob(30),ob(23)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-dataflow","vega-statistics","vega-time"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega,u.vega,u.vega))})(this,function(u,h,ia,ab,zb){function Yb(x){return K=>{const ua=x.length;let Ka=1,lb=String(x[0](K));for(;Ka<ua;++Ka)lb+="|"+x[Ka](K);return lb}}function ac(x){return x&&
x.length?1===x.length?x[0]:Yb(x):function(){return""}}function Xb(x,K){return(ua,Ka)=>h.extend({name:x,aggregate_param:Ka,out:ua||x},Jb,K)}function mc(x,K){return x.idx-K.idx}function Cb(x){const K={};x.forEach(Ka=>K[Ka.name]=Ka);const ua=Ka=>{Ka.req&&Ka.req.forEach(lb=>{K[lb]||ua(K[lb]=Cc[lb]())})};x.forEach(ua);return Object.values(K).sort(mc)}function Ub(){this.missing=this.valid=0;this._ops.forEach(x=>null==x.aggregate_param?x.init(this):x.init(this,x.aggregate_param))}function jc(x,K){null==
x||""===x?++this.missing:x===x&&(++this.valid,this._ops.forEach(ua=>ua.add(this,x,K)))}function Ba(x,K){null==x||""===x?--this.missing:x===x&&(--this.valid,this._ops.forEach(ua=>ua.rem(this,x,K)))}function Za(x){this._out.forEach(K=>x[K.out]=K.value(this));return x}function wb(x,K){function ua(Bb){this._ops=Ka;this._out=lb;this.cell=Bb;this.init()}K=K||h.identity;const Ka=Cb(x),lb=x.slice().sort(mc);ua.prototype.init=Ub;ua.prototype.add=jc;ua.prototype.rem=Ba;ua.prototype.set=Za;ua.prototype.get=
K;ua.fields=x.map(Bb=>Bb.out);return ua}function ub(x){this._key=x?h.field(x):ia.tupleid;this.reset()}function sb(x){ia.Transform.call(this,null,x);this._adds=[];this._mods=[];this._mlen=this._alen=0;this._drop=!0;this._cross=!1;this._dims=[];this._dnames=[];this._measures=[];this._countOnly=!1;this._outputs=this._inputs=this._prev=this._counts=null}function xb(x){ia.Transform.call(this,null,x)}function ib(x,K,ua){let Ka=K||[],lb=ua||[],Bb={},bc=0;return{add:Sb=>lb.push(Sb),remove:Sb=>Bb[x(Sb)]=++bc,
size:()=>Ka.length,data:(Sb,nc)=>{bc&&(Ka=Ka.filter(Kc=>!Bb[x(Kc)]),Bb={},bc=0);nc&&Sb&&Ka.sort(Sb);lb.length&&(Ka=Sb?h.merge(Sb,Ka,lb.sort(Sb)):Ka.concat(lb),lb=[]);return Ka}}}function ec(x){ia.Transform.call(this,[],x)}function ra(x){ia.Operator.call(this,null,fa,x)}function fa(x){return this.value&&!x.modified()?this.value:h.compare(x.fields,x.orders)}function xa(x){ia.Transform.call(this,null,x)}function Ra(x){ia.Transform.call(this,null,x)}function Va(x,K){var ua=x["function"];h.hasOwnProperty(vd,
ua)||h.error("Unknown distribution function: "+ua);ua=vd[ua]();for(const Ka in x)if("field"===Ka)ua.data((x.from||K()).map(x[Ka]));else if("distributions"===Ka)ua[Ka](x[Ka].map(lb=>Va(lb,K)));else if("function"===typeof ua[Ka])ua[Ka](x[Ka]);return ua}function Ga(x){ia.Transform.call(this,null,x)}function hb(x){return()=>x.materialize(x.SOURCE).source}function bb(x,K){return x?x.map((ua,Ka)=>K[Ka]||h.accessorName(ua)):null}function tb(x,K,ua){const Ka=[],lb=Xc=>Xc(nc);let Bb,bc,Sb,nc,Kc,Ac;if(null==
K)Ka.push(x.map(ua));else for(Bb={},bc=0,Sb=x.length;bc<Sb;++bc)nc=x[bc],Kc=K.map(lb),Ac=Bb[Kc],Ac||(Bb[Kc]=Ac=[],Ac.dims=Kc,Ka.push(Ac)),Ac.push(ua(nc));return Ka}function Pb(x){ia.Transform.call(this,null,x)}function eb(x){ia.Operator.call(this,null,T,x);this.modified(!0)}function T(x){const K=x.expr;return this.value&&!x.modified("expr")?this.value:h.accessor(ua=>K(ua,x),h.accessorFields(K),h.accessorName(K))}function Z(x){ia.Transform.call(this,[void 0,void 0],x)}function ca(x,K){ia.Operator.call(this,
x);this.parent=K;this.count=0}function ha(x){ia.Transform.call(this,{},x);this._keys=h.fastmap();const K=this._targets=[];K.active=0;K.forEach=ua=>{for(let Ka=0,lb=K.active;Ka<lb;++Ka)ua(K[Ka],Ka,K)}}function La(x){ia.Operator.call(this,null,na,x)}function na(x){return this.value&&!x.modified()?this.value:h.isArray(x.name)?h.array(x.name).map(K=>h.field(K)):h.field(x.name,x.as)}function pa(x){ia.Transform.call(this,h.fastmap(),x)}function m(x){ia.Transform.call(this,[],x)}function E(x){ia.Transform.call(this,
[],x)}function L(x){ia.Transform.call(this,null,x)}function w(x){ia.Transform.call(this,[],x)}function Q(x,K){return null==x||null==K?NaN:x<K?-1:x>K?1:x>=K?0:NaN}function A(x,K){return null==x||null==K?NaN:K<x?-1:K>x?1:K>=x?0:NaN}function y(x){function K(Bb,bc,Sb=0,nc=Bb.length){if(Sb<nc){if(0!==ua(bc,bc))return nc;do{const Kc=Sb+nc>>>1;0>Ka(Bb[Kc],bc)?Sb=Kc+1:nc=Kc}while(Sb<nc)}return Sb}let ua,Ka,lb;2!==x.length?(ua=Q,Ka=(Bb,bc)=>Q(x(Bb),bc),lb=(Bb,bc)=>x(Bb)-bc):(ua=x===Q||x===A?x:N,lb=Ka=x);return{left:K,
center:function(Bb,bc,Sb=0,nc=Bb.length){nc=K(Bb,bc,Sb,nc-1);return nc>Sb&&lb(Bb[nc-1],bc)>-lb(Bb[nc],bc)?nc-1:nc},right:function(Bb,bc,Sb=0,nc=Bb.length){if(Sb<nc){if(0!==ua(bc,bc))return nc;do{const Kc=Sb+nc>>>1;0>=Ka(Bb[Kc],bc)?Sb=Kc+1:nc=Kc}while(Sb<nc)}return Sb}}}function N(){return 0}function*z(x,K){if(void 0===K)for(var ua of x)null!=ua&&(ua=+ua)>=ua&&(yield ua);else{ua=-1;for(let Ka of x)null!=(Ka=K(Ka,++ua,x))&&(Ka=+Ka)>=Ka&&(yield Ka)}}function C(x=Q){if(x===Q)return H;if("function"!==
typeof x)throw new TypeError("compare is not a function");return(K,ua)=>{const Ka=x(K,ua);return Ka||0===Ka?Ka:(0===x(ua,ua))-(0===x(K,K))}}function H(x,K){return(null==x||!(x>=x))-(null==K||!(K>=K))||(x<K?-1:x>K?1:0)}function V(x,K){let ua;if(void 0===K)for(var Ka of x)null!=Ka&&(ua<Ka||void 0===ua&&Ka>=Ka)&&(ua=Ka);else{Ka=-1;for(let lb of x)null!=(lb=K(lb,++Ka,x))&&(ua<lb||void 0===ua&&lb>=lb)&&(ua=lb)}return ua}function Aa(x,K){let ua;if(void 0===K)for(var Ka of x)null!=Ka&&(ua>Ka||void 0===ua&&
Ka>=Ka)&&(ua=Ka);else{Ka=-1;for(let lb of x)null!=(lb=K(lb,++Ka,x))&&(ua>lb||void 0===ua&&lb>=lb)&&(ua=lb)}return ua}function O(x,K,ua=0,Ka=Infinity,lb){K=Math.floor(K);ua=Math.floor(Math.max(0,ua));Ka=Math.floor(Math.min(x.length-1,Ka));if(!(ua<=K&&K<=Ka))return x;for(lb=void 0===lb?H:C(lb);Ka>ua;){if(600<Ka-ua){var Bb=Ka-ua+1,bc=K-ua+1,Sb=Math.log(Bb),nc=.5*Math.exp(2*Sb/3);Sb=.5*Math.sqrt(Sb*nc*(Bb-nc)/Bb)*(0>bc-Bb/2?-1:1);O(x,K,Math.max(ua,Math.floor(K-bc*nc/Bb+Sb)),Math.min(Ka,Math.floor(K+(Bb-
bc)*nc/Bb+Sb)),lb)}Bb=x[K];bc=ua;nc=Ka;la(x,ua,K);for(0<lb(x[Ka],Bb)&&la(x,ua,Ka);bc<nc;){la(x,bc,nc);++bc;for(--nc;0>lb(x[bc],Bb);)++bc;for(;0<lb(x[nc],Bb);)--nc}0===lb(x[ua],Bb)?la(x,ua,nc):(++nc,la(x,nc,Ka));nc<=K&&(ua=nc+1);K<=nc&&(Ka=nc-1)}return x}function la(x,K,ua){const Ka=x[K];x[K]=x[ua];x[ua]=Ka}function za(x,K,ua){x=+x;K=+K;ua=2>(lb=arguments.length)?(K=x,x=0,1):3>lb?1:+ua;for(var Ka=-1,lb=Math.max(0,Math.ceil((K-x)/ua))|0,Bb=Array(lb);++Ka<lb;)Bb[Ka]=x+Ka*ua;return Bb}function Ma(x){ia.Transform.call(this,
[],x)}function Pa(x){var K=x.method||gd.value;if(null==gd[K])h.error("Unrecognized imputation method: "+K);else{if(K===gd.value){var ua=void 0!==x.value?x.value:0;return()=>ua}return gd[K]}}function Ya(x){const K=x.field;return ua=>ua?K(ua):NaN}function vb(x,K,ua,Ka){var lb=nd=>nd(Xc),Bb=[];Ka=Ka?Ka.slice():[];var bc={},Sb={},nc,Kc;Ka.forEach((nd,Jd)=>bc[nd]=Jd+1);var Ac=0;for(Kc=x.length;Ac<Kc;++Ac){var Xc=x[Ac];var kd=ua(Xc);var pd=bc[kd]||(bc[kd]=Ka.push(kd));var xd=(kd=K?K.map(lb):Cd)+"";(nc=
Sb[xd])||(nc=Sb[xd]=[],Bb.push(nc),nc.values=kd);nc[pd-1]=Xc}Bb.domain=Ka;return Bb}function jb(x){sb.call(this,x)}function Tb(x){ia.Transform.call(this,null,x)}function W(x){ia.Operator.call(this,null,Ea,x)}function Ea(x){return this.value&&!x.modified()?this.value:h.key(x.fields,x.flat)}function Lb(x){ia.Transform.call(this,[],x);this._pending=null}function oc(x){return x.modified("async")&&!(x.modified("values")||x.modified("url")||x.modified("format"))}function $b(x,K,ua){ua.forEach(ia.ingest);
K=K.fork(K.NO_FIELDS&K.NO_SOURCE);K.rem=x.value;x.value=K.source=K.add=ua;x._pending=null;K.rem.length&&K.clean(!0);return K}function Mb(x){ia.Transform.call(this,{},x)}function Qb(x){ia.Operator.call(this,null,xc,x)}function xc(x){if(this.value&&!x.modified())return this.value;x=x.extents;const K=x.length;let ua=Infinity,Ka=-Infinity,lb,Bb;for(lb=0;lb<K;++lb)Bb=x[lb],Bb[0]<ua&&(ua=Bb[0]),Bb[1]>Ka&&(Ka=Bb[1]);return[ua,Ka]}function ed(x){ia.Operator.call(this,null,qa,x)}function qa(x){return this.value&&
!x.modified()?this.value:x.values.reduce((K,ua)=>K.concat(ua),[])}function Db(x){ia.Transform.call(this,null,x)}function Ua(x){sb.call(this,x)}function yb(x,K){const ua=x.field,Ka=x.value,lb=("count"===x.op?"__count__":x.op)||"sum",Bb=h.accessorFields(ua).concat(h.accessorFields(Ka)),bc=Nb(ua,x.limit||0,K);K.changed()&&x.set("__pivot__",null,null,!0);return{key:x.key,groupby:x.groupby,ops:bc.map(()=>lb),fields:bc.map(Sb=>Hb(Sb,ua,Ka,Bb)),as:bc.map(Sb=>Sb+""),modified:x.modified.bind(x)}}function Hb(x,
K,ua,Ka){return h.accessor(lb=>K(lb)===x?ua(lb):NaN,Ka,x+"")}function Nb(x,K,ua){const Ka={},lb=[];ua.visit(ua.SOURCE,Bb=>{Bb=x(Bb);Ka[Bb]||(Ka[Bb]=1,lb.push(Bb))});lb.sort(h.ascending);return K?lb.slice(0,K):lb}function Zb(x){ha.call(this,x)}function ic(x){ia.Transform.call(this,null,x)}function Bc(x){ia.Transform.call(this,null,x)}function jd(x){ia.Transform.call(this,null,x)}function Vc(x){ia.Transform.call(this,null,x)}function ma(x){ia.Transform.call(this,[],x);this.count=0}function Ha(x){ia.Transform.call(this,
null,x)}function gb(x){ia.Transform.call(this,null,x);this.modified(!0)}function R(x){ia.Transform.call(this,null,x)}function t(x){ia.Transform.call(this,h.fastmap(),x)}function ba(x){ia.Transform.call(this,null,x)}function va(x,K,ua,Ka){const lb=rd[x](K,ua);return{init:lb.init||h.zero,update:function(Bb,bc){bc[Ka]=lb.next(Bb)}}}function Ca(x){function K(xd){h.array(h.accessorFields(xd)).forEach(nd=>Kc[nd]=1)}const ua=h.array(x.ops),Ka=h.array(x.fields),lb=h.array(x.params),Bb=h.array(x.aggregate_params),
bc=h.array(x.as),Sb=this.outputs=[],nc=this.windows=[],Kc={},Ac={},Xc=[],kd=[];let pd=!0;K(x.sort);ua.forEach((xd,nd)=>{const Jd=Ka[nd];var me=lb[nd];const Me=Bb[nd]||null,He=h.accessorName(Jd);nd=bc[nd]||xd+(He?"_"+He:"");K(Jd);Sb.push(nd);h.hasOwnProperty(rd,xd)?nc.push(va(xd,Jd,me,nd)):(null==Jd&&"count"!==xd&&h.error("Null aggregate field specified."),"count"===xd?Xc.push(nd):(pd=!1,me=Ac[He],me||(me=Ac[He]=[],me.field=Jd,kd.push(me)),me.push(Cc[xd](nd,Me))))});if(Xc.length||kd.length)this.cell=
Sa(kd,Xc,pd);this.inputs=Object.keys(Kc)}function Sa(x,K,ua){x=x.map(nc=>wb(nc,nc.field));const Ka={num:0,agg:null,store:!1,count:K};if(!ua)for(var lb=x.length,Bb=Ka.agg=Array(lb),bc=0;bc<lb;++bc)Bb[bc]=new x[bc](Ka);if(Ka.store)var Sb=Ka.data=new ub;Ka.add=function(nc){Ka.num+=1;if(!ua){Sb&&Sb.add(nc);for(let Kc=0;Kc<lb;++Kc)Bb[Kc].add(Bb[Kc].get(nc),nc)}};Ka.rem=function(nc){--Ka.num;if(!ua){Sb&&Sb.rem(nc);for(let Kc=0;Kc<lb;++Kc)Bb[Kc].rem(Bb[Kc].get(nc),nc)}};Ka.set=function(nc){let Kc,Ac;Sb&&
Sb.values();Kc=0;for(Ac=K.length;Kc<Ac;++Kc)nc[K[Kc]]=Ka.num;if(!ua)for(Kc=0,Ac=Bb.length;Kc<Ac;++Kc)Bb[Kc].set(nc)};Ka.init=function(){Ka.num=0;Sb&&Sb.reset();for(let nc=0;nc<lb;++nc)Bb[nc].init()};return Ka}function kb(x){ia.Transform.call(this,{},x);this._mlen=0;this._mods=[]}function Rb(x,K,ua,Ka){var lb=Ka.sort;const Bb=lb&&!Ka.ignorePeers;Ka=Ka.frame||[null,0];x=x.data(ua);ua=x.length;const bc=Bb?y(lb):null;lb={i0:0,i1:0,p0:0,p1:0,index:0,data:x,compare:lb||h.constant(-1)};K.init();for(let Xc=
0;Xc<ua;++Xc){var Sb=lb,nc=Ka,Kc=Xc,Ac=ua;Sb.p0=Sb.i0;Sb.p1=Sb.i1;Sb.i0=null==nc[0]?0:Math.max(0,Kc-Math.abs(nc[0]));Sb.i1=null==nc[1]?Ac:Math.min(Ac,Kc+Math.abs(nc[1])+1);Sb.index=Kc;if(Bb){Sb=lb;nc=bc;Kc=Sb.i0;Ac=Sb.i1-1;const kd=Sb.compare,pd=Sb.data,xd=pd.length-1;0<Kc&&!kd(pd[Kc],pd[Kc-1])&&(Sb.i0=nc.left(pd,pd[Kc]));Ac<xd&&!kd(pd[Ac],pd[Ac+1])&&(Sb.i1=nc.right(pd,pd[Ac]))}K.update(lb,x[Xc])}}const Fb=()=>{},Jb={init:Fb,add:Fb,rem:Fb,idx:0},Cc={values:{init:x=>x.cell.store=!0,value:x=>x.cell.data.values(),
idx:-1},count:{value:x=>x.cell.num},__count__:{value:x=>x.missing+x.valid},missing:{value:x=>x.missing},valid:{value:x=>x.valid},sum:{init:x=>x.sum=0,value:x=>x.valid?x.sum:void 0,add:(x,K)=>x.sum+=+K,rem:(x,K)=>x.sum-=K},product:{init:x=>x.product=1,value:x=>x.valid?x.product:void 0,add:(x,K)=>x.product*=K,rem:(x,K)=>x.product/=K},mean:{init:x=>x.mean=0,value:x=>x.valid?x.mean:void 0,add:(x,K)=>(x.mean_d=K-x.mean,x.mean+=x.mean_d/x.valid),rem:(x,K)=>(x.mean_d=K-x.mean,x.mean-=x.valid?x.mean_d/x.valid:
x.mean)},average:{value:x=>x.valid?x.mean:void 0,req:["mean"],idx:1},variance:{init:x=>x.dev=0,value:x=>1<x.valid?x.dev/(x.valid-1):void 0,add:(x,K)=>x.dev+=x.mean_d*(K-x.mean),rem:(x,K)=>x.dev-=x.mean_d*(K-x.mean),req:["mean"],idx:1},variancep:{value:x=>1<x.valid?x.dev/x.valid:void 0,req:["variance"],idx:2},stdev:{value:x=>1<x.valid?Math.sqrt(x.dev/(x.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:x=>1<x.valid?Math.sqrt(x.dev/x.valid):void 0,req:["variance"],idx:2},stderr:{value:x=>1<x.valid?
Math.sqrt(x.dev/(x.valid*(x.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:x=>x.cell.data.distinct(x.get),req:["values"],idx:3},ci0:{value:x=>x.cell.data.ci0(x.get),req:["values"],idx:3},ci1:{value:x=>x.cell.data.ci1(x.get),req:["values"],idx:3},median:{value:x=>x.cell.data.q2(x.get),req:["values"],idx:3},q1:{value:x=>x.cell.data.q1(x.get),req:["values"],idx:3},q3:{value:x=>x.cell.data.q3(x.get),req:["values"],idx:3},min:{init:x=>x.min=void 0,value:x=>x.min=Number.isNaN(x.min)?x.cell.data.min(x.get):
x.min,add:(x,K)=>{if(K<x.min||void 0===x.min)x.min=K},rem:(x,K)=>{K<=x.min&&(x.min=NaN)},req:["values"],idx:4},max:{init:x=>x.max=void 0,value:x=>x.max=Number.isNaN(x.max)?x.cell.data.max(x.get):x.max,add:(x,K)=>{if(K>x.max||void 0===x.max)x.max=K},rem:(x,K)=>{K>=x.max&&(x.max=NaN)},req:["values"],idx:4},argmin:{init:x=>x.argmin=void 0,value:x=>x.argmin||x.cell.data.argmin(x.get),add:(x,K,ua)=>{K<x.min&&(x.argmin=ua)},rem:(x,K)=>{K<=x.min&&(x.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:x=>
x.argmax=void 0,value:x=>x.argmax||x.cell.data.argmax(x.get),add:(x,K,ua)=>{K>x.max&&(x.argmax=ua)},rem:(x,K)=>{K>=x.max&&(x.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(x,K)=>{x.exp=0;x.exp_r=K},value:x=>x.valid?x.exp*(1-x.exp_r)/(1-Math.pow(x.exp_r,x.valid)):void 0,add:(x,K)=>x.exp=x.exp_r*x.exp+K,rem:(x,K)=>x.exp=(x.exp-K/Math.pow(x.exp_r,x.valid-1))/x.exp_r},exponentialb:{value:x=>x.valid?x.exp*(1-x.exp_r):void 0,req:["exponential"],idx:1}},Gc=Object.keys(Cc).filter(x=>"__count__"!==
x);[...Gc,"__count__"].forEach(x=>{Cc[x]=Xb(x,Cc[x])});const Sc=ub.prototype;Sc.reset=function(){this._add=[];this._rem=[];this._q=this._get=this._ext=null};Sc.add=function(x){this._add.push(x)};Sc.rem=function(x){this._rem.push(x)};Sc.values=function(){this._get=null;if(0===this._rem.length)return this._add;const x=this._add;var K=this._rem;const ua=this._key,Ka=x.length,lb=K.length,Bb=Array(Ka-lb),bc={};let Sb,nc;for(Sb=0;Sb<lb;++Sb)bc[ua(K[Sb])]=1;for(K=Sb=0;Sb<Ka;++Sb)bc[ua(nc=x[Sb])]?bc[ua(nc)]=
0:Bb[K++]=nc;this._rem=[];return this._add=Bb};Sc.distinct=function(x){const K=this.values(),ua={};let Ka=K.length,lb=0,Bb;for(;0<=--Ka;)Bb=x(K[Ka])+"",h.hasOwnProperty(ua,Bb)||(ua[Bb]=1,++lb);return lb};Sc.extent=function(x){if(this._get!==x||!this._ext){const K=this.values(),ua=h.extentIndex(K,x);this._ext=[K[ua[0]],K[ua[1]]];this._get=x}return this._ext};Sc.argmin=function(x){return this.extent(x)[0]||{}};Sc.argmax=function(x){return this.extent(x)[1]||{}};Sc.min=function(x){const K=this.extent(x)[0];
return null!=K?x(K):void 0};Sc.max=function(x){const K=this.extent(x)[1];return null!=K?x(K):void 0};Sc.quartile=function(x){this._get===x&&this._q||(this._q=ab.quartiles(this.values(),x),this._get=x);return this._q};Sc.q1=function(x){return this.quartile(x)[0]};Sc.q2=function(x){return this.quartile(x)[1]};Sc.q3=function(x){return this.quartile(x)[2]};Sc.ci=function(x){this._get===x&&this._ci||(this._ci=ab.bootstrapCI(this.values(),1E3,.05,x),this._get=x);return this._ci};Sc.ci0=function(x){return this.ci(x)[0]};
Sc.ci1=function(x){return this.ci(x)[1]};sb.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Gc},{name:"aggregate_params",type:"number","null":!0,array:!0},{name:"fields",type:"field","null":!0,array:!0},{name:"as",type:"string","null":!0,array:!0},{name:"drop",type:"boolean","default":!0},{name:"cross",type:"boolean","default":!1},{name:"key",type:"field"}]};h.inherits(sb,ia.Transform,{transform(x,
K){const ua=this,Ka=K.fork(K.NO_SOURCE|K.NO_FIELDS),lb=x.modified();ua.stamp=Ka.stamp;ua.value&&(lb||K.modified(ua._inputs,!0))?(ua._prev=ua.value,ua.value=lb?ua.init(x):Object.create(null),K.visit(K.SOURCE,Bb=>ua.add(Bb))):(ua.value=ua.value||ua.init(x),K.visit(K.REM,Bb=>ua.rem(Bb)),K.visit(K.ADD,Bb=>ua.add(Bb)));Ka.modifies(ua._outputs);ua._drop=!1!==x.drop;x.cross&&1<ua._dims.length&&(ua._drop=!1,ua.cross());K.clean()&&ua._drop&&Ka.clean(!0).runAfter(()=>this.clean());return ua.changes(Ka)},cross(){function x(Sb){let nc,
Kc,Ac,Xc;for(nc in Sb)for(Ac=Sb[nc].tuple,Kc=0;Kc<bc;++Kc)Bb[Kc][Xc=Ac[lb[Kc]]]=Xc}function K(Sb,nc,Kc){const Ac=lb[Kc],Xc=Bb[Kc++];for(const kd in Xc){const pd=Sb?Sb+"|"+kd:kd;nc[Ac]=Xc[kd];Kc<bc?K(pd,nc,Kc):Ka[pd]||ua.cell(pd,nc)}}const ua=this,Ka=ua.value,lb=ua._dnames,Bb=lb.map(()=>({})),bc=lb.length;x(ua._prev);x(Ka);K("",{},0)},init(x){function K(me){me=h.array(h.accessorFields(me));const Me=me.length;let He=0,Ie;for(;He<Me;++He)lb[Ie=me[He]]||(lb[Ie]=1,ua.push(Ie))}const ua=this._inputs=[],
Ka=this._outputs=[],lb={};this._dims=h.array(x.groupby);this._dnames=this._dims.map(me=>{const Me=h.accessorName(me);K(me);Ka.push(Me);return Me});this.cellkey=x.key?x.key:ac(this._dims);this._countOnly=!0;this._counts=[];this._measures=[];const Bb=x.fields||[null],bc=x.ops||["count"],Sb=x.aggregate_params||[null];x=x.as||[];const nc=Bb.length,Kc={};let Ac,Xc,kd,pd,xd,nd,Jd;nc!==bc.length&&h.error("Unmatched number of fields and aggregate ops.");for(Jd=0;Jd<nc;++Jd)Ac=Bb[Jd],Xc=bc[Jd],kd=Sb[Jd]||
null,null==Ac&&"count"!==Xc&&h.error("Null aggregate field specified."),xd=h.accessorName(Ac),nd=x[Jd]||Xc+(xd?"_"+xd:""),Ka.push(nd),"count"===Xc?this._counts.push(nd):(pd=Kc[xd],pd||(K(Ac),pd=Kc[xd]=[],pd.field=Ac,this._measures.push(pd)),"count"!==Xc&&(this._countOnly=!1),pd.push(Cc[Xc](nd,kd)));this._measures=this._measures.map(me=>wb(me,me.field));return Object.create(null)},cellkey:ac(),cell(x,K){let ua=this.value[x];ua?0===ua.num&&this._drop&&ua.stamp<this.stamp?(ua.stamp=this.stamp,this._adds[this._alen++]=
ua):ua.stamp<this.stamp&&(ua.stamp=this.stamp,this._mods[this._mlen++]=ua):(ua=this.value[x]=this.newcell(x,K),this._adds[this._alen++]=ua);return ua},newcell(x,K){x={key:x,num:0,agg:null,tuple:this.newtuple(K,this._prev&&this._prev[x]),stamp:this.stamp,store:!1};if(!this._countOnly){K=this._measures;const ua=K.length;x.agg=Array(ua);for(let Ka=0;Ka<ua;++Ka)x.agg[Ka]=new K[Ka](x)}x.store&&(x.data=new ub);return x},newtuple(x,K){const ua=this._dnames,Ka=this._dims,lb=Ka.length,Bb={};for(let bc=0;bc<
lb;++bc)Bb[ua[bc]]=Ka[bc](x);return K?ia.replace(K.tuple,Bb):ia.ingest(Bb)},clean(){const x=this.value;for(const K in x)0===x[K].num&&delete x[K]},add(x){var K=this.cellkey(x);K=this.cell(K,x);K.num+=1;if(!this._countOnly){K.store&&K.data.add(x);K=K.agg;for(let ua=0,Ka=K.length;ua<Ka;++ua)K[ua].add(K[ua].get(x),x)}},rem(x){var K=this.cellkey(x);K=this.cell(K,x);--K.num;if(!this._countOnly){K.store&&K.data.rem(x);K=K.agg;for(let ua=0,Ka=K.length;ua<Ka;++ua)K[ua].rem(K[ua].get(x),x)}},celltuple(x){const K=
x.tuple,ua=this._counts;x.store&&x.data.values();for(let Ka=0,lb=ua.length;Ka<lb;++Ka)K[ua[Ka]]=x.num;if(!this._countOnly){x=x.agg;for(let Ka=0,lb=x.length;Ka<lb;++Ka)x[Ka].set(K)}return K},changes(x){const K=this._adds,ua=this._mods;var Ka=this._prev;const lb=this._drop,Bb=x.add,bc=x.rem,Sb=x.mod;let nc;var Kc;if(Ka)for(Kc in Ka)nc=Ka[Kc],lb&&!nc.num||bc.push(nc.tuple);Ka=0;for(Kc=this._alen;Ka<Kc;++Ka)Bb.push(this.celltuple(K[Ka])),K[Ka]=null;Ka=0;for(Kc=this._mlen;Ka<Kc;++Ka)nc=ua[Ka],(0===nc.num&&
lb?bc:Sb).push(this.celltuple(nc)),ua[Ka]=null;this._alen=this._mlen=0;this._prev=null;return x}});xb.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean","default":!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number","default":20},{name:"base",type:"number","default":10},{name:"divide",type:"number",array:!0,"default":[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",
type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number","default":0},{name:"nice",type:"boolean","default":!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,"default":["bin0","bin1"]}]};h.inherits(xb,ia.Transform,{transform(x,K){const ua=!1!==x.interval,Ka=this._bins(x),lb=Ka.start,Bb=Ka.step,bc=x.as||["bin0","bin1"],Sb=bc[0],nc=bc[1];x.modified()?(K=K.reflow(!0),x=K.SOURCE):x=K.modified(h.accessorFields(x.field))?K.ADD_MOD:K.ADD;K.visit(x,ua?Kc=>
{const Ac=Ka(Kc);Kc[Sb]=Ac;Kc[nc]=null==Ac?null:lb+Bb*(1+(Ac-lb)/Bb)}:Kc=>Kc[Sb]=Ka(Kc));return K.modifies(ua?bc:Sb)},_bins(x){if(this.value&&!x.modified())return this.value;const K=x.field,ua=ab.bin(x),Ka=ua.step;let lb=ua.start,Bb=lb+Math.ceil((ua.stop-lb)/Ka)*Ka;var bc;null!=(bc=x.anchor)&&(bc-=lb+Ka*Math.floor((bc-lb)/Ka),lb+=bc,Bb+=bc);bc=function(Sb){Sb=h.toNumber(K(Sb));return null==Sb?null:Sb<lb?-Infinity:Sb>Bb?Infinity:(Sb=Math.max(lb,Math.min(Sb,Bb-Ka)),lb+Ka*Math.floor(1E-14+(Sb-lb)/Ka))};
bc.start=lb;bc.stop=ua.stop;bc.step=Ka;return this.value=h.accessor(bc,h.accessorFields(K),x.name||"bin_"+h.accessorName(K))}});ec.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};h.inherits(ec,ia.Transform,{transform(x,K){const ua=K.fork(K.ALL),Ka=ib(ia.tupleid,this.value,ua.materialize(ua.ADD).add),lb=x.sort;x=K.changed()||lb&&(x.modified("sort")||K.modified(lb.fields));ua.visit(ua.REM,Ka.remove);this.modified(x);this.value=ua.source=Ka.data(ia.stableCompare(lb),
x);K.source&&K.source.root&&(this.value.root=K.source.root);return ua}});h.inherits(ra,ia.Operator);xa.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],"default":"mixed"},{name:"pattern",type:"string","default":'[\\w"]+'},{name:"stopwords",type:"string","default":""},{name:"as",type:"string",array:!0,length:2,"default":["text","count"]}]};h.inherits(xa,ia.Transform,{transform(x,
K){var ua=Ac=>Xc=>{Xc=Sb(Xc);var kd=Bb;switch(x.case){case "upper":Xc=Xc.toUpperCase();break;case "lower":Xc=Xc.toLowerCase()}Xc=Xc.match(kd)||[];var pd;kd=0;for(var xd=Xc.length;kd<xd;++kd)bc.test(pd=Xc[kd])||Ac(pd)};const Ka=this._parameterCheck(x,K),lb=this._counts,Bb=this._match,bc=this._stop,Sb=x.field,nc=x.as||["text","count"],Kc=ua(Ac=>lb[Ac]=1+(lb[Ac]||0));ua=ua(Ac=>--lb[Ac]);Ka?K.visit(K.SOURCE,Kc):(K.visit(K.ADD,Kc),K.visit(K.REM,ua));return this._finish(K,nc)},_parameterCheck(x,K){let ua=
!1;if(x.modified("stopwords")||!this._stop)this._stop=new RegExp("^"+(x.stopwords||"")+"$","i"),ua=!0;if(x.modified("pattern")||!this._match)this._match=new RegExp(x.pattern||"[\\w']+","g"),ua=!0;if(x.modified("field")||K.modified(x.field.fields))ua=!0;ua&&(this._counts={});return ua},_finish(x,K){const ua=this._counts,Ka=this._tuples||(this._tuples={}),lb=K[0],Bb=K[1];x=x.fork(x.NO_SOURCE|x.NO_FIELDS);let bc,Sb,nc;for(bc in ua)Sb=Ka[bc],nc=ua[bc]||0,!Sb&&nc?(Ka[bc]=Sb=ia.ingest({}),Sb[lb]=bc,Sb[Bb]=
nc,x.add.push(Sb)):0===nc?(Sb&&x.rem.push(Sb),ua[bc]=null,Ka[bc]=null):Sb[Bb]!==nc&&(Sb[Bb]=nc,x.mod.push(Sb));return x.modifies(K)}});Ra.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,"default":["a","b"]}]};h.inherits(Ra,ia.Transform,{transform(x,K){const ua=K.fork(K.NO_SOURCE),Ka=x.as||["a","b"],lb=Ka[0],Bb=Ka[1];var bc=!this.value||K.changed(K.ADD_REM)||x.modified("as")||x.modified("filter"),Sb=this.value;if(bc){Sb&&
(ua.rem=Sb);K=Sb=K.materialize(K.SOURCE).source;x=x.filter||h.truthy;bc=[];Sb={};for(var nc=K.length,Kc=0,Ac,Xc;Kc<nc;++Kc)for(Sb[lb]=Xc=K[Kc],Ac=0;Ac<nc;++Ac)Sb[Bb]=K[Ac],x(Sb)&&(bc.push(ia.ingest(Sb)),Sb={},Sb[lb]=Xc);ua.add=this.value=bc}else ua.mod=Sb;ua.source=this.value;return ua.modifies(Ka)}});const vd={kde:ab.randomKDE,mixture:ab.randomMixture,normal:ab.randomNormal,lognormal:ab.randomLogNormal,uniform:ab.randomUniform},od=[{key:{"function":"normal"},params:[{name:"mean",type:"number","default":0},
{name:"stdev",type:"number","default":1}]},{key:{"function":"lognormal"},params:[{name:"mean",type:"number","default":0},{name:"stdev",type:"number","default":1}]},{key:{"function":"uniform"},params:[{name:"min",type:"number","default":0},{name:"max",type:"number","default":1}]},{key:{"function":"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number","default":0}]}];Ga.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",
type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number","default":25},{name:"maxsteps",type:"number","default":200},{name:"method",type:"string","default":"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:od.concat({key:{"function":"mixture"},params:[{name:"distributions",type:"param",array:!0,params:od},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,"default":["value","density"]}]};h.inherits(Ga,ia.Transform,{transform(x,
K){const ua=K.fork(K.NO_SOURCE|K.NO_FIELDS);if(!this.value||K.changed()||x.modified()){const Ka=Va(x.distribution,hb(K));K=x.steps||x.minsteps||25;const lb=x.steps||x.maxsteps||200;let Bb=x.method||"pdf";"pdf"!==Bb&&"cdf"!==Bb&&h.error("Invalid density method: "+Bb);x.extent||Ka.data||h.error("Missing density extent parameter.");Bb=Ka[Bb];const bc=x.as||["value","density"];x=x.extent||h.extent(Ka.data());x=ab.sampleCurve(Bb,x,K,lb).map(Sb=>{const nc={};nc[bc[0]]=Sb[0];nc[bc[1]]=Sb[1];return ia.ingest(nc)});
this.value&&(ua.rem=this.value);this.value=ua.add=ua.source=x}return ua}});Pb.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean","default":!1},{name:"as",type:"string","default":"bin"}]};h.inherits(Pb,ia.Transform,{transform(x,K){if(this.value&&!x.modified()&&!K.changed())return K;var ua=K.materialize(K.SOURCE).source;const Ka=tb(K.source,x.groupby,h.identity),
lb=x.smooth||!1,Bb=x.field;ua=x.step||h.span(h.extent(ua,Bb))/30;const bc=ia.stableCompare((kd,pd)=>Bb(kd)-Bb(pd));x=x.as||"bin";const Sb=Ka.length;let nc=Infinity,Kc=-Infinity,Ac=0,Xc;for(;Ac<Sb;++Ac){const kd=Ka[Ac].sort(bc);Xc=-1;for(const pd of ab.dotbin(kd,ua,lb,Bb))pd<nc&&(nc=pd),pd>Kc&&(Kc=pd),kd[++Xc][x]=pd}this.value={start:nc,stop:Kc,step:ua};return K.reflow(!0).modifies(x)}});h.inherits(eb,ia.Operator);Z.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};
h.inherits(Z,ia.Transform,{transform(x,K){var ua=this.value;const Ka=x.field;x=K.changed()||K.modified(Ka.fields)||x.modified("field");let lb=ua[0],Bb=ua[1];if(x||null==lb)lb=Infinity,Bb=-Infinity;K.visit(x?K.SOURCE:K.ADD,bc=>{bc=h.toNumber(Ka(bc));null!=bc&&(bc<lb&&(lb=bc),bc>Bb&&(Bb=bc))});Number.isFinite(lb)&&Number.isFinite(Bb)||((ua=h.accessorName(Ka))&&(ua=` for field "${ua}"`),K.dataflow.warn(`Infinite extent${ua}: [${lb}, ${Bb}]`),lb=Bb=void 0);this.value=[lb,Bb]}});h.inherits(ca,ia.Operator,
{connect(x){this.detachSubflow=x.detachSubflow;this.targets().add(x);return x.source=this},add(x){this.count+=1;this.value.add.push(x)},rem(x){--this.count;this.value.rem.push(x)},mod(x){this.value.mod.push(x)},init(x){this.value.init(x,x.NO_SOURCE)},evaluate(){return this.value}});h.inherits(ha,ia.Transform,{activate(x){this._targets[this._targets.active++]=x},subflow(x,K,ua,Ka){const lb=this.value;let Bb=h.hasOwnProperty(lb,x)&&lb[x],bc;Bb?Bb.value.stamp<ua.stamp&&(Bb.init(ua),this.activate(Bb)):
(bc=Ka||(bc=this._group[x])&&bc.tuple,Ka=ua.dataflow,Bb=new ca(ua.fork(ua.NO_SOURCE),this),Ka.add(Bb).connect(K(Ka,x,bc)),lb[x]=Bb,this.activate(Bb));return Bb},clean(){var x=this.value;let K=0;for(const ua in x)if(0===x[ua].count){const Ka=x[ua].detachSubflow;Ka&&Ka();delete x[ua];++K}K&&(x=this._targets.filter(ua=>ua&&0<ua.count),this.initTargets(x))},initTargets(x){const K=this._targets,ua=K.length,Ka=x?x.length:0;let lb=0;for(;lb<Ka;++lb)K[lb]=x[lb];for(;lb<ua&&null!=K[lb];++lb)K[lb]=null;K.active=
Ka},transform(x,K){const ua=K.dataflow,Ka=x.key,lb=x.subflow,Bb=this._keys,bc=x.modified("key"),Sb=nc=>this.subflow(nc,lb,K);this._group=x.group||{};this.initTargets();K.visit(K.REM,nc=>{const Kc=ia.tupleid(nc),Ac=Bb.get(Kc);void 0!==Ac&&(Bb.delete(Kc),Sb(Ac).rem(nc))});K.visit(K.ADD,nc=>{const Kc=Ka(nc);Bb.set(ia.tupleid(nc),Kc);Sb(Kc).add(nc)});bc||K.modified(Ka.fields)?K.visit(K.MOD,nc=>{const Kc=ia.tupleid(nc),Ac=Bb.get(Kc),Xc=Ka(nc);Ac===Xc?Sb(Xc).mod(nc):(Bb.set(Kc,Xc),Sb(Ac).rem(nc),Sb(Xc).add(nc))}):
K.changed(K.MOD)&&K.visit(K.MOD,nc=>{Sb(Bb.get(ia.tupleid(nc))).mod(nc)});bc&&K.visit(K.REFLOW,nc=>{const Kc=ia.tupleid(nc),Ac=Bb.get(Kc),Xc=Ka(nc);Ac!==Xc&&(Bb.set(Kc,Xc),Sb(Ac).rem(nc),Sb(Xc).add(nc))});K.clean()?ua.runAfter(()=>{this.clean();Bb.clean()}):Bb.empty>ua.cleanThreshold&&ua.runAfter(Bb.clean);return K}});h.inherits(La,ia.Operator);pa.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};h.inherits(pa,ia.Transform,{transform(x,K){function ua(Xc){const kd=
ia.tupleid(Xc),pd=Kc(Xc,x),xd=lb.get(kd);pd&&xd?(lb.delete(kd),bc.push(Xc)):pd||xd?Ac&&pd&&!xd&&nc.push(Xc):(lb.set(kd,1),Sb.push(Xc))}const Ka=K.dataflow,lb=this.value,Bb=K.fork(),bc=Bb.add,Sb=Bb.rem,nc=Bb.mod,Kc=x.expr;let Ac=!0;K.visit(K.REM,Xc=>{const kd=ia.tupleid(Xc);lb.has(kd)?lb.delete(kd):Sb.push(Xc)});K.visit(K.ADD,Xc=>{Kc(Xc,x)?bc.push(Xc):lb.set(ia.tupleid(Xc),1)});K.visit(K.MOD,ua);x.modified()&&(Ac=!1,K.visit(K.REFLOW,ua));lb.empty>Ka.cleanThreshold&&Ka.runAfter(lb.clean);return Bb}});
m.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};h.inherits(m,ia.Transform,{transform(x,K){const ua=K.fork(K.NO_SOURCE),Ka=x.fields,lb=bb(Ka,x.as||[]),Bb=x.index||null,bc=lb.length;ua.rem=this.value;K.visit(K.SOURCE,Sb=>{const nc=Ka.map(xd=>xd(Sb)),Kc=nc.reduce((xd,nd)=>Math.max(xd,nd.length),0);let Ac=0,Xc,kd,pd;for(;Ac<Kc;++Ac){kd=ia.derive(Sb);for(Xc=0;Xc<bc;++Xc)kd[lb[Xc]]=
null==(pd=nc[Xc][Ac])?null:pd;Bb&&(kd[Bb]=Ac);ua.add.push(kd)}});this.value=ua.source=ua.add;Bb&&ua.modifies(Bb);return ua.modifies(lb)}});E.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,"default":["key","value"]}]};h.inherits(E,ia.Transform,{transform(x,K){const ua=K.fork(K.NO_SOURCE),Ka=x.fields,lb=Ka.map(h.accessorName);x=x.as||["key","value"];const Bb=x[0],bc=x[1],Sb=Ka.length;ua.rem=this.value;
K.visit(K.SOURCE,nc=>{for(let Kc=0,Ac;Kc<Sb;++Kc)Ac=ia.derive(nc),Ac[Bb]=lb[Kc],Ac[bc]=Ka[Kc](nc),ua.add.push(Ac)});this.value=ua.source=ua.add;return ua.modifies(x)}});L.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};h.inherits(L,ia.Transform,{transform(x,K){const ua=x.expr,Ka=x.as,lb=x.modified(),Bb=x.initonly?K.ADD:lb?K.SOURCE:K.modified(ua.fields)||K.modified(Ka)?K.ADD_MOD:
K.ADD;lb&&(K=K.materialize().reflow(!0));x.initonly||K.modifies(Ka);return K.visit(Bb,bc=>bc[Ka]=ua(bc,x))}});h.inherits(w,ia.Transform,{transform(x,K){K=K.fork(K.ALL);const ua=x.generator;let Ka=this.value,lb=x.size-Ka.length,Bb,bc;if(0<lb){for(Bb=[];0<=--lb;)Bb.push(bc=ia.ingest(ua(x))),Ka.push(bc);K.add=K.add.length?K.materialize(K.ADD).add.concat(Bb):Bb}else x=Ka.slice(0,-lb),K.rem=K.rem.length?K.materialize(K.REM).rem.concat(x):x,Ka=Ka.slice(-lb);K.source=this.value=Ka;return K}});const gd={value:"value",
median:function(x,K){var ua=.5;x=Float64Array.from(z(x,K));if((K=x.length)&&!isNaN(ua=+ua))if(0>=ua||2>K)x=Aa(x);else if(1<=ua)x=V(x);else{ua*=K-1;K=Math.floor(ua);var Ka=V(O(x,K).subarray(0,K+1));x=Aa(x.subarray(K+1));x=Ka+(x-Ka)*(ua-K)}else x=void 0;return x},mean:function(x,K){let ua=0,Ka=0;if(void 0===K)for(var lb of x)null!=lb&&(lb=+lb)>=lb&&(++ua,Ka+=lb);else{lb=-1;for(let Bb of x)null!=(Bb=K(Bb,++lb,x))&&(Bb=+Bb)>=Bb&&(++ua,Ka+=Bb)}if(ua)return Ka/ua},min:Aa,max:V},Cd=[];Ma.Definition={type:"Impute",
metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum","default":"value",values:["value","mean","median","max","min"]},{name:"value","default":0}]};h.inherits(Ma,ia.Transform,{transform(x,K){var ua=K.fork(K.ALL),Ka=Pa(x),lb=Ya(x),Bb=h.accessorName(x.field),bc=h.accessorName(x.key),Sb=(x.groupby||[]).map(h.accessorName);x=vb(K.source,x.groupby,x.key,x.keyvals);
K=[];var nc=this.value,Kc=x.domain.length,Ac,Xc,kd;var pd=0;for(Xc=x.length;pd<Xc;++pd){var xd=x[pd];var nd=xd.values;var Jd=NaN;for(Ac=0;Ac<Kc;++Ac)if(null==xd[Ac]){var me=x.domain[Ac];var Me={_impute:!0};var He=0;for(kd=nd.length;He<kd;++He)Me[Sb[He]]=nd[He];Me[bc]=me;Me[Bb]=Number.isNaN(Jd)?Jd=Ka(xd,lb):Jd;K.push(ia.ingest(Me))}}K.length&&(ua.add=ua.materialize(ua.ADD).add.concat(K));nc.length&&(ua.rem=ua.materialize(ua.REM).rem.concat(nc));this.value=K;return ua}});jb.Definition={type:"JoinAggregate",
metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field","null":!0,array:!0},{name:"ops",type:"enum",array:!0,values:Gc},{name:"as",type:"string","null":!0,array:!0},{name:"key",type:"field"}]};h.inherits(jb,sb,{transform(x,K){const ua=this,Ka=x.modified();let lb;ua.value&&(Ka||K.modified(ua._inputs,!0))?(lb=ua.value=Ka?ua.init(x):{},K.visit(K.SOURCE,Bb=>ua.add(Bb))):(lb=ua.value=ua.value||this.init(x),K.visit(K.REM,Bb=>ua.rem(Bb)),K.visit(K.ADD,Bb=>ua.add(Bb)));
ua.changes();K.visit(K.SOURCE,Bb=>{h.extend(Bb,lb[ua.cellkey(Bb)].tuple)});return K.reflow(Ka).modifies(this._outputs)},changes(){const x=this._adds,K=this._mods;let ua,Ka;ua=0;for(Ka=this._alen;ua<Ka;++ua)this.celltuple(x[ua]),x[ua]=null;ua=0;for(Ka=this._mlen;ua<Ka;++ua)this.celltuple(K[ua]),K[ua]=null;this._alen=this._mlen=0}});Tb.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",
"default":!1},{name:"counts",type:"boolean","default":!1},{name:"bandwidth",type:"number","default":0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],"default":"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number","default":25},{name:"maxsteps",type:"number","default":200},{name:"as",type:"string",array:!0,"default":["value","density"]}]};h.inherits(Tb,ia.Transform,{transform(x,K){const ua=K.fork(K.NO_SOURCE|K.NO_FIELDS);
if(!this.value||K.changed()||x.modified()){K=K.materialize(K.SOURCE).source;const Ka=tb(K,x.groupby,x.field),lb=(x.groupby||[]).map(h.accessorName),Bb=x.bandwidth,bc=x.cumulative?"cdf":"pdf",Sb=x.as||["value","density"],nc=[];let Kc=x.extent,Ac=x.steps||x.minsteps||25,Xc=x.steps||x.maxsteps||200;"pdf"!==bc&&"cdf"!==bc&&h.error("Invalid density method: "+bc);"shared"===x.resolve&&(Kc||(Kc=h.extent(K,x.field)),Ac=Xc=x.steps||Xc);Ka.forEach(kd=>{const pd=ab.randomKDE(kd,Bb)[bc],xd=x.counts?kd.length:
1,nd=Kc||h.extent(kd);ab.sampleCurve(pd,nd,Ac,Xc).forEach(Jd=>{const me={};for(let Me=0;Me<lb.length;++Me)me[lb[Me]]=kd.dims[Me];me[Sb[0]]=Jd[0];me[Sb[1]]=Jd[1]*xd;nc.push(ia.ingest(me))})});this.value&&(ua.rem=this.value);this.value=ua.add=ua.source=nc}return ua}});h.inherits(W,ia.Operator);h.inherits(Lb,ia.Transform,{transform(x,K){const ua=K.dataflow;return this._pending?$b(this,K,this._pending):oc(x)?K.StopPropagation:x.values?$b(this,K,ua.parse(x.values,x.format)):x.async?{async:ua.request(x.url,
x.format).then(Ka=>{this._pending=h.array(Ka.data);return lb=>lb.touch(this)})}:ua.request(x.url,x.format).then(Ka=>$b(this,K,h.array(Ka.data)))}});Mb.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default","default":null}]};h.inherits(Mb,ia.Transform,
{transform(x,K){const ua=x.fields,Ka=x.index,lb=x.values,Bb=null==x.default?null:x.default;var bc=x.modified();const Sb=ua.length;let nc=bc?K.SOURCE:K.ADD,Kc=K,Ac=x.as,Xc;lb?(Xc=lb.length,1<Sb&&!Ac&&h.error('Multi-field lookup requires explicit "as" parameter.'),Ac&&Ac.length!==Sb*Xc&&h.error('The "as" parameter has too few output field names.'),Ac=Ac||lb.map(h.accessorName),x=function(kd){for(var pd=0,xd=0,nd,Jd;pd<Sb;++pd)if(Jd=Ka.get(ua[pd](kd)),null==Jd)for(nd=0;nd<Xc;++nd,++xd)kd[Ac[xd]]=Bb;
else for(nd=0;nd<Xc;++nd,++xd)kd[Ac[xd]]=lb[nd](Jd)}):(Ac||h.error("Missing output field names."),x=function(kd){for(var pd=0,xd;pd<Sb;++pd)xd=Ka.get(ua[pd](kd)),kd[Ac[pd]]=null==xd?Bb:xd});bc?Kc=K.reflow(!0):(bc=ua.some(kd=>K.modified(kd.fields)),nc|=bc?K.MOD:0);K.visit(nc,x);return Kc.modifies(Ac)}});h.inherits(Qb,ia.Operator);h.inherits(ed,ia.Operator);h.inherits(Db,ia.Transform,{transform(x,K){this.modified(x.modified());this.value=x;return K.fork(K.NO_SOURCE|K.NO_FIELDS)}});Ua.Definition={type:"Pivot",
metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Gc,"default":"sum"},{name:"limit",type:"number","default":0},{name:"key",type:"field"}]};h.inherits(Ua,sb,{_transform:sb.prototype.transform,transform(x,K){return this._transform(yb(x,K),K)}});h.inherits(Zb,ha,{transform(x,K){const ua=x.subflow,Ka=x.field,lb=Bb=>this.subflow(ia.tupleid(Bb),ua,K,Bb);(x.modified("field")||
Ka&&K.modified(h.accessorFields(Ka)))&&h.error("PreFacet does not support field modification.");this.initTargets();Ka?(K.visit(K.MOD,Bb=>{const bc=lb(Bb);Ka(Bb).forEach(Sb=>bc.mod(Sb))}),K.visit(K.ADD,Bb=>{const bc=lb(Bb);Ka(Bb).forEach(Sb=>bc.add(ia.ingest(Sb)))}),K.visit(K.REM,Bb=>{const bc=lb(Bb);Ka(Bb).forEach(Sb=>bc.rem(Sb))})):(K.visit(K.MOD,Bb=>lb(Bb).mod(Bb)),K.visit(K.ADD,Bb=>lb(Bb).add(Bb)),K.visit(K.REM,Bb=>lb(Bb).rem(Bb)));K.clean()&&K.runAfter(()=>this.clean());return K}});ic.Definition=
{type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string","null":!0,array:!0}]};h.inherits(ic,ia.Transform,{transform(x,K){const ua=K.fork(K.NO_SOURCE),Ka=x.fields,lb=bb(x.fields,x.as||[]),Bb=Ka?(Sb,nc)=>{for(let Kc=0,Ac=Ka.length;Kc<Ac;++Kc)nc[lb[Kc]]=Ka[Kc](Sb);return nc}:ia.rederive;let bc;this.value?bc=this.value:(K=K.addAll(),bc=this.value={});K.visit(K.REM,Sb=>{Sb=ia.tupleid(Sb);ua.rem.push(bc[Sb]);bc[Sb]=null});K.visit(K.ADD,Sb=>
{const nc=Bb(Sb,ia.ingest({}));bc[ia.tupleid(Sb)]=nc;ua.add.push(nc)});K.visit(K.MOD,Sb=>{ua.mod.push(Bb(Sb,bc[ia.tupleid(Sb)]))});return ua}});h.inherits(Bc,ia.Transform,{transform(x,K){this.value=x.value;return x.modified("value")?K.fork(K.NO_SOURCE|K.NO_FIELDS):K.StopPropagation}});jd.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",
"default":.01},{name:"as",type:"string",array:!0,"default":["prob","value"]}]};h.inherits(jd,ia.Transform,{transform(x,K){const ua=K.fork(K.NO_SOURCE|K.NO_FIELDS),Ka=x.as||["prob","value"];if(this.value&&!x.modified()&&!K.changed())return ua.source=this.value,ua;K=K.materialize(K.SOURCE).source;K=tb(K,x.groupby,x.field);const lb=(x.groupby||[]).map(h.accessorName),Bb=[],bc=x.step||.01,Sb=x.probs||za(bc/2,1-1E-14,bc),nc=Sb.length;K.forEach(Kc=>{const Ac=ab.quantiles(Kc,Sb);for(let Xc=0;Xc<nc;++Xc){const kd=
{};for(let pd=0;pd<lb.length;++pd)kd[lb[pd]]=Kc.dims[pd];kd[Ka[0]]=Sb[Xc];kd[Ka[1]]=Ac[Xc];Bb.push(ia.ingest(kd))}});this.value&&(ua.rem=this.value);this.value=ua.add=ua.source=Bb;return ua}});h.inherits(Vc,ia.Transform,{transform(x,K){let ua,Ka;this.value?Ka=this.value:(ua=K=K.addAll(),Ka=this.value={});x.derive&&(ua=K.fork(K.NO_SOURCE),K.visit(K.REM,lb=>{lb=ia.tupleid(lb);ua.rem.push(Ka[lb]);Ka[lb]=null}),K.visit(K.ADD,lb=>{const Bb=ia.derive(lb);Ka[ia.tupleid(lb)]=Bb;ua.add.push(Bb)}),K.visit(K.MOD,
lb=>{const Bb=Ka[ia.tupleid(lb)];for(const bc in lb)Bb[bc]=lb[bc],ua.modifies(bc);ua.mod.push(Bb)}));return ua}});ma.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number","default":1E3}]};h.inherits(ma,ia.Transform,{transform(x,K){function ua(Ac){let Xc,kd;Sb.length<Bb?Sb.push(Ac):(kd=~~((nc+1)*ab.random()),kd<Sb.length&&kd>=Kc&&(Xc=Sb[kd],bc[ia.tupleid(Xc)]&&Ka.rem.push(Xc),Sb[kd]=Ac));++nc}const Ka=K.fork(K.NO_SOURCE);var lb=x.modified("size");const Bb=x.size,bc=this.value.reduce((Ac,
Xc)=>(Ac[ia.tupleid(Xc)]=1,Ac),{});let Sb=this.value,nc=this.count,Kc=0;K.rem.length&&(K.visit(K.REM,Ac=>{const Xc=ia.tupleid(Ac);bc[Xc]&&(bc[Xc]=-1,Ka.rem.push(Ac));--nc}),Sb=Sb.filter(Ac=>-1!==bc[ia.tupleid(Ac)]));(K.rem.length||lb)&&Sb.length<Bb&&K.source&&(Kc=nc=Sb.length,K.visit(K.SOURCE,Ac=>{bc[ia.tupleid(Ac)]||ua(Ac)}),Kc=-1);if(lb&&Sb.length>Bb){x=Sb.length-Bb;for(lb=0;lb<x;++lb)bc[ia.tupleid(Sb[lb])]=-1,Ka.rem.push(Sb[lb]);Sb=Sb.slice(x)}K.mod.length&&K.visit(K.MOD,Ac=>{bc[ia.tupleid(Ac)]&&
Ka.mod.push(Ac)});K.add.length&&K.visit(K.ADD,ua);if(K.add.length||0>Kc)Ka.add=Sb.filter(Ac=>!bc[ia.tupleid(Ac)]);this.count=nc;this.value=Ka.source=Sb;return Ka}});Ha.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number","default":1},{name:"as",type:"string","default":"data"}]};h.inherits(Ha,ia.Transform,{transform(x,K){if(!this.value||x.modified()){var ua=K.materialize().fork(K.MOD),
Ka=x.as||"data";ua.rem=this.value?K.rem.concat(this.value):K.rem;this.value=za(x.start,x.stop,x.step||1).map(lb=>{const Bb={};Bb[Ka]=lb;return ia.ingest(Bb)});ua.add=K.add.concat(this.value);return ua}}});h.inherits(gb,ia.Transform,{transform(x,K){this.value=K.source;return K.changed()?K.fork(K.NO_SOURCE|K.NO_FIELDS):K.StopPropagation}});const Dd=["unit0","unit1"];R.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean","default":!0},
{name:"units",type:"enum",values:zb.TIME_UNITS,array:!0},{name:"step",type:"number","default":1},{name:"maxbins",type:"number","default":40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum","default":"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,"default":Dd}]};h.inherits(R,ia.Transform,{transform(x,K){const ua=x.field,Ka=!1!==x.interval;var lb="utc"===x.timezone;const Bb=this._floor(x,K),bc=(lb?zb.utcInterval:zb.timeInterval)(Bb.unit).offset;lb=x.as||
Dd;const Sb=lb[0],nc=lb[1],Kc=Bb.step;let Ac=Bb.start||Infinity,Xc=Bb.stop||-Infinity,kd=K.ADD;if(x.modified()||K.changed(K.REM)||K.modified(h.accessorFields(ua)))K=K.reflow(!0),kd=K.SOURCE,Ac=Infinity,Xc=-Infinity;K.visit(kd,pd=>{var xd=ua(pd);let nd;null==xd?(pd[Sb]=null,Ka&&(pd[nc]=null)):(pd[Sb]=xd=nd=Bb(xd),Ka&&(pd[nc]=nd=bc(xd,Kc)),xd<Ac&&(Ac=xd),nd>Xc&&(Xc=nd))});Bb.start=Ac;Bb.stop=Xc;return K.modifies(Ka?lb:Sb)},_floor(x,K){var ua="utc"===x.timezone;const {units:Ka,step:lb}=x.units?{units:x.units,
step:x.step||1}:zb.timeBin({extent:x.extent||h.extent(K.materialize(K.SOURCE).source,x.field),maxbins:x.maxbins});x=zb.timeUnits(Ka);K=this.value||{};ua=(ua?zb.utcFloor:zb.timeFloor)(x,lb);ua.unit=h.peek(x);ua.units=x;ua.step=lb;ua.start=K.start;ua.stop=K.stop;return this.value=ua}});h.inherits(t,ia.Transform,{transform(x,K){const ua=K.dataflow,Ka=x.field,lb=this.value,Bb=Sb=>lb.set(Ka(Sb),Sb);let bc=!0;x.modified("field")||K.modified(Ka.fields)?(lb.clear(),K.visit(K.SOURCE,Bb)):K.changed()?(K.visit(K.REM,
Sb=>lb.delete(Ka(Sb))),K.visit(K.ADD,Bb)):bc=!1;this.modified(bc);lb.empty>ua.cleanThreshold&&ua.runAfter(lb.clean);return K.fork()}});h.inherits(ba,ia.Transform,{transform(x,K){if(!this.value||x.modified("field")||x.modified("sort")||K.changed()||x.sort&&K.modified(x.sort.fields))this.value=(x.sort?K.source.slice().sort(ia.stableCompare(x.sort)):K.source).map(x.field)}});const rd={row_number:function(){return{next:x=>x.index+1}},rank:function(){let x;return{init:()=>x=1,next:K=>{const ua=K.index,
Ka=K.data;return ua&&K.compare(Ka[ua-1],Ka[ua])?x=ua+1:x}}},dense_rank:function(){let x;return{init:()=>x=1,next:K=>{const ua=K.index,Ka=K.data;return ua&&K.compare(Ka[ua-1],Ka[ua])?++x:x}}},percent_rank:function(){const x=rd.rank(),K=x.next;return{init:x.init,next:ua=>(K(ua)-1)/(ua.data.length-1)}},cume_dist:function(){let x;return{init:()=>x=0,next:K=>{const ua=K.data,Ka=K.compare;K=K.index;if(x<K){for(;K+1<ua.length&&!Ka(ua[K],ua[K+1]);)++K;x=K}return(1+x)/ua.length}}},ntile:function(x,K){K=+K;
0<K||h.error("ntile num must be greater than zero.");x=rd.cume_dist();const ua=x.next;return{init:x.init,next:Ka=>Math.ceil(K*ua(Ka))}},lag:function(x,K){K=+K||1;return{next:ua=>{const Ka=ua.index-K;return 0<=Ka?x(ua.data[Ka]):null}}},lead:function(x,K){K=+K||1;return{next:ua=>{const Ka=ua.index+K;ua=ua.data;return Ka<ua.length?x(ua[Ka]):null}}},first_value:function(x){return{next:K=>x(K.data[K.i0])}},last_value:function(x){return{next:K=>x(K.data[K.i1-1])}},nth_value:function(x,K){K=+K;0<K||h.error("nth_value nth must be greater than zero.");
return{next:ua=>{const Ka=ua.i0+(K-1);return Ka<ua.i1?x(ua.data[Ka]):null}}},prev_value:function(x){let K;return{init:()=>K=null,next:ua=>{ua=x(ua.data[ua.index]);return null!=ua?K=ua:K}}},next_value:function(x){let K,ua;return{init:()=>(K=null,ua=-1),next:Ka=>{var lb=Ka.data;if(Ka.index<=ua)lb=K;else{a:{Ka=Ka.index;for(let Bb=lb.length;Ka<Bb;++Ka)if(null!=x(lb[Ka]))break a;Ka=-1}lb=0>(ua=Ka)?(ua=lb.length,K=null):K=x(lb[ua])}return lb}}}},we=Object.keys(rd),Bd=Ca.prototype;Bd.init=function(){this.windows.forEach(x=>
x.init());this.cell&&this.cell.init()};Bd.update=function(x,K){const ua=this.cell,Ka=this.windows,lb=x.data,Bb=Ka&&Ka.length;let bc;if(ua){for(bc=x.p0;bc<x.i0;++bc)ua.rem(lb[bc]);for(bc=x.p1;bc<x.i1;++bc)ua.add(lb[bc]);ua.set(K)}for(bc=0;bc<Bb;++bc)Ka[bc].update(x,K)};kb.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:we.concat(Gc)},{name:"params",type:"number","null":!0,array:!0},
{name:"aggregate_params",type:"number","null":!0,array:!0},{name:"fields",type:"field","null":!0,array:!0},{name:"as",type:"string","null":!0,array:!0},{name:"frame",type:"number","null":!0,array:!0,length:2,"default":[null,0]},{name:"ignorePeers",type:"boolean","default":!1}]};h.inherits(kb,ia.Transform,{transform(x,K){this.stamp=K.stamp;const ua=x.modified(),Ka=ia.stableCompare(x.sort),lb=ac(x.groupby),Bb=Sb=>this.group(lb(Sb));let bc=this.state;if(!bc||ua)bc=this.state=new Ca(x);ua||K.modified(bc.inputs)?
(this.value={},K.visit(K.SOURCE,Sb=>Bb(Sb).add(Sb))):(K.visit(K.REM,Sb=>Bb(Sb).remove(Sb)),K.visit(K.ADD,Sb=>Bb(Sb).add(Sb)));for(let Sb=0,nc=this._mlen;Sb<nc;++Sb)Rb(this._mods[Sb],bc,Ka,x);this._mlen=0;this._mods=[];return K.reflow(ua).modifies(bc.outputs)},group(x){let K=this.value[x];K||(K=this.value[x]=ib(ia.tupleid),K.stamp=-1);K.stamp<this.stamp&&(K.stamp=this.stamp,this._mods[this._mlen++]=K);return K}});u.aggregate=sb;u.bin=xb;u.collect=ec;u.compare=ra;u.countpattern=xa;u.cross=Ra;u.density=
Ga;u.dotbin=Pb;u.expression=eb;u.extent=Z;u.facet=ha;u.field=La;u.filter=pa;u.flatten=m;u.fold=E;u.formula=L;u.generate=w;u.impute=Ma;u.joinaggregate=jb;u.kde=Tb;u.key=W;u.load=Lb;u.lookup=Mb;u.multiextent=Qb;u.multivalues=ed;u.params=Db;u.pivot=Ua;u.prefacet=Zb;u.project=ic;u.proxy=Bc;u.quantile=jd;u.relay=Vc;u.sample=ma;u.sequence=Ha;u.sieve=gb;u.subflow=ca;u.timeunit=R;u.tupleindex=t;u.values=ba;u.window=kb})};
shadow$provide[32]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa):"function"===typeof define&&define.amd?define(["exports"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={}))})(this,function(u){function h(ia,ab){if("undefined"!==typeof document&&document.createElement){const zb=document.createElement("canvas");if(zb&&zb.getContext)return zb.width=ia,zb.height=ab,zb}return null}u.canvas=h;u.domCanvas=h;u.image=()=>"undefined"!==typeof Image?
Image:null})};
shadow$provide[33]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(21),ob(23)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-time"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega))})(this,function(u,h,ia){function ab(n,G,M){G=n-G+2*M;return n?0<G?G:1:0}function zb(n){return function(G){let M=G[0];G=G[1];let ka;G<M&&(ka=M,M=G,G=ka);return[n.invert(M),n.invert(G)]}}function Yb(n){return function(G){const M=
n.range();let ka=G[0];G=G[1];let Wa=-1,db;let qb;if(G<ka){var Kb=ka;ka=G;G=Kb}Kb=0;for(qb=M.length;Kb<qb;++Kb)M[Kb]>=ka&&M[Kb]<=G&&(0>Wa&&(Wa=Kb),db=Kb);if(!(0>Wa))return ka=n.invertExtent(M[Wa]),G=n.invertExtent(M[db]),[void 0===ka[0]?ka[1]:ka[0],void 0===G[1]?G[0]:G[1]]}}function ac(n,G){return null==n||null==G?NaN:n<G?-1:n>G?1:n>=G?0:NaN}function Xb(n,G){return null==n||null==G?NaN:G<n?-1:G>n?1:G>=n?0:NaN}function mc(n){function G(db,qb,Kb=0,sc=db.length){if(Kb<sc){if(0!==M(qb,qb))return sc;do{const cd=
Kb+sc>>>1;0>ka(db[cd],qb)?Kb=cd+1:sc=cd}while(Kb<sc)}return Kb}let M,ka,Wa;2!==n.length?(M=ac,ka=(db,qb)=>ac(n(db),qb),Wa=(db,qb)=>n(db)-qb):(M=n===ac||n===Xb?n:Cb,Wa=ka=n);return{left:G,center:function(db,qb,Kb=0,sc=db.length){sc=G(db,qb,Kb,sc-1);return sc>Kb&&Wa(db[sc-1],qb)>-Wa(db[sc],qb)?sc-1:sc},right:function(db,qb,Kb=0,sc=db.length){if(Kb<sc){if(0!==M(qb,qb))return sc;do{const cd=Kb+sc>>>1;0>=ka(db[cd],qb)?Kb=cd+1:sc=cd}while(Kb<sc)}return Kb}}}function Cb(){return 0}function Ub(n){return null===
n?NaN:+n}function jc({_intern:n,_key:G},M){G=G(M);return n.has(G)?n.get(G):M}function Ba({_intern:n,_key:G},M){G=G(M);if(n.has(G))return n.get(G);n.set(G,M);return M}function Za({_intern:n,_key:G},M){G=G(M);n.has(G)&&(M=n.get(G),n.delete(G));return M}function wb(n){return null!==n&&"object"===typeof n?n.valueOf():n}function ub(n,G,M){var ka=(G-n)/Math.max(0,M),Wa=Math.floor(Math.log10(ka));ka/=Math.pow(10,Wa);ka=ka>=Qf?10:ka>=Rh?5:ka>=og?2:1;let db;0>Wa?(db=Math.pow(10,-Wa)/ka,Wa=Math.round(n*db),
ka=Math.round(G*db),Wa/db<n&&++Wa,ka/db>G&&--ka,db=-db):(db=Math.pow(10,Wa)*ka,Wa=Math.round(n/db),ka=Math.round(G/db),Wa*db<n&&++Wa,ka*db>G&&--ka);return ka<Wa&&.5<=M&&2>M?ub(n,G,2*M):[Wa,ka,db]}function sb(n,G,M){G=+G;n=+n;M=+M;if(!(0<M))return[];if(n===G)return[n];var ka=G<n;const [Wa,db,qb]=ka?ub(G,n,M):ub(n,G,M);if(!(db>=Wa))return[];n=db-Wa+1;G=Array(n);if(ka)if(0>qb)for(ka=0;ka<n;++ka)G[ka]=(db-ka)/-qb;else for(ka=0;ka<n;++ka)G[ka]=(db-ka)*qb;else if(0>qb)for(ka=0;ka<n;++ka)G[ka]=(Wa+ka)/-qb;
else for(ka=0;ka<n;++ka)G[ka]=(Wa+ka)*qb;return G}function xb(n,G,M){return ub(+n,+G,+M)[2]}function ib(n,G,M){G=+G;n=+n;M=+M;const ka=G<n;n=ka?xb(G,n,M):xb(n,G,M);return(ka?-1:1)*(0>n?1/-n:n)}function ec(n,G,M=Ub){if((ka=n.length)&&!isNaN(G=+G)){if(0>=G||2>ka)return+M(n[0],0,n);if(1<=G)return+M(n[ka-1],ka-1,n);var ka;G*=ka-1;ka=Math.floor(G);var Wa=+M(n[ka],ka,n);n=+M(n[ka+1],ka+1,n);return Wa+(n-Wa)*(G-ka)}}function ra(n,G,M){n=+n;G=+G;M=2>(Wa=arguments.length)?(G=n,n=0,1):3>Wa?1:+M;for(var ka=
-1,Wa=Math.max(0,Math.ceil((G-n)/M))|0,db=Array(Wa);++ka<Wa;)db[ka]=n+ka*M;return db}function fa(n,G){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(G).domain(n)}return this}function xa(n,G){switch(arguments.length){case 0:break;case 1:"function"===typeof n?this.interpolator(n):this.range(n);break;default:this.domain(n),"function"===typeof G?this.interpolator(G):this.range(G)}return this}function Ra(){function n(db){let qb=G.get(db);if(void 0===qb){if(Wa!==vh)return Wa;
G.set(db,qb=M.push(db)-1)}return ka[qb%ka.length]}var G=new lh,M=[],ka=[],Wa=vh;n.domain=function(db){if(!arguments.length)return M.slice();M=[];G=new lh;for(const qb of db)G.has(qb)||G.set(qb,M.push(qb)-1);return n};n.range=function(db){return arguments.length?(ka=Array.from(db),n):ka.slice()};n.unknown=function(db){return arguments.length?(Wa=db,n):Wa};n.copy=function(){return Ra(M,ka).unknown(Wa)};fa.apply(n,arguments);return n}function Va(n,G,M){n.prototype=G.prototype=M;M.constructor=n}function Ga(n,
G){n=Object.create(n.prototype);for(var M in G)n[M]=G[M];return n}function hb(){}function bb(){return this.rgb().formatHex()}function tb(){return this.rgb().formatRgb()}function Pb(n){var G,M;n=(n+"").trim().toLowerCase();return(G=Sh.exec(n))?(M=G[1].length,G=parseInt(G[1],16),6===M?eb(G):3===M?new ha(G>>8&15|G>>4&240,G>>4&15|G&240,(G&15)<<4|G&15,1):8===M?T(G>>24&255,G>>16&255,G>>8&255,(G&255)/255):4===M?T(G>>12&15|G>>8&240,G>>8&15|G>>4&240,G>>4&15|G&240,((G&15)<<4|G&15)/255):null):(G=aj.exec(n))?
new ha(G[1],G[2],G[3],1):(G=Fg.exec(n))?new ha(255*G[1]/100,255*G[2]/100,255*G[3]/100,1):(G=ti.exec(n))?T(G[1],G[2],G[3],G[4]):(G=di.exec(n))?T(255*G[1]/100,255*G[2]/100,255*G[3]/100,G[4]):(G=bj.exec(n))?L(G[1],G[2]/100,G[3]/100,1):(G=ui.exec(n))?L(G[1],G[2]/100,G[3]/100,G[4]):wh.hasOwnProperty(n)?eb(wh[n]):"transparent"===n?new ha(NaN,NaN,NaN,0):null}function eb(n){return new ha(n>>16&255,n>>8&255,n&255,1)}function T(n,G,M,ka){0>=ka&&(n=G=M=NaN);return new ha(n,G,M,ka)}function Z(n){n instanceof
hb||(n=Pb(n));if(!n)return new ha;n=n.rgb();return new ha(n.r,n.g,n.b,n.opacity)}function ca(n,G,M,ka){return 1===arguments.length?Z(n):new ha(n,G,M,null==ka?1:ka)}function ha(n,G,M,ka){this.r=+n;this.g=+G;this.b=+M;this.opacity=+ka}function La(){return`#${E(this.r)}${E(this.g)}${E(this.b)}`}function na(){const n=pa(this.opacity);return`${1===n?"rgb(":"rgba("}${m(this.r)}, ${m(this.g)}, ${m(this.b)}${1===n?")":`, ${n})`}`}function pa(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function m(n){return Math.max(0,
Math.min(255,Math.round(n)||0))}function E(n){n=m(n);return(16>n?"0":"")+n.toString(16)}function L(n,G,M,ka){0>=ka?n=G=M=NaN:0>=M||1<=M?n=G=NaN:0>=G&&(n=NaN);return new A(n,G,M,ka)}function w(n){if(n instanceof A)return new A(n.h,n.s,n.l,n.opacity);n instanceof hb||(n=Pb(n));if(!n)return new A;if(n instanceof A)return n;n=n.rgb();var G=n.r/255,M=n.g/255,ka=n.b/255,Wa=Math.min(G,M,ka),db=Math.max(G,M,ka),qb=NaN,Kb=db-Wa,sc=(db+Wa)/2;Kb?(qb=G===db?(M-ka)/Kb+6*(M<ka):M===db?(ka-G)/Kb+2:(G-M)/Kb+4,Kb/=
.5>sc?db+Wa:2-db-Wa,qb*=60):Kb=0<sc&&1>sc?0:qb;return new A(qb,Kb,sc,n.opacity)}function Q(n,G,M,ka){return 1===arguments.length?w(n):new A(n,G,M,null==ka?1:ka)}function A(n,G,M,ka){this.h=+n;this.s=+G;this.l=+M;this.opacity=+ka}function y(n){n=(n||0)%360;return 0>n?n+360:n}function N(n){return Math.max(0,Math.min(1,n||0))}function z(n,G,M){return 255*(60>n?G+(M-G)*n/60:180>n?M:240>n?G+(M-G)*(240-n)/60:G)}function C(n){if(n instanceof V)return new V(n.l,n.a,n.b,n.opacity);if(n instanceof Ya)return vb(n);
n instanceof ha||(n=Z(n));var G=za(n.r),M=za(n.g),ka=za(n.b),Wa=Aa(.2225045*G+.7168786*M+.0606169*ka);if(G===M&&M===ka)var db=G=Wa;else db=Aa((.4360747*G+.3850649*M+.1430804*ka)/.96422),G=Aa((.0139322*G+.0971045*M+.7141733*ka)/.82521);return new V(116*Wa-16,500*(db-Wa),200*(Wa-G),n.opacity)}function H(n,G,M,ka){return 1===arguments.length?C(n):new V(n,G,M,null==ka?1:ka)}function V(n,G,M,ka){this.l=+n;this.a=+G;this.b=+M;this.opacity=+ka}function Aa(n){return n>eg?Math.pow(n,1/3):n/Hh+Eg}function O(n){return n>
Gh?n*n*n:Hh*(n-Eg)}function la(n){return 255*(.0031308>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function za(n){return.04045>=(n/=255)?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Ma(n){if(n instanceof Ya)return new Ya(n.h,n.c,n.l,n.opacity);n instanceof V||(n=C(n));if(0===n.a&&0===n.b)return new Ya(NaN,0<n.l&&100>n.l?0:NaN,n.l,n.opacity);var G=Math.atan2(n.b,n.a)*Fh;return new Ya(0>G?G+360:G,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function Pa(n,G,M,ka){return 1===arguments.length?Ma(n):new Ya(n,
G,M,null==ka?1:ka)}function Ya(n,G,M,ka){this.h=+n;this.c=+G;this.l=+M;this.opacity=+ka}function vb(n){if(isNaN(n.h))return new V(n.l,0,0,n.opacity);var G=n.h*Li;return new V(n.l,Math.cos(G)*n.c,Math.sin(G)*n.c,n.opacity)}function jb(n,G,M,ka){if(1===arguments.length){var Wa=n;if(Wa instanceof Tb)Wa=new Tb(Wa.h,Wa.s,Wa.l,Wa.opacity);else{Wa instanceof ha||(Wa=Z(Wa));var db=Wa.g/255,qb=Wa.b/255,Kb=(cj*qb+Wa.r/255*-1.7884503806-3.5172982438*db)/(cj+-1.7884503806-3.5172982438);qb-=Kb;var sc=(1.97294*
(db-Kb)- -.29227*qb)/-.90649;qb=(db=Math.sqrt(sc*sc+qb*qb)/(1.97294*Kb*(1-Kb)))?Math.atan2(sc,qb)*Fh-120:NaN;Wa=new Tb(0>qb?qb+360:qb,db,Kb,Wa.opacity)}}else Wa=new Tb(n,G,M,null==ka?1:ka);return Wa}function Tb(n,G,M,ka){this.h=+n;this.s=+G;this.l=+M;this.opacity=+ka}function W(n,G,M,ka,Wa){var db=n*n,qb=db*n;return((1-3*n+3*db-qb)*G+(4-6*db+3*qb)*M+(1+3*n+3*db-3*qb)*ka+qb*Wa)/6}function Ea(n){var G=n.length-1;return function(M){var ka=0>=M?M=0:1<=M?(M=1,G-1):Math.floor(M*G),Wa=n[ka],db=n[ka+1];return W((M-
ka/G)*G,0<ka?n[ka-1]:2*Wa-db,Wa,db,ka<G-1?n[ka+2]:2*db-Wa)}}function Lb(n){var G=n.length;return function(M){var ka=Math.floor((0>(M%=1)?++M:M)*G);return W((M-ka/G)*G,n[(ka+G-1)%G],n[ka%G],n[(ka+1)%G],n[(ka+2)%G])}}function oc(n,G){return function(M){return n+M*G}}function $b(n,G,M){return n=Math.pow(n,M),G=Math.pow(G,M)-n,M=1/M,function(ka){return Math.pow(n+ka*G,M)}}function Mb(n,G){var M=G-n;return M?oc(n,180<M||-180>M?M-360*Math.round(M/360):M):fi(isNaN(n)?G:n)}function Qb(n){return 1===(n=+n)?
xc:function(G,M){return M-G?$b(G,M,n):fi(isNaN(G)?M:G)}}function xc(n,G){var M=G-n;return M?oc(n,M):fi(isNaN(n)?G:n)}function ed(n){return function(G){var M=G.length,ka=Array(M),Wa=Array(M),db=Array(M),qb;for(qb=0;qb<M;++qb){var Kb=ca(G[qb]);ka[qb]=Kb.r||0;Wa[qb]=Kb.g||0;db[qb]=Kb.b||0}ka=n(ka);Wa=n(Wa);db=n(db);Kb.opacity=1;return function(sc){Kb.r=ka(sc);Kb.g=Wa(sc);Kb.b=db(sc);return Kb+""}}}function qa(n,G){G||(G=[]);var M=n?Math.min(G.length,n.length):0,ka=G.slice(),Wa;return function(db){for(Wa=
0;Wa<M;++Wa)ka[Wa]=n[Wa]*(1-db)+G[Wa]*db;return ka}}function Db(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Ua(n,G){var M=G?G.length:0,ka=n?Math.min(M,n.length):0,Wa=Array(ka),db=Array(M),qb;for(qb=0;qb<ka;++qb)Wa[qb]=jd(n[qb],G[qb]);for(;qb<M;++qb)db[qb]=G[qb];return function(Kb){for(qb=0;qb<ka;++qb)db[qb]=Wa[qb](Kb);return db}}function yb(n,G){var M=new Date;return n=+n,G=+G,function(ka){return M.setTime(n*(1-ka)+G*ka),M}}function Hb(n,G){return n=+n,G=+G,function(M){return n*
(1-M)+G*M}}function Nb(n,G){var M={},ka={},Wa;if(null===n||"object"!==typeof n)n={};if(null===G||"object"!==typeof G)G={};for(Wa in G)Wa in n?M[Wa]=jd(n[Wa],G[Wa]):ka[Wa]=G[Wa];return function(db){for(Wa in M)ka[Wa]=M[Wa](db);return ka}}function Zb(n){return function(){return n}}function ic(n){return function(G){return n(G)+""}}function Bc(n,G){var M=gh.lastIndex=nh.lastIndex=0,ka,Wa,db,qb=-1,Kb=[],sc=[];n+="";for(G+="";(ka=gh.exec(n))&&(Wa=nh.exec(G));)(db=Wa.index)>M&&(db=G.slice(M,db),Kb[qb]?Kb[qb]+=
db:Kb[++qb]=db),(ka=ka[0])===(Wa=Wa[0])?Kb[qb]?Kb[qb]+=Wa:Kb[++qb]=Wa:(Kb[++qb]=null,sc.push({i:qb,x:Hb(ka,Wa)})),M=nh.lastIndex;M<G.length&&(db=G.slice(M),Kb[qb]?Kb[qb]+=db:Kb[++qb]=db);return 2>Kb.length?sc[0]?ic(sc[0].x):Zb(G):(G=sc.length,function(cd){for(var md=0,rc;md<G;++md)Kb[(rc=sc[md]).i]=rc.x(cd);return Kb.join("")})}function jd(n,G){var M=typeof G,ka;return null==G||"boolean"===M?fi(G):("number"===M?Hb:"string"===M?(ka=Pb(G))?(G=ka,fh):Bc:G instanceof Pb?fh:G instanceof Date?yb:Db(G)?
qa:Array.isArray(G)?Ua:"function"!==typeof G.valueOf&&"function"!==typeof G.toString||isNaN(G)?Nb:Hb)(n,G)}function Vc(n,G){return n=+n,G=+G,function(M){return Math.round(n*(1-M)+G*M)}}function ma(n,G,M,ka,Wa,db){var qb,Kb,sc;if(qb=Math.sqrt(n*n+G*G))n/=qb,G/=qb;if(sc=n*M+G*ka)M-=n*sc,ka-=G*sc;if(Kb=Math.sqrt(M*M+ka*ka))M/=Kb,ka/=Kb,sc/=Kb;n*ka<G*M&&(n=-n,G=-G,sc=-sc,qb=-qb);return{translateX:Wa,translateY:db,rotate:Math.atan2(G,n)*Gg,skewX:Math.atan(sc)*Gg,scaleX:qb,scaleY:Kb}}function Ha(n,G,M,
ka){function Wa(cd){return cd.length?cd.pop()+" ":""}function db(cd,md,rc,zd,Yd,ye){cd!==rc||md!==zd?(Yd=Yd.push("translate(",null,G,null,M),ye.push({i:Yd-4,x:Hb(cd,rc)},{i:Yd-2,x:Hb(md,zd)})):(rc||zd)&&Yd.push("translate("+rc+G+zd+M)}function qb(cd,md,rc,zd){cd!==md?(180<cd-md?md+=360:180<md-cd&&(cd+=360),zd.push({i:rc.push(Wa(rc)+"rotate(",null,ka)-2,x:Hb(cd,md)})):md&&rc.push(Wa(rc)+"rotate("+md+ka)}function Kb(cd,md,rc,zd){cd!==md?zd.push({i:rc.push(Wa(rc)+"skewX(",null,ka)-2,x:Hb(cd,md)}):md&&
rc.push(Wa(rc)+"skewX("+md+ka)}function sc(cd,md,rc,zd,Yd,ye){cd!==rc||md!==zd?(Yd=Yd.push(Wa(Yd)+"scale(",null,",",null,")"),ye.push({i:Yd-4,x:Hb(cd,rc)},{i:Yd-2,x:Hb(md,zd)})):1===rc&&1===zd||Yd.push(Wa(Yd)+"scale("+rc+","+zd+")")}return function(cd,md){var rc=[],zd=[];cd=n(cd);md=n(md);db(cd.translateX,cd.translateY,md.translateX,md.translateY,rc,zd);qb(cd.rotate,md.rotate,rc,zd);Kb(cd.skewX,md.skewX,rc,zd);sc(cd.scaleX,cd.scaleY,md.scaleX,md.scaleY,rc,zd);cd=md=null;return function(Yd){for(var ye=
-1,Rd=zd.length,Te;++ye<Rd;)rc[(Te=zd[ye]).i]=Te.x(Yd);return rc.join("")}}}function gb(n){return((n=Math.exp(n))+1/n)/2}function R(n){return function(G,M){var ka=n((G=Q(G)).h,(M=Q(M)).h),Wa=xc(G.s,M.s),db=xc(G.l,M.l),qb=xc(G.opacity,M.opacity);return function(Kb){G.h=ka(Kb);G.s=Wa(Kb);G.l=db(Kb);G.opacity=qb(Kb);return G+""}}}function t(n){return function(G,M){var ka=n((G=Pa(G)).h,(M=Pa(M)).h),Wa=xc(G.c,M.c),db=xc(G.l,M.l),qb=xc(G.opacity,M.opacity);return function(Kb){G.h=ka(Kb);G.c=Wa(Kb);G.l=
db(Kb);G.opacity=qb(Kb);return G+""}}}function ba(n){return function ka(M){function Wa(db,qb){var Kb=n((db=jb(db)).h,(qb=jb(qb)).h),sc=xc(db.s,qb.s),cd=xc(db.l,qb.l),md=xc(db.opacity,qb.opacity);return function(rc){db.h=Kb(rc);db.s=sc(rc);db.l=cd(Math.pow(rc,M));db.opacity=md(rc);return db+""}}M=+M;Wa.gamma=ka;return Wa}(1)}function va(n,G){void 0===G&&(G=n,n=jd);for(var M=0,ka=G.length-1,Wa=G[0],db=Array(0>ka?0:ka);M<ka;)db[M]=n(Wa,Wa=G[++M]);return function(qb){var Kb=Math.max(0,Math.min(ka-1,Math.floor(qb*=
ka)));return db[Kb](qb-Kb)}}function Ca(n){return function(){return n}}function Sa(n){return+n}function kb(n){return n}function Rb(n,G){return(G-=n=+n)?function(M){return(M-n)/G}:Ca(isNaN(G)?NaN:.5)}function Fb(n,G){if(n>G){var M=n;n=G;G=M}return function(ka){return Math.max(n,Math.min(G,ka))}}function Jb(n,G,M){var ka=n[0];n=n[1];var Wa=G[0];G=G[1];n<ka?(ka=Rb(n,ka),Wa=M(G,Wa)):(ka=Rb(ka,n),Wa=M(Wa,G));return function(db){return Wa(ka(db))}}function Cc(n,G,M){var ka=Math.min(n.length,G.length)-1,
Wa=Array(ka),db=Array(ka),qb=-1;n[ka]<n[0]&&(n=n.slice().reverse(),G=G.slice().reverse());for(;++qb<ka;)Wa[qb]=Rb(n[qb],n[qb+1]),db[qb]=M(G[qb],G[qb+1]);return function(Kb){var sc=xg(n,Kb,1,ka)-1;return db[sc](Wa[sc](Kb))}}function Gc(n,G){return G.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Sc(){function n(){var zd=Math.min(M.length,ka.length);sc!==kb&&(sc=Fb(M[0],M[zd-1]));cd=2<zd?Cc:Jb;md=rc=null;return G}function G(zd){return null==
zd||isNaN(zd=+zd)?Kb:(md||(md=cd(M.map(db),ka,Wa)))(db(sc(zd)))}var M=Y,ka=Y,Wa=jd,db,qb,Kb,sc=kb,cd,md,rc;G.invert=function(zd){return sc(qb((rc||(rc=cd(ka,M.map(db),Hb)))(zd)))};G.domain=function(zd){return arguments.length?(M=Array.from(zd,Sa),n()):M.slice()};G.range=function(zd){return arguments.length?(ka=Array.from(zd),n()):ka.slice()};G.rangeRound=function(zd){return ka=Array.from(zd),Wa=Vc,n()};G.clamp=function(zd){return arguments.length?(sc=zd?!0:kb,n()):sc!==kb};G.interpolate=function(zd){return arguments.length?
(Wa=zd,n()):Wa};G.unknown=function(zd){return arguments.length?(Kb=zd,G):Kb};return function(zd,Yd){db=zd;qb=Yd;return n()}}function vd(n,G){if(0>(G=(n=G?n.toExponential(G-1):n.toExponential()).indexOf("e")))return null;var M=n.slice(0,G);return[1<M.length?M[0]+M.slice(2):M,+n.slice(G+1)]}function od(n){return n=vd(Math.abs(n)),n?n[1]:NaN}function gd(n,G){return function(M,ka){for(var Wa=M.length,db=[],qb=0,Kb=n[0],sc=0;0<Wa&&0<Kb;){sc+Kb+1>ka&&(Kb=Math.max(1,ka-sc));db.push(M.substring(Wa-=Kb,Wa+
Kb));if((sc+=Kb+1)>ka)break;Kb=n[qb=(qb+1)%n.length]}return db.reverse().join(G)}}function Cd(n){return function(G){return G.replace(/[0-9]/g,function(M){return n[+M]})}}function Dd(n){if(!(G=wa.exec(n)))throw Error("invalid format: "+n);var G;return new rd({fill:G[1],align:G[2],sign:G[3],symbol:G[4],zero:G[5],width:G[6],comma:G[7],precision:G[8]&&G[8].slice(1),trim:G[9],type:G[10]})}function rd(n){this.fill=void 0===n.fill?" ":n.fill+"";this.align=void 0===n.align?"\x3e":n.align+"";this.sign=void 0===
n.sign?"-":n.sign+"";this.symbol=void 0===n.symbol?"":n.symbol+"";this.zero=!!n.zero;this.width=void 0===n.width?void 0:+n.width;this.comma=!!n.comma;this.precision=void 0===n.precision?void 0:+n.precision;this.trim=!!n.trim;this.type=void 0===n.type?"":n.type+""}function we(n,G){G=vd(n,G);if(!G)return n+"";n=G[0];G=G[1];return 0>G?"0."+Array(-G).join("0")+n:n.length>G+1?n.slice(0,G+1)+"."+n.slice(G+1):n+Array(G-n.length+2).join("0")}function Bd(n){return n}function x(n){function G(md){function rc(wd){var Pd=
ze,Ed=yf,af,Tf;if("c"===Mf)Ed=Xh(wd)+Ed,wd="";else{wd=+wd;var Ff=0>wd||0>1/wd;wd=isNaN(wd)?cd:Xh(Math.abs(wd),tg);if(zg){var Uf=wd.length,qg=1,Vh=-1;a:for(;qg<Uf;++qg)switch(wd[qg]){case ".":Vh=af=qg;break;case "0":0===Vh&&(Vh=qg);af=qg;break;default:if(!+wd[qg])break a;0<Vh&&(Vh=0)}wd=0<Vh?wd.slice(0,Vh)+wd.slice(af+1):wd}Ff&&0===+wd&&"+"!==ye&&(Ff=!1);Pd=(Ff?"("===ye?ye:sc:"-"===ye||"("===ye?"":ye)+Pd;Ed=("s"===Mf?dc[8+Na/3]:"")+Ed+(Ff&&"("===ye?")":"");if(Vd)for(Ff=-1,af=wd.length;++Ff<af;)if(Tf=
wd.charCodeAt(Ff),48>Tf||57<Tf){Ed=(46===Tf?db+wd.slice(Ff+1):wd.slice(Ff))+Ed;wd=wd.slice(0,Ff);break}}sg&&!Te&&(wd=M(wd,Infinity));Tf=Pd.length+wd.length+Ed.length;Ff=Tf<Ef?Array(Ef-Tf+1).join(zd):"";sg&&Te&&(wd=M(Ff+wd,Ff.length?Ef-Ed.length:Infinity),Ff="");switch(Yd){case "\x3c":wd=Pd+wd+Ed+Ff;break;case "\x3d":wd=Pd+Ff+wd+Ed;break;case "^":wd=Ff.slice(0,Tf=Ff.length>>1)+Pd+wd+Ed+Ff.slice(Tf);break;default:wd=Ff+Pd+wd+Ed}return qb(wd)}md=Dd(md);var zd=md.fill,Yd=md.align,ye=md.sign,Rd=md.symbol,
Te=md.zero,Ef=md.width,sg=md.comma,tg=md.precision,zg=md.trim,Mf=md.type;"n"===Mf?(sg=!0,Mf="g"):Ib[Mf]||(void 0===tg&&(tg=12),zg=!0,Mf="g");if(Te||"0"===zd&&"\x3d"===Yd)Te=!0,zd="0",Yd="\x3d";var ze="$"===Rd?ka:"#"===Rd&&/[boxX]/.test(Mf)?"0"+Mf.toLowerCase():"",yf="$"===Rd?Wa:/[%p]/.test(Mf)?Kb:"",Xh=Ib[Mf],Vd=/[defgprs%]/.test(Mf);tg=void 0===tg?6:/[gprs]/.test(Mf)?Math.max(1,Math.min(21,tg)):Math.max(0,Math.min(20,tg));rc.toString=function(){return md+""};return rc}var M=void 0===n.grouping||
void 0===n.thousands?Bd:gd(Ab.call(n.grouping,Number),n.thousands+""),ka=void 0===n.currency?"":n.currency[0]+"",Wa=void 0===n.currency?"":n.currency[1]+"",db=void 0===n.decimal?".":n.decimal+"",qb=void 0===n.numerals?Bd:Cd(Ab.call(n.numerals,String)),Kb=void 0===n.percent?"%":n.percent+"",sc=void 0===n.minus?"−":n.minus+"",cd=void 0===n.nan?"NaN":n.nan+"";return{format:G,formatPrefix:function(md,rc){var zd=G((md=Dd(md),md.type="f",md));md=3*Math.max(-8,Math.min(8,Math.floor(od(rc)/3)));var Yd=Math.pow(10,
-md),ye=dc[8+md/3];return function(Rd){return zd(Yd*Rd)+ye}}}}function K(n,G,M,ka){M=ib(n,G,M);ka=Dd(null==ka?",f":ka);switch(ka.type){case "s":n=Math.max(Math.abs(n),Math.abs(G));if(G=null==ka.precision){var Wa=isNaN;M=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(od(n)/3)))-od(Math.abs(M)));G=!Wa(Wa=M)}G&&(ka.precision=Wa);return ea(ka,n);case "":case "e":case "g":case "p":case "r":var db;if(db=null==ka.precision)Wa=isNaN,n=Math.max(Math.abs(n),Math.abs(G)),M=Math.abs(M),n=Math.abs(n)-M,M=Math.max(0,
od(n)-od(M))+1,db=!Wa(Wa=M);db&&(ka.precision=Wa-("e"===ka.type));break;case "f":case "%":null!=ka.precision||isNaN(Wa=Math.max(0,-od(Math.abs(M))))||(ka.precision=Wa-2*("%"===ka.type))}return I(ka)}function ua(n){var G=n.domain;n.ticks=function(M){var ka=G();return sb(ka[0],ka[ka.length-1],null==M?10:M)};n.tickFormat=function(M,ka){var Wa=G();return K(Wa[0],Wa[Wa.length-1],null==M?10:M,ka)};n.nice=function(M){null==M&&(M=10);var ka=G(),Wa=0,db=ka.length-1,qb=ka[Wa],Kb=ka[db],sc=10;if(Kb<qb){var cd=
qb;qb=Kb;Kb=cd;cd=Wa;Wa=db;db=cd}for(;0<sc--;){cd=xb(qb,Kb,M);if(cd===md)return ka[Wa]=qb,ka[db]=Kb,G(ka);if(0<cd)qb=Math.floor(qb/cd)*cd,Kb=Math.ceil(Kb/cd)*cd;else if(0>cd)qb=Math.ceil(qb*cd)/cd,Kb=Math.floor(Kb*cd)/cd;else break;var md=cd}return n};return n}function Ka(){var n=Sc()(kb,kb);n.copy=function(){return Gc(n,Ka())};fa.apply(n,arguments);return ua(n)}function lb(n){function G(ka){return null==ka||isNaN(ka=+ka)?M:ka}var M;G.invert=G;G.domain=G.range=function(ka){return arguments.length?
(n=Array.from(ka,Sa),G):n.slice()};G.unknown=function(ka){return arguments.length?(M=ka,G):M};G.copy=function(){return lb(n).unknown(M)};n=arguments.length?Array.from(n,Sa):[0,1];return ua(G)}function Bb(n,G){n=n.slice();var M=0,ka=n.length-1,Wa=n[M],db=n[ka];if(db<Wa){var qb=M;M=ka;ka=qb;qb=Wa;Wa=db;db=qb}n[M]=G.floor(Wa);n[ka]=G.ceil(db);return n}function bc(n){return Math.log(n)}function Sb(n){return Math.exp(n)}function nc(n){return-Math.log(-n)}function Kc(n){return-Math.exp(-n)}function Ac(n){return isFinite(n)?
+("1e"+n):0>n?0:n}function Xc(n){return 10===n?Ac:n===Math.E?Math.exp:G=>Math.pow(n,G)}function kd(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),G=>Math.log(G)/n)}function pd(n){return(G,M)=>-n(-G,M)}function xd(n){function G(){db=kd(Wa);qb=Xc(Wa);0>ka()[0]?(db=pd(db),qb=pd(qb),n(nc,Kc)):n(bc,Sb);return M}const M=n(bc,Sb),ka=M.domain;let Wa=10,db,qb;M.base=function(Kb){return arguments.length?(Wa=+Kb,G()):Wa};M.domain=function(Kb){return arguments.length?(ka(Kb),
G()):ka()};M.ticks=Kb=>{var sc=ka();let cd=sc[0];sc=sc[sc.length-1];const md=sc<cd;md&&([cd,sc]=[sc,cd]);let rc=db(cd),zd=db(sc),Yd;const ye=null==Kb?10:+Kb;let Rd=[];if(!(Wa%1)&&zd-rc<ye){rc=Math.floor(rc);zd=Math.ceil(zd);if(0<cd)for(;rc<=zd;++rc)for(Kb=1;Kb<Wa;++Kb){if(Yd=0>rc?Kb/qb(-rc):Kb*qb(rc),!(Yd<cd)){if(Yd>sc)break;Rd.push(Yd)}}else for(;rc<=zd;++rc)for(Kb=Wa-1;1<=Kb;--Kb)if(Yd=0<rc?Kb/qb(-rc):Kb*qb(rc),!(Yd<cd)){if(Yd>sc)break;Rd.push(Yd)}2*Rd.length<ye&&(Rd=sb(cd,sc,ye))}else Rd=sb(rc,
zd,Math.min(zd-rc,ye)).map(qb);return md?Rd.reverse():Rd};M.tickFormat=(Kb,sc)=>{null==Kb&&(Kb=10);null==sc&&(sc=10===Wa?"s":",");"function"!==typeof sc&&(Wa%1||null!=(sc=Dd(sc)).precision||(sc.trim=!0),sc=I(sc));if(Infinity===Kb)return sc;const cd=Math.max(1,Wa*Kb/M.ticks().length);return md=>{let rc=md/qb(Math.round(db(md)));rc*Wa<Wa-.5&&(rc*=Wa);return rc<=cd?sc(md):""}};M.nice=()=>ka(Bb(ka(),{floor:Kb=>qb(Math.floor(db(Kb))),ceil:Kb=>qb(Math.ceil(db(Kb)))}));return M}function nd(){const n=xd(Sc()).domain([1,
10]);n.copy=()=>Gc(n,nd()).base(n.base());fa.apply(n,arguments);return n}function Jd(n){return function(G){return Math.sign(G)*Math.log1p(Math.abs(G/n))}}function me(n){return function(G){return Math.sign(G)*Math.expm1(Math.abs(G))*n}}function Me(n){var G=1,M=n(Jd(G),me(G));M.constant=function(ka){return arguments.length?n(Jd(G=+ka),me(G)):G};return ua(M)}function He(){var n=Me(Sc());n.copy=function(){return Gc(n,He()).constant(n.constant())};return fa.apply(n,arguments)}function Ie(n){return function(G){return 0>
G?-Math.pow(-G,n):Math.pow(G,n)}}function tf(n){return 0>n?-Math.sqrt(-n):Math.sqrt(n)}function bf(n){return 0>n?-n*n:n*n}function F(n){var G=n(kb,kb),M=1;G.exponent=function(ka){return arguments.length?(M=+ka,1===M?n(kb,kb):.5===M?n(tf,bf):n(Ie(M),Ie(1/M))):M};return ua(G)}function aa(){var n=F(Sc());n.copy=function(){return Gc(n,aa()).exponent(n.exponent())};fa.apply(n,arguments);return n}function Fa(){function n(){var qb=0,Kb=Math.max(1,ka.length);for(Wa=Array(Kb-1);++qb<Kb;)Wa[qb-1]=ec(M,qb/Kb);
return G}function G(qb){return null==qb||isNaN(qb=+qb)?db:ka[xg(Wa,qb)]}var M=[],ka=[],Wa=[],db;G.invertExtent=function(qb){qb=ka.indexOf(qb);return 0>qb?[NaN,NaN]:[0<qb?Wa[qb-1]:M[0],qb<Wa.length?Wa[qb]:M[M.length-1]]};G.domain=function(qb){if(!arguments.length)return M.slice();M=[];for(let Kb of qb)null==Kb||isNaN(Kb=+Kb)||M.push(Kb);M.sort(ac);return n()};G.range=function(qb){return arguments.length?(ka=Array.from(qb),n()):ka.slice()};G.unknown=function(qb){return arguments.length?(db=qb,G):db};
G.quantiles=function(){return Wa.slice()};G.copy=function(){return Fa().domain(M).range(ka).unknown(db)};return fa.apply(G,arguments)}function fb(){function n(sc){return null!=sc&&sc<=sc?qb[xg(db,sc,0,Wa)]:Kb}function G(){var sc=-1;for(db=Array(Wa);++sc<Wa;)db[sc]=((sc+1)*ka-(sc-Wa)*M)/(Wa+1);return n}var M=0,ka=1,Wa=1,db=[.5],qb=[0,1],Kb;n.domain=function(sc){return arguments.length?([M,ka]=sc,M=+M,ka=+ka,G()):[M,ka]};n.range=function(sc){return arguments.length?(Wa=(qb=Array.from(sc)).length-1,
G()):qb.slice()};n.invertExtent=function(sc){sc=qb.indexOf(sc);return 0>sc?[NaN,NaN]:1>sc?[M,db[0]]:sc>=Wa?[db[Wa-1],ka]:[db[sc-1],db[sc]]};n.unknown=function(sc){return arguments.length?(Kb=sc,n):n};n.thresholds=function(){return db.slice()};n.copy=function(){return fb().domain([M,ka]).range(qb).unknown(Kb)};return fa.apply(ua(n),arguments)}function Gb(){function n(db){return null!=db&&db<=db?M[xg(G,db,0,Wa)]:ka}var G=[.5],M=[0,1],ka,Wa=1;n.domain=function(db){return arguments.length?(G=Array.from(db),
Wa=Math.min(G.length,M.length-1),n):G.slice()};n.range=function(db){return arguments.length?(M=Array.from(db),Wa=Math.min(G.length,M.length-1),n):M.slice()};n.invertExtent=function(db){db=M.indexOf(db);return[G[db-1],G[db]]};n.unknown=function(db){return arguments.length?(ka=db,n):ka};n.copy=function(){return Gb().domain(G).range(M).unknown(ka)};return fa.apply(n,arguments)}function pc(n,G,M,ka){function Wa(db){return n(db=0===arguments.length?new Date:new Date(+db)),db}Wa.floor=db=>(n(db=new Date(+db)),
db);Wa.ceil=db=>(n(db=new Date(db-1)),G(db,1),n(db),db);Wa.round=db=>{const qb=Wa(db),Kb=Wa.ceil(db);return db-qb<Kb-db?qb:Kb};Wa.offset=(db,qb)=>(G(db=new Date(+db),null==qb?1:Math.floor(qb)),db);Wa.range=(db,qb,Kb)=>{const sc=[];db=Wa.ceil(db);Kb=null==Kb?1:Math.floor(Kb);if(!(db<qb&&0<Kb))return sc;let cd;do sc.push(cd=new Date(+db)),G(db,Kb),n(db);while(cd<db&&db<qb);return sc};Wa.filter=db=>pc(qb=>{if(qb>=qb)for(;n(qb),!db(qb);)qb.setTime(qb-1)},(qb,Kb)=>{if(qb>=qb)if(0>Kb)for(;0>=++Kb;)for(;G(qb,
-1),!db(qb););else for(;0<=--Kb;)for(;G(qb,1),!db(qb););});M&&(Wa.count=(db,qb)=>{sa.setTime(+db);$a.setTime(+qb);n(sa);n($a);return Math.floor(M(sa,$a))},Wa.every=db=>{db=Math.floor(db);return isFinite(db)&&0<db?1<db?Wa.filter(ka?qb=>0===ka(qb)%db:qb=>0===Wa.count(0,qb)%db):Wa:null});return Wa}function Vb(n){return pc(G=>{G.setDate(G.getDate()-(G.getDay()+7-n)%7);G.setHours(0,0,0,0)},(G,M)=>{G.setDate(G.getDate()+7*M)},(G,M)=>(M-G-6E4*(M.getTimezoneOffset()-G.getTimezoneOffset()))/hc)}function Ec(n){return pc(G=>
{G.setUTCDate(G.getUTCDate()-(G.getUTCDay()+7-n)%7);G.setUTCHours(0,0,0,0)},(G,M)=>{G.setUTCDate(G.getUTCDate()+7*M)},(G,M)=>(M-G)/hc)}function ld(n,G,M,ka,Wa,db){function qb(sc,cd,md){const rc=Math.abs(cd-sc)/md,zd=mc(([,,Rd])=>Rd).right(Kb,rc);if(zd===Kb.length)return n.every(ib(sc/fc,cd/fc,md));if(0===zd)return Ob.every(Math.max(ib(sc,cd,md),1));const [Yd,ye]=Kb[rc/Kb[zd-1][2]<Kb[zd][2]/rc?zd-1:zd];return Yd.every(ye)}const Kb=[[$c,1,1E3],[$c,5,5E3],[$c,15,15E3],[$c,30,3E4],[db,1,6E4],[db,5,3E5],
[db,15,9E5],[db,30,18E5],[Wa,1,36E5],[Wa,3,108E5],[Wa,6,216E5],[Wa,12,432E5],[ka,1,864E5],[ka,2,1728E5],[M,1,hc],[G,1,Mc],[G,3,3*Mc],[n,1,fc]];return[function(sc,cd,md){const rc=cd<sc;rc&&([sc,cd]=[cd,sc]);sc=(md=md&&"function"===typeof md.range?md:qb(sc,cd,md))?md.range(sc,+cd+1):[];return rc?sc.reverse():sc},qb]}function ad(n){if(0<=n.y&&100>n.y){var G=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);G.setFullYear(n.y);return G}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function Oc(n){if(0<=n.y&&100>n.y){var G=
new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));G.setUTCFullYear(n.y);return G}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Nd(n,G,M){return{y:n,m:G,d:M,H:0,M:0,S:0,L:0}}function ce(n){function G(Vd,wd){return function(Pd){var Ed=[],af=-1,Tf=0,Ff=Vd.length,Uf,qg;for(Pd instanceof Date||(Pd=new Date(+Pd));++af<Ff;)if(37===Vd.charCodeAt(af)){Ed.push(Vd.slice(Tf,af));null!=(Tf=ej[Uf=Vd.charAt(++af)])?Uf=Vd.charAt(++af):Tf="e"===Uf?" ":"0";if(qg=wd[Uf])Uf=qg(Pd,Tf);Ed.push(Uf);Tf=af+
1}Ed.push(Vd.slice(Tf,af));return Ed.join("")}}function M(Vd,wd){return function(Pd){var Ed=Nd(1900,void 0,1);if(ka(Ed,Vd,Pd+="",0)!=Pd.length)return null;if("Q"in Ed)return new Date(Ed.Q);if("s"in Ed)return new Date(1E3*Ed.s+("L"in Ed?Ed.L:0));!wd||"Z"in Ed||(Ed.Z=0);"p"in Ed&&(Ed.H=Ed.H%12+12*Ed.p);void 0===Ed.m&&(Ed.m="q"in Ed?Ed.q:0);if("V"in Ed){if(1>Ed.V||53<Ed.V)return null;"w"in Ed||(Ed.w=1);if("Z"in Ed){Pd=Oc(Nd(Ed.y,0,1));var af=Pd.getUTCDay();Pd=4<af||0===af?mh.ceil(Pd):mh(Pd);Pd=rf.offset(Pd,
7*(Ed.V-1));Ed.y=Pd.getUTCFullYear();Ed.m=Pd.getUTCMonth();Ed.d=Pd.getUTCDate()+(Ed.w+6)%7}else Pd=ad(Nd(Ed.y,0,1)),af=Pd.getDay(),Pd=4<af||0===af?pe.ceil(Pd):pe(Pd),Pd=Je.offset(Pd,7*(Ed.V-1)),Ed.y=Pd.getFullYear(),Ed.m=Pd.getMonth(),Ed.d=Pd.getDate()+(Ed.w+6)%7}else if("W"in Ed||"U"in Ed)"w"in Ed||(Ed.w="u"in Ed?Ed.u%7:"W"in Ed?1:0),af="Z"in Ed?Oc(Nd(Ed.y,0,1)).getUTCDay():ad(Nd(Ed.y,0,1)).getDay(),Ed.m=0,Ed.d="W"in Ed?(Ed.w+6)%7+7*Ed.W-(af+5)%7:Ed.w+7*Ed.U-(af+6)%7;return"Z"in Ed?(Ed.H+=Ed.Z/100|
0,Ed.M+=Ed.Z%100,Oc(Ed)):ad(Ed)}}function ka(Vd,wd,Pd,Ed){for(var af=0,Tf=wd.length,Ff=Pd.length,Uf;af<Tf;){if(Ed>=Ff)return-1;Uf=wd.charCodeAt(af++);if(37===Uf){if(Uf=wd.charAt(af++),Uf=Xh[Uf in ej?wd.charAt(af++):Uf],!Uf||0>(Ed=Uf(Vd,Pd,Ed)))return-1}else if(Uf!=Pd.charCodeAt(Ed++))return-1}return Ed}var Wa=n.dateTime,db=n.date,qb=n.time,Kb=n.periods,sc=n.days,cd=n.shortDays,md=n.months,rc=n.shortMonths,zd=Wd(Kb),Yd=ya(Kb),ye=Wd(sc),Rd=ya(sc),Te=Wd(cd),Ef=ya(cd),sg=Wd(md),tg=ya(md),zg=Wd(rc),Mf=
ya(rc),ze={a:function(Vd){return cd[Vd.getDay()]},A:function(Vd){return sc[Vd.getDay()]},b:function(Vd){return rc[Vd.getMonth()]},B:function(Vd){return md[Vd.getMonth()]},c:null,d:Ee,e:Ee,f:J,g:Rc,G:Td,H:qe,I:oa,j:l,L:q,m:ja,M:Da,p:function(Vd){return Kb[+(12<=Vd.getHours())]},q:function(Vd){return 1+~~(Vd.getMonth()/3)},Q:gf,s:Re,S:Qa,u:Ia,U:rb,V:tc,w:wc,W:zc,x:null,X:null,y:yc,Y:fd,Z:Ad,"%":bg},yf={a:function(Vd){return cd[Vd.getUTCDay()]},A:function(Vd){return sc[Vd.getUTCDay()]},b:function(Vd){return rc[Vd.getUTCMonth()]},
B:function(Vd){return md[Vd.getUTCMonth()]},c:null,d:Ld,e:Ld,f:te,g:lf,G:vf,H:Ud,I:qc,j:Fd,L:Be,m:ke,M:Qd,p:function(Vd){return Kb[+(12<=Vd.getUTCHours())]},q:function(Vd){return 1+~~(Vd.getUTCMonth()/3)},Q:gf,s:Re,S:Od,u:xe,U:Fe,V:Ne,w:hd,W:ve,x:null,X:null,y:ff,Y:Dg,Z:Of,"%":bg},Xh={a:function(Vd,wd,Pd){return(wd=Te.exec(wd.slice(Pd)))?(Vd.w=Ef.get(wd[0].toLowerCase()),Pd+wd[0].length):-1},A:function(Vd,wd,Pd){return(wd=ye.exec(wd.slice(Pd)))?(Vd.w=Rd.get(wd[0].toLowerCase()),Pd+wd[0].length):-1},
b:function(Vd,wd,Pd){return(wd=zg.exec(wd.slice(Pd)))?(Vd.m=Mf.get(wd[0].toLowerCase()),Pd+wd[0].length):-1},B:function(Vd,wd,Pd){return(wd=sg.exec(wd.slice(Pd)))?(Vd.m=tg.get(wd[0].toLowerCase()),Pd+wd[0].length):-1},c:function(Vd,wd,Pd){return ka(Vd,Wa,wd,Pd)},d:fe,e:fe,f:Le,g:Yc,G:Jc,H:Ke,I:Ke,j:Qe,L:kf,m:bd,M:ne,p:function(Vd,wd,Pd){return(wd=zd.exec(wd.slice(Pd)))?(Vd.p=Yd.get(wd[0].toLowerCase()),Pd+wd[0].length):-1},q:qd,Q:Ze,s:Ae,S:Ye,u:cc,U:id,V:vc,w:Oa,W:Hc,x:function(Vd,wd,Pd){return ka(Vd,
db,wd,Pd)},X:function(Vd,wd,Pd){return ka(Vd,qb,wd,Pd)},y:Yc,Y:Jc,Z:Tc,"%":Xe};ze.x=G(db,ze);ze.X=G(qb,ze);ze.c=G(Wa,ze);yf.x=G(db,yf);yf.X=G(qb,yf);yf.c=G(Wa,yf);return{format:function(Vd){var wd=G(Vd+="",ze);wd.toString=function(){return Vd};return wd},parse:function(Vd){var wd=M(Vd+="",!1);wd.toString=function(){return Vd};return wd},utcFormat:function(Vd){var wd=G(Vd+="",yf);wd.toString=function(){return Vd};return wd},utcParse:function(Vd){var wd=M(Vd+="",!0);wd.toString=function(){return Vd};
return wd}}}function Kd(n,G,M){var ka=0>n?"-":"";n=(ka?-n:n)+"";var Wa=n.length;return ka+(Wa<M?Array(M-Wa+1).join(G)+n:n)}function Md(n){return n.replace(Cj,"\\$\x26")}function Wd(n){return new RegExp("^(?:"+n.map(Md).join("|")+")","i")}function ya(n){return new Map(n.map((G,M)=>[G.toLowerCase(),M]))}function Oa(n,G,M){return(G=Xf.exec(G.slice(M,M+1)))?(n.w=+G[0],M+G[0].length):-1}function cc(n,G,M){return(G=Xf.exec(G.slice(M,M+1)))?(n.u=+G[0],M+G[0].length):-1}function id(n,G,M){return(G=Xf.exec(G.slice(M,
M+2)))?(n.U=+G[0],M+G[0].length):-1}function vc(n,G,M){return(G=Xf.exec(G.slice(M,M+2)))?(n.V=+G[0],M+G[0].length):-1}function Hc(n,G,M){return(G=Xf.exec(G.slice(M,M+2)))?(n.W=+G[0],M+G[0].length):-1}function Jc(n,G,M){return(G=Xf.exec(G.slice(M,M+4)))?(n.y=+G[0],M+G[0].length):-1}function Yc(n,G,M){return(G=Xf.exec(G.slice(M,M+2)))?(n.y=+G[0]+(68<+G[0]?1900:2E3),M+G[0].length):-1}function Tc(n,G,M){return(G=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(G.slice(M,M+6)))?(n.Z=G[1]?0:-(G[2]+(G[3]||"00")),M+G[0].length):
-1}function qd(n,G,M){return(G=Xf.exec(G.slice(M,M+1)))?(n.q=3*G[0]-3,M+G[0].length):-1}function bd(n,G,M){return(G=Xf.exec(G.slice(M,M+2)))?(n.m=G[0]-1,M+G[0].length):-1}function fe(n,G,M){return(G=Xf.exec(G.slice(M,M+2)))?(n.d=+G[0],M+G[0].length):-1}function Qe(n,G,M){return(G=Xf.exec(G.slice(M,M+3)))?(n.m=0,n.d=+G[0],M+G[0].length):-1}function Ke(n,G,M){return(G=Xf.exec(G.slice(M,M+2)))?(n.H=+G[0],M+G[0].length):-1}function ne(n,G,M){return(G=Xf.exec(G.slice(M,M+2)))?(n.M=+G[0],M+G[0].length):
-1}function Ye(n,G,M){return(G=Xf.exec(G.slice(M,M+2)))?(n.S=+G[0],M+G[0].length):-1}function kf(n,G,M){return(G=Xf.exec(G.slice(M,M+3)))?(n.L=+G[0],M+G[0].length):-1}function Le(n,G,M){return(G=Xf.exec(G.slice(M,M+6)))?(n.L=Math.floor(G[0]/1E3),M+G[0].length):-1}function Xe(n,G,M){return(n=wk.exec(G.slice(M,M+1)))?M+n[0].length:-1}function Ze(n,G,M){return(G=Xf.exec(G.slice(M)))?(n.Q=+G[0],M+G[0].length):-1}function Ae(n,G,M){return(G=Xf.exec(G.slice(M)))?(n.s=+G[0],M+G[0].length):-1}function Ee(n,
G){return Kd(n.getDate(),G,2)}function qe(n,G){return Kd(n.getHours(),G,2)}function oa(n,G){return Kd(n.getHours()%12||12,G,2)}function l(n,G){return Kd(1+Je.count(Af(n),n),G,3)}function q(n,G){return Kd(n.getMilliseconds(),G,3)}function J(n,G){return q(n,G)+"000"}function ja(n,G){return Kd(n.getMonth()+1,G,2)}function Da(n,G){return Kd(n.getMinutes(),G,2)}function Qa(n,G){return Kd(n.getSeconds(),G,2)}function Ia(n){n=n.getDay();return 0===n?7:n}function rb(n,G){return Kd(bh.count(Af(n)-1,n),G,2)}
function nb(n){var G=n.getDay();return 4<=G||0===G?rh(n):rh.ceil(n)}function tc(n,G){n=nb(n);return Kd(rh.count(Af(n),n)+(4===Af(n).getDay()),G,2)}function wc(n){return n.getDay()}function zc(n,G){return Kd(pe.count(Af(n)-1,n),G,2)}function yc(n,G){return Kd(n.getFullYear()%100,G,2)}function Rc(n,G){n=nb(n);return Kd(n.getFullYear()%100,G,2)}function fd(n,G){return Kd(n.getFullYear()%1E4,G,4)}function Td(n,G){var M=n.getDay();n=4<=M||0===M?rh(n):rh.ceil(n);return Kd(n.getFullYear()%1E4,G,4)}function Ad(n){n=
n.getTimezoneOffset();return(0<n?"-":(n*=-1,"+"))+Kd(n/60|0,"0",2)+Kd(n%60,"0",2)}function Ld(n,G){return Kd(n.getUTCDate(),G,2)}function Ud(n,G){return Kd(n.getUTCHours(),G,2)}function qc(n,G){return Kd(n.getUTCHours()%12||12,G,2)}function Fd(n,G){return Kd(1+rf.count(Cg(n),n),G,3)}function Be(n,G){return Kd(n.getUTCMilliseconds(),G,3)}function te(n,G){return Be(n,G)+"000"}function ke(n,G){return Kd(n.getUTCMonth()+1,G,2)}function Qd(n,G){return Kd(n.getUTCMinutes(),G,2)}function Od(n,G){return Kd(n.getUTCSeconds(),
G,2)}function xe(n){n=n.getUTCDay();return 0===n?7:n}function Fe(n,G){return Kd(yg.count(Cg(n)-1,n),G,2)}function re(n){var G=n.getUTCDay();return 4<=G||0===G?Hg(n):Hg.ceil(n)}function Ne(n,G){n=re(n);return Kd(Hg.count(Cg(n),n)+(4===Cg(n).getUTCDay()),G,2)}function hd(n){return n.getUTCDay()}function ve(n,G){return Kd(mh.count(Cg(n)-1,n),G,2)}function ff(n,G){return Kd(n.getUTCFullYear()%100,G,2)}function lf(n,G){n=re(n);return Kd(n.getUTCFullYear()%100,G,2)}function Dg(n,G){return Kd(n.getUTCFullYear()%
1E4,G,4)}function vf(n,G){var M=n.getUTCDay();n=4<=M||0===M?Hg(n):Hg.ceil(n);return Kd(n.getUTCFullYear()%1E4,G,4)}function Of(){return"+0000"}function bg(){return"%"}function gf(n){return+n}function Re(n){return Math.floor(+n/1E3)}function cg(n){return new Date(n)}function Tg(n){return n instanceof Date?+n:+new Date(+n)}function Bf(n,G,M,ka,Wa,db,qb,Kb,sc,cd){function md(ze){return(sc(ze)<ze?ye:Kb(ze)<ze?Rd:qb(ze)<ze?Te:db(ze)<ze?Ef:ka(ze)<ze?Wa(ze)<ze?sg:tg:M(ze)<ze?zg:Mf)(ze)}var rc=Sc()(kb,kb),
zd=rc.invert,Yd=rc.domain,ye=cd(".%L"),Rd=cd(":%S"),Te=cd("%I:%M"),Ef=cd("%I %p"),sg=cd("%a %d"),tg=cd("%b %d"),zg=cd("%B"),Mf=cd("%Y");rc.invert=function(ze){return new Date(zd(ze))};rc.domain=function(ze){return arguments.length?Yd(Array.from(ze,Tg)):Yd().map(cg)};rc.ticks=function(ze){var yf=Yd();return n(yf[0],yf[yf.length-1],null==ze?10:ze)};rc.tickFormat=function(ze,yf){return null==yf?md:cd(yf)};rc.nice=function(ze){var yf=Yd();ze&&"function"===typeof ze.range||(ze=G(yf[0],yf[yf.length-1],
null==ze?10:ze));return ze?Yd(Bb(yf,ze)):rc};rc.copy=function(){return Gc(rc,Bf(n,G,M,ka,Wa,db,qb,Kb,sc,cd))};return rc}function dg(){function n(rc){return null==rc||isNaN(rc=+rc)?md:sc(0===qb?.5:(rc=(Kb(rc)-Wa)*qb,cd?Math.max(0,Math.min(1,rc)):rc))}function G(rc){return function(zd){var Yd,ye;return arguments.length?([Yd,ye]=zd,sc=rc(Yd,ye),n):[sc(0),sc(1)]}}var M=0,ka=1,Wa,db,qb,Kb,sc=kb,cd=!1,md;n.domain=function(rc){return arguments.length?([M,ka]=rc,Wa=Kb(M=+M),db=Kb(ka=+ka),qb=Wa===db?0:1/(db-
Wa),n):[M,ka]};n.clamp=function(rc){return arguments.length?(cd=!!rc,n):cd};n.interpolator=function(rc){return arguments.length?(sc=rc,n):sc};n.range=G(jd);n.rangeRound=G(Vc);n.unknown=function(rc){return arguments.length?(md=rc,n):md};return function(rc){Kb=rc;Wa=rc(M);db=rc(ka);qb=Wa===db?0:1/(db-Wa);return n}}function Hf(n,G){return G.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function Ug(){var n=ua(dg()(kb));n.copy=function(){return Hf(n,Ug())};return xa.apply(n,
arguments)}function eh(){var n=xd(dg()).domain([1,10]);n.copy=function(){return Hf(n,eh()).base(n.base())};return xa.apply(n,arguments)}function Sg(){var n=Me(dg());n.copy=function(){return Hf(n,Sg()).constant(n.constant())};return xa.apply(n,arguments)}function Vg(){var n=F(dg());n.copy=function(){return Hf(n,Vg()).exponent(n.exponent())};return xa.apply(n,arguments)}function Wg(){function n(Rd){return isNaN(Rd=+Rd)?ye:(Rd=.5+((Rd=+zd(Rd))-Kb)*(db*Rd<db*Kb?cd:md),rc(Yd?Math.max(0,Math.min(1,Rd)):
Rd))}function G(Rd){return function(Te){var Ef,sg,tg;return arguments.length?([Ef,sg,tg]=Te,rc=va(Rd,[Ef,sg,tg]),n):[rc(0),rc(.5),rc(1)]}}var M=0,ka=.5,Wa=1,db=1,qb,Kb,sc,cd,md,rc=kb,zd,Yd=!1,ye;n.domain=function(Rd){return arguments.length?([M,ka,Wa]=Rd,qb=zd(M=+M),Kb=zd(ka=+ka),sc=zd(Wa=+Wa),cd=qb===Kb?0:.5/(Kb-qb),md=Kb===sc?0:.5/(sc-Kb),db=Kb<qb?-1:1,n):[M,ka,Wa]};n.clamp=function(Rd){return arguments.length?(Yd=!!Rd,n):Yd};n.interpolator=function(Rd){return arguments.length?(rc=Rd,n):rc};n.range=
G(jd);n.rangeRound=G(Vc);n.unknown=function(Rd){return arguments.length?(ye=Rd,n):ye};return function(Rd){zd=Rd;qb=Rd(M);Kb=Rd(ka);sc=Rd(Wa);cd=qb===Kb?0:.5/(Kb-qb);md=Kb===sc?0:.5/(sc-Kb);db=Kb<qb?-1:1;return n}}function kh(){var n=ua(Wg()(kb));n.copy=function(){return Hf(n,kh())};return xa.apply(n,arguments)}function If(){var n=xd(Wg()).domain([.1,1,10]);n.copy=function(){return Hf(n,If()).base(n.base())};return xa.apply(n,arguments)}function U(){var n=Me(Wg());n.copy=function(){return Hf(n,U()).constant(n.constant())};
return xa.apply(n,arguments)}function Ja(){var n=F(Wg());n.copy=function(){return Hf(n,Ja()).exponent(n.exponent())};return xa.apply(n,arguments)}function mb(){function n(){var rc=M().length;const zd=Wa[1]<Wa[0],Yd=Wa[1-zd],ye=ab(rc,sc,cd);let Rd=Wa[zd-0];db=(Yd-Rd)/(ye||1);Kb&&(db=Math.floor(db));Rd+=(Yd-Rd-db*(rc-sc))*md;qb=db*(1-sc);Kb&&(Rd=Math.round(Rd),qb=Math.round(qb));rc=ra(rc).map(Te=>Rd+db*Te);return ka(zd?rc.reverse():rc)}const G=Ra().unknown(void 0),M=G.domain,ka=G.range;let Wa=[0,1],
db,qb,Kb=!1,sc=0,cd=0,md=.5;delete G.unknown;G.domain=function(rc){return arguments.length?(M(rc),n()):M()};G.range=function(rc){return arguments.length?(Wa=[+rc[0],+rc[1]],n()):Wa.slice()};G.rangeRound=function(rc){Wa=[+rc[0],+rc[1]];Kb=!0;return n()};G.bandwidth=function(){return qb};G.step=function(){return db};G.round=function(rc){return arguments.length?(Kb=!!rc,n()):Kb};G.padding=function(rc){return arguments.length?(sc=cd=Math.max(0,Math.min(1,rc)),n()):sc};G.paddingInner=function(rc){return arguments.length?
(sc=Math.max(0,Math.min(1,rc)),n()):sc};G.paddingOuter=function(rc){return arguments.length?(cd=Math.max(0,Math.min(1,rc)),n()):cd};G.align=function(rc){return arguments.length?(md=Math.max(0,Math.min(1,rc)),n()):md};G.invertRange=function(rc){if(null!=rc[0]&&null!=rc[1]){var zd=Wa[1]<Wa[0],Yd=zd?ka().reverse():ka(),ye=Yd.length-1,Rd=+rc[0],Te=+rc[1];if(Rd===Rd&&Te===Te){if(Te<Rd){var Ef=Rd;Rd=Te;Te=Ef}if(!(Te<Yd[0]||Rd>Wa[1-zd]))return rc=Math.max(0,xg(Yd,Rd)-1),Te=Rd===Te?rc:xg(Yd,Te)-1,Rd-Yd[rc]>
qb+1E-10&&++rc,zd&&(Ef=rc,rc=ye-Te,Te=ye-Ef),rc>Te?void 0:M().slice(rc,Te+1)}}};G.invert=function(rc){return(rc=G.invertRange([rc,rc]))?rc[0]:rc};G.copy=function(){return mb().domain(M()).range(Wa).round(Kb).paddingInner(sc).paddingOuter(cd).align(md)};return n()}function Dc(n){const G=n.copy;n.padding=n.paddingOuter;delete n.paddingInner;n.copy=function(){return Dc(G())};return n}function Lc(){function n(ka){return null==ka||ka!==ka?void 0:M[(xg(G,ka)-1)%M.length]}let G=[],M=[];n.domain=function(ka){return arguments.length?
(G=Dj.call(ka,h.toNumber),n):G.slice()};n.range=function(ka){return arguments.length?(M=cl.call(ka),n):M.slice()};n.tickFormat=function(ka,Wa){return K(G[0],h.peek(G),null==ka?10:ka,Wa)};n.copy=function(){return Lc().domain(n.domain()).range(n.range())};return n}function Gd(n){n[zi]=!0;return n}function le(n,G,M){const ka=function(){const Wa=G();Wa.invertRange||(Wa.invertRange=Wa.invert?zb(Wa):Wa.invertExtent?Yb(Wa):void 0);Wa.type=n;return Gd(Wa)};ka.metadata=h.toSet(h.array(M));return ka}function Xd(n,
G,M){return 1<arguments.length?(Pi.set(n,le(n,G,M)),this):Jf(n)?Pi.get(n):void 0}function Jf(n){return Pi.has(n)}function mf(n,G){return(n=Pi.get(n))&&n.metadata[G]}function wg(n){return mf(n,"discrete")}function Vf(n){return mf(n,"discretizing")}function Xg(n){return mf(n,"log")}function ig(n){return mf(n,"temporal")}function Kg(n,G,M){return va(Dh(G||"rgb",M),n)}function Dh(n,G){n=D[Zd(n)];return null!=G&&n&&n.gamma?n.gamma(G):n}function Zd(n){return"interpolate"+n.toLowerCase().split("-").map(G=>
G[0].toUpperCase()+G.slice(1)).join("")}function ge(n){for(var G=n.length/6|0,M=Array(G),ka=0;ka<G;)M[ka]="#"+n.slice(6*ka,6*++ka);return M}function of(n){if(h.isArray(n))return n;const G=n.length/6|0,M=Array(G);for(let ka=0;ka<G;)M[ka]="#"+n.slice(6*ka,6*++ka);return M}function Ge(n,G){for(const M in n)hf(M,G(n[M]))}function hf(n,G){n=n&&n.toLowerCase();return 1<arguments.length?(jj[n]=G,this):jj[n]}function Ue(n,G,M){var ka=n.range();let Wa=ka[0],db=h.peek(ka);ka=ij;Wa>db&&(ka=db,db=Wa,Wa=ka,ka=
Zf);Wa=Math.floor(Wa);db=Math.ceil(db);G=G.map(qb=>[qb,n(qb)]).filter(qb=>Wa<=qb[1]&&qb[1]<=db).sort(ka).map(qb=>qb[0]);if(0<M&&1<G.length){for(ka=[G[0],h.peek(G)];G.length>M&&3<=G.length;)G=G.filter((qb,Kb)=>!(Kb%2));3>G.length&&(G=ka)}return G}function pf(n,G){return n.bins?Ue(n,n.bins,G):n.ticks?n.ticks(G):n.domain()}function Wf(n,G,M,ka,Wa,db){const qb=G.type;let Kb=Hj;if("time"===qb||"time"===Wa)Kb=n.timeFormat(ka);else if("utc"===qb||"utc"===Wa)Kb=n.utcFormat(ka);else if(Xg(qb)){const sc=n.formatFloat(ka);
if(db||G.bins)Kb=sc;else{const cd=Pf(G,M,!1);Kb=md=>cd(md)?sc(md):""}}else G.tickFormat?(G=G.domain(),Kb=n.formatSpan(G[0],G[G.length-1],M,ka)):ka&&(Kb=n.format(ka));return Kb}function Pf(n,G,M){const ka=pf(n,G),Wa=n.base(),db=Math.log(Wa),qb=Math.max(1,Wa*G/ka.length);n=Kb=>{Kb/=Math.pow(Wa,Math.round(Math.log(Kb)/db));Kb*Wa<Wa-.5&&(Kb*=Wa);return Kb<=qb};return M?ka.filter(n):n}function $e(n,G){n.bins?(n=n.bins,G=n.slice(0,-1),G.max=h.peek(n),n=G):"log"===n.type?n=Pf(n,G,!0):Si[n.type]?(n=n[Si[n.type]](),
n=[-Infinity].concat(n),n.max=Infinity):n=pf(n,G);return n}function Yg(n,G,M,ka,Wa,db,qb){if(yh[G.type]&&"time"!==db&&"utc"!==db){M=G[yh[G.type]]();db=M.length;qb=1<db?M[1]-M[0]:M[0];let Kb;for(Kb=1;Kb<db;++Kb)qb=Math.min(qb,M[Kb]-M[Kb-1]);n=n.formatSpan(0,qb,30,Wa)}else n=Wf(n,G,M,Wa,db,qb);return"symbol"===ka&&(Si[G.type]||G.bins)?Xi(n):"discrete"===ka?ji(n):ii(n)}const xg=mc(ac).right;mc(Ub).center;class lh extends Map{constructor(n,G=wb){super();Object.defineProperties(this,{_intern:{value:new Map},
_key:{value:G}});if(null!=n)for(const [M,ka]of n)this.set(M,ka)}get(n){return super.get(jc(this,n))}has(n){return super.has(jc(this,n))}set(n,G){return super.set(Ba(this,n),G)}delete(n){return super.delete(Za(this,n))}}const Qf=Math.sqrt(50),Rh=Math.sqrt(10),og=Math.sqrt(2),vh=Symbol("implicit");var jg=1/.7,Sh=/^#([0-9a-f]{3,8})$/,aj=RegExp("^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$"),Fg=RegExp("^rgb\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),
ti=RegExp("^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),di=RegExp("^rgba\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),bj=RegExp("^hsl\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),
ui=RegExp("^hsla\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),wh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,
cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,
dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,
lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,
mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,
seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Va(hb,Pb,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:bb,formatHex:bb,
formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return w(this).formatHsl()},formatRgb:tb,toString:tb});Va(ha,ca,Ga(hb,{brighter(n){n=null==n?jg:Math.pow(jg,n);return new ha(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){n=null==n?.7:Math.pow(.7,n);return new ha(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ha(m(this.r),m(this.g),m(this.b),pa(this.opacity))},displayable(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=
this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:La,formatHex:La,formatHex8:function(){return`#${E(this.r)}${E(this.g)}${E(this.b)}${E(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:na,toString:na}));Va(A,Q,Ga(hb,{brighter(n){n=null==n?jg:Math.pow(jg,n);return new A(this.h,this.s,this.l*n,this.opacity)},darker(n){n=null==n?.7:Math.pow(.7,n);return new A(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(0>this.h),G=isNaN(n)||isNaN(this.s)?0:this.s,M=this.l;G=M+(.5>
M?M:1-M)*G;M=2*M-G;return new ha(z(240<=n?n-240:n+120,M,G),z(n,M,G),z(120>n?n+240:n-120,M,G),this.opacity)},clamp(){return new A(y(this.h),N(this.s),N(this.l),pa(this.opacity))},displayable(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl(){const n=pa(this.opacity);return`${1===n?"hsl(":"hsla("}${y(this.h)}, ${100*N(this.s)}%, ${100*N(this.l)}%${1===n?")":`, ${n})`}`}}));const Li=Math.PI/180,Fh=180/Math.PI,Eg=4/29,Gh=6/29,Hh=3*Gh*Gh,
eg=Gh*Gh*Gh;Va(V,H,Ga(hb,{brighter(n){return new V(this.l+18*(null==n?1:n),this.a,this.b,this.opacity)},darker(n){return new V(this.l-18*(null==n?1:n),this.a,this.b,this.opacity)},rgb(){var n=(this.l+16)/116,G=isNaN(this.a)?n:n+this.a/500,M=isNaN(this.b)?n:n-this.b/200;G=.96422*O(G);n=1*O(n);M=.82521*O(M);return new ha(la(3.1338561*G-1.6168667*n-.4906146*M),la(-.9787684*G+1.9161415*n+.033454*M),la(.0719453*G-.2289914*n+1.4052427*M),this.opacity)}}));Va(Ya,Pa,Ga(hb,{brighter(n){return new Ya(this.h,
this.c,this.l+18*(null==n?1:n),this.opacity)},darker(n){return new Ya(this.h,this.c,this.l-18*(null==n?1:n),this.opacity)},rgb(){return vb(this).rgb()}}));var cj=1.78277*-.29227-.1347134789;Va(Tb,jb,Ga(hb,{brighter(n){n=null==n?jg:Math.pow(jg,n);return new Tb(this.h,this.s,this.l*n,this.opacity)},darker(n){n=null==n?.7:Math.pow(.7,n);return new Tb(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*Li,G=+this.l,M=isNaN(this.s)?0:this.s*G*(1-G),ka=Math.cos(n);n=Math.sin(n);
return new ha(255*(G+M*(-.14861*ka+1.78277*n)),255*(G+M*(-.29227*ka+-.90649*n)),255*(G+1.97294*M*ka),this.opacity)}}));var fi=n=>()=>n,fh=function M(G){function ka(db,qb){var Kb=Wa((db=ca(db)).r,(qb=ca(qb)).r),sc=Wa(db.g,qb.g),cd=Wa(db.b,qb.b),md=xc(db.opacity,qb.opacity);return function(rc){db.r=Kb(rc);db.g=sc(rc);db.b=cd(rc);db.opacity=md(rc);return db+""}}var Wa=Qb(G);ka.gamma=M;return ka}(1),vi=ed(Ea),Aj=ed(Lb),gh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nh=new RegExp(gh.source,"g"),Gg=180/
Math.PI,Se={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ih,Lg=Ha(function(G){G=new ("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(G+"");return G.isIdentity?Se:ma(G.a,G.b,G.c,G.d,G.e,G.f)},"px, ","px)","deg)"),xf=Ha(function(G){if(null==G)return Se;Ih||(Ih=document.createElementNS("http://www.w3.org/2000/svg","g"));Ih.setAttribute("transform",G);if(!(G=Ih.transform.baseVal.consolidate()))return Se;G=G.matrix;return ma(G.a,G.b,G.c,G.d,G.e,G.f)},", ",")",")"),Mi=function db(M,
ka,Wa){function qb(Kb,sc){var cd=Kb[0],md=Kb[1],rc=Kb[2];Kb=sc[2];var zd=sc[0]-cd,Yd=sc[1]-md,ye=zd*zd+Yd*Yd;if(1E-12>ye){var Rd=Math.log(Kb/rc)/M;Kb=function(sg){return[cd+sg*zd,md+sg*Yd,rc*Math.exp(M*sg*Rd)]}}else{var Te=Math.sqrt(ye);sc=(Kb*Kb-rc*rc+Wa*ye)/(2*rc*ka*Te);Kb=(Kb*Kb-rc*rc-Wa*ye)/(2*Kb*ka*Te);var Ef=Math.log(Math.sqrt(sc*sc+1)-sc);Rd=(Math.log(Math.sqrt(Kb*Kb+1)-Kb)-Ef)/M;Kb=function(sg){sg*=Rd;var tg=gb(Ef),zg=M*sg+Ef;var Mf=((zg=Math.exp(2*zg))-1)/(zg+1);var ze=Ef;zg=((ze=Math.exp(ze))-
1/ze)/2;Mf=rc/(ka*Te)*(tg*Mf-zg);return[cd+Mf*zd,md+Mf*Yd,rc*tg/gb(M*sg+Ef)]}}Kb.duration=1E3*Rd*M/Math.SQRT2;return Kb}qb.rho=function(Kb){Kb=Math.max(.001,+Kb);var sc=Kb*Kb;return db(Kb,sc,sc*sc)};return qb}(Math.SQRT2,2,4),pg=R(Mb),Mg=R(xc),oh=t(Mb),$g=t(xc),Jh=ba(Mb),ah=ba(xc),D=Object.freeze({__proto__:null,interpolate:jd,interpolateArray:function(M,ka){return(Db(ka)?qa:Ua)(M,ka)},interpolateBasis:Ea,interpolateBasisClosed:Lb,interpolateCubehelix:Jh,interpolateCubehelixLong:ah,interpolateDate:yb,
interpolateDiscrete:function(M){var ka=M.length;return function(Wa){return M[Math.max(0,Math.min(ka-1,Math.floor(Wa*ka)))]}},interpolateHcl:oh,interpolateHclLong:$g,interpolateHsl:pg,interpolateHslLong:Mg,interpolateHue:function(M,ka){var Wa=Mb(+M,+ka);return function(db){db=Wa(db);return db-360*Math.floor(db/360)}},interpolateLab:function(M,ka){var Wa=xc((M=H(M)).l,(ka=H(ka)).l),db=xc(M.a,ka.a),qb=xc(M.b,ka.b),Kb=xc(M.opacity,ka.opacity);return function(sc){M.l=Wa(sc);M.a=db(sc);M.b=qb(sc);M.opacity=
Kb(sc);return M+""}},interpolateNumber:Hb,interpolateNumberArray:qa,interpolateObject:Nb,interpolateRgb:fh,interpolateRgbBasis:vi,interpolateRgbBasisClosed:Aj,interpolateRound:Vc,interpolateString:Bc,interpolateTransformCss:Lg,interpolateTransformSvg:xf,interpolateZoom:Mi,piecewise:va,quantize:function(M,ka){for(var Wa=Array(ka),db=0;db<ka;++db)Wa[db]=M(db/(ka-1));return Wa}}),Y=[0,1],wa=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Dd.prototype=rd.prototype;rd.prototype.toString=
function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var Na,Ib={"%":(M,ka)=>(100*M).toFixed(ka),b:M=>Math.round(M).toString(2),c:M=>M+"",d:function(M){return 1E21<=Math.abs(M=Math.round(M))?M.toLocaleString("en").replace(/,/g,""):M.toString(10)},e:(M,ka)=>M.toExponential(ka),f:(M,ka)=>M.toFixed(ka),g:(M,ka)=>M.toPrecision(ka),
o:M=>Math.round(M).toString(8),p:(M,ka)=>we(100*M,ka),r:we,s:function(M,ka){var Wa=vd(M,ka);if(!Wa)return M+"";var db=Wa[0];Wa=Wa[1];Wa=Wa-(Na=3*Math.max(-8,Math.min(8,Math.floor(Wa/3))))+1;var qb=db.length;return Wa===qb?db:Wa>qb?db+Array(Wa-qb+1).join("0"):0<Wa?db.slice(0,Wa)+"."+db.slice(Wa):"0."+Array(1-Wa).join("0")+vd(M,Math.max(0,ka+Wa-1))[0]},X:M=>Math.round(M).toString(16).toUpperCase(),x:M=>Math.round(M).toString(16)},Ab=Array.prototype.map,dc="y z a f p n µ m  k M G T P E Z Y".split(" "),
r,I,ea;(function(M){r=x(M);I=r.format;ea=r.formatPrefix;return r})({thousands:",",grouping:[3],currency:["$",""]});const sa=new Date,$a=new Date,Ob=pc(()=>{},(M,ka)=>{M.setTime(+M+ka)},(M,ka)=>ka-M);Ob.every=M=>{M=Math.floor(M);return isFinite(M)&&0<M?1<M?pc(ka=>{ka.setTime(Math.floor(ka/M)*M)},(ka,Wa)=>{ka.setTime(+ka+Wa*M)},(ka,Wa)=>(Wa-ka)/M):Ob:null};Ob.range;const hc=6048E5,Mc=2592E6,fc=31536E6,$c=pc(M=>{M.setTime(M-M.getMilliseconds())},(M,ka)=>{M.setTime(+M+1E3*ka)},(M,ka)=>(ka-M)/1E3,M=>M.getUTCSeconds());
$c.range;const Wc=pc(M=>{M.setTime(M-M.getMilliseconds()-1E3*M.getSeconds())},(M,ka)=>{M.setTime(+M+6E4*ka)},(M,ka)=>(ka-M)/6E4,M=>M.getMinutes());Wc.range;const Hd=pc(M=>{M.setUTCSeconds(0,0)},(M,ka)=>{M.setTime(+M+6E4*ka)},(M,ka)=>(ka-M)/6E4,M=>M.getUTCMinutes());Hd.range;const he=pc(M=>{M.setTime(M-M.getMilliseconds()-1E3*M.getSeconds()-6E4*M.getMinutes())},(M,ka)=>{M.setTime(+M+36E5*ka)},(M,ka)=>(ka-M)/36E5,M=>M.getHours());he.range;const se=pc(M=>{M.setUTCMinutes(0,0,0)},(M,ka)=>{M.setTime(+M+
36E5*ka)},(M,ka)=>(ka-M)/36E5,M=>M.getUTCHours());se.range;const Je=pc(M=>M.setHours(0,0,0,0),(M,ka)=>M.setDate(M.getDate()+ka),(M,ka)=>(ka-M-6E4*(ka.getTimezoneOffset()-M.getTimezoneOffset()))/864E5,M=>M.getDate()-1);Je.range;const rf=pc(M=>{M.setUTCHours(0,0,0,0)},(M,ka)=>{M.setUTCDate(M.getUTCDate()+ka)},(M,ka)=>(ka-M)/864E5,M=>M.getUTCDate()-1);rf.range;const df=pc(M=>{M.setUTCHours(0,0,0,0)},(M,ka)=>{M.setUTCDate(M.getUTCDate()+ka)},(M,ka)=>(ka-M)/864E5,M=>Math.floor(M/864E5));df.range;const bh=
Vb(0),pe=Vb(1),Pe=Vb(2),ph=Vb(3),rh=Vb(4),wf=Vb(5),zf=Vb(6);bh.range;pe.range;Pe.range;ph.range;rh.range;wf.range;zf.range;const yg=Ec(0),mh=Ec(1),Df=Ec(2),qf=Ec(3),Hg=Ec(4),hg=Ec(5),Eh=Ec(6);yg.range;mh.range;Df.range;qf.range;Hg.range;hg.range;Eh.range;const gi=pc(M=>{M.setDate(1);M.setHours(0,0,0,0)},(M,ka)=>{M.setMonth(M.getMonth()+ka)},(M,ka)=>ka.getMonth()-M.getMonth()+12*(ka.getFullYear()-M.getFullYear()),M=>M.getMonth());gi.range;const ag=pc(M=>{M.setUTCDate(1);M.setUTCHours(0,0,0,0)},(M,
ka)=>{M.setUTCMonth(M.getUTCMonth()+ka)},(M,ka)=>ka.getUTCMonth()-M.getUTCMonth()+12*(ka.getUTCFullYear()-M.getUTCFullYear()),M=>M.getUTCMonth());ag.range;const Af=pc(M=>{M.setMonth(0,1);M.setHours(0,0,0,0)},(M,ka)=>{M.setFullYear(M.getFullYear()+ka)},(M,ka)=>ka.getFullYear()-M.getFullYear(),M=>M.getFullYear());Af.every=M=>isFinite(M=Math.floor(M))&&0<M?pc(ka=>{ka.setFullYear(Math.floor(ka.getFullYear()/M)*M);ka.setMonth(0,1);ka.setHours(0,0,0,0)},(ka,Wa)=>{ka.setFullYear(ka.getFullYear()+Wa*M)}):
null;Af.range;const Cg=pc(M=>{M.setUTCMonth(0,1);M.setUTCHours(0,0,0,0)},(M,ka)=>{M.setUTCFullYear(M.getUTCFullYear()+ka)},(M,ka)=>ka.getUTCFullYear()-M.getUTCFullYear(),M=>M.getUTCFullYear());Cg.every=M=>isFinite(M=Math.floor(M))&&0<M?pc(ka=>{ka.setUTCFullYear(Math.floor(ka.getUTCFullYear()/M)*M);ka.setUTCMonth(0,1);ka.setUTCHours(0,0,0,0)},(ka,Wa)=>{ka.setUTCFullYear(ka.getUTCFullYear()+Wa*M)}):null;Cg.range;const [Ki,rj]=ld(Cg,ag,yg,df,se,Hd),[sj,vk]=ld(Af,gi,bh,Je,he,Wc);var ej={"-":"",_:" ",
0:"0"},Xf=/^\s*\d+/,wk=/^%/,Cj=/[\\^$*+?|[\]().{}]/g,hh,Oi,Uj;(function(M){hh=ce(M);Oi=hh.format;hh.parse;Uj=hh.utcFormat;hh.utcParse;return hh})({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
var Dj=Array.prototype.map;const cl=Array.prototype.slice,Pi=new Map,zi=Symbol("vega_scale");Xd("identity",lb);Xd("linear",Ka,"continuous");Xd("log",nd,["continuous","log"]);Xd("pow",aa,"continuous");Xd("sqrt",function(){return aa.apply(null,arguments).exponent(.5)},"continuous");Xd("symlog",He,"continuous");Xd("time",function(){return fa.apply(Bf(sj,vk,Af,gi,bh,Je,he,Wc,$c,Oi).domain([new Date(2E3,0,1),new Date(2E3,0,2)]),arguments)},["continuous","temporal"]);Xd("utc",function(){return fa.apply(Bf(Ki,
rj,Cg,ag,yg,rf,se,Hd,$c,Uj).domain([Date.UTC(2E3,0,1),Date.UTC(2E3,0,2)]),arguments)},["continuous","temporal"]);Xd("sequential",Ug,["continuous","interpolating"]);Xd("sequential-linear",Ug,["continuous","interpolating"]);Xd("sequential-log",eh,["continuous","interpolating","log"]);Xd("sequential-pow",Vg,["continuous","interpolating"]);Xd("sequential-sqrt",function(){return Vg.apply(null,arguments).exponent(.5)},["continuous","interpolating"]);Xd("sequential-symlog",Sg,["continuous","interpolating"]);
Xd("diverging-linear",kh,["continuous","interpolating"]);Xd("diverging-log",If,["continuous","interpolating","log"]);Xd("diverging-pow",Ja,["continuous","interpolating"]);Xd("diverging-sqrt",function(){return Ja.apply(null,arguments).exponent(.5)},["continuous","interpolating"]);Xd("diverging-symlog",U,["continuous","interpolating"]);Xd("quantile",Fa,["discretizing","quantile"]);Xd("quantize",fb,"discretizing");Xd("threshold",Gb,"discretizing");Xd("bin-ordinal",Lc,["discrete","discretizing"]);Xd("ordinal",
Ra,"discrete");Xd("band",mb,"discrete");Xd("point",function(){return Dc(mb().paddingInner(1))},"discrete");const Vj=["clamp","base","constant","exponent"];var Qi=ge("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Wj=ge("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),xk=ge("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),fj=ge("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Ri=ge("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ag=ge("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),
hi=ge("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Wh=ge("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Lh=ge("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),hj=ge("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");const jj={};Ge({accent:Wj,category10:Qi,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",
category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:xk,observable10:fj,paired:Ri,pastel1:Ag,pastel2:hi,set1:Wh,set2:Lh,set3:hj,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"},of);Ge({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",
greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",
greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",
yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",
redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",
magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",
cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",
sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",
browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",
lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",
darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},M=>Kg(of(M)));const Hj=M=>h.isArray(M)?M.map(ka=>String(ka)):String(M),ij=(M,ka)=>M[1]-ka[1],Zf=(M,ka)=>ka[1]-M[1],Si={quantile:"quantiles",quantize:"thresholds",threshold:"domain"},yh={quantile:"quantiles",quantize:"domain"},Xi=M=>(ka,Wa,db)=>{Wa=db[Wa+1];db=db.max;db=null!=db?db:Infinity;Wa=null!=Wa?Wa:db;
ka=Number.isFinite(ka)?M(ka):null;Wa=Number.isFinite(Wa)?M(Wa):null;return ka&&Wa?ka+" – "+Wa:Wa?"\x3c "+Wa:"≥ "+ka},ji=M=>(ka,Wa)=>Wa?M(ka):null,ii=M=>ka=>M(ka);u.Band="band";u.BinOrdinal="bin-ordinal";u.DiscreteLegend="discrete";u.Diverging="diverging";u.GradientLegend="gradient";u.Identity="identity";u.Linear="linear";u.Log="log";u.Ordinal="ordinal";u.Point="point";u.Pow="pow";u.Quantile="quantile";u.Quantize="quantize";u.Sequential="sequential";u.Sqrt="sqrt";u.SymbolLegend="symbol";u.Symlog="symlog";
u.Threshold="threshold";u.Time="time";u.UTC="utc";u.bandSpace=ab;u.domainCaption=function(M,ka,Wa){Wa=Wa||{};var db=Math.max(3,Wa.maxlen||7),qb=Wa.format;const Kb=(Wa=Wa.formatType)||ka.type;h.isString(qb)&&ig(Kb)&&(qb=qb.replace(/%a/g,"%A").replace(/%b/g,"%B"));M=qb||"time"!==Kb?qb||"utc"!==Kb?Yg(M,ka,5,null,qb,Wa,!0):M.utcFormat("%A, %d %B %Y, %X UTC"):M.timeFormat("%A, %d %B %Y, %X");if(Vf(ka.type))return db=$e(ka).slice(1).map(M),ka=db.length,`${ka} boundar${1===ka?"y":"ies"}: ${db.join(", ")}`;
if(wg(ka.type))return qb=ka.domain(),ka=qb.length,db=ka>db?qb.slice(0,db-2).map(M).join(", ")+", ending with "+qb.slice(-1).map(M):qb.map(M).join(", "),`${ka} value${1===ka?"":"s"}: ${db}`;db=ka.domain();return`values from ${M(db[0])} to ${M(h.peek(db))}`};u.interpolate=Dh;u.interpolateColors=Kg;u.interpolateRange=function(M,ka){const Wa=ka[0],db=h.peek(ka)-Wa;return function(qb){return M(Wa+qb*db)}};u.isContinuous=function(M){return mf(M,"continuous")};u.isDiscrete=wg;u.isDiscretizing=Vf;u.isInterpolating=
function(M){return mf(M,"interpolating")};u.isLogarithmic=Xg;u.isQuantile=function(M){return mf(M,"quantile")};u.isRegisteredScale=function(M){return M&&!0===M[zi]};u.isTemporal=ig;u.isValidScaleType=Jf;u.labelFormat=Yg;u.labelFraction=function(M){var ka=M.domain();const Wa=ka.length-1;let db=+ka[0];ka=+h.peek(ka);let qb=ka-db;"threshold"===M.type&&(M=Wa?qb/Wa:.1,db-=M,ka+=M,qb=ka-db);return Kb=>(Kb-db)/qb};u.labelValues=$e;u.quantizeInterpolator=function(M,ka){const Wa=Array(ka),db=ka+1;for(let qb=
0;qb<ka;)Wa[qb]=M(++qb/db);return Wa};u.registerScale=Gd;u.scale=Xd;u.scaleCopy=function(M){const ka=M.type;M=M.copy();M.type=ka;return M};u.scaleFraction=function(M,ka,Wa){var db=Wa-ka;let qb,Kb;return db&&Number.isFinite(db)?(db=(qb=M.type).indexOf("-"),qb=0>db?qb:qb.slice(db+1),Kb=Xd(qb)().domain([ka,Wa]).range([0,1]),Vj.forEach(sc=>M[sc]?Kb[sc](M[sc]()):0),Kb):h.constant(.5)};u.scaleImplicit=vh;u.scheme=hf;u.tickCount=function(M,ka,Wa){let db;h.isNumber(ka)&&(M.bins&&(ka=Math.max(ka,M.bins.length)),
null!=Wa&&(ka=Math.min(ka,Math.floor(h.span(M.domain())/Wa||1)+1)));h.isObject(ka)&&(db=ka.step,ka=ka.interval);h.isString(ka)&&(ka="time"===M.type?ia.timeInterval(ka):"utc"==M.type?ia.utcInterval(ka):h.error("Only time and utc scales accept interval strings."),db&&(ka=ka.every(db)));return ka};u.tickFormat=Wf;u.tickValues=pf;u.validTicks=Ue})};
shadow$provide[34]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(21),ob(32),ob(28),ob(33)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-canvas","vega-loader","vega-scale"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega,u.vega,u.vega))})(this,function(u,h,ia,ab,zb){function Yb(D,Y,wa){const Na=D.gradient;let Ib=D.id,Ab="radial"===Na?"p_":"";Ib||(Ib=D.id="gradient_"+oa++,"radial"===Na?(D.x1=
ac(D.x1,.5),D.y1=ac(D.y1,.5),D.r1=ac(D.r1,0),D.x2=ac(D.x2,.5),D.y2=ac(D.y2,.5),D.r2=ac(D.r2,.5),Ab="p_"):(D.x1=ac(D.x1,0),D.y1=ac(D.y1,0),D.x2=ac(D.x2,1),D.y2=ac(D.y2,0)));Y[Ib]=D;return"url("+(wa||"")+"#"+Ab+Ib+")"}function ac(D,Y){return null!=D?D:Y}function Xb(D){return function(){return D}}function mc(D){return 1<=D?nb:-1>=D?-nb:Math.asin(D)}function Cb(D){this._+=D[0];for(let Y=1,wa=D.length;Y<wa;++Y)this._+=arguments[Y]+D[Y]}function Ub(D){let Y=Math.floor(D);if(!(0<=Y))throw Error(`invalid digits: ${D}`);
if(15<Y)return Cb;const wa=Math.pow(10,Y);return function(Na){this._+=Na[0];for(let Ib=1,Ab=Na.length;Ib<Ab;++Ib)this._+=Math.round(arguments[Ib]*wa)/wa+Na[Ib]}}function jc(){return new Rc}function Ba(D){let Y=3;D.digits=function(wa){if(!arguments.length)return Y;if(null==wa)Y=null;else{const Na=Math.floor(wa);if(!(0<=Na))throw new RangeError(`invalid digits: ${wa}`);Y=Na}return D};return()=>new Rc(Y)}function Za(D){return D.innerRadius}function wb(D){return D.outerRadius}function ub(D){return D.startAngle}
function sb(D){return D.endAngle}function xb(D){return D&&D.padAngle}function ib(D,Y,wa,Na,Ib,Ab,dc){var r=D-wa,I=Y-Na;dc=(dc?Ab:-Ab)/Ia(r*r+I*I);I*=dc;r*=-dc;var ea=D+I,sa=Y+r,$a=wa+I,Ob=Na+r;wa=(ea+$a)/2;Na=(sa+Ob)/2;Y=$a-ea;D=Ob-sa;dc=Y*Y+D*D;Ab=Ib-Ab;Ob=ea*Ob-$a*sa;var hc=(0>D?-1:1)*Ia(ja(0,Ab*Ab*dc-Ob*Ob));ea=(Ob*D-Y*hc)/dc;sa=(-Ob*Y-D*hc)/dc;$a=(Ob*D+Y*hc)/dc;Y=(-Ob*Y+D*hc)/dc;D=ea-wa;dc=sa-Na;wa=$a-wa;Na=Y-Na;D*D+dc*dc>wa*wa+Na*Na&&(ea=$a,sa=Y);return{cx:ea,cy:sa,x01:-I,y01:-r,x11:ea*(Ib/Ab-
1),y11:sa*(Ib/Ab-1)}}function ec(D){return"object"===typeof D&&"length"in D?D:Array.from(D)}function ra(D){this._context=D}function fa(D){return new ra(D)}function xa(D){return D[0]}function Ra(D){return D[1]}function Va(D,Y){function wa(I){var ea,sa=(I=ec(I)).length,$a,Ob=!1,hc;null==Ib&&(dc=Ab(hc=r()));for(ea=0;ea<=sa;++ea)!(ea<sa&&Na($a=I[ea],ea,I))===Ob&&((Ob=!Ob)?dc.lineStart():dc.lineEnd()),Ob&&dc.point(+D($a,ea,I),+Y($a,ea,I));if(hc)return dc=null,hc+""||null}var Na=Xb(!0),Ib=null,Ab=fa,dc=
null,r=Ba(wa);D="function"===typeof D?D:void 0===D?xa:Xb(D);Y="function"===typeof Y?Y:void 0===Y?Ra:Xb(Y);wa.x=function(I){return arguments.length?(D="function"===typeof I?I:Xb(+I),wa):D};wa.y=function(I){return arguments.length?(Y="function"===typeof I?I:Xb(+I),wa):Y};wa.defined=function(I){return arguments.length?(Na="function"===typeof I?I:Xb(!!I),wa):Na};wa.curve=function(I){return arguments.length?(Ab=I,null!=Ib&&(dc=Ab(Ib)),wa):Ab};wa.context=function(I){return arguments.length?(null==I?Ib=
dc=null:dc=Ab(Ib=I),wa):Ib};return wa}function Ga(D,Y,wa){function Na($a){var Ob,hc,Mc=($a=ec($a)).length,fc,$c=!1,Wc,Hd=Array(Mc),he=Array(Mc);null==r&&(ea=I(Wc=sa()));for(Ob=0;Ob<=Mc;++Ob){if(!(Ob<Mc&&dc(fc=$a[Ob],Ob,$a))===$c)if($c=!$c){var se=Ob;ea.areaStart();ea.lineStart()}else{ea.lineEnd();ea.lineStart();for(hc=Ob-1;hc>=se;--hc)ea.point(Hd[hc],he[hc]);ea.lineEnd();ea.areaEnd()}$c&&(Hd[Ob]=+D(fc,Ob,$a),he[Ob]=+Y(fc,Ob,$a),ea.point(Ab?+Ab(fc,Ob,$a):Hd[Ob],wa?+wa(fc,Ob,$a):he[Ob]))}if(Wc)return ea=
null,Wc+""||null}function Ib(){return Va().defined(dc).curve(I).context(r)}var Ab=null,dc=Xb(!0),r=null,I=fa,ea=null,sa=Ba(Na);D="function"===typeof D?D:void 0===D?xa:Xb(+D);Y="function"===typeof Y?Y:void 0===Y?Xb(0):Xb(+Y);wa="function"===typeof wa?wa:void 0===wa?Ra:Xb(+wa);Na.x=function($a){return arguments.length?(D="function"===typeof $a?$a:Xb(+$a),Ab=null,Na):D};Na.x0=function($a){return arguments.length?(D="function"===typeof $a?$a:Xb(+$a),Na):D};Na.x1=function($a){return arguments.length?(Ab=
null==$a?null:"function"===typeof $a?$a:Xb(+$a),Na):Ab};Na.y=function($a){return arguments.length?(Y="function"===typeof $a?$a:Xb(+$a),wa=null,Na):Y};Na.y0=function($a){return arguments.length?(Y="function"===typeof $a?$a:Xb(+$a),Na):Y};Na.y1=function($a){return arguments.length?(wa=null==$a?null:"function"===typeof $a?$a:Xb(+$a),Na):wa};Na.lineX0=Na.lineY0=function(){return Ib().x(D).y(Y)};Na.lineY1=function(){return Ib().x(D).y(wa)};Na.lineX1=function(){return Ib().x(Ab).y(Y)};Na.defined=function($a){return arguments.length?
(dc="function"===typeof $a?$a:Xb(!!$a),Na):dc};Na.curve=function($a){return arguments.length?(I=$a,null!=r&&(ea=I(r)),Na):I};Na.context=function($a){return arguments.length?(null==$a?r=ea=null:ea=I(r=$a),Na):r};return Na}function hb(){}function bb(D,Y,wa){D._context.bezierCurveTo((2*D._x0+D._x1)/3,(2*D._y0+D._y1)/3,(D._x0+2*D._x1)/3,(D._y0+2*D._y1)/3,(D._x0+4*D._x1+Y)/6,(D._y0+4*D._y1+wa)/6)}function tb(D){this._context=D}function Pb(D){this._context=D}function eb(D){this._context=D}function T(D,
Y){this._basis=new tb(D);this._beta=Y}function Z(D,Y,wa){D._context.bezierCurveTo(D._x1+D._k*(D._x2-D._x0),D._y1+D._k*(D._y2-D._y0),D._x2+D._k*(D._x1-Y),D._y2+D._k*(D._y1-wa),D._x2,D._y2)}function ca(D,Y){this._context=D;this._k=(1-Y)/6}function ha(D,Y){this._context=D;this._k=(1-Y)/6}function La(D,Y){this._context=D;this._k=(1-Y)/6}function na(D,Y,wa){var Na=D._x1,Ib=D._y1,Ab=D._x2,dc=D._y2;if(1E-12<D._l01_a){var r=2*D._l01_2a+3*D._l01_a*D._l12_a+D._l12_2a,I=3*D._l01_a*(D._l01_a+D._l12_a);Na=(Na*
r-D._x0*D._l12_2a+D._x2*D._l01_2a)/I;Ib=(Ib*r-D._y0*D._l12_2a+D._y2*D._l01_2a)/I}1E-12<D._l23_a&&(r=2*D._l23_2a+3*D._l23_a*D._l12_a+D._l12_2a,I=3*D._l23_a*(D._l23_a+D._l12_a),Ab=(Ab*r+D._x1*D._l23_2a-Y*D._l12_2a)/I,dc=(dc*r+D._y1*D._l23_2a-wa*D._l12_2a)/I);D._context.bezierCurveTo(Na,Ib,Ab,dc,D._x2,D._y2)}function pa(D,Y){this._context=D;this._alpha=Y}function m(D,Y){this._context=D;this._alpha=Y}function E(D,Y){this._context=D;this._alpha=Y}function L(D){this._context=D}function w(D,Y,wa){var Na=
D._x1-D._x0;Y-=D._x1;var Ib=(D._y1-D._y0)/(Na||0>Y&&-0);D=(wa-D._y1)/(Y||0>Na&&-0);return((0>Ib?-1:1)+(0>D?-1:1))*Math.min(Math.abs(Ib),Math.abs(D),.5*Math.abs((Ib*Y+D*Na)/(Na+Y)))||0}function Q(D,Y){var wa=D._x1-D._x0;return wa?(3*(D._y1-D._y0)/wa-Y)/2:Y}function A(D,Y,wa){var Na=D._x0,Ib=D._x1,Ab=D._y1,dc=(Ib-Na)/3;D._context.bezierCurveTo(Na+dc,D._y0+dc*Y,Ib-dc,Ab-dc*wa,Ib,Ab)}function y(D){this._context=D}function N(D){this._context=new z(D)}function z(D){this._context=D}function C(D){this._context=
D}function H(D){var Y,wa=D.length-1,Na=Array(wa),Ib=Array(wa),Ab=Array(wa);Na[0]=0;Ib[0]=2;Ab[0]=D[0]+2*D[1];for(Y=1;Y<wa-1;++Y)Na[Y]=1,Ib[Y]=4,Ab[Y]=4*D[Y]+2*D[Y+1];Na[wa-1]=2;Ib[wa-1]=7;Ab[wa-1]=8*D[wa-1]+D[wa];for(Y=1;Y<wa;++Y){var dc=Na[Y]/Ib[Y-1];Ib[Y]-=dc;Ab[Y]-=dc*Ab[Y-1]}Na[wa-1]=Ab[wa-1]/Ib[wa-1];for(Y=wa-2;0<=Y;--Y)Na[Y]=(Ab[Y]-Na[Y+1])/Ib[Y];Ib[wa-1]=(D[wa]+Na[wa-1])/2;for(Y=0;Y<wa-1;++Y)Ib[Y]=2*D[Y+1]-Na[Y+1];return[Na,Ib]}function V(D,Y){this._context=D;this._t=Y}function Aa(D,Y,wa){D=
h.hasOwnProperty(te,D)&&te[D];var Na=null;D&&(Na=D.curve||D[Y||"vertical"],D.tension&&null!=wa&&(Na=Na[D.tension](wa)));return Na}function O(D){const Y=[];(D.match(Qd)||[]).forEach(wa=>{let Na=wa[0];var Ib=Na.toLowerCase();const Ab=ke[Ib];var dc=wa.slice(1).trim();wa=[];for(let I=0;Ab&&I<dc.length;)for(let ea=0;ea<Ab;++ea){var r="a"!==Ib||3!==ea&&4!==ea?Od:Fe;r=dc.slice(I).match(r);if(null===r)throw Error("Invalid SVG path, incorrect parameter type");I+=r[0].length;wa.push(+r[0]);r=dc.slice(I).match(xe);
null!==r&&(I+=r[0].length)}dc=wa.length;if(dc<Ab||dc&&0!==dc%Ab)throw Error("Invalid SVG path, incorrect parameter count");Y.push([Na,...wa.slice(0,Ab)]);if(dc!==Ab)for("m"===Ib&&(Na="M"===Na?"L":"l"),Ib=Ab;Ib<dc;Ib+=Ab)Y.push([Na,...wa.slice(Ib,Ib+Ab)])});return Y}function la(D,Y,wa,Na,Ib,Ab,dc,r,I){const ea=Dg.call(arguments);if(ff[ea])return ff[ea];var sa=dc*re;const $a=Math.sin(sa);sa=Math.cos(sa);wa=Math.abs(wa);Na=Math.abs(Na);var Ob=sa*(r-D)*.5+$a*(I-Y)*.5,hc=sa*(I-Y)*.5-$a*(r-D)*.5;Ob=Ob*
Ob/(wa*wa)+hc*hc/(Na*Na);1<Ob&&(Ob=Math.sqrt(Ob),wa*=Ob,Na*=Ob);var Mc=sa/wa,fc=$a/wa,$c=-$a/Na,Wc=sa/Na;Ob=Mc*r+fc*I;hc=$c*r+Wc*I;Mc=Mc*D+fc*Y;fc=$c*D+Wc*Y;$c=1/((Mc-Ob)*(Mc-Ob)+(fc-hc)*(fc-hc))-.25;0>$c&&($c=0);Wc=Math.sqrt($c);Ab==Ib&&(Wc=-Wc);$c=.5*(Ob+Mc)-Wc*(fc-hc);Wc=.5*(hc+fc)+Wc*(Mc-Ob);Ob=Math.atan2(hc-Wc,Ob-$c);hc=Math.atan2(fc-Wc,Mc-$c)-Ob;0>hc&&1===Ab?hc+=hd:0<hc&&0===Ab&&(hc-=hd);Mc=Math.ceil(Math.abs(hc/(Ne+.001)));fc=[];for(let Hd=0;Hd<Mc;++Hd)fc[Hd]=[$c,Wc,Ob+Hd*hc/Mc,Ob+(Hd+1)*hc/
Mc,wa,Na,$a,sa];return ff[ea]=fc}function za(D,Y,wa,Na,Ib,Ab){var dc=null,r=0,I=0,ea=0,sa=0,$a=0,Ob=0;null==wa&&(wa=0);null==Na&&(Na=0);null==Ib&&(Ib=1);null==Ab&&(Ab=Ib);D.beginPath&&D.beginPath();for(var hc=0,Mc=Y.length;hc<Mc;++hc){var fc=Y[hc];if(1!==Ib||1!==Ab){var $c=Ib;var Wc=Ab;var Hd=vf[0]=fc[0];if("a"===Hd||"A"===Hd)vf[1]=$c*fc[1],vf[2]=Wc*fc[2],vf[3]=fc[3],vf[4]=fc[4],vf[5]=fc[5],vf[6]=$c*fc[6],vf[7]=Wc*fc[7];else if("h"===Hd||"H"===Hd)vf[1]=$c*fc[1];else if("v"===Hd||"V"===Hd)vf[1]=Wc*
fc[1];else{Hd=1;for(var he=fc.length;Hd<he;++Hd)vf[Hd]=(1==Hd%2?$c:Wc)*fc[Hd]}fc=vf}switch(fc[0]){case "l":r+=fc[1];I+=fc[2];D.lineTo(r+wa,I+Na);break;case "L":r=fc[1];I=fc[2];D.lineTo(r+wa,I+Na);break;case "h":r+=fc[1];D.lineTo(r+wa,I+Na);break;case "H":r=fc[1];D.lineTo(r+wa,I+Na);break;case "v":I+=fc[1];D.lineTo(r+wa,I+Na);break;case "V":I=fc[1];D.lineTo(r+wa,I+Na);break;case "m":r+=fc[1];I+=fc[2];$a=r;Ob=I;D.moveTo(r+wa,I+Na);break;case "M":r=fc[1];I=fc[2];$a=r;Ob=I;D.moveTo(r+wa,I+Na);break;case "c":$c=
r+fc[5];Wc=I+fc[6];ea=r+fc[3];sa=I+fc[4];D.bezierCurveTo(r+fc[1]+wa,I+fc[2]+Na,ea+wa,sa+Na,$c+wa,Wc+Na);r=$c;I=Wc;break;case "C":r=fc[5];I=fc[6];ea=fc[3];sa=fc[4];D.bezierCurveTo(fc[1]+wa,fc[2]+Na,ea+wa,sa+Na,r+wa,I+Na);break;case "s":$c=r+fc[3];Wc=I+fc[4];ea=2*r-ea;sa=2*I-sa;D.bezierCurveTo(ea+wa,sa+Na,r+fc[1]+wa,I+fc[2]+Na,$c+wa,Wc+Na);ea=r+fc[1];sa=I+fc[2];r=$c;I=Wc;break;case "S":$c=fc[3];Wc=fc[4];ea=2*r-ea;sa=2*I-sa;D.bezierCurveTo(ea+wa,sa+Na,fc[1]+wa,fc[2]+Na,$c+wa,Wc+Na);r=$c;I=Wc;ea=fc[1];
sa=fc[2];break;case "q":$c=r+fc[3];Wc=I+fc[4];ea=r+fc[1];sa=I+fc[2];D.quadraticCurveTo(ea+wa,sa+Na,$c+wa,Wc+Na);r=$c;I=Wc;break;case "Q":$c=fc[3];Wc=fc[4];D.quadraticCurveTo(fc[1]+wa,fc[2]+Na,$c+wa,Wc+Na);r=$c;I=Wc;ea=fc[1];sa=fc[2];break;case "t":$c=r+fc[1];Wc=I+fc[2];null===dc[0].match(/[QqTt]/)?(ea=r,sa=I):"t"===dc[0]?(ea=2*r-se,sa=2*I-Je):"q"===dc[0]&&(ea=2*r-ea,sa=2*I-sa);var se=ea;var Je=sa;D.quadraticCurveTo(ea+wa,sa+Na,$c+wa,Wc+Na);r=$c;I=Wc;ea=r+fc[1];sa=I+fc[2];break;case "T":$c=fc[1];Wc=
fc[2];ea=2*r-ea;sa=2*I-sa;D.quadraticCurveTo(ea+wa,sa+Na,$c+wa,Wc+Na);r=$c;I=Wc;break;case "a":Ma(D,r+wa,I+Na,[fc[1],fc[2],fc[3],fc[4],fc[5],fc[6]+r+wa,fc[7]+I+Na]);r+=fc[6];I+=fc[7];break;case "A":Ma(D,r+wa,I+Na,[fc[1],fc[2],fc[3],fc[4],fc[5],fc[6]+wa,fc[7]+Na]);r=fc[6];I=fc[7];break;case "z":case "Z":r=$a,I=Ob,D.closePath()}dc=fc}}function Ma(D,Y,wa,Na){Y=la(Na[5],Na[6],Na[0],Na[1],Na[3],Na[4],Na[2],Y,wa);for(wa=0;wa<Y.length;++wa){a:{var Ib=Y[wa];Na=Dg.call(Ib);if(lf[Na]){Na=lf[Na];break a}var Ab=
Ib[0],dc=Ib[1],r=Ib[2],I=Ib[3],ea=Ib[4],sa=Ib[5],$a=Ib[6],Ob=Ib[7];Ib=Ob*ea;const Mc=-$a*sa;ea*=$a;sa*=Ob;var hc=Math.cos(r);const fc=Math.sin(r);$a=Math.cos(I);Ob=Math.sin(I);r=.5*(I-r);I=Math.sin(.5*r);I=8/3*I*I/Math.sin(r);r=Ab+hc-I*fc;hc=dc+fc+I*hc;Ab+=$a;dc+=Ob;Ob=Ab+I*Ob;$a=dc-I*$a;Na=lf[Na]=[Ib*r+Mc*hc,ea*r+sa*hc,Ib*Ob+Mc*$a,ea*Ob+sa*$a,Ib*Ab+Mc*dc,ea*Ab+sa*dc]}D.bezierCurveTo(Na[0],Na[1],Na[2],Na[3],Na[4],Na[5])}}function Pa(D){return h.hasOwnProperty(Of,D)?Of[D]:Ya(D)}function Ya(D){if(!h.hasOwnProperty(bg,
D)){const Y=O(D);bg[D]={draw:function(wa,Na){za(wa,Y,0,0,Math.sqrt(Na)/2)}}}return bg[D]}function vb(D){return D.x}function jb(D){return D.y}function Tb(D){return D.width}function W(D){return D.height}function Ea(D){return"function"===typeof D?D:()=>+D}function Lb(D,Y,wa){return Math.max(Y,Math.min(D,wa))}function oc(){function D(sa,$a,Ob){var hc;$a=null!=$a?$a:+Y.call(this,sa);Ob=null!=Ob?Ob:+wa.call(this,sa);var Mc=+Na.call(this,sa),fc=+Ib.call(this,sa),$c=Math.min(Mc,fc)/2,Wc=Lb(+Ab.call(this,
sa),0,$c),Hd=Lb(+dc.call(this,sa),0,$c),he=Lb(+r.call(this,sa),0,$c);sa=Lb(+I.call(this,sa),0,$c);ea||(ea=hc=jc());0>=Wc&&0>=Hd&&0>=he&&0>=sa?ea.rect($a,Ob,Mc,fc):(Mc=$a+Mc,fc=Ob+fc,ea.moveTo($a+Wc,Ob),ea.lineTo(Mc-Hd,Ob),ea.bezierCurveTo(Mc-.448084975506*Hd,Ob,Mc,Ob+.448084975506*Hd,Mc,Ob+Hd),ea.lineTo(Mc,fc-sa),ea.bezierCurveTo(Mc,fc-.448084975506*sa,Mc-.448084975506*sa,fc,Mc-sa,fc),ea.lineTo($a+he,fc),ea.bezierCurveTo($a+.448084975506*he,fc,$a,fc-.448084975506*he,$a,fc-he),ea.lineTo($a,Ob+Wc),
ea.bezierCurveTo($a,Ob+.448084975506*Wc,$a+.448084975506*Wc,Ob,$a+Wc,Ob),ea.closePath());if(hc)return ea=null,hc+""||null}var Y=vb,wa=jb,Na=Tb,Ib=W,Ab=Ea(0),dc=Ab,r=Ab,I=Ab,ea=null;D.x=function(sa){return arguments.length?(Y=Ea(sa),D):Y};D.y=function(sa){return arguments.length?(wa=Ea(sa),D):wa};D.width=function(sa){return arguments.length?(Na=Ea(sa),D):Na};D.height=function(sa){return arguments.length?(Ib=Ea(sa),D):Ib};D.cornerRadius=function(sa,$a,Ob,hc){return arguments.length?(Ab=Ea(sa),dc=null!=
$a?Ea($a):Ab,I=null!=Ob?Ea(Ob):Ab,r=null!=hc?Ea(hc):dc,D):Ab};D.context=function(sa){return arguments.length?(ea=null==sa?null:sa,D):ea};return D}function $b(){function D(sa){var $a,Ob=sa.length,hc,Mc=!1,fc;null==Ab&&(Ab=fc=jc());for($a=0;$a<=Ob;++$a)if(!($a<Ob&&Ib(hc=sa[$a],$a,sa))===Mc&&(Mc=!Mc)&&(dc=0),Mc){var $c=+Y(hc,$a,sa),Wc=+wa(hc,$a,sa);const df=+Na(hc,$a,sa)/2;if(dc){var Hd=I-Wc,he=$c-r;if(Hd||he){var se=Math.hypot(Hd,he),Je=(Hd/=se)*ea;se=(he/=se)*ea;var rf=Math.atan2(he,Hd);Ab.moveTo(r-
Je,I-se);Ab.lineTo($c-Hd*df,Wc-he*df);Ab.arc($c,Wc,df,rf-Math.PI,rf);Ab.lineTo(r+Je,I+se);Ab.arc(r,I,ea,rf,rf+Math.PI)}else Ab.arc($c,Wc,df,0,hd);Ab.closePath()}else dc=1;r=$c;I=Wc;ea=df}if(fc)return Ab=null,fc+""||null}var Y,wa,Na,Ib,Ab=null,dc,r,I,ea;D.x=function(sa){return arguments.length?(Y=sa,D):Y};D.y=function(sa){return arguments.length?(wa=sa,D):wa};D.size=function(sa){return arguments.length?(Na=sa,D):Na};D.defined=function(sa){return arguments.length?(Ib=sa,D):Ib};D.context=function(sa){return arguments.length?
(Ab=null==sa?null:sa,D):Ab};return D}function Mb(D,Y){return null!=D?D:Y}function Qb(D){return D.cornerRadius||D.cornerRadiusTopLeft||D.cornerRadiusTopRight||D.cornerRadiusBottomRight||D.cornerRadiusBottomLeft}function xc(D,Y,wa,Na){return Ug.context(D)(Y,wa,Na)}function ed(D,Y,wa){var Na=Y.clip;D=D._defs;Y=Y.clip_id||(Y.clip_id="clip"+Vg++);D=D.clipping[Y]||(D.clipping[Y]={id:Y});h.isFunction(Na)?D.path=Na(null):Qb(wa)?D.path=xc(null,wa,0,0):(D.width=wa.width||0,D.height=wa.height||0);return"url(#"+
Y+")"}function qa(D){this.clear();D&&this.union(D)}function Db(D){this.mark=D;this.bounds=this.bounds||new qa}function Ua(D){Db.call(this,D);this.items=this.items||[]}function yb(D,Y,wa){if(Y.stroke&&0!==Y.opacity&&0!==Y.strokeOpacity){const Na=null!=Y.strokeWidth?+Y.strokeWidth:1;D.expand(Na+(wa?Y.strokeJoin&&"miter"!==Y.strokeJoin?0:Na:0))}return D}function Hb(D,Y){If=D;Y?(mb=Y*re,Dc=le=Math.cos(mb),Lc=Math.sin(mb),Gd=-Lc):(Dc=le=1,mb=Lc=Gd=0);return Xg}function Nb(D,Y,wa,Na){wa=(D-Y)/(D+wa-2*Y);
0<wa&&1>wa&&Na(D+(Y-D)*wa)}function Zb(D,Y,wa,Na,Ib){const Ab=Na-D+3*Y-3*wa,dc=D+wa-2*Y;var r=D-Y;let I=0,ea=0;1E-14<Math.abs(Ab)?(r=dc*dc+r*Ab,0<=r&&(r=Math.sqrt(r),I=(-dc+r)/Ab,ea=(-dc-r)/Ab)):I=.5*r/dc;0<I&&1>I&&Ib(ic(I,D,Y,wa,Na));0<ea&&1>ea&&Ib(ic(ea,D,Y,wa,Na))}function ic(D,Y,wa,Na,Ib){const Ab=1-D,dc=Ab*Ab,r=D*D;return dc*Ab*Y+3*dc*D*wa+3*Ab*r*Na+r*D*Ib}function Bc(D){return function(Y,wa){if(!ig)return!0;D(ig,Y);Kg.clear().union(Y.bounds).intersect(wa).round();const {x1:Na,y1:Ib,x2:Ab,y2:dc}=
Kg;for(Y=Ib;Y<=dc;++Y)for(wa=Na;wa<=Ab;++wa)if(ig.isPointInPath(wa,Y))return!0;return!1}}function jd(D,Y){return Y.contains(D.x||0,D.y||0)}function Vc(D,Y){const wa=D.x||0,Na=D.y||0;return Y.intersects(Kg.set(wa,Na,wa+(D.width||0),Na+(D.height||0)))}function ma(D,Y){const wa=D.x||0,Na=D.y||0;return Ha(Y,wa,Na,null!=D.x2?D.x2:wa,null!=D.y2?D.y2:Na)}function Ha(D,Y,wa,Na,Ib){const {x1:Ab,y1:dc,x2:r,y2:I}=D;D=Na-Y;Ib-=wa;Na=0;let ea=1,sa,$a,Ob,hc;for(hc=0;4>hc;++hc){0===hc&&(sa=-D,$a=-(Ab-Y));1===hc&&
(sa=D,$a=r-Y);2===hc&&(sa=-Ib,$a=-(dc-wa));3===hc&&(sa=Ib,$a=I-wa);if(1E-10>Math.abs(sa)&&0>$a)return!1;Ob=$a/sa;if(0>sa){if(Ob>ea)return!1;Ob>Na&&(Na=Ob)}else if(0<sa){if(Ob<Na)return!1;Ob<ea&&(ea=Ob)}}return!0}function gb(D,Y){D.globalCompositeOperation=Y.blend||"source-over"}function R(D,Y){return null==D?Y:D}function t(D,Y){const wa=Y.length;for(let Na=0;Na<wa;++Na)D.addColorStop(Y[Na].offset,Y[Na].color);return D}function ba(D,Y,wa){const Na=wa.width(),Ib=wa.height();if("radial"===Y.gradient)D=
D.createRadialGradient(wa.x1+R(Y.x1,.5)*Na,wa.y1+R(Y.y1,.5)*Ib,Math.max(Na,Ib)*R(Y.r1,0),wa.x1+R(Y.x2,.5)*Na,wa.y1+R(Y.y2,.5)*Ib,Math.max(Na,Ib)*R(Y.r2,.5));else{const Ab=R(Y.x1,0),dc=R(Y.y1,0),r=R(Y.x2,1),I=R(Y.y2,0);if(Ab===r||dc===I||Na===Ib)D=D.createLinearGradient(wa.x1+Ab*Na,wa.y1+dc*Ib,wa.x1+r*Na,wa.y1+I*Ib);else{wa=ia.canvas(Math.ceil(Na),Math.ceil(Ib));const ea=wa.getContext("2d");ea.scale(Na,Ib);ea.fillStyle=t(ea.createLinearGradient(Ab,dc,r,I),Y.stops);ea.fillRect(0,0,Na,Ib);return D.createPattern(wa,
"no-repeat")}}return t(D,Y.stops)}function va(D,Y,wa){wa*=null==Y.fillOpacity?1:Y.fillOpacity;return 0<wa?(D.globalAlpha=wa,Y=(wa=Y.fill)&&wa.gradient?ba(D,wa,Y.bounds):wa,D.fillStyle=Y,!0):!1}function Ca(D,Y,wa){var Na=null!=(Na=Y.strokeWidth)?Na:1;if(0>=Na)return!1;wa*=null==Y.strokeOpacity?1:Y.strokeOpacity;return 0<wa?(D.globalAlpha=wa,wa=(wa=Y.stroke)&&wa.gradient?ba(D,wa,Y.bounds):wa,D.strokeStyle=wa,D.lineWidth=Na,D.lineCap=Y.strokeCap||"butt",D.lineJoin=Y.strokeJoin||"miter",D.miterLimit=
Y.strokeMiterLimit||10,D.setLineDash&&(D.setLineDash(Y.strokeDash||Dh),D.lineDashOffset=Y.strokeDashOffset||0),!0):!1}function Sa(D,Y){return D.zindex-Y.zindex||D.index-Y.index}function kb(D){if(!D.zdirty)return D.zitems;var Y=D.items,wa=[],Na;var Ib=0;for(Na=Y.length;Ib<Na;++Ib){var Ab=Y[Ib];Ab.index=Ib;Ab.zindex&&wa.push(Ab)}D.zdirty=!1;return D.zitems=wa.sort(Sa)}function Rb(D,Y){var wa=D.items,Na;if(wa&&wa.length){var Ib=kb(D);if(Ib&&Ib.length){D=0;for(Na=wa.length;D<Na;++D)wa[D].zindex||Y(wa[D]);
wa=Ib}D=0;for(Na=wa.length;D<Na;++D)Y(wa[D])}}function Fb(D,Y){var wa=D.items,Na,Ib;if(!wa||!wa.length)return null;const Ab=kb(D);Ab&&Ab.length&&(wa=Ab);for(Ib=wa.length;0<=--Ib;)if(Na=Y(wa[Ib]))return Na;if(wa===Ab)for(wa=D.items,Ib=wa.length;0<=--Ib;)if(!wa[Ib].zindex&&(Na=Y(wa[Ib])))return Na;return null}function Jb(D){return function(Y,wa,Na){Rb(wa,Ib=>{Na&&!Na.intersects(Ib.bounds)||Gc(D,Y,Ib,Ib)})}}function Cc(D){return function(Y,wa,Na){!wa.items.length||Na&&!Na.intersects(wa.bounds)||Gc(D,
Y,wa.items[0],wa.items)}}function Gc(D,Y,wa,Na){var Ib=null==wa.opacity?1:wa.opacity;0===Ib||D(Y,Na)||(gb(Y,wa),wa.fill&&va(Y,wa,Ib)&&Y.fill(),wa.stroke&&Ca(Y,wa,Ib)&&Y.stroke())}function Sc(D){D=D||h.truthy;return function(Y,wa,Na,Ib,Ab,dc){Na*=Y.pixelRatio;Ib*=Y.pixelRatio;return Fb(wa,r=>{const I=r.bounds;if((!I||I.contains(Ab,dc))&&I&&D(Y,r,Na,Ib,Ab,dc))return r})}}function vd(D,Y){return function(wa,Na,Ib,Ab){var dc=Array.isArray(Na)?Na[0]:Na,r=null==Y?dc.fill:Y,I=dc.stroke&&wa.isPointInStroke;
if(I){var ea=dc.strokeWidth;dc=dc.strokeCap;wa.lineWidth=null!=ea?ea:1;wa.lineCap=null!=dc?dc:"butt"}return D(wa,Na)?!1:r&&wa.isPointInPath(Ib,Ab)||I&&wa.isPointInStroke(Ib,Ab)}}function od(D,Y){return"translate("+D+","+Y+")"}function gd(D,Y,wa){function Na(Ib,Ab){var dc=Ab.x||0,r=Ab.y||0,I=Ab.angle||0;Ib.translate(dc,r);I&&Ib.rotate(I*=re);Ib.beginPath();Y(Ib,Ab);I&&Ib.rotate(-I);Ib.translate(-dc,-r)}return{type:D,tag:"path",nested:!1,attr:function(Ib,Ab){var dc=od(Ab.x||0,Ab.y||0)+(Ab.angle?" rotate("+
(Ab.angle+")"):"");Ib("transform",dc);Ib("d",Y(null,Ab))},bound:function(Ib,Ab){Y(Hb(Ib,Ab.angle),Ab);return yb(Ib,Ab).translate(Ab.x||0,Ab.y||0)},draw:Jb(Na),pick:Sc(vd(Na)),isect:wa||Bc(Na)}}function Cd(D,Y,wa){function Na(Ab,dc){Ab.beginPath();Y(Ab,dc)}const Ib=vd(Na);return{type:D,tag:"path",nested:!0,attr:function(Ab,dc){dc=dc.mark.items;dc.length&&Ab("d",Y(null,dc))},bound:function(Ab,dc){dc=dc.items;if(0===dc.length)return Ab;Y(Hb(Ab),dc);return yb(Ab,dc[0])},draw:Cc(Na),pick:function(Ab,dc,
r,I,ea,sa){var $a=dc.items;dc=dc.bounds;if(!$a||!$a.length||dc&&!dc.contains(ea,sa))return null;r*=Ab.pixelRatio;I*=Ab.pixelRatio;return Ib(Ab,$a,r,I)?$a[0]:null},isect:jd,tip:wa}}function Dd(D,Y){D.beginPath();Qb(Y)?xc(D,Y,0,0):D.rect(0,0,Y.width||0,Y.height||0);D.clip()}function rd(D){const Y=R(D.strokeWidth,1);return null!=D.strokeOffset?D.strokeOffset:D.stroke&&.5<Y&&1.5>Y?.5-Math.abs(Y-1):0}function we(D,Y,wa,Na){const Ib=rd(Y);D.beginPath();xc(D,Y,(wa||0)+Ib,(Na||0)+Ib)}function Bd(D,Y){var wa=
D.image;if(!wa||D.url&&D.url!==wa.url)wa={complete:!1,width:0,height:0},Y.loadImage(D.url).then(Na=>{D.image=Na;D.image.url=D.url});return wa}function x(D,Y){return null!=D.width?D.width:Y&&Y.width?!1!==D.aspect&&D.height?D.height*Y.width/Y.height:Y.width:0}function K(D,Y){return null!=D.height?D.height:Y&&Y.height?!1!==D.aspect&&D.width?D.width*Y.height/Y.width:Y.height:0}function ua(D,Y){return"center"===D?Y/2:"right"===D?Y:0}function Ka(D,Y){return"middle"===D?Y/2:"bottom"===D?Y:0}function lb(D,
Y){var wa=Y.path;if(null==wa)return!0;var Na=Y.x||0,Ib=Y.y||0,Ab=Y.scaleX||1,dc=Y.scaleY||1,r=(Y.angle||0)*re,I=Y.pathCache;I&&I.path===wa||((Y.pathCache=I=O(wa)).path=wa);r&&D.rotate&&D.translate?(D.translate(Na,Ib),D.rotate(r),za(D,I,0,0,Ab,dc),D.rotate(-r),D.translate(-Na,-Ib)):za(D,I,Na,Ib,Ab,dc)}function Bb(D,Y){D.beginPath();xc(D,Y)}function bc(D,Y,wa){if(Y.stroke&&Ca(D,Y,wa)){wa=Y.x||0;var Na=Y.y||0;var Ib=null!=Y.x2?Y.x2:wa;Y=null!=Y.y2?Y.y2:Na;D.beginPath();D.moveTo(wa,Na);D.lineTo(Ib,Y);
return!0}return!1}function Sb(D){og.width=D&&ig?Kc:nc}function nc(D,Y){Y=xd(D,Y);D=Xc(D);return~~(.8*Y.length*D)}function Kc(D,Y){return 0>=Xc(D)||!(Y=xd(D,Y))?0:Ac(Y,me(D))}function Ac(D,Y){const wa=`(${Y}) ${D}`;let Na=Rh.get(wa);void 0===Na&&(ig.font=Y,Na=ig.measureText(D).width,Rh.set(wa,Na));return Na}function Xc(D){return null!=D.fontSize?+D.fontSize||0:11}function kd(D){return null!=D.lineHeight?D.lineHeight:Xc(D)+2}function pd(D){D=D.lineBreak&&D.text&&!h.isArray(D.text)?D.text.split(D.lineBreak):
D.text;return h.isArray(D)?1<D.length?D:D[0]:D}function xd(D,Y){Y=null==Y?"":(Y+"").trim();if(0<D.limit&&Y.length){var wa=+D.limit,Na=nd(D);if(!(Na(Y)<wa)){var Ib=D.ellipsis||"…",Ab="rtl"===D.dir;D=0;var dc=Y.length;wa-=Na(Ib);if(Ab){for(;D<dc;)Ab=D+dc>>>1,Na(Y.slice(Ab))>wa?D=Ab+1:dc=Ab;Y=Ib+Y.slice(D)}else{for(;D<dc;)Ab=1+(D+dc>>>1),Na(Y.slice(0,Ab))<wa?D=Ab:dc=Ab-1;Y=Y.slice(0,D)+Ib}}}return Y}function nd(D){if(og.width===Kc){const Y=me(D);return wa=>Ac(wa,Y)}if(og.width===nc){const Y=Xc(D);return wa=>
~~(.8*wa.length*Y)}return Y=>og.width(D,Y)}function Jd(D,Y){D=D.font;return(Y&&D?String(D).replace(/"/g,"'"):D)||"sans-serif"}function me(D,Y){return(D.fontStyle?D.fontStyle+" ":"")+(D.fontVariant?D.fontVariant+" ":"")+(D.fontWeight?D.fontWeight+" ":"")+Xc(D)+"px "+Jd(D,Y)}function Me(D){var Y=D.baseline,wa=Xc(D);return Math.round("top"===Y?.79*wa:"middle"===Y?.3*wa:"bottom"===Y?-.21*wa:"line-top"===Y?.29*wa+.5*kd(D):"line-bottom"===Y?.29*wa-.5*kd(D):0)}function He(D){var Y=D.x||0,wa=D.y||0,Na=D.radius||
0;Na&&(D=(D.theta||0)-Ne,Y+=Na*Math.cos(D),wa+=Na*Math.sin(D));jg.x1=Y;jg.y1=wa;return jg}function Ie(D,Y,wa){var Na=og.height(Y),Ib=Y.align,Ab=He(Y),dc=Ab.x1;Ab=Ab.y1;var r=Y.dx||0,I=(Y.dy||0)+Me(Y)-Math.round(.8*Na),ea=pd(Y);h.isArray(ea)?(Na+=kd(Y)*(ea.length-1),ea=ea.reduce((sa,$a)=>Math.max(sa,og.width(Y,$a)),0)):ea=og.width(Y,ea);"center"===Ib?r-=ea/2:"right"===Ib&&(r-=ea);D.set(r+=dc,I+=Ab,r+ea,I+Na);if(Y.angle&&!wa)D.rotate(Y.angle*re,dc,Ab);else if(2===wa)return D.rotatedPoints(Y.angle*re,
dc,Ab);return D}function tf(D,Y,wa){var Na=Fg[D.mark.marktype];Y=Y||Na.bound;Na.nested&&(D=D.mark);return Y(D.bounds||(D.bounds=new qa),D,wa)}function bf(D,Y,wa){var Na=Fg[D.marktype],Ib=Na.bound,Ab=D.items,dc=Ab&&Ab.length;if(Na.nested)return dc?D=Ab[0]:(ti.mark=D,D=ti),wa=tf(D,Ib,wa),Y=Y&&Y.union(wa)||wa;Y=Y||D.bounds&&D.bounds.clear()||new qa;if(dc)for(Na=0,dc=Ab.length;Na<dc;++Na)Y.union(tf(Ab[Na],Ib,wa));return D.bounds=Y}function F(D,Y){return JSON.stringify(D,di,Y)}function aa(D){D="string"===
typeof D?JSON.parse(D):D;return Fa(D)}function Fa(D){var Y=D.marktype,wa=D.items,Na;if(wa){var Ib=0;for(Na=wa.length;Ib<Na;++Ib){var Ab=Y?"mark":"group";wa[Ib][Ab]=D;wa[Ib].zindex&&(wa[Ib][Ab].zdirty=!0);"group"===(Y||Ab)&&Fa(wa[Ib])}}Y&&bf(D);return D}function fb(D,Y){Y={bounds:new qa,clip:!!D.clip,group:Y,interactive:!1===D.interactive?!1:!0,items:[],marktype:D.marktype,name:D.name||void 0,role:D.role||void 0,zindex:D.zindex||0};null!=D.aria&&(Y.aria=D.aria);D.description&&(Y.description=D.description);
return Y}function Gb(D,Y,wa){!D&&"undefined"!==typeof document&&document.createElement&&(D=document);return D?wa?D.createElementNS(wa,Y):D.createElement(Y):null}function pc(D,Y){Y=Y.toLowerCase();D=D.childNodes;for(var wa=0,Na=D.length;wa<Na;++wa)if(D[wa].tagName.toLowerCase()===Y)return D[wa]}function Vb(D,Y,wa,Na){Y=D.childNodes[Y];if(!Y||Y.tagName.toLowerCase()!==wa.toLowerCase()){var Ib=Y||null;Y=Gb(D.ownerDocument,wa,Na);D.insertBefore(Y,Ib)}return Y}function Ec(D,Y){for(var wa=D.childNodes,
Na=wa.length;Na>Y;)D.removeChild(wa[--Na]);return D}function ld(D){return"mark-"+D.marktype+(D.role?" role-"+D.role:"")+(D.name?" "+D.name:"")}function ad(D,Y){const wa=Y.getBoundingClientRect();return[D.clientX-wa.left-(Y.clientLeft||0),D.clientY-wa.top-(Y.clientTop||0)]}function Oc(D,Y,wa,Na){D.element().setAttribute("title",Na||"")}function Nd(D,Y){("touchstart"===Y||"touchmove"===Y||"touchend"===Y?["touchstart","touchmove","touchend"]:[Y]).forEach(wa=>ce(D,wa))}function ce(D,Y){const wa=D.canvas();
wa&&!D._events[Y]&&(D._events[Y]=1,wa.addEventListener(Y,D[Y]?Na=>D[Y](Na):Na=>D.fire(Y,Na)))}function Kd(D,Y,wa){Y.forEach(Na=>D.fire(Na,wa))}function Md(D,Y,wa){return function(Na){const Ib=this._active,Ab=this.pickEvent(Na);Ab!==Ib&&(Ib&&Ib.exit||Kd(this,wa,Na),this._active=Ab,Kd(this,Y,Na));Kd(this,D,Na)}}function Wd(D){return function(Y){Kd(this,D,Y);this._active=null}}function ya(D,Y){var wa=!1===Y.aria;D("aria-hidden",wa||void 0);if(wa||null==Y.description)for(const Na in fh)D(fh[Na],void 0);
else wa=Y.mark.marktype,D("aria-label",Y.description),D("role",Y.ariaRole||("group"===wa?"graphics-object":"graphics-symbol")),D("aria-roledescription",Y.ariaRoleDescription||`${wa} mark`)}function Oa(D){return!1===D.aria?{["aria-hidden"]:!0}:cj[D.role]?null:fi[D.role]?id(D,fi[D.role]):cc(D)}function cc(D){const Y=D.marktype,wa="group"===Y||"text"===Y||D.items.some(Na=>null!=Na.description&&!1!==Na.aria);return eg(wa?"graphics-object":"graphics-symbol",`${Y} mark container`,D.description)}function id(D,
Y){try{const wa=D.items[0],Na=Y.caption||(()=>"");return eg(Y.role||"graphics-symbol",Y.desc,wa.description||Na(wa))}catch(wa){return null}}function vc(D){try{return h.array(h.peek(D.items).items[0].text).join(" ")}catch(Y){return null}}function Hc(D){D=D.map(Y=>Y+("fill"===Y||"stroke"===Y?" color":""));return 2>D.length?D[0]:D.slice(0,-1).join(", ")+" and "+h.peek(D)}function Jc(){let D="",Y="",wa="";const Na=[],Ib=(dc,r)=>{null!=r&&(Y+=` ${dc}="${vi(r).replace(/"/g,"\x26quot;").replace(/\t/g,"\x26#x9;").replace(/\n/g,
"\x26#xA;").replace(/\r/g,"\x26#xD;")}"`);return Ab},Ab={open(dc,...r){Y&&(D+=`${Y}>${wa}`,Y=wa="");Na.push(dc);Y="\x3c"+dc;for(const I of r)for(const ea in I)Ib(ea,I[ea]);return Ab},close(){const dc=Na.pop();D=Y?D+(Y+(wa?`>${wa}</${dc}>`:"/\x3e")):D+`</${dc}>`;Y=wa="";return Ab},attr:Ib,text:dc=>(wa+=vi(dc),Ab),toString:()=>D};return Ab}function Yc(D,Y){D.open(Y.tagName);if(Y.hasAttributes()){const wa=Y.attributes,Na=wa.length;for(let Ib=0;Ib<Na;++Ib)D.attr(wa[Ib].name,wa[Ib].value)}if(Y.hasChildNodes()){Y=
Y.childNodes;for(const wa of Y)3===wa.nodeType?D.text(wa.nodeValue):Yc(D,wa)}return D.close()}function Tc(D,Y){for(;D&&D.dirty!==Y;D=D.mark.group)if(D.dirty=Y,D.mark&&D.mark.dirty!==Y)D.mark.dirty=Y;else break}function qd(D,Y,wa,Na){Y=Y.lastChild.previousSibling;let Ib,Ab=0;Rb(wa,dc=>{Ib=D.mark(Y,dc,Ib,Na);++Ab});Ec(Y,1+Ab)}function bd(D,Y,wa,Na,Ib){let Ab=D._svg;if(!Ab){var dc=Y.ownerDocument;Ab=Gb(dc,Na,Se);D._svg=Ab;D.mark&&(Ab.__data__=D,Ab.__values__={fill:"default"},"g"===Na&&(Na=Gb(dc,"path",
Se),Ab.appendChild(Na),Na.__data__=D,Na=Gb(dc,"g",Se),Ab.appendChild(Na),Na.__data__=D,dc=Gb(dc,"path",Se),Ab.appendChild(dc),dc.__data__=D,dc.__values__={fill:"default"}))}(Ab.ownerSVGElement!==Ib||Ab.parentNode&&1<Ab.parentNode.childNodes.length&&Ab.previousSibling!=wa)&&Y.insertBefore(Ab,wa?wa.nextSibling:Y.firstChild);return Ab}function fe(D,Y,wa){if(Y!==xf[D]){if(wa){var Na=Lg;null!=Y?Na.setAttributeNS(wa,D,Y):Na.removeAttributeNS(wa,D)}else ne(Lg,D,Y);xf[D]=Y}}function Qe(D,Y,wa){wa!==xf[Y]&&
(null==wa?D.style.removeProperty(Y):D.style.setProperty(Y,wa+""),xf[Y]=wa)}function Ke(D,Y){for(const wa in Y)ne(D,wa,Y[wa])}function ne(D,Y,wa){null!=wa?D.setAttribute(Y,wa):D.removeAttribute(Y)}function Ye(){let D;return"undefined"===typeof window?"":(D=window.location).hash?D.href.slice(0,-D.hash.length):D.href}function kf(D,Y,wa,Na,Ib){let Ab;if(null==Y)return D;"bgrect"===Na&&!1===wa.interactive&&(D["pointer-events"]="none");if("bgfore"===Na&&(!1===wa.interactive&&(D["pointer-events"]="none"),
D.display="none",null!==Y.fill))return D;"image"===Na&&!1===Y.smooth&&(Ab=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]);"text"===Na&&(D["font-family"]=Jd(Y),D["font-size"]=Xc(Y)+"px",D["font-style"]=Y.fontStyle,D["font-variant"]=Y.fontVariant,D["font-weight"]=Y.fontWeight);for(const dc in gh)wa=Y[dc],Na=gh[dc],("transparent"!==wa||"fill"!==Na&&"stroke"!==Na)&&null!=wa&&(wa&&wa.gradient&&(wa=Yb(wa,Ib.gradient,"")),D[Na]=wa);for(const dc in nh)Ib=Y[dc],null!=Ib&&(Ab=Ab||[],Ab.push(`${nh[dc]}: ${Ib};`));
Ab&&(D.style=Ab.join(" "));return D}function Le(D,Y,wa,Na){if(D.bounds&&Y.intersects(D.bounds)&&("group"===D.marktype||!1!==D.interactive&&(!wa||wa(D)))){const Ab=D.items;var Ib=D.marktype;D=Ab.length;let dc=0;if("group"===Ib)for(;dc<D;++dc)Xe(Ab[dc],Y,wa,Na);else for(wa=Fg[Ib].isect;dc<D;++dc)Ib=Ab[dc],Ze(Ib,Y,wa)&&Na.push(Ib)}return Na}function Xe(D,Y,wa,Na){wa&&wa(D.mark)&&Ze(D,Y,Fg.group.isect)&&Na.push(D);const Ib=D.items,Ab=Ib&&Ib.length;if(Ab){const dc=D.x||0;D=D.y||0;Y.translate(-dc,-D);for(let r=
0;r<Ab;++r)Le(Ib[r],Y,wa,Na);Y.translate(dc,D)}return Na}function Ze(D,Y,wa){const Na=D.bounds;return Y.encloses(Na)||Y.intersects(Na)&&wa(D,Y)}function Ae(D,Y,wa){return D===Y?!0:"path"===wa?Ee(D,Y):D instanceof Date&&Y instanceof Date?+D===+Y:h.isNumber(D)&&h.isNumber(Y)?1E-9>=Math.abs(D-Y):D&&Y&&(h.isObject(D)||h.isObject(Y))?qe(D,Y):D==Y}function Ee(D,Y){return Ae(O(D),O(Y))}function qe(D,Y){var wa=Object.keys(D),Na=Object.keys(Y),Ib;if(wa.length!==Na.length)return!1;wa.sort();Na.sort();for(Ib=
wa.length-1;0<=Ib;Ib--)if(wa[Ib]!=Na[Ib])return!1;for(Ib=wa.length-1;0<=Ib;Ib--)if(Na=wa[Ib],!Ae(D[Na],Y[Na],Na))return!1;return typeof D===typeof Y}let oa=0;const l=Math.abs,q=Math.atan2,J=Math.cos,ja=Math.max,Da=Math.min,Qa=Math.sin,Ia=Math.sqrt,rb=Math.PI,nb=rb/2,tc=2*rb,wc=Math.PI,zc=2*wc,yc=zc-1E-6;class Rc{constructor(D){this._x0=this._y0=this._x1=this._y1=null;this._="";this._append=null==D?Cb:Ub(D)}moveTo(D,Y){this._append`M${this._x0=this._x1=+D},${this._y0=this._y1=+Y}`}closePath(){null!==
this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(D,Y){this._append`L${this._x1=+D},${this._y1=+Y}`}quadraticCurveTo(D,Y,wa,Na){this._append`Q${+D},${+Y},${this._x1=+wa},${this._y1=+Na}`}bezierCurveTo(D,Y,wa,Na,Ib,Ab){this._append`C${+D},${+Y},${+wa},${+Na},${this._x1=+Ib},${this._y1=+Ab}`}arcTo(D,Y,wa,Na,Ib){D=+D;Y=+Y;wa=+wa;Na=+Na;Ib=+Ib;if(0>Ib)throw Error(`negative radius: ${Ib}`);var Ab=this._x1,dc=this._y1;let r=wa-D,I=Na-Y,ea=Ab-D,sa=dc-Y;var $a=ea*ea+sa*sa;if(null===this._x1)this._append`M${this._x1=
D},${this._y1=Y}`;else if(1E-6<$a)if(1E-6<Math.abs(sa*r-I*ea)&&Ib){wa-=Ab;Na-=dc;let Ob=r*r+I*I;dc=Math.sqrt(Ob);Ab=Math.sqrt($a);$a=Ib*Math.tan((wc-Math.acos((Ob+$a-(wa*wa+Na*Na))/(2*dc*Ab)))/2);Ab=$a/Ab;$a/=dc;1E-6<Math.abs(Ab-1)&&this._append`L${D+Ab*ea},${Y+Ab*sa}`;this._append`A${Ib},${Ib},0,0,${+(sa*wa>ea*Na)},${this._x1=D+$a*r},${this._y1=Y+$a*I}`}else this._append`L${this._x1=D},${this._y1=Y}`}arc(D,Y,wa,Na,Ib,Ab){D=+D;Y=+Y;wa=+wa;Ab=!!Ab;if(0>wa)throw Error(`negative radius: ${wa}`);let dc=
wa*Math.cos(Na),r=wa*Math.sin(Na),I=D+dc,ea=Y+r,sa=1^Ab;Na=Ab?Na-Ib:Ib-Na;null===this._x1?this._append`M${I},${ea}`:(1E-6<Math.abs(this._x1-I)||1E-6<Math.abs(this._y1-ea))&&this._append`L${I},${ea}`;wa&&(0>Na&&(Na=Na%zc+zc),Na>yc?this._append`A${wa},${wa},0,1,${sa},${D-dc},${Y-r}A${wa},${wa},0,1,${sa},${this._x1=I},${this._y1=ea}`:1E-6<Na&&this._append`A${wa},${wa},0,${+(Na>=wc)},${sa},${this._x1=D+wa*Math.cos(Ib)},${this._y1=Y+wa*Math.sin(Ib)}`)}rect(D,Y,wa,Na){this._append`M${this._x0=this._x1=
+D},${this._y0=this._y1=+Y}h${wa=+wa}v${+Na}h${-wa}Z`}toString(){return this._}}jc.prototype=Rc.prototype;ra.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(D,Y){D=+D;Y=+Y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(D,Y):this._context.moveTo(D,Y);break;case 1:this._point=
2;default:this._context.lineTo(D,Y)}}};var fd={draw(D,Y){Y=Ia(Y/rb);D.moveTo(Y,0);D.arc(0,0,Y,0,tc)}};tb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:bb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(D,Y){D=
+D;Y=+Y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(D,Y):this._context.moveTo(D,Y);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:bb(this,D,Y)}this._x0=this._x1;this._x1=D;this._y0=this._y1;this._y1=Y}};Pb.prototype={areaStart:hb,areaEnd:hb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,
this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(D,Y){D=+D;Y=+Y;switch(this._point){case 0:this._point=1;this._x2=D;this._y2=Y;break;case 1:this._point=2;this._x3=D;this._y3=Y;break;case 2:this._point=3;this._x4=D;this._y4=
Y;this._context.moveTo((this._x0+4*this._x1+D)/6,(this._y0+4*this._y1+Y)/6);break;default:bb(this,D,Y)}this._x0=this._x1;this._x1=D;this._y0=this._y1;this._y1=Y}};eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(D,Y){D=+D;Y=+Y;switch(this._point){case 0:this._point=
1;break;case 1:this._point=2;break;case 2:this._point=3;var wa=(this._x0+4*this._x1+D)/6,Na=(this._y0+4*this._y1+Y)/6;this._line?this._context.lineTo(wa,Na):this._context.moveTo(wa,Na);break;case 3:this._point=4;default:bb(this,D,Y)}this._x0=this._x1;this._x1=D;this._y0=this._y1;this._y1=Y}};T.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var D=this._x,Y=this._y,wa=D.length-1;if(0<wa)for(var Na=D[0],Ib=Y[0],Ab=D[wa]-Na,dc=Y[wa]-Ib,r=-1,I;++r<=wa;)I=
r/wa,this._basis.point(this._beta*D[r]+(1-this._beta)*(Na+I*Ab),this._beta*Y[r]+(1-this._beta)*(Ib+I*dc));this._x=this._y=null;this._basis.lineEnd()},point:function(D,Y){this._x.push(+D);this._y.push(+Y)}};var Td=function wa(Y){function Na(Ib){return 1===Y?new tb(Ib):new T(Ib,Y)}Na.beta=function(Ib){return wa(+Ib)};return Na}(.85);ca.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=
0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Z(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Y,wa){Y=+Y;wa=+wa;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Y,wa):this._context.moveTo(Y,wa);break;case 1:this._point=2;this._x1=Y;this._y1=wa;break;case 2:this._point=3;default:Z(this,Y,wa)}this._x0=this._x1;this._x1=this._x2;this._x2=
Y;this._y0=this._y1;this._y1=this._y2;this._y2=wa}};var Ad=function Na(wa){function Ib(Ab){return new ca(Ab,wa)}Ib.tension=function(Ab){return Na(+Ab)};return Ib}(0);ha.prototype={areaStart:hb,areaEnd:hb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,
this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(wa,Na){wa=+wa;Na=+Na;switch(this._point){case 0:this._point=1;this._x3=wa;this._y3=Na;break;case 1:this._point=2;this._context.moveTo(this._x4=wa,this._y4=Na);break;case 2:this._point=3;this._x5=wa;this._y5=Na;break;default:Z(this,wa,Na)}this._x0=this._x1;this._x1=this._x2;this._x2=wa;this._y0=this._y1;this._y1=this._y2;this._y2=Na}};var Ld=function Ib(Na){function Ab(dc){return new ha(dc,
Na)}Ab.tension=function(dc){return Ib(+dc)};return Ab}(0);La.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Na,Ib){Na=+Na;Ib=+Ib;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,
this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Z(this,Na,Ib)}this._x0=this._x1;this._x1=this._x2;this._x2=Na;this._y0=this._y1;this._y1=this._y2;this._y2=Ib}};var Ud=function Ab(Ib){function dc(r){return new La(r,Ib)}dc.tension=function(r){return Ab(+r)};return dc}(0);pa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=
this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Ib,Ab){Ib=+Ib;Ab=+Ab;if(this._point){var dc=this._x2-Ib,r=this._y2-Ab;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(dc*dc+r*r,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Ib,
Ab):this._context.moveTo(Ib,Ab);break;case 1:this._point=2;break;case 2:this._point=3;default:na(this,Ib,Ab)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Ib;this._y0=this._y1;this._y1=this._y2;this._y2=Ab}};var qc=function dc(Ab){function r(I){return Ab?new pa(I,Ab):new ca(I,0)}r.alpha=function(I){return dc(+I)};return r}(.5);m.prototype={areaStart:hb,areaEnd:hb,lineStart:function(){this._x0=this._x1=
this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Ab,dc){Ab=
+Ab;dc=+dc;if(this._point){var r=this._x2-Ab,I=this._y2-dc;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+I*I,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=Ab;this._y3=dc;break;case 1:this._point=2;this._context.moveTo(this._x4=Ab,this._y4=dc);break;case 2:this._point=3;this._x5=Ab;this._y5=dc;break;default:na(this,Ab,dc)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Ab;this._y0=this._y1;
this._y1=this._y2;this._y2=dc}};var Fd=function r(dc){function I(ea){return dc?new m(ea,dc):new ha(ea,0)}I.alpha=function(ea){return r(+ea)};return I}(.5);E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=
1-this._line},point:function(dc,r){dc=+dc;r=+r;if(this._point){var I=this._x2-dc,ea=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(I*I+ea*ea,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:na(this,dc,r)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=
this._x1;this._x1=this._x2;this._x2=dc;this._y0=this._y1;this._y1=this._y2;this._y2=r}};var Be=function I(r){function ea(sa){return r?new E(sa,r):new La(sa,0)}ea.alpha=function(sa){return I(+sa)};return ea}(.5);L.prototype={areaStart:hb,areaEnd:hb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,I){r=+r;I=+I;this._point?this._context.lineTo(r,I):(this._point=1,this._context.moveTo(r,I))}};y.prototype={areaStart:function(){this._line=0},
areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:A(this,this._t0,Q(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(r,I){var ea=NaN;r=+r;I=+I;if(r!==this._x1||I!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(r,I):
this._context.moveTo(r,I);break;case 1:this._point=2;break;case 2:this._point=3;A(this,Q(this,ea=w(this,r,I)),ea);break;default:A(this,this._t0,ea=w(this,r,I))}this._x0=this._x1;this._x1=r;this._y0=this._y1;this._y1=I;this._t0=ea}}};(N.prototype=Object.create(y.prototype)).point=function(r,I){y.prototype.point.call(this,I,r)};z.prototype={moveTo:function(r,I){this._context.moveTo(I,r)},closePath:function(){this._context.closePath()},lineTo:function(r,I){this._context.lineTo(I,r)},bezierCurveTo:function(r,
I,ea,sa,$a,Ob){this._context.bezierCurveTo(I,r,sa,ea,Ob,$a)}};C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var r=this._x,I=this._y,ea=r.length;if(ea)if(this._line?this._context.lineTo(r[0],I[0]):this._context.moveTo(r[0],I[0]),2===ea)this._context.lineTo(r[1],I[1]);else for(var sa=H(r),$a=H(I),Ob=0,hc=1;hc<ea;++Ob,++hc)this._context.bezierCurveTo(sa[0][Ob],$a[0][Ob],sa[1][Ob],$a[1][Ob],r[hc],I[hc]);
(this._line||0!==this._line&&1===ea)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(r,I){this._x.push(+r);this._y.push(+I)}};V.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,
this._line=1-this._line)},point:function(r,I){r=+r;I=+I;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(r,I):this._context.moveTo(r,I);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,I),this._context.lineTo(r,I);else{var ea=this._x*(1-this._t)+r*this._t;this._context.lineTo(ea,this._y);this._context.lineTo(ea,I)}}this._x=r;this._y=I}};const te={basis:{curve:function(r){return new tb(r)}},"basis-closed":{curve:function(r){return new Pb(r)}},"basis-open":{curve:function(r){return new eb(r)}},
bundle:{curve:Td,tension:"beta",value:.85},cardinal:{curve:Ad,tension:"tension",value:0},"cardinal-open":{curve:Ud,tension:"tension",value:0},"cardinal-closed":{curve:Ld,tension:"tension",value:0},"catmull-rom":{curve:qc,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Fd,tension:"alpha",value:.5},"catmull-rom-open":{curve:Be,tension:"alpha",value:.5},linear:{curve:fa},"linear-closed":{curve:function(r){return new L(r)}},monotone:{horizontal:function(r){return new N(r)},vertical:function(r){return new y(r)}},
natural:{curve:function(r){return new C(r)}},step:{curve:function(r){return new V(r,.5)}},"step-after":{curve:function(r){return new V(r,1)}},"step-before":{curve:function(r){return new V(r,0)}}},ke={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Qd=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Od=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,xe=/^((\s+,?\s*)|(,\s*))/,Fe=/^[01]/,re=Math.PI/180,Ne=Math.PI/2,hd=2*Math.PI,ve=Math.sqrt(3)/2;var ff={},lf={},Dg=[].join;const vf=["l",0,0,0,0,0,0,0],Of=
{circle:{draw:function(r,I){I=Math.sqrt(I)/2;r.moveTo(I,0);r.arc(0,0,I,0,hd)}},cross:{draw:function(r,I){I=Math.sqrt(I)/2;var ea=I/2.5;r.moveTo(-I,-ea);r.lineTo(-I,ea);r.lineTo(-ea,ea);r.lineTo(-ea,I);r.lineTo(ea,I);r.lineTo(ea,ea);r.lineTo(I,ea);r.lineTo(I,-ea);r.lineTo(ea,-ea);r.lineTo(ea,-I);r.lineTo(-ea,-I);r.lineTo(-ea,-ea);r.closePath()}},diamond:{draw:function(r,I){I=Math.sqrt(I)/2;r.moveTo(-I,0);r.lineTo(0,-I);r.lineTo(I,0);r.lineTo(0,I);r.closePath()}},square:{draw:function(r,I){I=Math.sqrt(I);
var ea=-I/2;r.rect(ea,ea,I,I)}},arrow:{draw:function(r,I){I=Math.sqrt(I)/2;var ea=I/7,sa=I/2.5,$a=I/8;r.moveTo(-ea,I);r.lineTo(ea,I);r.lineTo(ea,-$a);r.lineTo(sa,-$a);r.lineTo(0,-I);r.lineTo(-sa,-$a);r.lineTo(-ea,-$a);r.closePath()}},wedge:{draw:function(r,I){var ea=Math.sqrt(I)/2;I=ve*ea;var sa=I-.5773502691896257*ea;ea/=4;r.moveTo(0,-I-sa);r.lineTo(-ea,I-sa);r.lineTo(ea,I-sa);r.closePath()}},triangle:{draw:function(r,I){I=Math.sqrt(I)/2;var ea=ve*I,sa=ea-.5773502691896257*I;r.moveTo(0,-ea-sa);r.lineTo(-I,
ea-sa);r.lineTo(I,ea-sa);r.closePath()}},"triangle-up":{draw:function(r,I){I=Math.sqrt(I)/2;var ea=ve*I;r.moveTo(0,-ea);r.lineTo(-I,ea);r.lineTo(I,ea);r.closePath()}},"triangle-down":{draw:function(r,I){I=Math.sqrt(I)/2;var ea=ve*I;r.moveTo(0,ea);r.lineTo(-I,-ea);r.lineTo(I,-ea);r.closePath()}},"triangle-right":{draw:function(r,I){I=Math.sqrt(I)/2;var ea=ve*I;r.moveTo(ea,0);r.lineTo(-ea,-I);r.lineTo(-ea,I);r.closePath()}},"triangle-left":{draw:function(r,I){I=Math.sqrt(I)/2;var ea=ve*I;r.moveTo(-ea,
0);r.lineTo(ea,-I);r.lineTo(ea,I);r.closePath()}},stroke:{draw:function(r,I){I=Math.sqrt(I)/2;r.moveTo(-I,0);r.lineTo(I,0)}}};var bg={};const gf=r=>r.x||0,Re=r=>r.y||0,cg=r=>!1!==r.defined,Tg=function(){function r(){var Wc,Hd=+I.apply(this,arguments),he=+ea.apply(this,arguments),se=Ob.apply(this,arguments)-nb,Je=hc.apply(this,arguments)-nb,rf=l(Je-se),df=Je>se;fc||(fc=Wc=$c());if(he<Hd){var bh=he;he=Hd;Hd=bh}if(1E-12<he)if(rf>tc-1E-12)fc.moveTo(he*J(se),he*Qa(se)),fc.arc(0,0,he,se,Je,!df),1E-12<Hd&&
(fc.moveTo(Hd*J(Je),Hd*Qa(Je)),fc.arc(0,0,Hd,Je,se,df));else{var pe=se,Pe=Je;bh=se;var ph=Je,rh=rf,wf=rf,zf=Mc.apply(this,arguments)/2,yg=1E-12<zf&&($a?+$a.apply(this,arguments):Ia(Hd*Hd+he*he)),mh=Da(l(he-Hd)/2,+sa.apply(this,arguments)),Df=mh,qf=mh;if(1E-12<yg){var Hg=mc(yg/Hd*Qa(zf));zf=mc(yg/he*Qa(zf));1E-12<(rh-=2*Hg)?(Hg*=df?1:-1,bh+=Hg,ph-=Hg):(rh=0,bh=ph=(se+Je)/2);1E-12<(wf-=2*zf)?(zf*=df?1:-1,pe+=zf,Pe-=zf):(wf=0,pe=Pe=(se+Je)/2)}se=he*J(pe);Je=he*Qa(pe);Hg=Hd*J(ph);zf=Hd*Qa(ph);if(1E-12<
mh){var hg=he*J(Pe),Eh=he*Qa(Pe),gi=Hd*J(bh),ag=Hd*Qa(bh);if(rf<rb){Df=gi-se;qf=ag-Je;rf=Hg-hg;yg=zf-Eh;var Af=yg*Df-rf*qf;1E-12>Af*Af?Df=void 0:(Af=(rf*(Je-Eh)-yg*(se-hg))/Af,Df=[se+Af*Df,Je+Af*qf]);Df?(qf=se-Df[0],rf=Je-Df[1],yg=hg-Df[0],Af=Eh-Df[1],qf=(qf*yg+rf*Af)/(Ia(qf*qf+rf*rf)*Ia(yg*yg+Af*Af)),qf=1/Qa((1<qf?0:-1>qf?rb:Math.acos(qf))/2),rf=Ia(Df[0]*Df[0]+Df[1]*Df[1]),Df=Da(mh,(Hd-rf)/(qf-1)),qf=Da(mh,(he-rf)/(qf+1))):Df=qf=0}}1E-12<wf?1E-12<qf?(pe=ib(gi,ag,se,Je,he,qf,df),Pe=ib(hg,Eh,Hg,zf,
he,qf,df),fc.moveTo(pe.cx+pe.x01,pe.cy+pe.y01),qf<mh?fc.arc(pe.cx,pe.cy,qf,q(pe.y01,pe.x01),q(Pe.y01,Pe.x01),!df):(fc.arc(pe.cx,pe.cy,qf,q(pe.y01,pe.x01),q(pe.y11,pe.x11),!df),fc.arc(0,0,he,q(pe.cy+pe.y11,pe.cx+pe.x11),q(Pe.cy+Pe.y11,Pe.cx+Pe.x11),!df),fc.arc(Pe.cx,Pe.cy,qf,q(Pe.y11,Pe.x11),q(Pe.y01,Pe.x01),!df))):(fc.moveTo(se,Je),fc.arc(0,0,he,pe,Pe,!df)):fc.moveTo(se,Je);1E-12<Hd&&1E-12<rh?1E-12<Df?(pe=ib(Hg,zf,hg,Eh,Hd,-Df,df),Pe=ib(se,Je,gi,ag,Hd,-Df,df),fc.lineTo(pe.cx+pe.x01,pe.cy+pe.y01),
Df<mh?fc.arc(pe.cx,pe.cy,Df,q(pe.y01,pe.x01),q(Pe.y01,Pe.x01),!df):(fc.arc(pe.cx,pe.cy,Df,q(pe.y01,pe.x01),q(pe.y11,pe.x11),!df),fc.arc(0,0,Hd,q(pe.cy+pe.y11,pe.cx+pe.x11),q(Pe.cy+Pe.y11,Pe.cx+Pe.x11),df),fc.arc(Pe.cx,Pe.cy,Df,q(Pe.y11,Pe.x11),q(Pe.y01,Pe.x01),!df))):fc.arc(0,0,Hd,ph,bh,df):fc.lineTo(Hg,zf)}else fc.moveTo(0,0);fc.closePath();if(Wc)return fc=null,Wc+""||null}var I=Za,ea=wb,sa=Xb(0),$a=null,Ob=ub,hc=sb,Mc=xb,fc=null,$c=Ba(r);r.centroid=function(){var Wc=(+I.apply(this,arguments)+ +ea.apply(this,
arguments))/2,Hd=(+Ob.apply(this,arguments)+ +hc.apply(this,arguments))/2-rb/2;return[J(Hd)*Wc,Qa(Hd)*Wc]};r.innerRadius=function(Wc){return arguments.length?(I="function"===typeof Wc?Wc:Xb(+Wc),r):I};r.outerRadius=function(Wc){return arguments.length?(ea="function"===typeof Wc?Wc:Xb(+Wc),r):ea};r.cornerRadius=function(Wc){return arguments.length?(sa="function"===typeof Wc?Wc:Xb(+Wc),r):sa};r.padRadius=function(Wc){return arguments.length?($a=null==Wc?null:"function"===typeof Wc?Wc:Xb(+Wc),r):$a};
r.startAngle=function(Wc){return arguments.length?(Ob="function"===typeof Wc?Wc:Xb(+Wc),r):Ob};r.endAngle=function(Wc){return arguments.length?(hc="function"===typeof Wc?Wc:Xb(+Wc),r):hc};r.padAngle=function(Wc){return arguments.length?(Mc="function"===typeof Wc?Wc:Xb(+Wc),r):Mc};r.context=function(Wc){return arguments.length?(fc=null==Wc?null:Wc,r):fc};return r}().startAngle(r=>r.startAngle||0).endAngle(r=>r.endAngle||0).padAngle(r=>r.padAngle||0).innerRadius(r=>r.innerRadius||0).outerRadius(r=>
r.outerRadius||0).cornerRadius(r=>r.cornerRadius||0),Bf=Ga().x(gf).y1(Re).y0(r=>(r.y||0)+(r.height||0)).defined(cg),dg=Ga().y(Re).x1(gf).x0(r=>(r.x||0)+(r.width||0)).defined(cg),Hf=Va().x(gf).y(Re).defined(cg),Ug=oc().x(gf).y(Re).width(r=>r.width||0).height(r=>r.height||0).cornerRadius(r=>Mb(r.cornerRadiusTopLeft,r.cornerRadius)||0,r=>Mb(r.cornerRadiusTopRight,r.cornerRadius)||0,r=>Mb(r.cornerRadiusBottomRight,r.cornerRadius)||0,r=>Mb(r.cornerRadiusBottomLeft,r.cornerRadius)||0),eh=function(r,I){function ea(){let Ob;
sa||(sa=Ob=$a());r.apply(this,arguments).draw(sa,+I.apply(this,arguments));if(Ob)return sa=null,Ob+""||null}let sa=null,$a=Ba(ea);r="function"===typeof r?r:Xb(r||fd);I="function"===typeof I?I:Xb(void 0===I?64:+I);ea.type=function(Ob){return arguments.length?(r="function"===typeof Ob?Ob:Xb(Ob),ea):r};ea.size=function(Ob){return arguments.length?(I="function"===typeof Ob?Ob:Xb(+Ob),ea):I};ea.context=function(Ob){return arguments.length?(sa=null==Ob?null:Ob,ea):sa};return ea}().type(r=>Pa(r.shape||"circle")).size(r=>
Mb(r.size,64)),Sg=$b().x(gf).y(Re).defined(cg).size(r=>r.size||1);var Vg=1;qa.prototype={clone(){return new qa(this)},clear(){this.x1=+Number.MAX_VALUE;this.y1=+Number.MAX_VALUE;this.x2=-Number.MAX_VALUE;this.y2=-Number.MAX_VALUE;return this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(r){return this.x1===r.x1&&this.y1===r.y1&&this.x2===r.x2&&this.y2===r.y2},set(r,I,ea,sa){ea<r?(this.x2=r,this.x1=ea):(this.x1=
r,this.x2=ea);sa<I?(this.y2=I,this.y1=sa):(this.y1=I,this.y2=sa);return this},add(r,I){r<this.x1&&(this.x1=r);I<this.y1&&(this.y1=I);r>this.x2&&(this.x2=r);I>this.y2&&(this.y2=I);return this},expand(r){this.x1-=r;this.y1-=r;this.x2+=r;this.y2+=r;return this},round(){this.x1=Math.floor(this.x1);this.y1=Math.floor(this.y1);this.x2=Math.ceil(this.x2);this.y2=Math.ceil(this.y2);return this},scale(r){this.x1*=r;this.y1*=r;this.x2*=r;this.y2*=r;return this},translate(r,I){this.x1+=r;this.x2+=r;this.y1+=
I;this.y2+=I;return this},rotate(r,I,ea){r=this.rotatedPoints(r,I,ea);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(r,I,ea){var {x1:sa,y1:$a,x2:Ob,y2:hc}=this,Mc=Math.cos(r);r=Math.sin(r);var fc=I-I*Mc+ea*r;I=ea-I*r-ea*Mc;return[Mc*sa-r*$a+fc,r*sa+Mc*$a+I,Mc*sa-r*hc+fc,r*sa+Mc*hc+I,Mc*Ob-r*$a+fc,r*Ob+Mc*$a+I,Mc*Ob-r*hc+fc,r*Ob+Mc*hc+I]},union(r){r.x1<this.x1&&(this.x1=r.x1);r.y1<this.y1&&(this.y1=r.y1);r.x2>this.x2&&(this.x2=r.x2);r.y2>this.y2&&(this.y2=
r.y2);return this},intersect(r){r.x1>this.x1&&(this.x1=r.x1);r.y1>this.y1&&(this.y1=r.y1);r.x2<this.x2&&(this.x2=r.x2);r.y2<this.y2&&(this.y2=r.y2);return this},encloses(r){return r&&this.x1<=r.x1&&this.x2>=r.x2&&this.y1<=r.y1&&this.y2>=r.y2},alignsWith(r){return r&&(this.x1==r.x1||this.x2==r.x2||this.y1==r.y1||this.y2==r.y2)},intersects(r){return r&&!(this.x2<r.x1||this.x1>r.x2||this.y2<r.y1||this.y1>r.y2)},contains(r,I){return!(r<this.x1||r>this.x2||I<this.y1||I>this.y2)},width(){return this.x2-
this.x1},height(){return this.y2-this.y1}};h.inherits(Ua,Db);class Wg{constructor(r){this._pending=0;this._loader=r||ab.loader()}pending(){return this._pending}sanitizeURL(r){const I=this;I._pending+=1;return I._loader.sanitize(r,{context:"href"}).then(ea=>{--I._pending;return ea}).catch(()=>{--I._pending;return null})}loadImage(r){const I=this,ea=ia.image();I._pending+=1;return I._loader.sanitize(r,{context:"image"}).then(sa=>{const $a=sa.href;if(!$a||!ea)throw{url:$a};const Ob=new ea;sa=h.hasOwnProperty(sa,
"crossOrigin")?sa.crossOrigin:"anonymous";null!=sa&&(Ob.crossOrigin=sa);Ob.onload=()=>{--I._pending};Ob.onerror=()=>{--I._pending};Ob.src=$a;return Ob}).catch(sa=>{--I._pending;return{complete:!1,width:0,height:0,src:sa&&sa.url||""}})}ready(){const r=this;return new Promise(I=>{function ea(sa){r.pending()?setTimeout(()=>{ea(!0)},10):I(sa)}ea(!1)})}}const kh=hd-1E-8;let If,U,Ja,mb,Dc,Lc,Gd,le;const Xd=(r,I)=>{r=U=r;I=Ja=I;return If.add(r,I)},Jf=r=>If.add(r,If.y1),mf=r=>If.add(If.x1,r),wg=(r,I)=>If.add(Dc*
r+Gd*I,Lc*r+le*I),Vf=(r,I)=>Xd(Dc*r+Gd*I,Lc*r+le*I),Xg={beginPath(){},closePath(){},moveTo:Vf,lineTo:Vf,rect(r,I,ea,sa){mb?(wg(r+ea,I),wg(r+ea,I+sa),wg(r,I+sa),Vf(r,I)):(If.add(r+ea,I+sa),Xd(r,I))},quadraticCurveTo(r,I,ea,sa){const $a=Lc*r+le*I,Ob=Dc*ea+Gd*sa;ea=Lc*ea+le*sa;Nb(U,Dc*r+Gd*I,Ob,Jf);Nb(Ja,$a,ea,mf);Xd(Ob,ea)},bezierCurveTo(r,I,ea,sa,$a,Ob){const hc=Lc*r+le*I,Mc=Lc*ea+le*sa,fc=Dc*$a+Gd*Ob;$a=Lc*$a+le*Ob;Zb(U,Dc*r+Gd*I,Dc*ea+Gd*sa,fc,Jf);Zb(Ja,hc,Mc,$a,mf);Xd(fc,$a)},arc(r,I,ea,sa,$a,Ob){sa+=
mb;$a+=mb;U=ea*Math.cos($a)+r;Ja=ea*Math.sin($a)+I;if(Math.abs($a-sa)>kh)If.add(r-ea,I-ea),If.add(r+ea,I+ea);else{const hc=fc=>If.add(ea*Math.cos(fc)+r,ea*Math.sin(fc)+I);let Mc;hc(sa);hc($a);if($a!==sa)if(sa%=hd,0>sa&&(sa+=hd),$a%=hd,0>$a&&($a+=hd),$a<sa&&(Ob=!Ob,Mc=sa,sa=$a,$a=Mc),Ob)for($a-=hd,Mc=sa-sa%Ne,sa=0;4>sa&&Mc>$a;++sa,Mc-=Ne)hc(Mc);else for(Mc=sa-sa%Ne+Ne,sa=0;4>sa&&Mc<$a;++sa,Mc+=Ne)hc(Mc)}}};var ig=(ig=ia.canvas(1,1))?ig.getContext("2d"):null;const Kg=new qa;var Dh=[],Zd=gd("arc",function(r,
I){return Tg.context(r)(I)}),ge=Cd("area",function(r,I){const ea=I[0];return("horizontal"===ea.orient?dg:Bf).curve(Aa(ea.interpolate||"linear",ea.orient,ea.tension)).context(r)(I)},function(r,I){I="horizontal"===r[0].orient?I[1]:I[0];for(var ea="horizontal"===r[0].orient?"y":"x",sa=r.length,$a=Infinity,Ob,hc;0<=--sa;)!1!==r[sa].defined&&(hc=Math.abs(r[sa][ea]-I),hc<$a&&($a=hc,Ob=r[sa]));return Ob});const of=vd(we),Ge=vd(we,!1),hf=vd(we,!0);var Ue={type:"group",tag:"g",nested:!1,attr:function(r,I){r("transform",
od(I.x||0,I.y||0))},bound:function(r,I){if(!I.clip&&I.items){const ea=I.items,sa=ea.length;for(let $a=0;$a<sa;++$a)r.union(ea[$a].bounds)}(I.clip||I.width||I.height)&&!I.noBound&&r.add(0,0).add(I.width||0,I.height||0);yb(r,I);return r.translate(I.x||0,I.y||0)},draw:function(r,I,ea,sa){Rb(I,$a=>{const Ob=$a.x||0,hc=$a.y||0,Mc=$a.strokeForeground,fc=null==$a.opacity?1:$a.opacity;($a.stroke||$a.fill)&&fc&&(we(r,$a,Ob,hc),gb(r,$a),$a.fill&&va(r,$a,fc)&&r.fill(),$a.stroke&&!Mc&&Ca(r,$a,fc)&&r.stroke());
r.save();r.translate(Ob,hc);$a.clip&&Dd(r,$a);ea&&ea.translate(-Ob,-hc);Rb($a,$c=>{("group"===$c.marktype||null==sa||sa.includes($c.marktype))&&this.draw(r,$c,ea,sa)});ea&&ea.translate(Ob,hc);r.restore();Mc&&$a.stroke&&fc&&(we(r,$a,Ob,hc),gb(r,$a),Ca(r,$a,fc)&&r.stroke())})},pick:function(r,I,ea,sa,$a,Ob){if(I.bounds&&!I.bounds.contains($a,Ob)||!I.items)return null;const hc=ea*r.pixelRatio,Mc=sa*r.pixelRatio;return Fb(I,fc=>{let $c,Wc;var Hd=fc.bounds;if(!Hd||Hd.contains($a,Ob)){$c=fc.x||0;Wc=fc.y||
0;Hd=$c+(fc.width||0);var he=Wc+(fc.height||0),se=fc.clip;if(!se||!($a<$c||$a>Hd||Ob<Wc||Ob>he)){r.save();r.translate($c,Wc);$c=$a-$c;Wc=Ob-Wc;if(se&&Qb(fc)&&!hf(r,fc,hc,Mc))return r.restore(),null;he=fc.strokeForeground;if((se=!1!==I.interactive)&&he&&fc.stroke&&Ge(r,fc,hc,Mc))return r.restore(),fc;Hd=Fb(fc,Je=>(!1!==Je.interactive||"group"===Je.marktype)&&Je.bounds&&Je.bounds.contains($c,Wc)?this.pick(Je,ea,sa,$c,Wc):null);!Hd&&se&&(fc.fill||!he&&fc.stroke)&&of(r,fc,hc,Mc)&&(Hd=fc);r.restore();
return Hd||null}}})},isect:Vc,content:function(r,I,ea){I=I.clip?ed(ea,I,I):null;r("clip-path",I)},background:function(r,I){r("class","background");r("aria-hidden",!0);const ea=rd(I);r("d",xc(null,I,ea,ea))},foreground:function(r,I){r("class","foreground");r("aria-hidden",!0);if(I.strokeForeground){const ea=rd(I);r("d",xc(null,I,ea,ea))}else r("d","")}},pf={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"},Wf={type:"image",tag:"image",nested:!1,attr:function(r,
I,ea){var sa=Bd(I,ea);ea=x(I,sa);const $a=K(I,sa),Ob=(I.x||0)-ua(I.align,ea),hc=(I.y||0)-Ka(I.baseline,$a);sa=!sa.src&&sa.toDataURL?sa.toDataURL():sa.src||"";r("href",sa,pf["xmlns:xlink"],"xlink:href");r("transform",od(Ob,hc));r("width",ea);r("height",$a);r("preserveAspectRatio",!1===I.aspect?"none":"xMidYMid")},bound:function(r,I){var ea=I.image;const sa=x(I,ea);ea=K(I,ea);const $a=(I.x||0)-ua(I.align,sa);I=(I.y||0)-Ka(I.baseline,ea);return r.set($a,I,$a+sa,I+ea)},draw:function(r,I,ea){Rb(I,sa=>
{if(!ea||ea.intersects(sa.bounds)){var $a=Bd(sa,this),Ob=x(sa,$a),hc=K(sa,$a);if(0!==Ob&&0!==hc){var Mc=(sa.x||0)-ua(sa.align,Ob),fc=(sa.y||0)-Ka(sa.baseline,hc),$c;if(!1!==sa.aspect){var Wc=$a.width/$a.height;var Hd=sa.width/sa.height;Wc===Wc&&Hd===Hd&&Wc!==Hd&&(Hd<Wc?(Wc=Ob/Wc,fc+=(hc-Wc)/2,hc=Wc):(Wc*=hc,Mc+=(Ob-Wc)/2,Ob=Wc))}if($a.complete||$a.toDataURL)gb(r,sa),r.globalAlpha=null!=($c=sa.opacity)?$c:1,r.imageSmoothingEnabled=!1!==sa.smooth,r.drawImage($a,Mc,fc,Ob,hc)}}})},pick:Sc(),isect:h.truthy,
get:Bd,xOffset:ua,yOffset:Ka},Pf=Cd("line",function(r,I){const ea=I[0];return Hf.curve(Aa(ea.interpolate||"linear",ea.orient,ea.tension)).context(r)(I)},function(r,I){for(var ea=Math.pow(r[0].strokeWidth||1,2),sa=r.length,$a,Ob;0<=--sa;)if(!1!==r[sa].defined&&($a=r[sa].x-I[0],Ob=r[sa].y-I[1],$a=$a*$a+Ob*Ob,$a<ea))return r[sa];return null}),$e={type:"path",tag:"path",nested:!1,attr:function(r,I){var ea=I.scaleY||1;1===(I.scaleX||1)&&1===ea||r("vector-effect","non-scaling-stroke");ea=od(I.x||0,I.y||
0)+(I.angle?" rotate("+(I.angle+")"):"")+(I.scaleX||I.scaleY?" scale("+((I.scaleX||1)+","+(I.scaleY||1)+")"):"");r("transform",ea);r("d",I.path)},bound:function(r,I){return lb(Hb(r,I.angle),I)?r.set(0,0,0,0):yb(r,I,!0)},draw:Jb(lb),pick:Sc(vd(lb)),isect:Bc(lb)},Yg={type:"rect",tag:"path",nested:!1,attr:function(r,I){r("d",xc(null,I))},bound:function(r,I){var ea,sa;return yb(r.set(ea=I.x||0,sa=I.y||0,ea+I.width||0,sa+I.height||0),I)},draw:Jb(Bb),pick:Sc(vd(Bb)),isect:Vc},xg={type:"rule",tag:"line",
nested:!1,attr:function(r,I){r("transform",od(I.x||0,I.y||0));r("x2",null!=I.x2?I.x2-(I.x||0):0);r("y2",null!=I.y2?I.y2-(I.y||0):0)},bound:function(r,I){var ea,sa;return yb(r.set(ea=I.x||0,sa=I.y||0,null!=I.x2?I.x2:ea,null!=I.y2?I.y2:sa),I)},draw:function(r,I,ea){Rb(I,sa=>{if(!ea||ea.intersects(sa.bounds)){var $a=null==sa.opacity?1:sa.opacity;$a&&bc(r,sa,$a)&&(gb(r,sa),r.stroke())}})},pick:Sc(function(r,I,ea,sa){return r.isPointInStroke?bc(r,I,1)&&r.isPointInStroke(ea,sa):!1}),isect:ma},lh=gd("shape",
function(r,I){return(I.mark.shape||I.shape).context(r)(I)}),Qf=gd("symbol",function(r,I){return eh.context(r)(I)},jd);const Rh=h.lruCache();var og={height:Xc,measureWidth:Kc,estimateWidth:nc,width:nc,canvas:Sb};Sb(!0);const vh={left:"start",center:"middle",right:"end"},jg=new qa;var Sh={type:"text",tag:"text",nested:!1,attr:function(r,I){var ea=I.dx||0,sa=(I.dy||0)+Me(I),$a=He(I),Ob=$a.x1;$a=$a.y1;var hc=I.angle||0;r("text-anchor",vh[I.align]||"start");if(hc){if(I=od(Ob,$a)+" rotate("+(hc+")"),ea||
sa)I+=" "+od(ea,sa)}else I=od(Ob+ea,$a+sa);r("transform",I)},bound:Ie,draw:function(r,I,ea){Rb(I,sa=>{var $a=null==sa.opacity?1:sa.opacity,Ob;if(!(ea&&!ea.intersects(sa.bounds)||0===$a||0>=sa.fontSize||null==sa.text||0===sa.text.length)){r.font=me(sa);r.textAlign=sa.align||"left";var hc=He(sa);var Mc=hc.x1;hc=hc.y1;sa.angle&&(r.save(),r.translate(Mc,hc),r.rotate(sa.angle*re),Mc=hc=0);Mc+=sa.dx||0;hc+=(sa.dy||0)+Me(sa);var fc=pd(sa);gb(r,sa);if(h.isArray(fc)){var $c=kd(sa);for(Ob=0;Ob<fc.length;++Ob){var Wc=
xd(sa,fc[Ob]);sa.fill&&va(r,sa,$a)&&r.fillText(Wc,Mc,hc);sa.stroke&&Ca(r,sa,$a)&&r.strokeText(Wc,Mc,hc);hc+=$c}}else Wc=xd(sa,fc),sa.fill&&va(r,sa,$a)&&r.fillText(Wc,Mc,hc),sa.stroke&&Ca(r,sa,$a)&&r.strokeText(Wc,Mc,hc);sa.angle&&r.restore()}})},pick:Sc(function(r,I,ea,sa,$a,Ob){if(0>=I.fontSize)return!1;if(!I.angle)return!0;ea=He(I);r=ea.x1;ea=ea.y1;sa=Ie(jg,I,1);var hc=-I.angle*re;I=Math.cos(hc);hc=Math.sin(hc);return sa.contains(I*$a-hc*Ob+(r-I*r+hc*ea),hc*$a+I*Ob+(ea-hc*r-I*ea))}),isect:function(r,
I){r=Ie(jg,r,2);return Ha(I,r[0],r[1],r[2],r[3])||Ha(I,r[0],r[1],r[4],r[5])||Ha(I,r[4],r[5],r[6],r[7])||Ha(I,r[2],r[3],r[6],r[7])}},aj=Cd("trail",function(r,I){return Sg.context(r)(I)},function(r,I){for(var ea=r.length,sa,$a;0<=--ea;)if(!1!==r[ea].defined&&(sa=r[ea].x-I[0],$a=r[ea].y-I[1],$a=sa*sa+$a*$a,sa=r[ea].size||1,$a<sa*sa))return r[ea];return null}),Fg={arc:Zd,area:ge,group:Ue,image:Wf,line:Pf,path:$e,rect:Yg,rule:xg,shape:lh,symbol:Qf,text:Sh,trail:aj},ti={mark:null};const di="marktype name role interactive clip items zindex x y width height align baseline fill fillOpacity opacity blend stroke strokeOpacity strokeWidth strokeCap strokeDash strokeDashOffset strokeForeground strokeOffset startAngle endAngle innerRadius outerRadius cornerRadius padAngle cornerRadiusTopLeft cornerRadiusTopRight cornerRadiusBottomLeft cornerRadiusBottomRight interpolate tension orient defined url aspect smooth path scaleX scaleY x2 y2 size shape text angle theta radius dir dx dy ellipsis limit lineBreak lineHeight font fontSize fontWeight fontStyle fontVariant description aria ariaRole ariaRoleDescription".split(" ");
class bj{constructor(r){arguments.length?this.root=aa(r):(this.root=fb({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Ua(this.root)])}toJSON(r){return F(this.root,r||0)}mark(r,I,ea){I=I||this.root.items[0];r=fb(r,I);I.items[ea]=r;r.zindex&&(r.group.zdirty=!0);return r}}class ui{constructor(r,I){this._active=null;this._handlers={};this._loader=r||ab.loader();this._tooltip=I||Oc}initialize(r,I,ea){this._el=r;this._obj=ea||null;return this.origin(I)}element(){return this._el}canvas(){return this._el&&
this._el.firstChild}origin(r){return arguments.length?(this._origin=r||[0,0],this):this._origin.slice()}scene(r){if(!arguments.length)return this._scene;this._scene=r;return this}on(){}off(){}_handlerIndex(r,I,ea){for(let sa=r?r.length:0;0<=--sa;)if(r[sa].type===I&&(!ea||r[sa].handler===ea))return sa;return-1}handlers(r){const I=this._handlers,ea=[];if(r)ea.push(...I[this.eventName(r)]);else for(const sa in I)ea.push(...I[sa]);return ea}eventName(r){const I=r.indexOf(".");return 0>I?r:r.slice(0,I)}handleHref(r,
I,ea){this._loader.sanitize(ea,{context:"href"}).then(sa=>{const $a=new MouseEvent(r.type,r),Ob=Gb(null,"a");for(const hc in sa)Ob.setAttribute(hc,sa[hc]);Ob.dispatchEvent($a)}).catch(()=>{})}handleTooltip(r,I,ea){if(I&&null!=I.tooltip){var sa=this.canvas(),$a=this._origin,Ob=I&&I.mark,hc;if(Ob&&(hc=Fg[Ob.marktype]).tip){sa=ad(r,sa);sa[0]-=$a[0];for(sa[1]-=$a[1];I=I.mark.group;)sa[0]-=I.x||0,sa[1]-=I.y||0;I=hc.tip(Ob.items,sa)}this._tooltip.call(this._obj,this,r,I,ea&&I&&I.tooltip||null)}}getItemBoundingClientRect(r){var I=
this.canvas();if(I){var ea=I.getBoundingClientRect(),sa=this._origin,$a=r.bounds;I=$a.width();var Ob=$a.height(),hc=$a.x1+sa[0]+ea.left;for(ea=$a.y1+sa[1]+ea.top;r.mark&&(r=r.mark.group);)hc+=r.x||0,ea+=r.y||0;return{x:hc,y:ea,width:I,height:Ob,left:hc,top:ea,right:hc+I,bottom:ea+Ob}}}}class wh{constructor(r){this._bgcolor=this._el=null;this._loader=new Wg(r)}initialize(r,I,ea,sa,$a){this._el=r;return this.resize(I,ea,sa,$a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(r){if(0===
arguments.length)return this._bgcolor;this._bgcolor=r;return this}resize(r,I,ea,sa){this._width=r;this._height=I;this._origin=ea||[0,0];this._scale=sa||1;return this}dirty(){}render(r,I){const ea=this;ea._call=function(){ea._render(r,I)};ea._call();ea._call=null;return ea}_render(){}renderAsync(r,I){const ea=this.render(r,I);return this._ready?this._ready.then(()=>ea):Promise.resolve(ea)}_load(r,I){var ea=this;r=ea._loader[r](I);if(!ea._ready){const sa=ea._call;ea._ready=ea._loader.ready().then($a=>
{$a&&sa();ea._ready=null})}return r}sanitizeURL(r){return this._load("sanitizeURL",r)}loadImage(r){return this._load("loadImage",r)}}const Li="keydown keypress keyup dragenter dragleave dragover pointerdown pointerup pointermove pointerout pointerover mousedown mouseup mousemove mouseout mouseover click dblclick wheel mousewheel touchstart touchmove touchend".split(" ");class Fh extends ui{constructor(r,I){super(r,I);this._touch=this._down=null;this._first=!0;this._events={};this.events=Li;this.pointermove=
Md(["pointermove","mousemove"],["pointerover","mouseover"],["pointerout","mouseout"]);this.dragover=Md(["dragover"],["dragenter"],["dragleave"]);this.pointerout=Wd(["pointerout","mouseout"]);this.dragleave=Wd(["dragleave"])}initialize(r,I,ea){this._canvas=r&&pc(r,"canvas");"click mousedown pointerdown pointermove pointerout dragleave".split(" ").forEach(sa=>Nd(this,sa));return super.initialize(r,I,ea)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(r){this.fire("mousewheel",
r)}pointerdown(r){this._down=this._active;this.fire("pointerdown",r)}mousedown(r){this._down=this._active;this.fire("mousedown",r)}click(r){this._down===this._active&&(this.fire("click",r),this._down=null)}touchstart(r){this._touch=this.pickEvent(r.changedTouches[0]);this._first&&(this._active=this._touch,this._first=!1);this.fire("touchstart",r,!0)}touchmove(r){this.fire("touchmove",r,!0)}touchend(r){this.fire("touchend",r,!0);this._touch=null}fire(r,I,ea){ea=ea?this._touch:this._active;const sa=
this._handlers[r];I.vegaType=r;"click"===r&&ea&&ea.href?this.handleHref(I,ea,ea.href):("pointermove"===r||"mouseout"===r)&&this.handleTooltip(I,ea,"mouseout"!==r);if(sa)for(let $a=0,Ob=sa.length;$a<Ob;++$a)sa[$a].handler.call(this._obj,I,ea)}on(r,I){const ea=this.eventName(r),sa=this._handlers;0>this._handlerIndex(sa[ea],r,I)&&(Nd(this,r),(sa[ea]||(sa[ea]=[])).push({type:r,handler:I}));return this}off(r,I){var ea=this.eventName(r);ea=this._handlers[ea];r=this._handlerIndex(ea,r,I);0<=r&&ea.splice(r,
1);return this}pickEvent(r){r=ad(r,this._canvas);const I=this._origin;return this.pick(this._scene,r[0],r[1],r[0]-I[0],r[1]-I[1])}pick(r,I,ea,sa,$a){const Ob=this.context();return Fg[r.marktype].pick.call(this,Ob,r,I,ea,sa,$a)}}class Eg extends wh{constructor(r){super(r);this._options={};this._redraw=!1;this._dirty=new qa;this._tempb=new qa}initialize(r,I,ea,sa,$a,Ob){this._options=Ob||{};this._canvas=this._options.externalContext?null:ia.canvas(1,1,this._options.type);r&&this._canvas&&(Ec(r,0).appendChild(this._canvas),
this._canvas.setAttribute("class","marks"));return super.initialize(r,I,ea,sa,$a)}resize(r,I,ea,sa){super.resize(r,I,ea,sa);if(this._canvas){r=this._canvas;I=this._width;ea=this._height;sa=this._origin;var $a=this._scale,Ob=this._options.context;const Mc="undefined"!==typeof HTMLElement&&r instanceof HTMLElement&&null!=r.parentNode,fc=r.getContext("2d");$a=Mc?"undefined"!==typeof window?window.devicePixelRatio||1:1:$a;r.width=I*$a;r.height=ea*$a;for(var hc in Ob)fc[hc]=Ob[hc];Mc&&1!==$a&&(r.style.width=
I+"px",r.style.height=ea+"px");fc.pixelRatio=$a;fc.setTransform($a,0,0,$a,$a*sa[0],$a*sa[1])}else(hc=this._options.externalContext)||h.error("CanvasRenderer is missing a valid canvas or context"),hc.scale(this._scale,this._scale),hc.translate(this._origin[0],this._origin[1]);this._redraw=!0;return this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(r){const I=this._tempb.clear().union(r.bounds);for(r=r.mark.group;r;)I.translate(r.x||
0,r.y||0),r=r.mark.group;this._dirty.union(I)}_render(r,I){const ea=this.context(),sa=this._origin,$a=this._width,Ob=this._height,hc=this._dirty;var Mc=(new qa).set(0,0,$a,Ob).translate(-sa[0],-sa[1]);ea.save();this._redraw||hc.empty()?Mc=(this._redraw=!1,Mc.expand(1)):(Mc=Mc.intersect(hc),Mc.expand(1).round(),ea.pixelRatio%1&&Mc.scale(ea.pixelRatio).round().scale(1/ea.pixelRatio),Mc.translate(-(sa[0]%1),-(sa[1]%1)),ea.beginPath(),ea.rect(Mc.x1,Mc.y1,Mc.width(),Mc.height()),ea.clip());this.clear(-sa[0],
-sa[1],$a,Ob);this.draw(ea,r,Mc,I);ea.restore();hc.clear();return this}draw(r,I,ea,sa){if("group"===I.marktype||null==sa||sa.includes(I.marktype)){var $a=Fg[I.marktype];if(I.clip){var Ob=I.clip;r.save();h.isFunction(Ob)?(r.beginPath(),Ob(r),r.clip()):Dd(r,I.group)}$a.draw.call(this,r,I,ea,sa);I.clip&&r.restore()}}clear(r,I,ea,sa){const $a=this._options,Ob=this.context();"pdf"===$a.type||$a.externalContext||Ob.clearRect(r,I,ea,sa);null!=this._bgcolor&&(Ob.fillStyle=this._bgcolor,Ob.fillRect(r,I,ea,
sa))}}class Gh extends ui{constructor(r,I){super(r,I);const ea=this;ea._hrefHandler=Hh(ea,(sa,$a)=>{$a&&$a.href&&ea.handleHref(sa,$a,$a.href)});ea._tooltipHandler=Hh(ea,(sa,$a)=>{ea.handleTooltip(sa,$a,"mouseout"!==sa.type)})}initialize(r,I,ea){let sa=this._svg;sa&&(sa.removeEventListener("click",this._hrefHandler),sa.removeEventListener("pointermove",this._tooltipHandler),sa.removeEventListener("mouseout",this._tooltipHandler));if(this._svg=sa=r&&pc(r,"svg"))sa.addEventListener("click",this._hrefHandler),
sa.addEventListener("pointermove",this._tooltipHandler),sa.addEventListener("mouseout",this._tooltipHandler);return super.initialize(r,I,ea)}canvas(){return this._svg}on(r,I){const ea=this.eventName(r),sa=this._handlers;0>this._handlerIndex(sa[ea],r,I)&&(r={type:r,handler:I,listener:Hh(this,I)},(sa[ea]||(sa[ea]=[])).push(r),this._svg&&this._svg.addEventListener(ea,r.listener));return this}off(r,I){const ea=this.eventName(r),sa=this._handlers[ea];r=this._handlerIndex(sa,r,I);0<=r&&(this._svg&&this._svg.removeEventListener(ea,
sa[r].listener),sa.splice(r,1));return this}}const Hh=(r,I)=>ea=>{let sa=ea.target.__data__;sa=Array.isArray(sa)?sa[0]:sa;ea.vegaType=ea.type;I.call(r._obj,ea,sa)},eg=(r,I,ea)=>({role:r,["aria-roledescription"]:I,["aria-label"]:ea||void 0}),cj=h.toSet("axis-domain axis-grid axis-label axis-tick axis-title legend-band legend-entry legend-gradient legend-label legend-title legend-symbol title".split(" ")),fi={axis:{desc:"axis",caption:function(r){var I=r.datum;const ea=r.orient,sa=I.title?vc(r):null;
var $a=r.context;I=$a.scales[I.scale].value;$a=$a.dataflow.locale();const Ob=I.type;return`${"left"===ea||"right"===ea?"Y":"X"}-axis`+(sa?` titled '${sa}'`:"")+` for a ${zb.isDiscrete(Ob)?"discrete":Ob} scale`+` with ${zb.domainCaption($a,I,r)}`}},legend:{desc:"legend",caption:function(r){var I=r.datum;const ea=I.title?vc(r):null,sa=`${I.type||""} legend`.trim();var $a=I.scales;I=Object.keys($a);var Ob=r.context;$a=Ob.scales[$a[I[0]]].value;Ob=Ob.dataflow.locale();return(sa.length?sa[0].toUpperCase()+
sa.slice(1):sa)+(ea?` titled '${ea}'`:"")+` for ${Hc(I)}`+` with ${zb.domainCaption(Ob,$a,r)}`}},"title-text":{desc:"title",caption:r=>`Title text '${h.array(r.text).join(" ")}'`},"title-subtitle":{desc:"subtitle",caption:r=>`Subtitle text '${h.array(r.text).join(" ")}'`}},fh={ariaRole:"role",ariaRoleDescription:"aria-roledescription",description:"aria-label"},vi=r=>(r+"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"),Aj=r=>Yc(Jc(),r)+"",gh={fill:"fill",fillOpacity:"fill-opacity",
stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},nh={blend:"mix-blend-mode"},Gg={fill:"none","stroke-miterlimit":10},Se=pf.xmlns;class Ih extends wh{constructor(r){super(r);this._dirtyID=0;this._dirty=[];this._defs=this._root=this._svg=null}initialize(r,I,ea,sa,$a){this._defs={};this._clearDefs();
r&&(this._svg=Vb(r,0,"svg",Se),this._svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns",Se),this._svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",pf["xmlns:xlink"]),this._svg.setAttribute("version",pf.version),this._svg.setAttribute("class","marks"),Ec(r,1),this._root=Vb(this._svg,0,"g",Se),Ke(this._root,Gg),Ec(this._svg,1));this.background(this._bgcolor);return super.initialize(r,I,ea,sa,$a)}background(r){arguments.length&&this._svg&&this._svg.style.setProperty("background-color",
r);return super.background(...arguments)}resize(r,I,ea,sa){super.resize(r,I,ea,sa);this._svg&&(Ke(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`));this._dirty=[];return this}canvas(){return this._svg}svg(){const r=this._svg,I=this._bgcolor;if(!r)return null;let ea;I&&(r.removeAttribute("style"),ea=Vb(r,0,"rect",Se),Ke(ea,{width:this._width,height:this._height,fill:I}));
const sa=Aj(r);I&&(r.removeChild(ea),this._svg.style.setProperty("background-color",I));return sa}_render(r,I){this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,r,void 0,I),Ec(this._root,1));this.defs();this._dirty=[];++this._dirtyID;return this}dirty(r){r.dirty!==this._dirtyID&&(r.dirty=this._dirtyID,this._dirty.push(r))}isDirty(r){return this._dirtyAll||!r._svg||!r._svg.ownerSVGElement||r.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const r=this._dirty;if(!r.length||
!this._dirtyID)return!0;const I=++this._dirtyID;let ea;let sa,$a,Ob,hc;Ob=0;for(hc=r.length;Ob<hc;++Ob){ea=r[Ob];var Mc=ea.mark;Mc.marktype!==sa&&(sa=Mc.marktype,$a=Fg[sa]);Mc.zdirty&&Mc.dirty!==I&&(this._dirtyAll=!1,Tc(ea,I),Mc.items.forEach(fc=>{fc.dirty=I}));Mc.zdirty||(ea.exit?($a.nested&&Mc.items.length?(Mc=Mc.items[0],Mc._svg&&this._update($a,Mc._svg,Mc)):ea._svg&&(Mc=ea._svg.parentNode)&&Mc.removeChild(ea._svg),ea._svg=null):(ea=$a.nested?Mc.items[0]:ea,ea._update!==I&&(ea._svg&&ea._svg.ownerSVGElement?
this._update($a,ea._svg,ea):(this._dirtyAll=!1,Tc(ea,I)),ea._update=I)))}return!this._dirtyAll}mark(r,I,ea,sa){if(!this.isDirty(I))return I._svg;const $a=this._svg,Ob=I.marktype,hc=Fg[Ob];var Mc=!1===I.interactive?"none":null;const fc="g"===hc.tag,$c=bd(I,r,ea,"g",$a);if("group"!==Ob&&null!=sa&&!sa.includes(Ob))return Ec($c,0),I._svg;$c.setAttribute("class",ld(I));r=Oa(I);for(const he in r)ne($c,he,r[he]);fc||ne($c,"pointer-events",Mc);ne($c,"clip-path",I.clip?ed(this,I,I.group):null);let Wc=null,
Hd=0;Mc=he=>{const se=this.isDirty(he),Je=bd(he,$c,Wc,hc.tag,$a);se&&(this._update(hc,Je,he),fc&&qd(this,Je,he,sa));Wc=Je;++Hd};hc.nested?I.items.length&&Mc(I.items[0]):Rb(I,Mc);Ec($c,Hd);return $c}_update(r,I,ea){Lg=I;xf=I.__values__;ya(fe,ea);r.attr(fe,ea,this);const sa=Mi[r.type];sa&&sa.call(this,r,I,ea);Lg&&this.style(Lg,ea)}style(r,I){if(null!=I){for(const ea in gh){let sa="font"===ea?Jd(I):I[ea];if(sa===xf[ea])continue;const $a=gh[ea];null==sa?r.removeAttribute($a):(sa&&sa.gradient&&(sa=Yb(sa,
this._defs.gradient,Ye())),r.setAttribute($a,sa+""));xf[ea]=sa}for(const ea in nh)Qe(r,nh[ea],I[ea])}}defs(){const r=this._svg,I=this._defs;let ea=I.el;var sa=0;for(var $a in I.gradient){ea||(I.el=ea=Vb(r,1,"defs",Se));var Ob=void 0;let fc,$c;var hc=ea,Mc=I.gradient[$a];"radial"===Mc.gradient?(Ob=Vb(hc,sa++,"pattern",Se),Ke(Ob,{id:"p_"+Mc.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),Ob=Vb(Ob,0,"rect",Se),Ke(Ob,{width:1,height:1,fill:`url(${Ye()}#${Mc.id})`}),
hc=Vb(hc,sa++,"radialGradient",Se),Ke(hc,{id:Mc.id,fx:Mc.x1,fy:Mc.y1,fr:Mc.r1,cx:Mc.x2,cy:Mc.y2,r:Mc.r2})):(hc=Vb(hc,sa++,"linearGradient",Se),Ke(hc,{id:Mc.id,x1:Mc.x1,x2:Mc.x2,y1:Mc.y1,y2:Mc.y2}));$c=0;for(fc=Mc.stops.length;$c<fc;++$c)Ob=Vb(hc,$c,"stop",Se),Ob.setAttribute("offset",Mc.stops[$c].offset),Ob.setAttribute("stop-color",Mc.stops[$c].color);Ec(hc,$c)}for(const fc in I.clipping)ea||(I.el=ea=Vb(r,1,"defs",Se)),hc=ea,Mc=I.clipping[fc],$a=sa,hc=Vb(hc,$a,"clipPath",Se),hc.setAttribute("id",
Mc.id),Mc.path?(sa=Vb(hc,0,"path",Se),sa.setAttribute("d",Mc.path)):(sa=Vb(hc,0,"rect",Se),Ke(sa,{x:0,y:0,width:Mc.width,height:Mc.height})),Ec(hc,1),sa=$a+1;ea&&(0===sa?(r.removeChild(ea),I.el=null):Ec(ea,sa))}_clearDefs(){const r=this._defs;r.gradient={};r.clipping={}}}let Lg=null,xf=null;const Mi={group(r,I,ea){const sa=Lg=I.childNodes[2];xf=sa.__values__;r.foreground(fe,ea,this);xf=I.__values__;Lg=I.childNodes[1];r.content(fe,ea,this);I=Lg=I.childNodes[0];r.background(fe,ea,this);r=!1===ea.mark.interactive?
"none":null;r!==xf.events&&(ne(sa,"pointer-events",r),ne(I,"pointer-events",r),xf.events=r);ea.strokeForeground&&ea.stroke?(r=ea.fill,ne(sa,"display",null),this.style(I,ea),ne(I,"stroke",null),r&&(ea.fill=null),xf=sa.__values__,this.style(sa,ea),r&&(ea.fill=r),Lg=null):ne(sa,"display","none")},image(r,I,ea){!1===ea.smooth?(Qe(I,"image-rendering","optimizeSpeed"),Qe(I,"image-rendering","pixelated")):Qe(I,"image-rendering",null)},text(r,I,ea){r=pd(ea);let sa,$a,Ob;h.isArray(r)?(sa=r.map(hc=>xd(ea,hc)),
r=sa.join("\n"),r!==xf.text&&(Ec(I,0),$a=I.ownerDocument,Ob=kd(ea),sa.forEach((hc,Mc)=>{const fc=Gb($a,"tspan",Se);fc.__data__=ea;fc.textContent=hc;Mc&&(fc.setAttribute("x",0),fc.setAttribute("dy",Ob));I.appendChild(fc)}),xf.text=r)):(sa=xd(ea,r),sa!==xf.text&&(I.textContent=sa,xf.text=sa));ne(I,"font-family",Jd(ea));ne(I,"font-size",Xc(ea)+"px");ne(I,"font-style",ea.fontStyle);ne(I,"font-variant",ea.fontVariant);ne(I,"font-weight",ea.fontWeight)}};class pg extends wh{constructor(r){super(r);this._text=
null;this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(r){const I=Jc();I.open("svg",h.extend({},pf,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const ea=this._bgcolor;ea&&"transparent"!==ea&&"none"!==ea&&I.open("rect",{width:this._width,height:this._height,fill:ea}).close();I.open("g",Gg,{transform:"translate("+this._origin+")"});this.mark(I,r);I.close();this.defs(I);this._text=I.close()+"";return this}mark(r,
I){const ea=Fg[I.marktype],sa=ea.tag,$a=[ya,ea.attr];r.open("g",{"class":ld(I),"clip-path":I.clip?ed(this,I,I.group):null},Oa(I),{"pointer-events":"g"!==sa&&!1===I.interactive?"none":null});const Ob=hc=>{const Mc=this.href(hc);Mc&&r.open("a",Mc);r.open(sa,this.attr(I,hc,$a,"g"!==sa?sa:null));if("text"===sa){var fc=pd(hc);if(h.isArray(fc)){var $c={x:0,dy:kd(hc)};for(var Wc=0;Wc<fc.length;++Wc)r.open("tspan",Wc?$c:null).text(xd(hc,fc[Wc])).close()}else r.text(xd(hc,fc))}else"g"===sa&&(fc=hc.strokeForeground,
$c=hc.fill,Wc=hc.stroke,fc&&Wc&&(hc.stroke=null),r.open("path",this.attr(I,hc,ea.background,"bgrect")).close(),r.open("g",this.attr(I,hc,ea.content)),Rb(hc,Hd=>this.mark(r,Hd)),r.close(),fc&&Wc?($c&&(hc.fill=null),hc.stroke=Wc,r.open("path",this.attr(I,hc,ea.foreground,"bgrect")).close(),$c&&(hc.fill=$c)):r.open("path",this.attr(I,hc,ea.foreground,"bgfore")).close());r.close();Mc&&r.close()};ea.nested?I.items&&I.items.length&&Ob(I.items[0]):Rb(I,Ob);return r.close()}href(r){const I=r.href;if(I){if(r=
this._hrefs&&this._hrefs[I])return r;this.sanitizeURL(I).then(ea=>{ea["xlink:href"]=ea.href;ea.href=null;(this._hrefs||(this._hrefs={}))[I]=ea})}return null}attr(r,I,ea,sa){const $a={},Ob=(hc,Mc,fc,$c)=>{$a[$c||hc]=Mc};Array.isArray(ea)?ea.forEach(hc=>hc(Ob,I,this)):ea(Ob,I,this);sa&&kf($a,I,r,sa,this._defs);return $a}defs(r){var I=this._defs.gradient;const ea=this._defs.clipping;if(0!==Object.keys(I).length+Object.keys(ea).length){r.open("defs");for(const $a in I){var sa=I[$a];const Ob=sa.stops;
"radial"===sa.gradient?(r.open("pattern",{id:"p_"+$a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r.open("rect",{width:"1",height:"1",fill:"url(#"+$a+")"}).close(),r.close(),r.open("radialGradient",{id:$a,fx:sa.x1,fy:sa.y1,fr:sa.r1,cx:sa.x2,cy:sa.y2,r:sa.r2})):r.open("linearGradient",{id:$a,x1:sa.x1,x2:sa.x2,y1:sa.y1,y2:sa.y2});for(sa=0;sa<Ob.length;++sa)r.open("stop",{offset:Ob[sa].offset,"stop-color":Ob[sa].color}).close();r.close()}for(const $a in ea)I=ea[$a],
r.open("clipPath",{id:$a}),I.path?r.open("path",{d:I.path}).close():r.open("rect",{x:0,y:0,width:I.width,height:I.height}).close(),r.close();r.close()}}}const Mg={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};class oh extends wh{constructor(r){super(r);this._svgRenderer=new Ih(r);this._canvasRenderer=new Eg(r)}initialize(r,I,ea,sa,$a){this._root_el=Vb(r,0,"div");const Ob=Vb(this._root_el,0,"div"),hc=Vb(this._root_el,1,"div");this._root_el.style.position="relative";Mg.debug||(Ob.style.height="100%",
hc.style.position="absolute",hc.style.top="0",hc.style.left="0",hc.style.height="100%",hc.style.width="100%");this._svgEl=Mg.svgOnTop?hc:Ob;this._canvasEl=Mg.svgOnTop?Ob:hc;this._svgEl.style.pointerEvents="none";this._canvasRenderer.initialize(this._canvasEl,I,ea,sa,$a);this._svgRenderer.initialize(this._svgEl,I,ea,sa,$a);return super.initialize(r,I,ea,sa,$a)}dirty(r){Mg.svgMarkTypes.includes(r.mark.marktype)?this._svgRenderer.dirty(r):this._canvasRenderer.dirty(r);return this}_render(r,I){I=(null!=
I?I:"arc area image line path rect rule shape symbol text trail".split(" ")).filter(ea=>!Mg.svgMarkTypes.includes(ea));this._svgRenderer.render(r,Mg.svgMarkTypes);this._canvasRenderer.render(r,I)}resize(r,I,ea,sa){super.resize(r,I,ea,sa);this._svgRenderer.resize(r,I,ea,sa);this._canvasRenderer.resize(r,I,ea,sa);return this}background(r){Mg.svgOnTop?this._canvasRenderer.background(r):this._svgRenderer.background(r);return this}}class $g extends Fh{constructor(r,I){super(r,I)}initialize(r,I,ea){r=Vb(Vb(r,
0,"div"),Mg.svgOnTop?0:1,"div");return super.initialize(r,I,ea)}}const Jh={};Jh.canvas=Jh.png={renderer:Eg,headless:Eg,handler:Fh};Jh.svg={renderer:Ih,headless:pg,handler:Gh};Jh.hybrid={renderer:oh,headless:oh,handler:$g};Jh.none={};const ah=new qa;u.Bounds=qa;u.CanvasHandler=Fh;u.CanvasRenderer=Eg;u.Gradient=function(r,I){var ea=[],sa;return sa={gradient:"linear",x1:r?r[0]:0,y1:r?r[1]:0,x2:I?I[0]:1,y2:I?I[1]:0,stops:ea,stop:function($a,Ob){ea.push({offset:$a,color:Ob});return sa}}};u.GroupItem=Ua;
u.Handler=ui;u.HybridHandler=$g;u.HybridRenderer=oh;u.Item=Db;u.Marks=Fg;u.RenderType={Canvas:"canvas",PNG:"png",SVG:"svg",Hybrid:"hybrid",None:"none"};u.Renderer=wh;u.ResourceLoader=Wg;u.SVGHandler=Gh;u.SVGRenderer=Ih;u.SVGStringRenderer=pg;u.Scenegraph=bj;u.boundClip=function(r){const I=r.clip;if(h.isFunction(I))I(Hb(ah.clear()));else if(I)ah.set(0,0,r.group.width,r.group.height);else return;r.bounds.intersect(ah)};u.boundContext=Hb;u.boundItem=tf;u.boundMark=bf;u.boundStroke=yb;u.domChild=Vb;u.domClear=
Ec;u.domCreate=Gb;u.domFind=pc;u.font=me;u.fontFamily=Jd;u.fontSize=Xc;u.intersect=function(r,I,ea){const sa=[];I=(new qa).union(I);const $a=r.marktype;return $a?Le(r,I,ea,sa):"group"===$a?Xe(r,I,ea,sa):h.error("Intersect scene must be mark node or group item.")};u.intersectBoxLine=Ha;u.intersectPath=Bc;u.intersectPoint=jd;u.intersectRule=ma;u.lineHeight=kd;u.markup=Jc;u.multiLineOffset=function(r){const I=pd(r);return(h.isArray(I)?I.length-1:0)*kd(r)};u.path=jc;u.pathCurves=Aa;u.pathEqual=Ee;u.pathParse=
O;u.pathRectangle=oc;u.pathRender=za;u.pathSymbols=Pa;u.pathTrail=$b;u.point=ad;u.renderModule=function(r,I){r=String(r||"").toLowerCase();return 1<arguments.length?(Jh[r]=I,this):Jh[r]};u.resetSVGClipId=function(){Vg=1};u.resetSVGDefIds=function(){Vg=1;oa=0};u.sceneEqual=Ae;u.sceneFromJSON=aa;u.scenePickVisit=Fb;u.sceneToJSON=F;u.sceneVisit=Rb;u.sceneZOrder=kb;u.serializeXML=Aj;u.setHybridRendererOptions=function(r){let I;Mg.svgMarkTypes=null!=(I=r.svgMarkTypes)?I:["text"];let ea;Mg.svgOnTop=null!=
(ea=r.svgOnTop)?ea:!0;let sa;Mg.debug=null!=(sa=r.debug)?sa:!1};u.textMetrics=og})};
shadow$provide[35]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(29),ob(34),ob(21)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-scenegraph","vega-util"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h((u.vega=u.vega||{},u.vega.transforms={}),u.vega,u.vega,u.vega))})(this,function(u,h,ia,ab){function zb(C){h.Transform.call(this,null,C)}function Yb(C,H,V){return H(C.bounds.clear(),C,V)}function ac(C){h.Transform.call(this,
0,C)}function Xb(C){return C._signals[":vega_identifier:"]||(C._signals[":vega_identifier:"]=C.add(0))}function mc(C){h.Transform.call(this,null,C)}function Cb(C){const H=C.groups;C=C.parent;return H&&1===H.size?H.get(Object.keys(H.object)[0]):H&&C?H.lookup(C):null}function Ub(C){h.Transform.call(this,null,C)}function jc(C){h.Transform.call(this,null,C)}function Ba(C,H,V){return C[H]===V?0:(C[H]=V,1)}function Za(C){C=C.items[0].orient;return"left"===C||"right"===C}function wb(C,H,V,Aa){H=H.items[0];
var O=H.datum,la=null!=H.translate?H.translate:.5,za=H.orient,Ma=+O.grid;var Pa=[O.ticks?Ma++:-1,O.labels?Ma++:-1,Ma+ +O.domain];Ma=H.range;var Ya=H.offset,vb=H.position,jb=H.minExtent,Tb=H.maxExtent;O=O.title&&H.items[Pa[2]].items[0];var W=H.titlePadding,Ea=H.bounds,Lb=O&&ia.multiLineOffset(O),oc;y.clear().union(Ea);Ea.clear();-1<(oc=Pa[0])&&Ea.union(H.items[oc].bounds);-1<(oc=Pa[1])&&Ea.union(H.items[oc].bounds);switch(za){case "top":V=vb||0;Aa=-Ya;jb=Math.max(jb,Math.min(Tb,-Ea.y1));Ea.add(0,-jb).add(Ma,
0);O&&ub(C,O,jb,W,Lb,0,-1,Ea);break;case "left":V=-Ya;Aa=vb||0;jb=Math.max(jb,Math.min(Tb,-Ea.x1));Ea.add(-jb,0).add(0,Ma);O&&ub(C,O,jb,W,Lb,1,-1,Ea);break;case "right":V+=Ya;Aa=vb||0;jb=Math.max(jb,Math.min(Tb,Ea.x2));Ea.add(0,0).add(jb,Ma);O&&ub(C,O,jb,W,Lb,1,1,Ea);break;case "bottom":V=vb||0;Aa+=Ya;jb=Math.max(jb,Math.min(Tb,Ea.y2));Ea.add(0,0).add(Ma,jb);O&&ub(C,O,jb,W,0,0,1,Ea);break;default:V=H.x,Aa=H.y}ia.boundStroke(Ea.translate(V,Aa),H);Ba(H,"x",V+la)|Ba(H,"y",Aa+la)&&(H.bounds=y,C.dirty(H),
H.bounds=Ea,C.dirty(H));return H.mark.bounds.clear().union(Ea)}function ub(C,H,V,Aa,O,la,za,Ma){const Pa=H.bounds;H.auto&&(V=za*(V+O+Aa),O=Aa=0,C.dirty(H),la?Aa=(H.x||0)-(H.x=V):O=(H.y||0)-(H.y=V),H.mark.bounds.clear().union(Pa.translate(-Aa,-O)),C.dirty(H));Ma.union(Pa)}function sb(C){return(new ia.Bounds).set(0,0,C.width||0,C.height||0)}function xb(C){const H=C.bounds.clone();return H.empty()?H.set(0,0,0,0):H.translate(-(C.x||0),-(C.y||0))}function ib(C,H,V){C=ab.isObject(C)?C[H]:C;return null!=
C?C:void 0!==V?V:0}function ec(C){return 0>C?Math.ceil(-C):0}function ra(C,H,V){var Aa=!V.nodirty,O="flush"===V.bounds?sb:xb,la=y.set(0,0,0,0),za=ib(V.align,"column"),Ma=ib(V.align,"row"),Pa=ib(V.padding,"column"),Ya=ib(V.padding,"row"),vb=V.columns||H.length,jb=0>=vb?1:Math.ceil(H.length/vb),Tb=H.length,W=Array(Tb),Ea=Array(vb),Lb=0,oc=Array(Tb),$b=Array(jb),Mb=0,Qb=Array(Tb),xc=Array(Tb),ed=Array(Tb),qa,Db,Ua;for(qa=0;qa<vb;++qa)Ea[qa]=0;for(qa=0;qa<jb;++qa)$b[qa]=0;for(qa=0;qa<Tb;++qa){var yb=
H[qa];var Hb=ed[qa]=O(yb);yb.x=yb.x||0;Qb[qa]=0;yb.y=yb.y||0;xc[qa]=0;yb=qa%vb;var Nb=~~(qa/vb);Lb=Math.max(Lb,Db=Math.ceil(Hb.x2));Mb=Math.max(Mb,Ua=Math.ceil(Hb.y2));Ea[yb]=Math.max(Ea[yb],Db);$b[Nb]=Math.max($b[Nb],Ua);W[qa]=Pa+ec(Hb.x1);oc[qa]=Ya+ec(Hb.y1);Aa&&C.dirty(H[qa])}for(qa=0;qa<Tb;++qa)0===qa%vb&&(W[qa]=0),qa<vb&&(oc[qa]=0);if("each"===za)for(yb=1;yb<vb;++yb){O=0;for(qa=yb;qa<Tb;qa+=vb)O<W[qa]&&(O=W[qa]);for(qa=yb;qa<Tb;qa+=vb)W[qa]=O+Ea[yb-1]}else if("all"===za){for(qa=O=0;qa<Tb;++qa)qa%
vb&&O<W[qa]&&(O=W[qa]);for(qa=0;qa<Tb;++qa)qa%vb&&(W[qa]=O+Lb)}else for(za=!1,yb=1;yb<vb;++yb)for(qa=yb;qa<Tb;qa+=vb)W[qa]+=Ea[yb-1];if("each"===Ma)for(Nb=1;Nb<jb;++Nb){O=0;qa=Nb*vb;for(yb=qa+vb;qa<yb;++qa)O<oc[qa]&&(O=oc[qa]);for(qa=Nb*vb;qa<yb;++qa)oc[qa]=O+$b[Nb-1]}else if("all"===Ma){O=0;for(qa=vb;qa<Tb;++qa)O<oc[qa]&&(O=oc[qa]);for(qa=vb;qa<Tb;++qa)oc[qa]=O+Mb}else for(Ma=!1,Nb=1;Nb<jb;++Nb)for(qa=Nb*vb,yb=qa+vb;qa<yb;++qa)oc[qa]+=$b[Nb-1];for(qa=Nb=0;qa<Tb;++qa)Nb=W[qa]+(qa%vb?Nb:0),Qb[qa]+=
Nb-H[qa].x;for(yb=0;yb<vb;++yb)for(W=0,qa=yb;qa<Tb;qa+=vb)W+=oc[qa],xc[qa]+=W-H[qa].y;if(za&&ib(V.center,"column")&&1<jb)for(qa=0;qa<Tb;++qa)Hb="all"===za?Lb:Ea[qa%vb],Nb=Hb-ed[qa].x2-H[qa].x-Qb[qa],0<Nb&&(Qb[qa]+=Nb/2);if(Ma&&ib(V.center,"row")&&1!==vb)for(qa=0;qa<Tb;++qa)Hb="all"===Ma?Mb:$b[~~(qa/vb)],W=Hb-ed[qa].y2-H[qa].y-xc[qa],0<W&&(xc[qa]+=W/2);for(qa=0;qa<Tb;++qa)la.union(ed[qa].translate(Qb[qa],xc[qa]));Nb=ib(V.anchor,"x");W=ib(V.anchor,"y");switch(ib(V.anchor,"column")){case "end":Nb-=la.width();
break;case "middle":Nb-=la.width()/2}switch(ib(V.anchor,"row")){case "end":W-=la.height();break;case "middle":W-=la.height()/2}Nb=Math.round(Nb);W=Math.round(W);la.clear();for(qa=0;qa<Tb;++qa)H[qa].mark.bounds.clear();for(qa=0;qa<Tb;++qa)yb=H[qa],yb.x+=Qb[qa]+=Nb,yb.y+=xc[qa]+=W,la.union(yb.mark.bounds.union(yb.bounds.translate(Qb[qa],xc[qa]))),Aa&&C.dirty(yb);return la}function fa(C,H){return"x1"===H?C.x||0:"y1"===H?C.y||0:"x2"===H?(C.x||0)+(C.width||0):"y2"===H?(C.y||0)+(C.height||0):void 0}function xa(C,
H){return C.bounds[H]}function Ra(C,H,V,Aa,O,la,za,Ma,Pa,Ya,vb,jb,Tb,W){var Ea=V.length,Lb=Aa=0,oc,$b;if(!Ea)return Aa;for(oc=vb;oc<Ea;oc+=jb)V[oc]&&(Aa=za(Aa,Pa(V[oc],Ya)));if(!H.length)return Aa;H.length>O&&(C.warn("Grid headers exceed limit: "+O),H=H.slice(0,O));Aa+=la;O=0;for(la=H.length;O<la;++O)C.dirty(H[O]),H[O].mark.bounds.clear();oc=vb;O=0;for(la=H.length;O<la;++O,oc+=jb){Pa=H[O];vb=Pa.mark.bounds;for(Ea=oc;0<=Ea&&null==($b=V[Ea]);Ea-=Tb);if(Ma){Ea=null==W?$b.x:Math.round($b.bounds.x1+W*
$b.bounds.width());var Mb=Aa}else Ea=Aa,Mb=null==W?$b.y:Math.round($b.bounds.y1+W*$b.bounds.height());vb.union(Pa.bounds.translate(Ea-(Pa.x||0),Mb-(Pa.y||0)));Pa.x=Ea;Pa.y=Mb;C.dirty(Pa);Lb=za(Lb,vb[Ya])}return Lb}function Va(C,H,V,Aa,O,la){if(H){C.dirty(H);var za=V;Aa?za=Math.round(O.x1+la*O.width()):V=Math.round(O.y1+la*O.height());H.bounds.translate(za-(H.x||0),V-(H.y||0));H.mark.bounds.clear().union(H.bounds);H.x=za;H.y=V;C.dirty(H)}}function Ga(C,H){const V=C[H]||{};return(Aa,O)=>null!=V[Aa]?
V[Aa]:null!=C[Aa]?C[Aa]:O}function hb(C,H){let V=-Infinity;C.forEach(Aa=>{null!=Aa.offset&&(V=Math.max(V,Aa.offset))});return-Infinity<V?V:H}function bb(C,H,V,Aa,O,la,za){const Ma=Ga(V,H);V=hb(C,Ma("offset",0));const Pa=Ma("anchor","start"),Ya="end"===Pa?1:"middle"===Pa?.5:0;C={align:"each",bounds:Ma("bounds","flush"),columns:"vertical"===Ma("direction")?1:C.length,padding:Ma("margin",8),center:Ma("center"),nodirty:!0};switch(H){case "left":C.anchor={x:Math.floor(Aa.x1)-V,column:"end",y:Ya*(za||Aa.height()+
2*Aa.y1),row:Pa};break;case "right":C.anchor={x:Math.ceil(Aa.x2)+V,y:Ya*(za||Aa.height()+2*Aa.y1),row:Pa};break;case "top":C.anchor={y:Math.floor(O.y1)-V,row:"end",x:Ya*(la||O.width()+2*O.x1),column:Pa};break;case "bottom":C.anchor={y:Math.ceil(O.y2)+V,x:Ya*(la||O.width()+2*O.x1),column:Pa};break;case "top-left":C.anchor={x:V,y:V};break;case "top-right":C.anchor={x:la-V,y:V,column:"end"};break;case "bottom-left":C.anchor={x:V,y:za-V,row:"end"};break;case "bottom-right":C.anchor={x:la-V,y:za-V,column:"end",
row:"end"}}return C}function tb(C,H){H=H.items[0];var V=H.datum,Aa=H.orient,O=H.bounds,la=H.x,za=H.y;H._bounds?H._bounds.clear().union(O):H._bounds=O.clone();O.clear();var Ma=H.items[0].items[0];var Pa=H.padding,Ya=Pa-Ma.x,vb=Pa-Ma.y;if(H.datum.title){var jb=H.items[1].items[0],Tb=jb.anchor,W=H.titlePadding||0,Ea=Pa-jb.x,Lb=Pa-jb.y;switch(jb.orient){case "left":Ya+=Math.ceil(jb.bounds.width())+W;break;case "right":case "bottom":break;default:vb+=jb.bounds.height()+W}(Ya||vb)&&T(C,Ma,Ya,vb);switch(jb.orient){case "left":Lb+=
eb(H,Ma,jb,Tb,1,1);break;case "right":Ea+=eb(H,Ma,jb,"end",0,0)+W;Lb+=eb(H,Ma,jb,Tb,1,1);break;case "bottom":Ea+=eb(H,Ma,jb,Tb,0,0);Lb+=eb(H,Ma,jb,"end",-1,0,1)+W;break;default:Ea+=eb(H,Ma,jb,Tb,0,0)}(Ea||Lb)&&T(C,jb,Ea,Lb);0>(Ea=Math.round(jb.bounds.x1-Pa))&&(T(C,Ma,-Ea,0),T(C,jb,-Ea,0))}else(Ya||vb)&&T(C,Ma,Ya,vb);O=Pb(H,O);C=2*H.padding;Ma=2*H.padding;O.empty()||(C=Math.ceil(O.width()+C),Ma=Math.ceil(O.height()+Ma));"symbol"===V.type&&Z(H.items[0].items[0].items[0].items);"none"!==Aa&&(H.x=la=
0,H.y=za=0);H.width=C;H.height=Ma;ia.boundStroke(O.set(la,za,la+C,za+Ma),H);H.mark.bounds.clear().union(O);return H}function Pb(C,H){C.items.forEach(V=>H.union(V.bounds));H.x1=C.padding;H.y1=C.padding;return H}function eb(C,H,V,Aa,O,la,za){const Ma=V.datum.vgrad;C=("symbol"===C.datum.type||!la&&Ma||za?H:H.items[0]).bounds[O?"y2":"x2"]-C.padding;H=Ma&&la?C:0;la=Ma&&la?0:C;V=0>=O?0:ia.multiLineOffset(V);return Math.round("start"===Aa?H:"end"===Aa?la-V:.5*(C-V))}function T(C,H,V,Aa){H.x+=V;H.y+=Aa;H.bounds.translate(V,
Aa);H.mark.bounds.translate(V,Aa);C.dirty(H)}function Z(C){const H=C.reduce((V,Aa)=>{V[Aa.column]=Math.max(Aa.bounds.x2-Aa.x,V[Aa.column]||0);return V},{});C.forEach(V=>{V.width=H[V.column];V.height=V.bounds.y2-V.y})}function ca(C,H,V,Aa,O){var la=H.items[0],za=la.orient,Ma=la.anchor,Pa=la.offset,Ya=la.padding,vb=la.items[0].items[0],jb=la.items[1]&&la.items[1].items[0],Tb="left"===za||"right"===za?Aa:V,W=0,Ea=V=0;"group"!==la.frame?"left"===za?(W=O.y2,Tb=O.y1):"right"===za?(W=O.y1,Tb=O.y2):(W=O.x1,
Tb=O.x2):"left"===za&&(W=Aa,Tb=0);Aa="start"===Ma?W:"end"===Ma?Tb:(W+Tb)/2;if(jb&&jb.text){switch(za){case "top":case "bottom":Ea=vb.bounds.height()+Ya;break;case "left":V=vb.bounds.width()+Ya;break;case "right":V=-vb.bounds.width()-Ya}y.clear().union(jb.bounds);y.translate(V-(jb.x||0),Ea-(jb.y||0));Ba(jb,"x",V)|Ba(jb,"y",Ea)&&(C.dirty(jb),jb.bounds.clear().union(y),jb.mark.bounds.clear().union(y),C.dirty(jb));y.clear().union(jb.bounds)}else y.clear();y.union(vb.bounds);switch(za){case "top":za=Aa;
O=O.y1-y.height()-Pa;break;case "left":za=O.x1-y.width()-Pa;O=Aa;break;case "right":za=O.x2+y.width()+Pa;O=Aa;break;case "bottom":za=Aa;O=O.y2+Pa;break;default:za=la.x,O=la.y}Ba(la,"x",za)|Ba(la,"y",O)&&(y.translate(za,O),C.dirty(la),la.bounds.clear().union(y),H.bounds.clear().union(y),C.dirty(la));return la.bounds}function ha(C){h.Transform.call(this,null,C)}function La(C){return C&&"legend-entry"!==C.mark.role}function na(C,H,V){var Aa=H.items,O=Math.max(0,H.width||0),la=Math.max(0,H.height||0),
za=(new ia.Bounds).set(0,0,O,la),Ma=za.clone(),Pa=za.clone(),Ya=[],vb,jb;var Tb=0;for(jb=Aa.length;Tb<jb;++Tb){var W=Aa[Tb];switch(W.role){case "axis":var Ea=Za(W)?Ma:Pa;Ea.union(wb(C,W,O,la));break;case "title":var Lb=W;break;case "legend":Ya.push(tb(C,W));break;case "frame":case "scope":case "row-header":case "row-footer":case "row-title":case "column-header":case "column-footer":case "column-title":Ma.union(W.bounds);Pa.union(W.bounds);break;default:za.union(W.bounds)}}if(Ya.length){const oc={};
Ya.forEach($b=>{vb=$b.orient||"right";"none"!==vb&&(oc[vb]||(oc[vb]=[])).push($b)});for(const $b in oc)Aa=oc[$b],ra(C,Aa,bb(Aa,$b,V.legends,Ma,Pa,O,la));Ya.forEach($b=>{const Mb=$b.bounds;Mb.equals($b._bounds)||($b.bounds=$b._bounds,C.dirty($b),$b.bounds=Mb,C.dirty($b));if(!V.autosize||"fit"!==V.autosize.type&&"fit-x"!==V.autosize.type&&"fit-y"!==V.autosize.type)za.union(Mb);else switch($b.orient){case "left":case "right":za.add(Mb.x1,0).add(Mb.x2,0);break;case "top":case "bottom":za.add(0,Mb.y1).add(0,
Mb.y2)}})}za.union(Ma).union(Pa);Lb&&za.union(ca(C,Lb,O,la,za));H.clip&&za.set(0,0,H.width||0,H.height||0);pa(C,H,za,V)}function pa(C,H,V,Aa){Aa=Aa.autosize||{};const O=Aa.type;if(!(1>C._autosize)&&O){var la=C._width,za=C._height,Ma=Math.max(0,H.width||0),Pa=Math.max(0,Math.ceil(-V.x1));H=Math.max(0,H.height||0);var Ya=Math.max(0,Math.ceil(-V.y1)),vb=Math.max(0,Math.ceil(V.x2-Ma));V=Math.max(0,Math.ceil(V.y2-H));if("padding"===Aa.contains){const jb=C.padding();la-=jb.left+jb.right;za-=jb.top+jb.bottom}"none"===
O?(Ya=Pa=0,Ma=la,H=za):"fit"===O?(Ma=Math.max(0,la-Pa-vb),H=Math.max(0,za-Ya-V)):"fit-x"===O?(Ma=Math.max(0,la-Pa-vb),za=H+Ya+V):"fit-y"===O?(la=Ma+Pa+vb,H=Math.max(0,za-Ya-V)):"pad"===O&&(la=Ma+Pa+vb,za=H+Ya+V);C._resizeView(la,za,Ma,H,[Pa,Ya],Aa.resize)}}ab.inherits(zb,h.Transform,{transform(C,H){const V=H.dataflow,Aa=C.mark,O=Aa.marktype,la=ia.Marks[O],za=la.bound;let Ma=Aa.bounds,Pa;if(la.nested)Aa.items.length&&V.dirty(Aa.items[0]),Ma=Yb(Aa,za),Aa.items.forEach(Ya=>{Ya.bounds.clear().union(Ma)});
else if("group"===O||C.modified())switch(H.visit(H.MOD,Ya=>V.dirty(Ya)),Ma.clear(),Aa.items.forEach(Ya=>Ma.union(Yb(Ya,za))),Aa.role){case "axis":case "legend":case "title":H.reflow()}else Pa=H.changed(H.REM),H.visit(H.ADD,Ya=>{Ma.union(Yb(Ya,za))}),H.visit(H.MOD,Ya=>{Pa=Pa||Ma.alignsWith(Ya.bounds);V.dirty(Ya);Ma.union(Yb(Ya,za))}),Pa&&(Ma.clear(),Aa.items.forEach(Ya=>Ma.union(Ya.bounds)));ia.boundClip(Aa);return H.modifies("bounds")}});ac.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",
type:"string",required:!0}]};ab.inherits(ac,h.Transform,{transform(C,H){const V=Xb(H.dataflow),Aa=C.as;let O=V.value;H.visit(H.ADD,la=>la[Aa]=la[Aa]||++O);V.set(this.value=O);return H}});ab.inherits(mc,h.Transform,{transform(C,H){let V=this.value;V||(V=H.dataflow.scenegraph().mark(C.markdef,Cb(C),C.index),V.group.context=C.context,C.context.group||(C.context.group=V.group),V.source=this.source,V.clip=C.clip,V.interactive=C.interactive,this.value=V);const Aa="group"===V.marktype?ia.GroupItem:ia.Item;
H.visit(H.ADD,O=>Aa.call(O,V));if(C.modified("clip")||C.modified("interactive"))V.clip=C.clip,V.interactive=!!C.interactive,V.zdirty=!0,H.reflow();V.items=H.source;return H}});const m={parity:C=>C.filter((H,V)=>V%2?H.opacity=0:1),greedy:(C,H)=>{let V;return C.filter((Aa,O)=>O&&E(V.bounds,Aa.bounds,H)?Aa.opacity=0:(V=Aa,1))}},E=(C,H,V)=>V>Math.max(H.x1-C.x2,C.x1-H.x2,H.y1-C.y2,C.y1-H.y2),L=(C,H)=>{for(var V=1,Aa=C.length,O=C[0].bounds;V<Aa;++V)if(E(O,O=C[V].bounds,H))return!0},w=C=>{C=C.bounds;return 1<
C.width()&&1<C.height()},Q=(C,H,V)=>{C=C.range();var Aa=new ia.Bounds;"top"===H||"bottom"===H?Aa.set(C[0],-Infinity,C[1],Infinity):Aa.set(-Infinity,C[0],Infinity,C[1]);Aa.expand(V||1);return O=>Aa.encloses(O.bounds)},A=C=>{C.forEach(H=>H.opacity=1);return C};ab.inherits(Ub,h.Transform,{transform(C,H){const V=m[C.method]||m.parity,Aa=C.separation||0;let O=H.materialize(H.SOURCE).source,la,za;if(O&&O.length){if(!C.method)return C.modified("method")&&(A(O),H=H.reflow(C.modified()).modifies("opacity")),
H;O=O.filter(w);if(O.length){C.sort&&(O=O.slice().sort(C.sort));la=A(O);H=H.reflow(C.modified()).modifies("opacity");if(3<=la.length&&L(la,Aa)){do la=V(la,Aa);while(3<=la.length&&L(la,Aa));3>la.length&&!ab.peek(O).opacity&&(1<la.length&&(ab.peek(la).opacity=0),ab.peek(O).opacity=1)}C.boundScale&&0<=C.boundTolerance&&(za=Q(C.boundScale,C.boundOrient,+C.boundTolerance),O.forEach(Pa=>{za(Pa)||(Pa.opacity=0)}));var Ma=la[0].mark.bounds.clear();O.forEach(Pa=>{Pa.opacity&&Ma.union(Pa.bounds)});return H}}}});
ab.inherits(jc,h.Transform,{transform(C,H){const V=H.dataflow;H.visit(H.ALL,Aa=>V.dirty(Aa));H.fields&&H.fields.zindex&&(C=H.source&&H.source[0])&&(C.mark.zdirty=!0)}});const y=new ia.Bounds,N=(C,H)=>Math.floor(Math.min(C,H)),z=(C,H)=>Math.ceil(Math.max(C,H));ab.inherits(ha,h.Transform,{transform(C,H){const V=H.dataflow;C.mark.items.forEach(Aa=>{if(C.layout){var O=C.layout;var la=Aa.items;for(var za=la.length,Ma=0,Pa,Ya,vb={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,
coltitle:null};Ma<za;++Ma)if(Pa=la[Ma],Ya=Pa.items,"group"===Pa.marktype)switch(Pa.role){case "axis":case "legend":case "title":break;case "row-header":vb.rowheaders.push(...Ya);break;case "row-footer":vb.rowfooters.push(...Ya);break;case "column-header":vb.colheaders.push(...Ya);break;case "column-footer":vb.colfooters.push(...Ya);break;case "row-title":vb.rowtitle=Ya[0];break;case "column-title":vb.coltitle=Ya[0];break;default:vb.marks.push(...Ya)}la=vb;Ya=la.marks;vb="flush"===O.bounds?fa:xa;za=
O.offset;var jb=O.columns||Ya.length,Tb=0>=jb?1:Math.ceil(Ya.length/jb),W=Tb*jb;Ma=ra(V,Ya,O);Ma.empty()&&Ma.set(0,0,0,0);if(la.rowheaders){Pa=ib(O.headerBand,"row",null);var Ea=Ra(V,la.rowheaders,Ya,jb,Tb,-ib(za,"rowHeader"),N,0,vb,"x1",0,jb,1,Pa)}if(la.colheaders){Pa=ib(O.headerBand,"column",null);var Lb=Ra(V,la.colheaders,Ya,jb,jb,-ib(za,"columnHeader"),N,1,vb,"y1",0,1,jb,Pa)}if(la.rowfooters){Pa=ib(O.footerBand,"row",null);var oc=Ra(V,la.rowfooters,Ya,jb,Tb,ib(za,"rowFooter"),z,0,vb,"x2",jb-1,
jb,1,Pa)}if(la.colfooters){Pa=ib(O.footerBand,"column",null);var $b=Ra(V,la.colfooters,Ya,jb,jb,ib(za,"columnFooter"),z,1,vb,"y2",W-jb,1,jb,Pa)}la.rowtitle&&(Pa=ib(O.titleAnchor,"row"),Ya=ib(za,"rowTitle"),Ya="end"===Pa?oc+Ya:Ea-Ya,Pa=ib(O.titleBand,"row",.5),Va(V,la.rowtitle,Ya,0,Ma,Pa));la.coltitle&&(Pa=ib(O.titleAnchor,"column"),Ya=ib(za,"columnTitle"),Ya="end"===Pa?$b+Ya:Lb-Ya,Pa=ib(O.titleBand,"column",.5),Va(V,la.coltitle,Ya,1,Ma,Pa))}na(V,Aa,C)});return La(C.mark.group)?H.reflow():H}});u.bound=
zb;u.identifier=ac;u.mark=mc;u.overlap=Ub;u.render=jc;u.viewlayout=ha})};
shadow$provide[36]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(29),ob(33),ob(21)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-scale","vega-util"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega,u.vega))})(this,function(u,h,ia,ab){function zb(R){h.Transform.call(this,null,R)}function Yb(R){h.Transform.call(this,null,R)}function ac(){return h.ingest({})}function Xb(R){const t=ab.fastmap().test(ba=>
ba.exit);t.lookup=ba=>t.get(R(ba));return t}function mc(R){h.Transform.call(this,null,R)}function Cb(R){h.Transform.call(this,[],R)}function Ub(R){h.Transform.call(this,{},R)}function jc(R,t,ba){R=+R;t=+t;ba=2>(Ca=arguments.length)?(t=R,R=0,1):3>Ca?1:+ba;for(var va=-1,Ca=Math.max(0,Math.ceil((t-R)/ba))|0,Sa=Array(Ca);++va<Ca;)Sa[va]=R+va*ba;return Sa}function Ba(R,t){t=0;for(let ba of R)if(ba=+ba)t+=ba;return t}function Za(R){h.Transform.call(this,null,R)}function wb(R,t,ba){R.prototype=t.prototype=
ba;ba.constructor=R}function ub(R,t){R=Object.create(R.prototype);for(var ba in t)R[ba]=t[ba];return R}function sb(){}function xb(){return this.rgb().formatHex()}function ib(){return this.rgb().formatRgb()}function ec(R){var t,ba;R=(R+"").trim().toLowerCase();return(t=qa.exec(R))?(ba=t[1].length,t=parseInt(t[1],16),6===ba?ra(t):3===ba?new Ra(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):8===ba?fa(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):4===ba?fa(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,
((t&15)<<4|t&15)/255):null):(t=Db.exec(R))?new Ra(t[1],t[2],t[3],1):(t=Ua.exec(R))?new Ra(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=yb.exec(R))?fa(t[1],t[2],t[3],t[4]):(t=Hb.exec(R))?fa(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Nb.exec(R))?Pb(t[1],t[2]/100,t[3]/100,1):(t=Zb.exec(R))?Pb(t[1],t[2]/100,t[3]/100,t[4]):ic.hasOwnProperty(R)?ra(ic[R]):"transparent"===R?new Ra(NaN,NaN,NaN,0):null}function ra(R){return new Ra(R>>16&255,R>>8&255,R&255,1)}function fa(R,t,ba,va){0>=va&&(R=t=ba=NaN);
return new Ra(R,t,ba,va)}function xa(R,t,ba,va){if(1===arguments.length){var Ca=R;Ca instanceof sb||(Ca=ec(Ca));Ca?(Ca=Ca.rgb(),Ca=new Ra(Ca.r,Ca.g,Ca.b,Ca.opacity)):Ca=new Ra}else Ca=new Ra(R,t,ba,null==va?1:va);return Ca}function Ra(R,t,ba,va){this.r=+R;this.g=+t;this.b=+ba;this.opacity=+va}function Va(){return`#${tb(this.r)}${tb(this.g)}${tb(this.b)}`}function Ga(){const R=hb(this.opacity);return`${1===R?"rgb(":"rgba("}${bb(this.r)}, ${bb(this.g)}, ${bb(this.b)}${1===R?")":`, ${R})`}`}function hb(R){return isNaN(R)?
1:Math.max(0,Math.min(1,R))}function bb(R){return Math.max(0,Math.min(255,Math.round(R)||0))}function tb(R){R=bb(R);return(16>R?"0":"")+R.toString(16)}function Pb(R,t,ba,va){0>=va?R=t=ba=NaN:0>=ba||1<=ba?R=t=NaN:0>=t&&(R=NaN);return new T(R,t,ba,va)}function eb(R){if(R instanceof T)return new T(R.h,R.s,R.l,R.opacity);R instanceof sb||(R=ec(R));if(!R)return new T;if(R instanceof T)return R;R=R.rgb();var t=R.r/255,ba=R.g/255,va=R.b/255,Ca=Math.min(t,ba,va),Sa=Math.max(t,ba,va),kb=NaN,Rb=Sa-Ca,Fb=(Sa+
Ca)/2;Rb?(kb=t===Sa?(ba-va)/Rb+6*(ba<va):ba===Sa?(va-t)/Rb+2:(t-ba)/Rb+4,Rb/=.5>Fb?Sa+Ca:2-Sa-Ca,kb*=60):Rb=0<Fb&&1>Fb?0:kb;return new T(kb,Rb,Fb,R.opacity)}function T(R,t,ba,va){this.h=+R;this.s=+t;this.l=+ba;this.opacity=+va}function Z(R){R=(R||0)%360;return 0>R?R+360:R}function ca(R){return Math.max(0,Math.min(1,R||0))}function ha(R,t,ba){return 255*(60>R?t+(ba-t)*R/60:180>R?ba:240>R?t+(ba-t)*(240-R)/60:t)}function La(R,t){return function(ba){return R+ba*t}}function na(R,t,ba){return R=Math.pow(R,
ba),t=Math.pow(t,ba)-R,ba=1/ba,function(va){return Math.pow(R+va*t,ba)}}function pa(R){return 1===(R=+R)?m:function(t,ba){return ba-t?na(t,ba,R):Bc(isNaN(t)?ba:t)}}function m(R,t){var ba=t-R;return ba?La(R,ba):Bc(isNaN(R)?t:R)}function E(R,t){t||(t=[]);var ba=R?Math.min(t.length,R.length):0,va=t.slice(),Ca;return function(Sa){for(Ca=0;Ca<ba;++Ca)va[Ca]=R[Ca]*(1-Sa)+t[Ca]*Sa;return va}}function L(R,t){var ba=t?t.length:0,va=R?Math.min(ba,R.length):0,Ca=Array(va),Sa=Array(ba),kb;for(kb=0;kb<va;++kb)Ca[kb]=
C(R[kb],t[kb]);for(;kb<ba;++kb)Sa[kb]=t[kb];return function(Rb){for(kb=0;kb<va;++kb)Sa[kb]=Ca[kb](Rb);return Sa}}function w(R,t){var ba=new Date;return R=+R,t=+t,function(va){return ba.setTime(R*(1-va)+t*va),ba}}function Q(R,t){return R=+R,t=+t,function(ba){return R*(1-ba)+t*ba}}function A(R,t){var ba={},va={},Ca;if(null===R||"object"!==typeof R)R={};if(null===t||"object"!==typeof t)t={};for(Ca in t)Ca in R?ba[Ca]=C(R[Ca],t[Ca]):va[Ca]=t[Ca];return function(Sa){for(Ca in ba)va[Ca]=ba[Ca](Sa);return va}}
function y(R){return function(){return R}}function N(R){return function(t){return R(t)+""}}function z(R,t){var ba=Vc.lastIndex=ma.lastIndex=0,va,Ca,Sa,kb=-1,Rb=[],Fb=[];R+="";for(t+="";(va=Vc.exec(R))&&(Ca=ma.exec(t));)(Sa=Ca.index)>ba&&(Sa=t.slice(ba,Sa),Rb[kb]?Rb[kb]+=Sa:Rb[++kb]=Sa),(va=va[0])===(Ca=Ca[0])?Rb[kb]?Rb[kb]+=Ca:Rb[++kb]=Ca:(Rb[++kb]=null,Fb.push({i:kb,x:Q(va,Ca)})),ba=ma.lastIndex;ba<t.length&&(Sa=t.slice(ba),Rb[kb]?Rb[kb]+=Sa:Rb[++kb]=Sa);return 2>Rb.length?Fb[0]?N(Fb[0].x):y(t):
(t=Fb.length,function(Jb){for(var Cc=0,Gc;Cc<t;++Cc)Rb[(Gc=Fb[Cc]).i]=Gc.x(Jb);return Rb.join("")})}function C(R,t){var ba=typeof t;if(null==t||"boolean"===ba)R=Bc(t);else{if("number"===ba)var va=Q;else"string"===ba?ba=(va=ec(t))?(t=va,jd):z:(t instanceof ec?va=jd:t instanceof Date?va=w:(va=t,va=!ArrayBuffer.isView(va)||va instanceof DataView?Array.isArray(t)?L:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?A:Q:E),ba=va),va=ba;R=va(R,t)}return R}function H(R,t){return R=+R,
t=+t,function(ba){return Math.round(R*(1-ba)+t*ba)}}function V(R){return ia.isContinuous(R)&&R!==ia.Sequential}function Aa(R){h.Transform.call(this,null,R);this.modified(!0)}function O(R,t,ba){ia.isLogarithmic(R)&&Math.abs(t.reduce((va,Ca)=>va+(0>Ca?-1:0<Ca?1:0),0))!==t.length&&ba.warn("Log scale domain includes zero: "+ab.stringValue(t));return t}function la(R,t,ba){return ab.isFunction(R)&&(t||ba)?ia.interpolateRange(R,za(t||[0,1],ba)):R}function za(R,t){return t?R.slice().reverse():R}function Ma(R){h.Transform.call(this,
null,R)}function Pa(R){h.Transform.call(this,null,R)}function Ya(R,t,ba,va,Ca){t=(t-R.sum)/2;for(var Sa=R.length,kb=0,Rb;kb<Sa;++kb)Rb=R[kb],Rb[va]=t,Rb[Ca]=t+=Math.abs(ba(Rb))}function vb(R,t,ba,va,Ca){t=1/R.sum;for(var Sa=0,kb=R.length,Rb=0,Fb=0,Jb;Rb<kb;++Rb)Jb=R[Rb],Jb[va]=Sa,Jb[Ca]=Sa=t*(Fb+=Math.abs(ba(Jb)))}function jb(R,t,ba,va,Ca){for(var Sa=t=0,kb=R.length,Rb=0,Fb,Jb;Rb<kb;++Rb)Jb=R[Rb],Fb=+ba(Jb),0>Fb?(Jb[va]=Sa,Jb[Ca]=Sa+=Fb):(Jb[va]=t,Jb[Ca]=t+=Fb)}function Tb(R,t,ba,va){var Ca=[],Sa=
Sc=>Sc(Jb),kb;if(null==t)Ca.push(R.slice());else{var Rb={};var Fb=0;for(kb=R.length;Fb<kb;++Fb){var Jb=R[Fb];var Cc=t.map(Sa);var Gc=Rb[Cc];Gc||(Rb[Cc]=Gc=[],Ca.push(Gc));Gc.push(Jb)}}Sa=Cc=0;for(R=Ca.length;Cc<R;++Cc){Gc=Ca[Cc];t=Fb=0;for(kb=Gc.length;Fb<kb;++Fb)t+=Math.abs(va(Gc[Fb]));Gc.sum=t;t>Sa&&(Sa=t);ba&&Gc.sort(ba)}Ca.max=Sa;return Ca}ab.inherits(zb,h.Transform,{transform(R,t){if(this.value&&!R.modified())return t.StopPropagation;var ba=t.dataflow.locale();t=t.fork(t.NO_SOURCE|t.NO_FIELDS);
var va=this.value,Ca=R.scale,Sa=ia.tickCount(Ca,null==R.count?R.values?R.values.length:10:R.count,R.minstep),kb=R.format||ia.tickFormat(ba,Ca,Sa,R.formatSpecifier,R.formatType,!!R.values),Rb=R.values?ia.validTicks(Ca,R.values,Sa):ia.tickValues(Ca,Sa);va&&(t.rem=va);va=Rb.map((Fb,Jb)=>h.ingest({index:Jb/(Rb.length-1||1),value:Fb,label:kb(Fb)}));R.extra&&va.length&&va.push(h.ingest({index:-1,extra:{value:va[0].value},label:""}));t.source=va;this.value=t.add=va;return t}});ab.inherits(Yb,h.Transform,
{transform(R,t){var ba=t.dataflow,va=t.fork(t.NO_SOURCE|t.NO_FIELDS),Ca=R.item||ac,Sa=R.key||h.tupleid,kb=this.value;ab.isArray(va.encode)&&(va.encode=null);kb&&(R.modified("key")||t.modified(Sa))&&ab.error("DataJoin does not support modified key function or fields.");kb||(t=t.addAll(),this.value=kb=Xb(Sa));t.visit(t.ADD,Rb=>{const Fb=Sa(Rb);let Jb=kb.get(Fb);Jb?Jb.exit?(kb.empty--,va.add.push(Jb)):va.mod.push(Jb):(Jb=Ca(Rb),kb.set(Fb,Jb),va.add.push(Jb));Jb.datum=Rb;Jb.exit=!1});t.visit(t.MOD,Rb=>
{var Fb=Sa(Rb);if(Fb=kb.get(Fb))Fb.datum=Rb,va.mod.push(Fb)});t.visit(t.REM,Rb=>{var Fb=Sa(Rb);Fb=kb.get(Fb);Rb!==Fb.datum||Fb.exit||(va.rem.push(Fb),Fb.exit=!0,++kb.empty)});t.changed(t.ADD_MOD)&&va.modifies("datum");(t.clean()||R.clean&&kb.empty>ba.cleanThreshold)&&ba.runAfter(kb.clean);return va}});ab.inherits(mc,h.Transform,{transform(R,t){var ba=t.fork(t.ADD_REM),va=R.mod||!1,Ca=R.encoders,Sa=t.encode;if(ab.isArray(Sa))if(ba.changed()||Sa.every(Gc=>Ca[Gc]))Sa=Sa[0],ba.encode=null;else return t.StopPropagation;
var kb="enter"===Sa,Rb=Ca.update||ab.falsy,Fb=Ca.enter||ab.falsy,Jb=Ca.exit||ab.falsy,Cc=(Sa&&!kb?Ca[Sa]:Rb)||ab.falsy;t.changed(t.ADD)&&(t.visit(t.ADD,Gc=>{Fb(Gc,R);Rb(Gc,R)}),ba.modifies(Fb.output),ba.modifies(Rb.output),Cc!==ab.falsy&&Cc!==Rb&&(t.visit(t.ADD,Gc=>{Cc(Gc,R)}),ba.modifies(Cc.output)));t.changed(t.REM)&&Jb!==ab.falsy&&(t.visit(t.REM,Gc=>{Jb(Gc,R)}),ba.modifies(Jb.output));if(kb||Cc!==ab.falsy)Sa=t.MOD|(R.modified()?t.REFLOW:0),kb?(t.visit(Sa,Gc=>{const Sc=Fb(Gc,R)||va;(Cc(Gc,R)||Sc)&&
ba.mod.push(Gc)}),ba.mod.length&&ba.modifies(Fb.output)):t.visit(Sa,Gc=>{(Cc(Gc,R)||va)&&ba.mod.push(Gc)}),ba.mod.length&&ba.modifies(Cc.output);return ba.changed()?ba:t.StopPropagation}});ab.inherits(Cb,h.Transform,{transform(R,t){if(null!=this.value&&!R.modified())return t.StopPropagation;var ba=t.dataflow.locale(),va=t.fork(t.NO_SOURCE|t.NO_FIELDS),Ca=this.value,Sa=R.type||ia.SymbolLegend,kb=R.scale,Rb=+R.limit,Fb=ia.tickCount(kb,null==R.count?5:R.count,R.minstep),Jb=!!R.values||Sa===ia.SymbolLegend,
Cc=R.format||ia.labelFormat(ba,kb,Fb,Sa,R.formatSpecifier,R.formatType,Jb),Gc=R.values||ia.labelValues(kb,Fb),Sc;Ca&&(va.rem=Ca);if(Sa===ia.SymbolLegend){if(Rb&&Gc.length>Rb){t.dataflow.warn("Symbol legend count exceeds limit, filtering items.");Ca=Gc.slice(0,Rb-1);var vd=!0}else Ca=Gc;if(ab.isFunction(Sc=R.size)){R.values||0!==kb(Ca[0])||(Ca=Ca.slice(1));var od=Ca.reduce((Cd,Dd)=>Math.max(Cd,Sc(Dd,R)),0)}else Sc=ab.constant(od=Sc||8);Ca=Ca.map((Cd,Dd)=>h.ingest({index:Dd,label:Cc(Cd,Dd,Ca),value:Cd,
offset:od,size:Sc(Cd,R)}));vd&&(vd=Gc[Ca.length],Ca.push(h.ingest({index:Ca.length,label:`\u2026${Gc.length-Ca.length} entries`,value:vd,offset:od,size:Sc(vd,R)})))}else if(Sa===ia.GradientLegend){t=kb.domain();var gd=ia.scaleFraction(kb,t[0],ab.peek(t));3>Gc.length&&!R.values&&t[0]!==ab.peek(t)&&(Gc=[t[0],ab.peek(t)]);Ca=Gc.map((Cd,Dd)=>h.ingest({index:Dd,label:Cc(Cd,Dd,Gc),value:Cd,perc:gd(Cd)}))}else Sc=Gc.length-1,gd=ia.labelFraction(kb),Ca=Gc.map((Cd,Dd)=>h.ingest({index:Dd,label:Cc(Cd,Dd,Gc),
value:Cd,perc:Dd?gd(Cd):0,perc2:Dd===Sc?1:gd(Gc[Dd+1])}));va.source=Ca;this.value=va.add=Ca;return va}});const W=R=>R.source.x,Ea=R=>R.source.y,Lb=R=>R.target.x,oc=R=>R.target.y;Ub.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field","default":"source.x"},{name:"sourceY",type:"field","default":"source.y"},{name:"targetX",type:"field","default":"target.x"},{name:"targetY",type:"field","default":"target.y"},{name:"orient",type:"enum","default":"vertical",values:["horizontal",
"vertical","radial"]},{name:"shape",type:"enum","default":"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string","default":"path"}]};ab.inherits(Ub,h.Transform,{transform(R,t){var ba=R.sourceX||W,va=R.sourceY||Ea,Ca=R.targetX||Lb,Sa=R.targetY||oc,kb=R.as||"path",Rb=R.shape||"line",Fb=xc.get(Rb+"-"+(R.orient||"vertical"))||xc.get(Rb);Fb||ab.error("LinkPath unsupported type: "+R.shape+(R.orient?"-"+R.orient:""));t.visit(t.SOURCE,Jb=>{Jb[kb]=
Fb(ba(Jb),va(Jb),Ca(Jb),Sa(Jb))});return t.reflow(R.modified()).modifies(kb)}});const $b=(R,t,ba,va)=>"M"+R+","+t+"L"+ba+","+va,Mb=(R,t,ba,va)=>{var Ca=ba-R,Sa=va-t,kb=Math.hypot(Ca,Sa)/2;return"M"+R+","+t+"A"+kb+","+kb+" "+180*Math.atan2(Sa,Ca)/Math.PI+" 0 1 "+ba+","+va},Qb=(R,t,ba,va)=>{var Ca=ba-R;const Sa=va-t,kb=.2*(Ca+Sa);Ca=.2*(Sa-Ca);return"M"+R+","+t+"C"+(R+kb)+","+(t+Ca)+" "+(ba+Ca)+","+(va-kb)+" "+ba+","+va},xc=ab.fastmap({line:$b,"line-radial":(R,t,ba,va)=>$b(t*Math.cos(R),t*Math.sin(R),
va*Math.cos(ba),va*Math.sin(ba)),arc:Mb,"arc-radial":(R,t,ba,va)=>Mb(t*Math.cos(R),t*Math.sin(R),va*Math.cos(ba),va*Math.sin(ba)),curve:Qb,"curve-radial":(R,t,ba,va)=>Qb(t*Math.cos(R),t*Math.sin(R),va*Math.cos(ba),va*Math.sin(ba)),"orthogonal-horizontal":(R,t,ba,va)=>"M"+R+","+t+"V"+va+"H"+ba,"orthogonal-vertical":(R,t,ba,va)=>"M"+R+","+t+"H"+ba+"V"+va,"orthogonal-radial":(R,t,ba,va)=>{const Ca=Math.cos(ba),Sa=Math.sin(ba);return"M"+t*Math.cos(R)+","+t*Math.sin(R)+"A"+t+","+t+" 0 0,"+((Math.abs(ba-
R)>Math.PI?ba<=R:ba>R)?1:0)+" "+t*Ca+","+t*Sa+"L"+va*Ca+","+va*Sa},"diagonal-horizontal":(R,t,ba,va)=>{const Ca=(R+ba)/2;return"M"+R+","+t+"C"+Ca+","+t+" "+Ca+","+va+" "+ba+","+va},"diagonal-vertical":(R,t,ba,va)=>{const Ca=(t+va)/2;return"M"+R+","+t+"C"+R+","+Ca+" "+ba+","+Ca+" "+ba+","+va},"diagonal-radial":(R,t,ba,va)=>{const Ca=Math.cos(R);R=Math.sin(R);const Sa=Math.cos(ba);ba=Math.sin(ba);const kb=(t+va)/2;return"M"+t*Ca+","+t*R+"C"+kb*Ca+","+kb*R+" "+kb*Sa+","+kb*ba+" "+va*Sa+","+va*ba}});
Za.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number","default":0},{name:"endAngle",type:"number","default":6.283185307179586},{name:"sort",type:"boolean","default":!1},{name:"as",type:"string",array:!0,length:2,"default":["startAngle","endAngle"]}]};ab.inherits(Za,h.Transform,{transform(R,t){var ba=R.as||["startAngle","endAngle"],va=ba[0],Ca=ba[1],Sa=R.startAngle||0,kb=null!=R.endAngle?R.endAngle:2*Math.PI,Rb=t.source,Fb=Rb.map(R.field||
ab.one),Jb=Fb.length,Cc=Sa;Sa=(kb-Sa)/Ba(Fb);kb=jc(Jb);var Gc;R.sort&&kb.sort((od,gd)=>Fb[od]-Fb[gd]);for(Gc=0;Gc<Jb;++Gc){var Sc=Fb[kb[Gc]];var vd=Rb[kb[Gc]];vd[va]=Cc;vd[Ca]=Cc+=Sc*Sa}this.value=Fb;return t.reflow(R.modified()).modifies(ba)}});var ed=1/.7,qa=/^#([0-9a-f]{3,8})$/,Db=RegExp("^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$"),Ua=RegExp("^rgb\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),
yb=RegExp("^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),Hb=RegExp("^rgba\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),Nb=RegExp("^hsl\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),
Zb=RegExp("^hsla\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),ic={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,
cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,
dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,
lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,
mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,
seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wb(sb,ec,{copy(R){return Object.assign(new this.constructor,this,R)},displayable(){return this.rgb().displayable()},hex:xb,formatHex:xb,
formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return eb(this).formatHsl()},formatRgb:ib,toString:ib});wb(Ra,xa,ub(sb,{brighter(R){R=null==R?ed:Math.pow(ed,R);return new Ra(this.r*R,this.g*R,this.b*R,this.opacity)},darker(R){R=null==R?.7:Math.pow(.7,R);return new Ra(this.r*R,this.g*R,this.b*R,this.opacity)},rgb(){return this},clamp(){return new Ra(bb(this.r),bb(this.g),bb(this.b),hb(this.opacity))},displayable(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&
-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:Va,formatHex:Va,formatHex8:function(){return`#${tb(this.r)}${tb(this.g)}${tb(this.b)}${tb(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ga,toString:Ga}));wb(T,function(R,t,ba,va){return 1===arguments.length?eb(R):new T(R,t,ba,null==va?1:va)},ub(sb,{brighter(R){R=null==R?ed:Math.pow(ed,R);return new T(this.h,this.s,this.l*R,this.opacity)},darker(R){R=null==R?.7:Math.pow(.7,R);return new T(this.h,this.s,this.l*R,this.opacity)},
rgb(){var R=this.h%360+360*(0>this.h),t=isNaN(R)||isNaN(this.s)?0:this.s,ba=this.l;t=ba+(.5>ba?ba:1-ba)*t;ba=2*ba-t;return new Ra(ha(240<=R?R-240:R+120,ba,t),ha(R,ba,t),ha(120>R?R+240:R-120,ba,t),this.opacity)},clamp(){return new T(Z(this.h),ca(this.s),ca(this.l),hb(this.opacity))},displayable(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl(){const R=hb(this.opacity);return`${1===R?"hsl(":"hsla("}${Z(this.h)}, ${100*ca(this.s)}%, ${100*
ca(this.l)}%${1===R?")":`, ${R})`}`}}));var Bc=R=>()=>R,jd=function ba(t){function va(Sa,kb){var Rb=Ca((Sa=xa(Sa)).r,(kb=xa(kb)).r),Fb=Ca(Sa.g,kb.g),Jb=Ca(Sa.b,kb.b),Cc=m(Sa.opacity,kb.opacity);return function(Gc){Sa.r=Rb(Gc);Sa.g=Fb(Gc);Sa.b=Jb(Gc);Sa.opacity=Cc(Gc);return Sa+""}}var Ca=pa(t);va.gamma=ba;return va}(1),Vc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ma=new RegExp(Vc.source,"g");const Ha=ab.toSet("set modified clear type scheme schemeExtent schemeCount domain domainMin domainMid domainMax domainRaw domainImplicit nice zero bins range rangeStep round reverse interpolate interpolateGamma".split(" "));
ab.inherits(Aa,h.Transform,{transform(t,ba){var va=ba.dataflow,Ca=this.value;var Sa=t.type;var kb="";if(Sa===ia.Sequential)Sa=ia.Sequential+"-"+ia.Linear;else{var Rb=t.type;ia.isContinuous(Rb)&&Rb!==ia.Time&&Rb!==ia.UTC&&(t.scheme||t.range&&t.range.length&&t.range.every(ab.isString))&&(kb=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(null!=t.domainMid):0,kb=2===kb?ia.Sequential+"-":3===kb?ia.Diverging+"-":"");Sa=(kb+Sa||ia.Linear).toLowerCase()}Ca&&Sa===Ca.type||(this.value=Ca=ia.scale(Sa)());
for(Sa in t)Ha[Sa]||"padding"===Sa&&V(Ca.type)||(ab.isFunction(Ca[Sa])?Ca[Sa](t[Sa]):va.warn("Unsupported scale property: "+Sa));kb=Sa=Ca;(Rb=t.domainRaw)?(Ca.domain(O(Ca.type,Rb,va)),Rb=Rb.length):Rb=-1;if(-1<Rb)va=Rb;else{var Fb=t.domain;Rb=Ca.type;var Jb;!(Jb=t.zero)&&(Jb=void 0===t.zero)&&(Jb=Ca.type,Jb=!Ca.bins&&(Jb===ia.Linear||Jb===ia.Pow||Jb===ia.Sqrt));var Cc=Jb;if(Fb){if(Cc||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)if(Jb=(Fb=Fb.slice()).length-1||1,Cc&&(0<Fb[0]&&(Fb[0]=0),
0>Fb[Jb]&&(Fb[Jb]=0)),null!=t.domainMin&&(Fb[0]=t.domainMin),null!=t.domainMax&&(Fb[Jb]=t.domainMax),null!=t.domainMid){Cc=t.domainMid;var Gc=Cc>Fb[Jb]?Jb+1:Cc<Fb[0]?0:Jb;Gc!==Jb&&va.warn("Scale domainMid exceeds domain min or max.",Cc);Fb.splice(Gc,0,Cc)}if(V(Rb)&&t.padding&&Fb[0]!==ab.peek(Fb)){var Sc=t.range;Gc=t.padding;Jb=t.exponent;Cc=t.constant;Sc=Math.abs(ab.peek(Sc)-Sc[0]);Gc=Sc/(Sc-2*Gc);Jb=Rb===ia.Log?ab.zoomLog(Fb,null,Gc):Rb===ia.Sqrt?ab.zoomPow(Fb,null,Gc,.5):Rb===ia.Pow?ab.zoomPow(Fb,
null,Gc,Jb||1):Rb===ia.Symlog?ab.zoomSymlog(Fb,null,Gc,Cc||1):ab.zoomLinear(Fb,null,Gc);Fb=Fb.slice();Fb[0]=Jb[0];Fb[Fb.length-1]=Jb[1]}Ca.domain(O(Rb,Fb,va));Rb===ia.Ordinal&&Ca.unknown(t.domainImplicit?ia.scaleImplicit:void 0);t.nice&&Ca.nice&&Ca.nice(!0!==t.nice&&ia.tickCount(Ca,t.nice)||null);va=Fb.length}else va=0}(Rb=t.bins)&&!ab.isArray(Rb)&&(Fb=kb.domain(),Ca=Fb[0],Fb=ab.peek(Fb),Jb=Rb.step,Cc=null==Rb.start?Ca:Rb.start,Rb=null==Rb.stop?Fb:Rb.stop,Jb||ab.error("Scale bins parameter missing step property."),
Cc<Ca&&(Cc=Jb*Math.ceil(Ca/Jb)),Rb>Fb&&(Rb=Jb*Math.floor(Fb/Jb)),Rb=jc(Cc,Rb+Jb/2,Jb));Rb?kb.bins=Rb:kb.bins&&delete kb.bins;kb.type===ia.BinOrdinal&&(Rb?t.domain||t.domainRaw||(kb.domain(Rb),va=Rb.length):kb.bins=kb.domain());Ca=va;a:{kb=Sa.type;va=t.round||!1;Rb=t.range;if(null!=t.rangeStep)kb!==ia.Band&&kb!==ia.Point&&ab.error("Only band and point scales support rangeStep."),Rb=[0,t.rangeStep*ia.bandSpace(Ca,kb===ia.Point?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0,(null!=t.paddingOuter?
t.paddingOuter:t.padding)||0)];else if(t.scheme&&(Rb=t.schemeExtent,ab.isArray(t.scheme)?Fb=ia.interpolateColors(t.scheme,t.interpolate,t.interpolateGamma):(Fb=t.scheme.toLowerCase(),(Fb=ia.scheme(Fb))||ab.error(`Unrecognized scheme name: ${t.scheme}`)),Ca=kb===ia.Threshold?Ca+1:kb===ia.BinOrdinal?Ca-1:kb===ia.Quantile||kb===ia.Quantize?+t.schemeCount||5:Ca,Rb=ia.isInterpolating(kb)?la(Fb,Rb,t.reverse):ab.isFunction(Fb)?ia.quantizeInterpolator(la(Fb,Rb),Ca):kb===ia.Ordinal?Fb:Fb.slice(0,Ca),ab.isFunction(Rb)))if(Sa.interpolator){Sa.interpolator(Rb);
break a}else ab.error(`Scale type ${kb} does not support interpolating color schemes.`);Rb&&ia.isInterpolating(kb)?Sa.interpolator(ia.interpolateColors(za(Rb,t.reverse),t.interpolate,t.interpolateGamma)):(Rb&&t.interpolate&&Sa.interpolate?Sa.interpolate(ia.interpolate(t.interpolate,t.interpolateGamma)):ab.isFunction(Sa.round)?Sa.round(va):ab.isFunction(Sa.rangeRound)&&Sa.interpolate(va?H:C),Rb&&Sa.range(za(Rb,t.reverse)))}return ba.fork(ba.NO_SOURCE|ba.NO_FIELDS)}});ab.inherits(Ma,h.Transform,{transform(t,
ba){const va=t.modified("sort")||ba.changed(ba.ADD)||ba.modified(t.sort.fields)||ba.modified("datum");va&&ba.source.sort(h.stableCompare(t.sort));this.modified(va);return ba}});const gb=["y0","y1"];Pa.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum","default":"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,"default":gb}]};ab.inherits(Pa,
h.Transform,{transform(t,ba){var va=t.as||gb,Ca=va[0],Sa=va[1],kb=h.stableCompare(t.sort),Rb=t.field||ab.one,Fb="center"===t.offset?Ya:"normalize"===t.offset?vb:jb,Jb;kb=Tb(ba.source,t.groupby,kb,Rb);var Cc=0;var Gc=kb.length;for(Jb=kb.max;Cc<Gc;++Cc)Fb(kb[Cc],Jb,Rb,Ca,Sa);return ba.reflow(t.modified()).modifies(va)}});u.axisticks=zb;u.datajoin=Yb;u.encode=mc;u.legendentries=Cb;u.linkpath=Ub;u.pie=Za;u.scale=Aa;u.sortitems=Ma;u.stack=Pa})};
shadow$provide[37]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(33)):"function"===typeof define&&define.amd?define(["exports","vega-scale"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega))})(this,function(u,h){function*ia(oa){for(const l of oa)yield*l}function ab(oa){return 1<oa?0:-1>oa?Jb:Math.acos(oa)}function zb(oa){return 1<oa?Cc:-1>oa?-Cc:Math.asin(oa)}function Yb(){}function ac(oa,l){if(oa&&bc.hasOwnProperty(oa.type))bc[oa.type](oa,
l)}function Xb(oa,l,q){var J=-1;q=oa.length-q;for(l.lineStart();++J<q;){var ja=oa[J];l.point(ja[0],ja[1],ja[2])}l.lineEnd()}function mc(oa,l){var q=-1,J=oa.length;for(l.polygonStart();++q<J;)Xb(oa[q],l,1);l.polygonEnd()}function Cb(oa,l){if(oa&&Bb.hasOwnProperty(oa.type))Bb[oa.type](oa,l);else ac(oa,l)}function Ub(oa){return[Dd(oa[1],oa[0]),zb(oa[2])]}function jc(oa){var l=oa[0];oa=oa[1];var q=rd(oa);return[q*rd(l),q*K(l),K(oa)]}function Ba(oa,l){return oa[0]*l[0]+oa[1]*l[1]+oa[2]*l[2]}function Za(oa,
l){return[oa[1]*l[2]-oa[2]*l[1],oa[2]*l[0]-oa[0]*l[2],oa[0]*l[1]-oa[1]*l[0]]}function wb(oa,l){oa[0]+=l[0];oa[1]+=l[1];oa[2]+=l[2]}function ub(oa,l){return[oa[0]*l,oa[1]*l,oa[2]*l]}function sb(oa){var l=Ka(oa[0]*oa[0]+oa[1]*oa[1]+oa[2]*oa[2]);oa[0]/=l;oa[1]/=l;oa[2]/=l}function xb(oa,l){function q(J,ja){return J=oa(J,ja),l(J[0],J[1])}oa.invert&&l.invert&&(q.invert=function(J,ja){return J=l.invert(J,ja),J&&oa.invert(J[0],J[1])});return q}function ib(oa,l){gd(oa)>Jb&&(oa-=Math.round(oa/Sc)*Sc);return[oa,
l]}function ec(oa,l,q){return(oa%=Sc)?l||q?xb(fa(oa),xa(l,q)):fa(oa):l||q?xa(l,q):ib}function ra(oa){return function(l,q){l+=oa;gd(l)>Jb&&(l-=Math.round(l/Sc)*Sc);return[l,q]}}function fa(oa){var l=ra(oa);l.invert=ra(-oa);return l}function xa(oa,l){function q(Ia,rb){var nb=rd(rb),tc=rd(Ia)*nb;Ia=K(Ia)*nb;rb=K(rb);nb=rb*J+tc*ja;return[Dd(Ia*Da-nb*Qa,tc*J-rb*ja),zb(nb*Da+Ia*Qa)]}var J=rd(oa),ja=K(oa),Da=rd(l),Qa=K(l);q.invert=function(Ia,rb){var nb=rd(rb),tc=rd(Ia)*nb;Ia=K(Ia)*nb;rb=K(rb);nb=rb*Da-
Ia*Qa;return[Dd(Ia*Da+rb*Qa,tc*J+nb*ja),zb(nb*J-tc*ja)]};return q}function Ra(oa){function l(q){q=oa(q[0]*od,q[1]*od);return q[0]*=vd,q[1]*=vd,q}oa=ec(oa[0]*od,oa[1]*od,2<oa.length?oa[2]*od:0);l.invert=function(q){q=oa.invert(q[0]*od,q[1]*od);return q[0]*=vd,q[1]*=vd,q};return l}function Va(oa,l){l=jc(l);l[0]-=oa;sb(l);oa=ab(-l[1]);return((0>-l[2]?-oa:oa)+Sc-1E-6)%Sc}function Ga(){var oa=[],l;return{point:function(q,J,ja){l.push([q,J,ja])},lineStart:function(){oa.push(l=[])},lineEnd:Yb,rejoin:function(){1<
oa.length&&oa.push(oa.pop().concat(oa.shift()))},result:function(){var q=oa;oa=[];l=null;return q}}}function hb(oa,l){return 1E-6>gd(oa[0]-l[0])&&1E-6>gd(oa[1]-l[1])}function bb(oa,l,q,J){this.x=oa;this.z=l;this.o=q;this.e=J;this.v=!1;this.n=this.p=null}function tb(oa,l,q,J,ja){var Da=[],Qa=[];oa.forEach(function(wc){if(!(0>=(zc=wc.length-1))){var zc,yc=wc[0],Rc=wc[zc];if(hb(yc,Rc)){if(!yc[2]&&!Rc[2]){ja.lineStart();for(Ia=0;Ia<zc;++Ia)ja.point((yc=wc[Ia])[0],yc[1]);ja.lineEnd();return}Rc[0]+=2E-6}Da.push(zc=
new bb(yc,wc,null,!0));Qa.push(zc.o=new bb(yc,null,zc,!1));Da.push(zc=new bb(Rc,wc,null,!1));Qa.push(zc.o=new bb(Rc,null,zc,!0))}});if(Da.length){Qa.sort(l);Pb(Da);Pb(Qa);var Ia=0;for(oa=Qa.length;Ia<oa;++Ia)Qa[Ia].e=q=!q;q=Da[0];for(var rb;;){for(var nb=q,tc=!0;nb.v;)if((nb=nb.n)===q)return;l=nb.z;ja.lineStart();do{nb.v=nb.o.v=!0;if(nb.e){if(tc)for(Ia=0,oa=l.length;Ia<oa;++Ia)ja.point((rb=l[Ia])[0],rb[1]);else J(nb.x,nb.n.x,1,ja);nb=nb.n}else{if(tc)for(l=nb.p.z,Ia=l.length-1;0<=Ia;--Ia)ja.point((rb=
l[Ia])[0],rb[1]);else J(nb.x,nb.p.x,-1,ja);nb=nb.p}nb=nb.o;l=nb.z;tc=!tc}while(!nb.v);ja.lineEnd()}}}function Pb(oa){if(l=oa.length){for(var l,q=0,J=oa[0],ja;++q<l;)J.n=ja=oa[q],ja.p=J,J=ja;J.n=ja=oa[0];ja.p=J}}function eb(oa){return gd(oa[0])<=Jb?oa[0]:ua(oa[0])*((gd(oa[0])+Jb)%Sc-Jb)}function T(oa,l,q,J){return function(ja){function Da(qc,Fd){oa(qc,Fd)&&ja.point(qc,Fd)}function Qa(qc,Fd){zc.point(qc,Fd)}function Ia(){Ud.point=Qa;zc.lineStart()}function rb(){Ud.point=Da;zc.lineEnd()}function nb(qc,
Fd){Ld.push([qc,Fd]);Rc.point(qc,Fd)}function tc(){Rc.lineStart();Ld=[]}function wc(){nb(Ld[0][0],Ld[0][1]);Rc.lineEnd();var qc=Rc.clean(),Fd=yc.result(),Be=Fd.length,te;Ld.pop();Td.push(Ld);Ld=null;if(Be)if(qc&1){if(Be=Fd[0],0<(Fd=Be.length-1)){fd||(ja.polygonStart(),fd=!0);ja.lineStart();for(qc=0;qc<Fd;++qc)ja.point((te=Be[qc])[0],te[1]);ja.lineEnd()}}else 1<Be&&qc&2&&Fd.push(Fd.pop().concat(Fd.shift())),Ad.push(Fd.filter(Z))}var zc=l(ja),yc=Ga(),Rc=l(yc),fd=!1,Td,Ad,Ld,Ud={point:Da,lineStart:Ia,
lineEnd:rb,polygonStart:function(){Ud.point=nb;Ud.lineStart=tc;Ud.lineEnd=wc;Ad=[];Td=[]},polygonEnd:function(){Ud.point=Da;Ud.lineStart=Ia;Ud.lineEnd=rb;Ad=Array.from(ia(Ad));var qc=Td;var Fd=eb(J),Be=J[1],te=K(Be),ke=[K(Fd),-rd(Fd),0],Qd=0,Od=0,xe=new Fb;1===te?Be=Cc+1E-6:-1===te&&(Be=-Cc-1E-6);te=0;for(var Fe=qc.length;te<Fe;++te)if(Ne=(re=qc[te]).length){var re,Ne,hd=re[Ne-1],ve=eb(hd),ff=hd[1]/2+Gc,lf=K(ff),Dg=rd(ff);for(ff=0;ff<Ne;++ff,ve=Of,lf=bg,Dg=gf,hd=vf){var vf=re[ff],Of=eb(vf);gf=vf[1]/
2+Gc;var bg=K(gf),gf=rd(gf),Re=Of-ve,cg=0<=Re?1:-1,Tg=cg*Re,Bf=Tg>Jb;lf*=bg;xe.add(Dd(lf*cg*K(Tg),Dg*gf+lf*rd(Tg)));Qd+=Bf?Re+cg*Sc:Re;Bf^ve>=Fd^Of>=Fd&&(hd=Za(jc(hd),jc(vf)),sb(hd),ve=Za(ke,hd),sb(ve),ve=(Bf^0<=Re?-1:1)*zb(ve[2]),Be>ve||Be===ve&&(hd[0]||hd[1]))&&(Od+=Bf^0<=Re?1:-1)}}qc=(-1E-6>Qd||1E-6>Qd&&-1E-12>xe)^Od&1;Ad.length?(fd||(ja.polygonStart(),fd=!0),tb(Ad,ca,qc,q,ja)):qc&&(fd||(ja.polygonStart(),fd=!0),ja.lineStart(),q(null,null,1,ja),ja.lineEnd());fd&&(ja.polygonEnd(),fd=!1);Ad=Td=null},
sphere:function(){ja.polygonStart();ja.lineStart();q(null,null,1,ja);ja.lineEnd();ja.polygonEnd()}};return Ud}}function Z(oa){return 1<oa.length}function ca(oa,l){return(0>(oa=oa.x)[0]?oa[1]-Cc-1E-6:Cc-oa[1])-(0>(l=l.x)[0]?l[1]-Cc-1E-6:Cc-l[1])}function ha(oa){function l(rb,nb){return rd(rb)*rd(nb)>ja}function q(rb,nb,tc){var wc=jc(rb),zc=jc(nb),yc=[1,0,0];zc=Za(wc,zc);var Rc=Ba(zc,zc);wc=zc[0];var fd=Rc-wc*wc;if(!fd)return!tc&&rb;Rc=ja*Rc/fd;fd=-ja*wc/fd;wc=Za(yc,zc);yc=ub(yc,Rc);zc=ub(zc,fd);wb(yc,
zc);zc=Ba(yc,wc);Rc=Ba(wc,wc);fd=zc*zc-Rc*(Ba(yc,yc)-1);if(!(0>fd)){var Td=Ka(fd);fd=ub(wc,(-zc-Td)/Rc);wb(fd,yc);fd=Ub(fd);if(!tc)return fd;tc=rb[0];var Ad=nb[0];rb=rb[1];nb=nb[1];if(Ad<tc){var Ld=tc;tc=Ad;Ad=Ld}var Ud=Ad-tc,qc=1E-6>gd(Ud-Jb);!qc&&nb<rb&&(Ld=rb,rb=nb,nb=Ld);if(qc||1E-6>Ud?qc?0<rb+nb^fd[1]<(1E-6>gd(fd[0]-tc)?rb:nb):rb<=fd[1]&&fd[1]<=nb:Ud>Jb^(tc<=fd[0]&&fd[0]<=Ad))return nb=ub(wc,(-zc+Td)/Rc),wb(nb,yc),[fd,Ub(nb)]}}function J(rb,nb){var tc=Qa?oa:Jb-oa,wc=0;rb<-tc?wc|=1:rb>tc&&(wc|=
2);nb<-tc?wc|=4:nb>tc&&(wc|=8);return wc}var ja=rd(oa),Da=6*od,Qa=0<ja,Ia=1E-6<gd(ja);return T(l,function(rb){var nb,tc,wc,zc,yc;return{lineStart:function(){zc=wc=!1;yc=1},point:function(Rc,fd){var Td=[Rc,fd],Ad=l(Rc,fd);fd=Qa?Ad?0:J(Rc,fd):Ad?J(Rc+(0>Rc?Jb:-Jb),fd):0;!nb&&(zc=wc=Ad)&&rb.lineStart();Ad!==wc&&(Rc=q(nb,Td),!Rc||hb(nb,Rc)||hb(Td,Rc))&&(Td[2]=1);if(Ad!==wc)yc=0,Ad?(rb.lineStart(),Rc=q(Td,nb),rb.point(Rc[0],Rc[1])):(Rc=q(nb,Td),rb.point(Rc[0],Rc[1],2),rb.lineEnd()),nb=Rc;else if(Ia&&nb&&
Qa^Ad){var Ld;fd&tc||!(Ld=q(Td,nb,!0))||(yc=0,Qa?(rb.lineStart(),rb.point(Ld[0][0],Ld[0][1]),rb.point(Ld[1][0],Ld[1][1]),rb.lineEnd()):(rb.point(Ld[1][0],Ld[1][1]),rb.lineEnd(),rb.lineStart(),rb.point(Ld[0][0],Ld[0][1],3)))}!Ad||nb&&hb(nb,Td)||rb.point(Td[0],Td[1]);nb=Td;wc=Ad;tc=fd},lineEnd:function(){wc&&rb.lineEnd();nb=null},clean:function(){return yc|(zc&&wc)<<1}}},function(rb,nb,tc,wc){var zc=rb;if(Da){rb=rd(oa);var yc=K(oa),Rc=tc*Da;if(null==zc)zc=oa+tc*Sc,nb=oa-Rc/2;else if(zc=Va(rb,zc),nb=
Va(rb,nb),0<tc?zc<nb:zc>nb)zc+=tc*Sc;for(var fd=zc;0<tc?fd>nb:fd<nb;fd-=Rc)zc=Ub([rb,-yc*rd(fd),-yc*K(fd)]),wc.point(zc[0],zc[1])}},Qa?[0,-oa]:[-Jb,oa-Jb])}function La(oa,l,q,J,ja,Da){var Qa=oa[0],Ia=oa[1],rb=0,nb=1,tc=l[0]-Qa,wc=l[1]-Ia;q-=Qa;if(tc||!(0<q)){q/=tc;if(0>tc){if(q<rb)return;q<nb&&(nb=q)}else if(0<tc){if(q>nb)return;q>rb&&(rb=q)}q=ja-Qa;if(tc||!(0>q)){q/=tc;if(0>tc){if(q>nb)return;q>rb&&(rb=q)}else if(0<tc){if(q<rb)return;q<nb&&(nb=q)}q=J-Ia;if(wc||!(0<q)){q/=wc;if(0>wc){if(q<rb)return;
q<nb&&(nb=q)}else if(0<wc){if(q>nb)return;q>rb&&(rb=q)}q=Da-Ia;if(wc||!(0>q)){q/=wc;if(0>wc){if(q>nb)return;q>rb&&(rb=q)}else if(0<wc){if(q<rb)return;q<nb&&(nb=q)}0<rb&&(oa[0]=Qa+rb*tc,oa[1]=Ia+rb*wc);1>nb&&(l[0]=Qa+nb*tc,l[1]=Ia+nb*wc);return!0}}}}}function na(oa,l,q,J){function ja(rb,nb,tc,wc){var zc=0,yc=0;if(null==rb||(zc=Da(rb,tc))!==(yc=Da(nb,tc))||0>Ia(rb,nb)^0<tc){do wc.point(0===zc||3===zc?oa:q,1<zc?J:l);while((zc=(zc+tc+4)%4)!==yc)}else wc.point(nb[0],nb[1])}function Da(rb,nb){return 1E-6>
gd(rb[0]-oa)?0<nb?0:3:1E-6>gd(rb[0]-q)?0<nb?2:1:1E-6>gd(rb[1]-l)?0<nb?1:0:0<nb?3:2}function Qa(rb,nb){return Ia(rb.x,nb.x)}function Ia(rb,nb){var tc=Da(rb,1),wc=Da(nb,1);return tc!==wc?tc-wc:0===tc?nb[1]-rb[1]:1===tc?rb[0]-nb[0]:2===tc?rb[1]-nb[1]:nb[0]-rb[0]}return function(rb){function nb(Qd,Od){oa<=Qd&&Qd<=q&&l<=Od&&Od<=J&&wc.point(Qd,Od)}function tc(Qd,Od){var xe=oa<=Qd&&Qd<=q&&l<=Od&&Od<=J;Rc&&fd.push([Qd,Od]);if(Be)Td=Qd,Ad=Od,Ld=xe,Be=!1,xe&&(wc.lineStart(),wc.point(Qd,Od));else if(xe&&Fd)wc.point(Qd,
Od);else{var Fe=[Ud=Math.max(-1E9,Math.min(1E9,Ud)),qc=Math.max(-1E9,Math.min(1E9,qc))],re=[Qd=Math.max(-1E9,Math.min(1E9,Qd)),Od=Math.max(-1E9,Math.min(1E9,Od))];La(Fe,re,oa,l,q,J)?(Fd||(wc.lineStart(),wc.point(Fe[0],Fe[1])),wc.point(re[0],re[1]),xe||wc.lineEnd(),te=!1):xe&&(wc.lineStart(),wc.point(Qd,Od),te=!1)}Ud=Qd;qc=Od;Fd=xe}var wc=rb,zc=Ga(),yc,Rc,fd,Td,Ad,Ld,Ud,qc,Fd,Be,te,ke={point:nb,lineStart:function(){ke.point=tc;Rc&&Rc.push(fd=[]);Be=!0;Fd=!1;Ud=qc=NaN},lineEnd:function(){yc&&(tc(Td,
Ad),Ld&&Fd&&zc.rejoin(),yc.push(zc.result()));ke.point=nb;Fd&&wc.lineEnd()},polygonStart:function(){wc=zc;yc=[];Rc=[];te=!0},polygonEnd:function(){for(var Qd,Od=Qd=0,xe=Rc.length;Od<xe;++Od){var Fe=Rc[Od],re=1,Ne=Fe.length,hd=Fe[0],ve=hd[0];for(hd=hd[1];re<Ne;++re){var ff=ve;var lf=hd;hd=Fe[re];ve=hd[0];hd=hd[1];lf<=J?hd>J&&(ve-ff)*(J-lf)>(hd-lf)*(oa-ff)&&++Qd:hd<=J&&(ve-ff)*(J-lf)<(hd-lf)*(oa-ff)&&--Qd}}Od=te&&Qd;xe=(yc=Array.from(ia(yc))).length;if(Od||xe)rb.polygonStart(),Od&&(rb.lineStart(),ja(null,
null,1,rb),rb.lineEnd()),xe&&tb(yc,Qa,Qd,ja,rb),rb.polygonEnd();wc=rb;yc=Rc=fd=null}};return ke}}function pa(){nd.point=m}function m(oa,l){nd.point=E;Xc=pd=oa;kd=xd=l}function E(oa,l){Ac.add(xd*oa-pd*l);pd=oa;xd=l}function L(){E(Xc,kd)}function w(oa,l){tf+=oa;bf+=l;++F}function Q(){Nd.point=A}function A(oa,l){Nd.point=y;w(ad=oa,Oc=l)}function y(oa,l){var q=oa-ad,J=l-Oc;q=Ka(q*q+J*J);aa+=q*(ad+oa)/2;Fa+=q*(Oc+l)/2;fb+=q;w(ad=oa,Oc=l)}function N(){Nd.point=w}function z(){Nd.point=H}function C(){V(Ec,
ld)}function H(oa,l){Nd.point=V;w(Ec=ad=oa,ld=Oc=l)}function V(oa,l){var q=oa-ad,J=l-Oc;q=Ka(q*q+J*J);aa+=q*(ad+oa)/2;Fa+=q*(Oc+l)/2;fb+=q;q=Oc*oa-ad*l;Gb+=q*(ad+oa);pc+=q*(Oc+l);Vb+=3*q;w(ad=oa,Oc=l)}function Aa(oa){this._context=oa}function O(oa,l){cc.point=la;Md=ya=oa;Wd=Oa=l}function la(oa,l){ya-=oa;Oa-=l;ce.add(Ka(ya*ya+Oa*Oa));ya=oa;Oa=l}function za(oa){let l=1;this._+=oa[0];for(const q=oa.length;l<q;++l)this._+=arguments[l]+oa[l]}function Ma(oa){const l=Math.floor(oa);if(!(0<=l))throw new RangeError(`invalid digits: ${oa}`);
if(15<l)return za;if(l!==id){const q=Math.pow(10,l);id=l;vc=function(J){let ja=1;this._+=J[0];for(const Da=J.length;ja<Da;++ja)this._+=Math.round(arguments[ja]*q)/q+J[ja]}}return vc}function Pa(oa,l){function q(Ia){Ia&&("function"===typeof ja&&Qa.pointRadius(+ja.apply(this,arguments)),Cb(Ia,Da(Qa)));return Qa.result()}let J=3,ja=4.5,Da,Qa;q.area=function(Ia){Cb(Ia,Da(nd));return nd.result()};q.measure=function(Ia){Cb(Ia,Da(cc));return cc.result()};q.bounds=function(Ia){Cb(Ia,Da(Ie));return Ie.result()};
q.centroid=function(Ia){Cb(Ia,Da(Nd));return Nd.result()};q.projection=function(Ia){if(!arguments.length)return oa;Da=null==Ia?(oa=null,nc):(oa=Ia).stream;return q};q.context=function(Ia){if(!arguments.length)return l;Qa=null==Ia?(l=null,new Yc(J)):new Aa(l=Ia);"function"!==typeof ja&&Qa.pointRadius(ja);return q};q.pointRadius=function(Ia){if(!arguments.length)return ja;ja="function"===typeof Ia?Ia:(Qa.pointRadius(+Ia),+Ia);return q};q.digits=function(Ia){if(!arguments.length)return J;if(null==Ia)J=
null;else{const rb=Math.floor(Ia);if(!(0<=rb))throw new RangeError(`invalid digits: ${Ia}`);J=rb}null===l&&(Qa=new Yc(J));return q};return q.projection(oa).digits(J).context(l)}function Ya(oa){return function(l){var q=new vb,J;for(J in oa)q[J]=oa[J];q.stream=l;return q}}function vb(){}function jb(oa,l,q){var J=oa.clipExtent&&oa.clipExtent();oa.scale(150).translate([0,0]);null!=J&&oa.clipExtent(null);Cb(q,oa.stream(Ie));l(Ie.result());null!=J&&oa.clipExtent(J);return oa}function Tb(oa,l,q){return jb(oa,
function(J){var ja=l[1][0]-l[0][0],Da=l[1][1]-l[0][1],Qa=Math.min(ja/(J[1][0]-J[0][0]),Da/(J[1][1]-J[0][1]));ja=+l[0][0]+(ja-Qa*(J[1][0]+J[0][0]))/2;J=+l[0][1]+(Da-Qa*(J[1][1]+J[0][1]))/2;oa.scale(150*Qa).translate([ja,J])},q)}function W(oa,l,q){return jb(oa,function(J){var ja=+l,Da=ja/(J[1][0]-J[0][0]);ja=(ja-Da*(J[1][0]+J[0][0]))/2;J=-Da*J[0][1];oa.scale(150*Da).translate([ja,J])},q)}function Ea(oa,l,q){return jb(oa,function(J){var ja=+l,Da=ja/(J[1][1]-J[0][1]),Qa=-Da*J[0][0];J=(ja-Da*(J[1][1]+
J[0][1]))/2;oa.scale(150*Da).translate([Qa,J])},q)}function Lb(oa){return Ya({point:function(l,q){l=oa(l,q);this.stream.point(l[0],l[1])}})}function oc(oa,l){function q(J,ja,Da,Qa,Ia,rb,nb,tc,wc,zc,yc,Rc,fd,Td){var Ad=nb-J,Ld=tc-ja,Ud=Ad*Ad+Ld*Ld;if(Ud>4*l&&fd--){var qc=Qa+zc,Fd=Ia+yc,Be=rb+Rc,te=Ka(qc*qc+Fd*Fd+Be*Be),ke=zb(Be/=te),Qd=1E-6>gd(gd(Be)-1)||1E-6>gd(Da-wc)?(Da+wc)/2:Dd(Fd,qc),Od=oa(Qd,ke);ke=Od[0];Od=Od[1];var xe=ke-J,Fe=Od-ja,re=Ld*xe-Ad*Fe;if(re*re/Ud>l||.3<gd((Ad*xe+Ld*Fe)/Ud-.5)||
Qa*zc+Ia*yc+rb*Rc<Tc)q(J,ja,Da,Qa,Ia,rb,ke,Od,Qd,qc/=te,Fd/=te,Be,fd,Td),Td.point(ke,Od),q(ke,Od,Qd,qc,Fd,Be,nb,tc,wc,zc,yc,Rc,fd,Td)}}return function(J){function ja(ke,Qd){ke=oa(ke,Qd);J.point(ke[0],ke[1])}function Da(){Ld=NaN;te.point=Qa;J.lineStart()}function Qa(ke,Qd){var Od=jc([ke,Qd]);Qd=oa(ke,Qd);q(Ld,Ud,Ad,qc,Fd,Be,Ld=Qd[0],Ud=Qd[1],Ad=ke,qc=Od[0],Fd=Od[1],Be=Od[2],16,J);J.point(Ld,Ud)}function Ia(){te.point=ja;J.lineEnd()}function rb(){Da();te.point=nb;te.lineEnd=tc}function nb(ke,Qd){Qa(wc=
ke,Qd);zc=Ld;yc=Ud;Rc=qc;fd=Fd;Td=Be;te.point=Qa}function tc(){q(Ld,Ud,Ad,qc,Fd,Be,zc,yc,wc,Rc,fd,Td,16,J);te.lineEnd=Ia;Ia()}var wc,zc,yc,Rc,fd,Td,Ad,Ld,Ud,qc,Fd,Be,te={point:ja,lineStart:Da,lineEnd:Ia,polygonStart:function(){J.polygonStart();te.lineStart=rb},polygonEnd:function(){J.polygonEnd();te.lineStart=Da}};return te}}function $b(oa){return Ya({point:function(l,q){l=oa(l,q);return this.stream.point(l[0],l[1])}})}function Mb(oa,l,q,J,ja){function Da(Qa,Ia){Qa*=J;Ia*=ja;return[l+oa*Qa,q-oa*Ia]}
Da.invert=function(Qa,Ia){return[(Qa-l)/oa*J,(q-Ia)/oa*ja]};return Da}function Qb(oa,l,q,J,ja,Da){function Qa(Rc,fd){Rc*=J;fd*=ja;return[rb*Rc-nb*fd+l,q-nb*Rc-rb*fd]}if(!Da)return Mb(oa,l,q,J,ja);var Ia=rd(Da);Da=K(Da);var rb=Ia*oa,nb=Da*oa,tc=Ia/oa,wc=Da/oa,zc=(Da*q-Ia*l)/oa,yc=(Da*l+Ia*q)/oa;Qa.invert=function(Rc,fd){return[J*(tc*Rc-wc*fd+zc),ja*(yc-wc*Rc-tc*fd)]};return Qa}function xc(oa){return ed(function(){return oa})()}function ed(oa){function l(hd){return Fe(hd[0]*od,hd[1]*od)}function q(hd){return(hd=
Fe.invert(hd[0],hd[1]))&&[hd[0]*vd,hd[1]*vd]}function J(){var hd=Qb(Qa,0,0,Td,Ad,fd).apply(null,Da(nb,tc));hd=Qb(Qa,Ia-hd[0],rb-hd[1],Td,Ad,fd);Rc=ec(wc,zc,yc);xe=xb(Da,hd);Fe=xb(Rc,xe);hd=xe;Od=+Qd?oc(hd,Qd):Lb(hd);return ja()}function ja(){re=Ne=null;return l}var Da,Qa=150,Ia=480,rb=250,nb=0,tc=0,wc=0,zc=0,yc=0,Rc,fd=0,Td=1,Ad=1,Ld=null,Ud=Sb,qc=null,Fd,Be,te,ke=nc,Qd=.5,Od,xe,Fe,re,Ne;l.stream=function(hd){return re&&Ne===hd?re:re=qd($b(Rc)(Ud(Od(ke(Ne=hd)))))};l.preclip=function(hd){return arguments.length?
(Ud=hd,Ld=void 0,ja()):Ud};l.postclip=function(hd){return arguments.length?(ke=hd,qc=Fd=Be=te=null,ja()):ke};l.clipAngle=function(hd){return arguments.length?(Ud=+hd?ha(Ld=hd*od):(Ld=null,Sb),ja()):Ld*vd};l.clipExtent=function(hd){return arguments.length?(ke=null==hd?(qc=Fd=Be=te=null,nc):na(qc=+hd[0][0],Fd=+hd[0][1],Be=+hd[1][0],te=+hd[1][1]),ja()):null==qc?null:[[qc,Fd],[Be,te]]};l.scale=function(hd){return arguments.length?(Qa=+hd,J()):Qa};l.translate=function(hd){return arguments.length?(Ia=+hd[0],
rb=+hd[1],J()):[Ia,rb]};l.center=function(hd){return arguments.length?(nb=hd[0]%360*od,tc=hd[1]%360*od,J()):[nb*vd,tc*vd]};l.rotate=function(hd){return arguments.length?(wc=hd[0]%360*od,zc=hd[1]%360*od,yc=2<hd.length?hd[2]%360*od:0,J()):[wc*vd,zc*vd,yc*vd]};l.angle=function(hd){return arguments.length?(fd=hd%360*od,J()):fd*vd};l.reflectX=function(hd){return arguments.length?(Td=hd?-1:1,J()):0>Td};l.reflectY=function(hd){return arguments.length?(Ad=hd?-1:1,J()):0>Ad};l.precision=function(hd){if(arguments.length){var ve=
xe;var ff=Qd=hd*hd;ve=(Od=+ff?oc(ve,ff):Lb(ve),ja())}else ve=Ka(Qd);return ve};l.fitExtent=function(hd,ve){return Tb(l,hd,ve)};l.fitSize=function(hd,ve){return Tb(l,[[0,0],hd],ve)};l.fitWidth=function(hd,ve){return W(l,hd,ve)};l.fitHeight=function(hd,ve){return Ea(l,hd,ve)};return function(){Da=oa.apply(this,arguments);l.invert=Da.invert&&q;return J()}}function qa(oa){var l=0,q=Jb/3,J=ed(oa);oa=J(l,q);oa.parallels=function(ja){return arguments.length?J(l=ja[0]*od,q=ja[1]*od):[l*vd,q*vd]};return oa}
function Db(oa){function l(J,ja){return[J*q,K(ja)/q]}var q=rd(oa);l.invert=function(J,ja){return[J/q,zb(ja*q)]};return l}function Ua(oa,l){function q(Ia,rb){rb=Ka(Da-2*ja*K(rb))/ja;return[rb*K(Ia*=ja),Qa-rb*rd(Ia)]}var J=K(oa),ja=(J+K(l))/2;if(1E-6>gd(ja))return Db(oa);var Da=1+J*(2*ja-J),Qa=Ka(Da)/ja;q.invert=function(Ia,rb){rb=Qa-rb;var nb=Dd(Ia,gd(rb))*ua(rb);0>rb*ja&&(nb-=Jb*ua(Ia)*ua(rb));return[nb/ja,zb((Da-(Ia*Ia+rb*rb)*ja*ja)/(2*ja))]};return q}function yb(){return qa(Ua).scale(155.424).center([0,
33.6442])}function Hb(){return yb().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Nb(oa){var l=oa.length;return{point:function(q,J){for(var ja=-1;++ja<l;)oa[ja].point(q,J)},sphere:function(){for(var q=-1;++q<l;)oa[q].sphere()},lineStart:function(){for(var q=-1;++q<l;)oa[q].lineStart()},lineEnd:function(){for(var q=-1;++q<l;)oa[q].lineEnd()},polygonStart:function(){for(var q=-1;++q<l;)oa[q].polygonStart()},polygonEnd:function(){for(var q=-1;++q<
l;)oa[q].polygonEnd()}}}function Zb(oa){return function(l,q){var J=rd(l),ja=rd(q);J=oa(J*ja);return Infinity===J?[2,0]:[J*ja*K(l),J*K(q)]}}function ic(oa){return function(l,q){var J=Ka(l*l+q*q),ja=oa(J),Da=K(ja);ja=rd(ja);return[Dd(l*Da,J*ja),zb(J&&q*Da/J)]}}function Bc(oa,l){return[oa,Bd(lb((Cc+l)/2))]}function jd(oa){function l(){var wc=Jb*ja(),zc=q(Ra(q.rotate()).invert([0,0]));return Qa(null==Ia?[[zc[0]-wc,zc[1]-wc],[zc[0]+wc,zc[1]+wc]]:oa===Bc?[[Math.max(zc[0]-wc,Ia),rb],[Math.min(zc[0]+wc,nb),
tc]]:[[Ia,Math.max(zc[1]-wc,rb)],[nb,Math.min(zc[1]+wc,tc)]])}var q=xc(oa),J=q.center,ja=q.scale,Da=q.translate,Qa=q.clipExtent,Ia=null,rb,nb,tc;q.scale=function(wc){return arguments.length?(ja(wc),l()):ja()};q.translate=function(wc){return arguments.length?(Da(wc),l()):Da()};q.center=function(wc){return arguments.length?(J(wc),l()):J()};q.clipExtent=function(wc){return arguments.length?(null==wc?Ia=rb=nb=tc=null:(Ia=+wc[0][0],rb=+wc[0][1],nb=+wc[1][0],tc=+wc[1][1]),l()):null==Ia?null:[[Ia,rb],[nb,
tc]]};return l()}function Vc(oa,l){function q(Qa,Ia){0<Da?Ia<-Cc+1E-6&&(Ia=-Cc+1E-6):Ia>Cc-1E-6&&(Ia=Cc-1E-6);Ia=Da/x(lb((Cc+Ia)/2),ja);return[Ia*K(ja*Qa),Da-Ia*rd(ja*Qa)]}var J=rd(oa),ja=oa===l?K(oa):Bd(J/rd(l))/Bd(lb((Cc+l)/2)/lb((Cc+oa)/2)),Da=J*x(lb((Cc+oa)/2),ja)/ja;if(!ja)return Bc;q.invert=function(Qa,Ia){Ia=Da-Ia;var rb=ua(ja)*Ka(Qa*Qa+Ia*Ia),nb=Dd(Qa,gd(Ia))*ua(Ia);0>Ia*ja&&(nb-=Jb*ua(Qa)*ua(Ia));return[nb/ja,2*Cd(x(Da/rb,1/ja))-Cc]};return q}function ma(oa,l){return[oa,l]}function Ha(oa,
l){function q(Qa,Ia){Ia=Da-Ia;Qa*=ja;return[Ia*K(Qa),Da-Ia*rd(Qa)]}var J=rd(oa),ja=oa===l?K(oa):(J-rd(l))/(l-oa),Da=J/ja+oa;if(1E-6>gd(ja))return ma;q.invert=function(Qa,Ia){Ia=Da-Ia;var rb=Dd(Qa,gd(Ia))*ua(Ia);0>Ia*ja&&(rb-=Jb*ua(Qa)*ua(Ia));return[rb/ja,Da-ua(ja)*Ka(Qa*Qa+Ia*Ia)]};return q}function gb(oa,l){l=zb(Qe*K(l));var q=l*l,J=q*q*q;return[oa*rd(l)/(Qe*(1.340264+3*-.081106*q+J*(7*8.93E-4+.034164*q))),l*(1.340264+-.081106*q+J*(8.93E-4+.003796*q))]}function R(oa,l){var q=rd(l),J=rd(oa)*q;return[q*
K(oa)/J,K(l)/J]}function t(oa,l){var q=l*l,J=q*q;return[oa*(.8707-.131979*q+J*(-.013791+J*(.003971*q-.001529*J))),l*(1.007226+q*(.015085+J*(-.044475+.028874*q-.005916*J)))]}function ba(oa,l){return[rd(l)*K(oa),K(l)]}function va(oa,l){var q=rd(l),J=1+rd(oa)*q;return[q*K(oa)/J,K(l)/J]}function Ca(oa,l){return[Bd(lb((Cc+l)/2)),-oa]}function Sa(oa){return 1<oa?Le:-1>oa?-Le:Math.asin(oa)}function kb(oa,l){return function J(){const ja=l();ja.type=oa;ja.path=Pa().projection(ja);ja.copy=ja.copy||function(){const Da=
J();Ee.forEach(Qa=>{if(ja[Qa])Da[Qa](ja[Qa]())});Da.path.pointRadius(ja.path.pointRadius());return Da};return h.registerScale(ja)}}function Rb(oa,l){if(!oa||"string"!==typeof oa)throw Error("Projection type must be a name string.");oa=oa.toLowerCase();return 1<arguments.length?(qe[oa]=kb(oa,l),this):qe[oa]||null}class Fb{constructor(){this._partials=new Float64Array(32);this._n=0}add(oa){const l=this._partials;let q=0;for(let J=0;J<this._n&&32>J;J++){const ja=l[J],Da=oa+ja;(oa=Math.abs(oa)<Math.abs(ja)?
oa-(Da-ja):ja-(Da-oa))&&(l[q++]=oa);oa=Da}l[q]=oa;this._n=q+1;return this}valueOf(){const oa=this._partials;let l=this._n;let q,J=0;if(0<l){for(J=oa[--l];0<l;){var ja=J;q=oa[--l];J=ja+q;if(ja=q-(J-ja))break}0<l&&(0>ja&&0>oa[l-1]||0<ja&&0<oa[l-1])&&(q=2*ja,ja=J+q,q==ja-J&&(J=ja))}return J}}var Jb=Math.PI,Cc=Jb/2,Gc=Jb/4,Sc=2*Jb,vd=180/Jb,od=Jb/180,gd=Math.abs,Cd=Math.atan,Dd=Math.atan2,rd=Math.cos,we=Math.exp,Bd=Math.log,x=Math.pow,K=Math.sin,ua=Math.sign||function(oa){return 0<oa?1:0>oa?-1:0},Ka=
Math.sqrt,lb=Math.tan,Bb={Feature:function(oa,l){ac(oa.geometry,l)},FeatureCollection:function(oa,l){oa=oa.features;for(var q=-1,J=oa.length;++q<J;)ac(oa[q].geometry,l)}},bc={Sphere:function(oa,l){l.sphere()},Point:function(oa,l){oa=oa.coordinates;l.point(oa[0],oa[1],oa[2])},MultiPoint:function(oa,l){for(var q=oa.coordinates,J=-1,ja=q.length;++J<ja;)oa=q[J],l.point(oa[0],oa[1],oa[2])},LineString:function(oa,l){Xb(oa.coordinates,l,0)},MultiLineString:function(oa,l){oa=oa.coordinates;for(var q=-1,J=
oa.length;++q<J;)Xb(oa[q],l,0)},Polygon:function(oa,l){mc(oa.coordinates,l)},MultiPolygon:function(oa,l){oa=oa.coordinates;for(var q=-1,J=oa.length;++q<J;)mc(oa[q],l)},GeometryCollection:function(oa,l){oa=oa.geometries;for(var q=-1,J=oa.length;++q<J;)ac(oa[q],l)}};ib.invert=ib;var Sb=T(function(){return!0},function(oa){var l=NaN,q=NaN,J=NaN,ja;return{lineStart:function(){oa.lineStart();ja=1},point:function(Da,Qa){var Ia=0<Da?Jb:-Jb,rb=gd(Da-l);if(1E-6>gd(rb-Jb))oa.point(l,q=0<(q+Qa)/2?Cc:-Cc),oa.point(J,
q),oa.lineEnd(),oa.lineStart(),oa.point(Ia,q),oa.point(Da,q),ja=0;else if(J!==Ia&&rb>=Jb){1E-6>gd(l-J)&&(l-=1E-6*J);1E-6>gd(Da-Ia)&&(Da-=1E-6*Ia);rb=l;var nb=q,tc=Da,wc,zc,yc=K(rb-tc);q=1E-6<gd(yc)?Cd((K(nb)*(zc=rd(Qa))*K(tc)-K(Qa)*(wc=rd(nb))*K(rb))/(wc*zc*yc)):(nb+Qa)/2;oa.point(J,q);oa.lineEnd();oa.lineStart();oa.point(Ia,q);ja=0}oa.point(l=Da,q=Qa);J=Ia},lineEnd:function(){oa.lineEnd();l=q=NaN},clean:function(){return 2-ja}}},function(oa,l,q,J){null==oa?(q*=Cc,J.point(-Jb,q),J.point(0,q),J.point(Jb,
q),J.point(Jb,0),J.point(Jb,-q),J.point(0,-q),J.point(-Jb,-q),J.point(-Jb,0),J.point(-Jb,q)):1E-6<gd(oa[0]-l[0])?(oa=oa[0]<l[0]?Jb:-Jb,q=q*oa/2,J.point(-oa,q),J.point(0,q),J.point(oa,q)):J.point(l[0],l[1])},[-Jb,-Cc]),nc=oa=>oa,Kc=new Fb,Ac=new Fb,Xc,kd,pd,xd,nd={point:Yb,lineStart:Yb,lineEnd:Yb,polygonStart:function(){nd.lineStart=pa;nd.lineEnd=L},polygonEnd:function(){nd.lineStart=nd.lineEnd=nd.point=Yb;Kc.add(gd(Ac));Ac=new Fb},result:function(){var oa=Kc/2;Kc=new Fb;return oa}},Jd=Infinity,me=
Jd,Me=-Jd,He=Me,Ie={point:function(oa,l){oa<Jd&&(Jd=oa);oa>Me&&(Me=oa);l<me&&(me=l);l>He&&(He=l)},lineStart:Yb,lineEnd:Yb,polygonStart:Yb,polygonEnd:Yb,result:function(){var oa=[[Jd,me],[Me,He]];Me=He=-(me=Jd=Infinity);return oa}},tf=0,bf=0,F=0,aa=0,Fa=0,fb=0,Gb=0,pc=0,Vb=0,Ec,ld,ad,Oc,Nd={point:w,lineStart:Q,lineEnd:N,polygonStart:function(){Nd.lineStart=z;Nd.lineEnd=C},polygonEnd:function(){Nd.point=w;Nd.lineStart=Q;Nd.lineEnd=N},result:function(){var oa=Vb?[Gb/Vb,pc/Vb]:fb?[aa/fb,Fa/fb]:F?[tf/
F,bf/F]:[NaN,NaN];tf=bf=F=aa=Fa=fb=Gb=pc=Vb=0;return oa}};Aa.prototype={_radius:4.5,pointRadius:function(oa){return this._radius=oa,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath();this._point=NaN},point:function(oa,l){switch(this._point){case 0:this._context.moveTo(oa,l);this._point=1;break;case 1:this._context.lineTo(oa,l);break;default:this._context.moveTo(oa+this._radius,
l),this._context.arc(oa,l,this._radius,0,Sc)}},result:Yb};var ce=new Fb,Kd,Md,Wd,ya,Oa,cc={point:Yb,lineStart:function(){cc.point=O},lineEnd:function(){Kd&&la(Md,Wd);cc.point=Yb},polygonStart:function(){Kd=!0},polygonEnd:function(){Kd=null},result:function(){var oa=+ce;ce=new Fb;return oa}};let id,vc,Hc,Jc;class Yc{constructor(oa){this._append=null==oa?za:Ma(oa);this._radius=4.5;this._=""}pointRadius(oa){this._radius=+oa;return this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=
0}lineEnd(){0===this._line&&(this._+="Z");this._point=NaN}point(oa,l){switch(this._point){case 0:this._append`M${oa},${l}`;this._point=1;break;case 1:this._append`L${oa},${l}`;break;default:this._append`M${oa},${l}`;if(this._radius!==Hc||this._append!==vc)oa=this._radius,l=this._,this._="",this._append`m0,${oa}a${oa},${oa} 0 1,1 0,${-2*oa}a${oa},${oa} 0 1,1 0,${2*oa}z`,Hc=oa,vc=this._append,Jc=this._,this._=l;this._+=Jc}}result(){const oa=this._;this._="";return oa.length?oa:null}}vb.prototype={constructor:vb,
point:function(oa,l){this.stream.point(oa,l)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Tc=rd(30*od),qd=Ya({point:function(oa,l){this.stream.point(oa*od,l*od)}}),bd=Zb(function(oa){return Ka(2/(1+oa))});bd.invert=ic(function(oa){return 2*zb(oa/2)});var fe=Zb(function(oa){return(oa=ab(oa))&&oa/K(oa)});fe.invert=
ic(function(oa){return oa});Bc.invert=function(oa,l){return[oa,2*Cd(we(l))-Cc]};ma.invert=ma;var Qe=Ka(3)/2;gb.invert=function(oa,l){for(var q=l,J=q*q,ja=J*J*J,Da=0,Qa;12>Da&&!(Qa=q*(1.340264+-.081106*J+ja*(8.93E-4+.003796*J))-l,J=1.340264+3*-.081106*J+ja*(7*8.93E-4+.034164*J),q-=Qa/=J,J=q*q,ja=J*J*J,1E-12>gd(Qa));++Da);return[Qe*oa*(1.340264+3*-.081106*J+ja*(7*8.93E-4+.034164*J))/rd(q),zb(K(q)/Qe)]};R.invert=ic(Cd);t.invert=function(oa,l){var q=l,J=25;do{var ja=q*q;var Da=ja*ja;q-=Da=(q*(1.007226+
ja*(.015085+Da*(-.044475+.028874*ja-.005916*Da)))-l)/(1.007226+ja*(.045255+Da*(-.311325+.259866*ja-.005916*11*Da)))}while(1E-6<gd(Da)&&0<--J);return[oa/(.8707+(ja=q*q)*(-.131979+ja*(-.013791+ja*ja*ja*(.003971-.001529*ja)))),q]};ba.invert=ic(zb);va.invert=ic(function(oa){return 2*Cd(oa)});Ca.invert=function(oa,l){return[-l,2*Cd(we(oa))-Cc]};var Ke=Math.abs,ne=Math.cos,Ye=Math.sin,kf=Math.PI,Le=kf/2,Xe=Math.sqrt(2),Ze=function(oa,l,q){function J(ja,Da){var Qa=Da,Ia=q*Ye(Qa),rb=30,nb;do Qa-=nb=(Qa+Ye(Qa)-
Ia)/(1+ne(Qa));while(1E-6<Ke(nb)&&0<--rb);return[oa*ja*ne(Da=Qa/2),l*Ye(Da)]}J.invert=function(ja,Da){return Da=Sa(Da/l),[ja/(oa*ne(Da)),Sa((2*Da+Ye(2*Da))/q)]};return J}(Xe/Le,Xe,kf);const Ae=Pa(),Ee="clipAngle clipExtent scale translate center rotate parallels precision reflectX reflectY coefficient distance fraction lobes parallel radius ratio spacing tilt".split(" "),qe={albers:Hb,albersusa:function(){function oa(zc){var yc=zc[0];zc=zc[1];return tc=null,(Da.point(yc,zc),tc)||(Ia.point(yc,zc),
tc)||(nb.point(yc,zc),tc)}function l(){q=J=null;return oa}var q,J,ja=Hb(),Da,Qa=yb().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Ia,rb=yb().rotate([157,0]).center([-3,19.9]).parallels([8,18]),nb,tc,wc={point:function(zc,yc){tc=[zc,yc]}};oa.invert=function(zc){var yc=ja.scale(),Rc=ja.translate(),fd=(zc[0]-Rc[0])/yc;yc=(zc[1]-Rc[1])/yc;return(.12<=yc&&.234>yc&&-.425<=fd&&-.214>fd?Qa:.166<=yc&&.234>yc&&-.214<=fd&&-.115>fd?rb:ja).invert(zc)};oa.stream=function(zc){return q&&J===zc?q:q=Nb([ja.stream(J=
zc),Qa.stream(zc),rb.stream(zc)])};oa.precision=function(zc){if(!arguments.length)return ja.precision();ja.precision(zc);Qa.precision(zc);rb.precision(zc);return l()};oa.scale=function(zc){if(!arguments.length)return ja.scale();ja.scale(zc);Qa.scale(.35*zc);rb.scale(zc);return oa.translate(ja.translate())};oa.translate=function(zc){if(!arguments.length)return ja.translate();var yc=ja.scale(),Rc=+zc[0],fd=+zc[1];Da=ja.translate(zc).clipExtent([[Rc-.455*yc,fd-.238*yc],[Rc+.455*yc,fd+.238*yc]]).stream(wc);
Ia=Qa.translate([Rc-.307*yc,fd+.201*yc]).clipExtent([[Rc-.425*yc+1E-6,fd+.12*yc+1E-6],[Rc-.214*yc-1E-6,fd+.234*yc-1E-6]]).stream(wc);nb=rb.translate([Rc-.205*yc,fd+.212*yc]).clipExtent([[Rc-.214*yc+1E-6,fd+.166*yc+1E-6],[Rc-.115*yc-1E-6,fd+.234*yc-1E-6]]).stream(wc);return l()};oa.fitExtent=function(zc,yc){return Tb(oa,zc,yc)};oa.fitSize=function(zc,yc){return Tb(oa,[[0,0],zc],yc)};oa.fitWidth=function(zc,yc){return W(oa,zc,yc)};oa.fitHeight=function(zc,yc){return Ea(oa,zc,yc)};return oa.scale(1070)},
azimuthalequalarea:function(){return xc(bd).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return xc(fe).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return qa(Vc).scale(109.5).parallels([30,30])},conicequalarea:yb,conicequidistant:function(){return qa(Ha).scale(131.154).center([0,13.9389])},equalEarth:function(){return xc(gb).scale(177.158)},equirectangular:function(){return xc(ma).scale(152.63)},gnomonic:function(){return xc(R).scale(144.049).clipAngle(60)},identity:function(){function oa(){Rc=
q*Da;fd=q*Qa;Ld=Ud=null;return l}function l(qc){var Fd=qc[0]*Rc;qc=qc[1]*fd;if(Ia){var Be=qc*rb-Fd*nb;Fd=Fd*rb+qc*nb;qc=Be}return[Fd+J,qc+ja]}var q=1,J=0,ja=0,Da=1,Qa=1,Ia=0,rb,nb,tc=null,wc,zc,yc,Rc=1,fd=1,Td=Ya({point:function(qc,Fd){qc=l([qc,Fd]);this.stream.point(qc[0],qc[1])}}),Ad=nc,Ld,Ud;l.invert=function(qc){var Fd=qc[0]-J;qc=qc[1]-ja;if(Ia){var Be=qc*rb+Fd*nb;Fd=Fd*rb-qc*nb;qc=Be}return[Fd/Rc,qc/fd]};l.stream=function(qc){return Ld&&Ud===qc?Ld:Ld=Td(Ad(Ud=qc))};l.postclip=function(qc){return arguments.length?
(Ad=qc,tc=wc=zc=yc=null,oa()):Ad};l.clipExtent=function(qc){return arguments.length?(Ad=null==qc?(tc=wc=zc=yc=null,nc):na(tc=+qc[0][0],wc=+qc[0][1],zc=+qc[1][0],yc=+qc[1][1]),oa()):null==tc?null:[[tc,wc],[zc,yc]]};l.scale=function(qc){return arguments.length?(q=+qc,oa()):q};l.translate=function(qc){return arguments.length?(J=+qc[0],ja=+qc[1],oa()):[J,ja]};l.angle=function(qc){return arguments.length?(Ia=qc%360*od,nb=K(Ia),rb=rd(Ia),oa()):Ia*vd};l.reflectX=function(qc){return arguments.length?(Da=
qc?-1:1,oa()):0>Da};l.reflectY=function(qc){return arguments.length?(Qa=qc?-1:1,oa()):0>Qa};l.fitExtent=function(qc,Fd){return Tb(l,qc,Fd)};l.fitSize=function(qc,Fd){return Tb(l,[[0,0],qc],Fd)};l.fitWidth=function(qc,Fd){return W(l,qc,Fd)};l.fitHeight=function(qc,Fd){return Ea(l,qc,Fd)};return l},mercator:function(){return jd(Bc).scale(961/Sc)},mollweide:function(){return xc(Ze).scale(169.529)},naturalEarth1:function(){return xc(t).scale(175.295)},orthographic:function(){return xc(ba).scale(249.5).clipAngle(90.000001)},
stereographic:function(){return xc(va).scale(250).clipAngle(142)},transversemercator:function(){var oa=jd(Ca),l=oa.center,q=oa.rotate;oa.center=function(J){return arguments.length?l([-J[1],J[0]]):(J=l(),[J[1],-J[0]])};oa.rotate=function(J){return arguments.length?q([J[0],J[1],2<J.length?J[2]+90:90]):(J=q(),[J[0],J[1],J[2]-90])};return q([0,0,90]).scale(159.155)}};for(const oa in qe)Rb(oa,qe[oa]);u.getProjectionPath=function(oa){return oa&&oa.path||Ae};u.projection=Rb;u.projectionProperties=Ee})};
shadow$provide[38]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(29),ob(21),ob(30),ob(37),ob(32)):"function"===typeof define&&define.amd?define("exports vega-dataflow vega-util vega-statistics vega-projection vega-canvas".split(" "),h):(u="undefined"!==typeof globalThis?globalThis:u||self,h((u.vega=u.vega||{},u.vega.transforms={}),u.vega,u.vega,u.vega,u.vega,u.vega))})(this,function(u,h,ia,ab,zb,Yb){function ac(t,ba,va){var Ca=(ba-t)/Math.max(0,va),Sa=
Math.floor(Math.log10(Ca));Ca/=Math.pow(10,Sa);Ca=Ca>=ed?10:Ca>=qa?5:Ca>=Db?2:1;let kb;0>Sa?(kb=Math.pow(10,-Sa)/Ca,Sa=Math.round(t*kb),Ca=Math.round(ba*kb),Sa/kb<t&&++Sa,Ca/kb>ba&&--Ca,kb=-kb):(kb=Math.pow(10,Sa)*Ca,Sa=Math.round(t/kb),Ca=Math.round(ba/kb),Sa*kb<t&&++Sa,Ca*kb>ba&&--Ca);return Ca<Sa&&.5<=va&&2>va?ac(t,ba,2*va):[Sa,Ca,kb]}function Xb(t,ba,va){return ac(+t,+ba,+va)[2]}function mc(t,ba){let va;for(const Ca of t)null!=Ca&&(va<Ca||void 0===va&&Ca>=Ca)&&(va=Ca);return va}function Cb(t,
ba,va){t=+t;ba=+ba;va=2>(Sa=arguments.length)?(ba=t,t=0,1):3>Sa?1:+va;for(var Ca=-1,Sa=Math.max(0,Math.ceil((ba-t)/va))|0,kb=Array(Sa);++Ca<Sa;)kb[Ca]=t+Ca*va;return kb}function Ub(t,ba){ba=0;for(let va of t)if(va=+va)ba+=va;return ba}function jc(){}function Ba(){function t(Fb,Jb){return Jb.map(Cc=>ba(Fb,Cc))}function ba(Fb,Jb){var Cc=[],Gc=[];va(Fb,Jb,Sc=>{Rb(Sc,Fb,Jb);for(var vd=0,od=Sc.length,gd=Sc[od-1][1]*Sc[0][0]-Sc[od-1][0]*Sc[0][1];++vd<od;)gd+=Sc[vd-1][1]*Sc[vd][0]-Sc[vd-1][0]*Sc[vd][1];
0<gd?Cc.push([Sc]):Gc.push(Sc)});Gc.forEach(Sc=>{for(var vd=0,od=Cc.length,gd;vd<od;++vd){a:{var Cd=(gd=Cc[vd])[0];for(var Dd=Sc,rd=-1,we=Dd.length;++rd<we;){b:{var Bd=Cd;for(var x=Dd[rd],K=x[0],ua=x[1],Ka=-1,lb=0,Bb=Bd.length,bc=Bb-1;lb<Bb;bc=lb++){var Sb=Bd[lb],nc=Sb[0],Kc=Sb[1],Ac=Bd[bc];bc=Ac[0];var Xc=Ac[1],kd,pd=Sb;Sb=Ac;Ac=x;if(kd=(Sb[0]-pd[0])*(Ac[1]-pd[1])===(Ac[0]-pd[0])*(Sb[1]-pd[1]))pd=pd[kd=+(pd[0]===Sb[0])],Ac=Ac[kd],Sb=Sb[kd],kd=pd<=Ac&&Ac<=Sb||Sb<=Ac&&Ac<=pd;if(kd){Bd=0;break b}Kc>
ua!==Xc>ua&&K<(bc-nc)*(ua-Kc)/(Xc-Kc)+nc&&(Ka=-Ka)}Bd=Ka}if(Bd){Cd=Bd;break a}}Cd=0}if(-1!==Cd){gd.push(Sc);break}}});return{type:"MultiPolygon",value:Jb,coordinates:Cc}}function va(Fb,Jb,Cc){function Gc(Bd){var x=[Bd[0][0]+gd,Bd[0][1]+od];Bd=[Bd[1][0]+gd,Bd[1][1]+od];var K=2*x[0]+x[1]*(Sa+1)*4,ua=2*Bd[0]+Bd[1]*(Sa+1)*4,Ka,lb;(Ka=vd[K])?(lb=Sc[ua])?(delete vd[Ka.end],delete Sc[lb.start],Ka===lb?(Ka.ring.push(Bd),Cc(Ka.ring)):Sc[Ka.start]=vd[lb.end]={start:Ka.start,end:lb.end,ring:Ka.ring.concat(lb.ring)}):
(delete vd[Ka.end],Ka.ring.push(Bd),vd[Ka.end=ua]=Ka):(Ka=Sc[ua])?(lb=vd[K])?(delete Sc[Ka.start],delete vd[lb.end],Ka===lb?(Ka.ring.push(Bd),Cc(Ka.ring)):Sc[lb.start]=vd[Ka.end]={start:lb.start,end:Ka.end,ring:lb.ring.concat(Ka.ring)}):(delete Sc[Ka.start],Ka.ring.unshift(x),Sc[Ka.start=K]=Ka):Sc[K]=vd[ua]={start:K,end:ua,ring:[x,Bd]}}var Sc=[],vd=[],od;var gd=od=-1;var Cd=Fb[0]>=Jb;for(Ua[Cd<<1].forEach(Gc);++gd<Sa-1;){var Dd=Cd;Cd=Fb[gd+1]>=Jb;Ua[Dd|Cd<<1].forEach(Gc)}for(Ua[Cd<<0].forEach(Gc);++od<
kb-1;){gd=-1;Cd=Fb[od*Sa+Sa]>=Jb;var rd=Fb[od*Sa]>=Jb;for(Ua[Cd<<1|rd<<2].forEach(Gc);++gd<Sa-1;){Dd=Cd;Cd=Fb[od*Sa+Sa+gd+1]>=Jb;var we=rd;rd=Fb[od*Sa+gd+1]>=Jb;Ua[Dd|Cd<<1|rd<<2|we<<3].forEach(Gc)}Ua[Cd|rd<<3].forEach(Gc)}gd=-1;rd=Fb[od*Sa]>=Jb;for(Ua[rd<<2].forEach(Gc);++gd<Sa-1;)we=rd,rd=Fb[od*Sa+gd+1]>=Jb,Ua[rd<<2|we<<3].forEach(Gc);Ua[rd<<3].forEach(Gc)}function Ca(Fb,Jb,Cc){Fb.forEach(Gc=>{var Sc=Gc[0],vd=Gc[1],od=Sc|0,gd=vd|0,Cd=Jb[gd*Sa+od];if(0<Sc&&Sc<Sa&&od===Sc){var Dd=Jb[gd*Sa+od-1];Gc[0]=
Sc+(Cc-Dd)/(Cd-Dd)-.5}0<vd&&vd<kb&&gd===vd&&(Dd=Jb[(gd-1)*Sa+od],Gc[1]=vd+(Cc-Dd)/(Cd-Dd)-.5)})}var Sa=1,kb=1,Rb=Ca;t.contour=ba;t.size=function(Fb){if(!arguments.length)return[Sa,kb];var Jb=Math.floor(Fb[0]),Cc=Math.floor(Fb[1]);0<=Jb&&0<=Cc||ia.error("invalid size");return Sa=Jb,kb=Cc,t};t.smooth=function(Fb){return arguments.length?(Rb=Fb?Ca:jc,t):Rb===Ca};return t}function Za(t,ba,va){return function(Ca){var Sa=ia.extent(Ca);Ca=va?Math.min(Sa[0],0):Sa[0];Sa=Sa[1];var kb=Sa-Ca;if(ba){var Rb=t;
var Fb=+Sa;var Jb=+Ca;Rb=+Rb;Jb=(kb=Fb<Jb)?Xb(Fb,Jb,Rb):Xb(Jb,Fb,Rb);kb=(kb?-1:1)*(0>Jb?1/-Jb:Jb)}else kb/=t+1;return Cb(Ca+kb,Sa,kb)}}function wb(t){h.Transform.call(this,null,t)}function ub(t,ba,va){const Ca=Za(va.levels||10,va.nice,!1!==va.zero);return"shared"!==va.resolve?Ca:Ca(t.map(Sa=>mc(ba(Sa).values)))}function sb(t,ba,va,Ca){var Sa=Ca.scale||ba.scale;let kb=Ca.translate||ba.translate;ia.isFunction(Sa)&&(Sa=Sa(va,Ca));ia.isFunction(kb)&&(kb=kb(va,Ca));if(1!==Sa&&null!=Sa||kb)va=(ia.isNumber(Sa)?
Sa:Sa[0])||1,Sa=(ia.isNumber(Sa)?Sa:Sa[1])||1,t.forEach(xb(ba,va,Sa,kb&&kb[0]||0,kb&&kb[1]||0))}function xb(t,ba,va,Ca,Sa){function kb(Sc){Sc.forEach(Rb)}function Rb(Sc){Gc&&Sc.reverse();Sc.forEach(Fb)}function Fb(Sc){Sc[0]=(Sc[0]-Jb)*ba+Ca;Sc[1]=(Sc[1]-Cc)*va+Sa}const Jb=t.x1||0,Cc=t.y1||0,Gc=0>ba*va;return function(Sc){Sc.coordinates.forEach(kb);return Sc}}function ib(t,ba,va){t=0<=t?t:ab.bandwidthNRD(ba,va);return Math.round((Math.sqrt(4*t*t+1)-1)/2)}function ec(t){return ia.isFunction(t)?t:ia.constant(+t)}
function ra(){function t(Jb,Cc){const Gc=ib(Sa[0],Jb,ba)>>Fb,Sc=ib(Sa[1],Jb,va)>>Fb,vd=Gc?Gc+2:0,od=Sc?Sc+2:0,gd=2*vd+(kb>>Fb),Cd=2*od+(Rb>>Fb),Dd=new Float32Array(gd*Cd),rd=new Float32Array(gd*Cd);let we=Dd;Jb.forEach(Bd=>{const x=vd+(+ba(Bd)>>Fb),K=od+(+va(Bd)>>Fb);0<=x&&x<gd&&0<=K&&K<Cd&&(Dd[x+K*gd]+=+Ca(Bd))});0<Gc&&0<Sc?(fa(gd,Cd,Dd,rd,Gc),xa(gd,Cd,rd,Dd,Sc),fa(gd,Cd,Dd,rd,Gc),xa(gd,Cd,rd,Dd,Sc),fa(gd,Cd,Dd,rd,Gc),xa(gd,Cd,rd,Dd,Sc)):0<Gc?(fa(gd,Cd,Dd,rd,Gc),fa(gd,Cd,rd,Dd,Gc),fa(gd,Cd,Dd,rd,
Gc),we=rd):0<Sc&&(xa(gd,Cd,Dd,rd,Sc),xa(gd,Cd,rd,Dd,Sc),xa(gd,Cd,Dd,rd,Sc),we=rd);Jb=Cc?Math.pow(2,-2*Fb):1/Ub(we);for(let Bd=0,x=gd*Cd;Bd<x;++Bd)we[Bd]*=Jb;return{values:we,scale:1<<Fb,width:gd,height:Cd,x1:vd,y1:od,x2:vd+(kb>>Fb),y2:od+(Rb>>Fb)}}var ba=Jb=>Jb[0],va=Jb=>Jb[1],Ca=ia.one,Sa=[-1,-1],kb=960,Rb=500,Fb=2;t.x=function(Jb){return arguments.length?(ba=ec(Jb),t):ba};t.y=function(Jb){return arguments.length?(va=ec(Jb),t):va};t.weight=function(Jb){return arguments.length?(Ca=ec(Jb),t):Ca};t.size=
function(Jb){if(!arguments.length)return[kb,Rb];var Cc=+Jb[0],Gc=+Jb[1];0<=Cc&&0<=Gc||ia.error("invalid size");return kb=Cc,Rb=Gc,t};t.cellSize=function(Jb){if(!arguments.length)return 1<<Fb;1<=(Jb=+Jb)||ia.error("invalid cell size");Fb=Math.floor(Math.log(Jb)/Math.LN2);return t};t.bandwidth=function(Jb){if(!arguments.length)return Sa;Jb=ia.array(Jb);1===Jb.length&&(Jb=[+Jb[0],+Jb[0]]);2!==Jb.length&&ia.error("invalid bandwidth");return Sa=Jb,t};return t}function fa(t,ba,va,Ca,Sa){const kb=(Sa<<1)+
1;for(let Rb=0;Rb<ba;++Rb)for(let Fb=0,Jb=0;Fb<t+Sa;++Fb)Fb<t&&(Jb+=va[Fb+Rb*t]),Fb>=Sa&&(Fb>=kb&&(Jb-=va[Fb-kb+Rb*t]),Ca[Fb-Sa+Rb*t]=Jb/Math.min(Fb+1,t-1+kb-Fb,kb))}function xa(t,ba,va,Ca,Sa){const kb=(Sa<<1)+1;for(let Rb=0;Rb<t;++Rb)for(let Fb=0,Jb=0;Fb<ba+Sa;++Fb)Fb<ba&&(Jb+=va[Rb+Fb*t]),Fb>=Sa&&(Fb>=kb&&(Jb-=va[Rb+(Fb-kb)*t]),Ca[Rb+(Fb-Sa)*t]=Jb/Math.min(Fb+1,ba-1+kb-Fb,kb))}function Ra(t){h.Transform.call(this,null,t)}function Va(t,ba){yb.forEach(va=>null!=ba[va]?t[va](ba[va]):0);return t}function Ga(t,
ba){var va=[],Ca=Gc=>Gc(Fb),Sa;if(null==ba)va.push(t);else{var kb={};var Rb=0;for(Sa=t.length;Rb<Sa;++Rb){var Fb=t[Rb];var Jb=ba.map(Ca);var Cc=kb[Jb];Cc||(kb[Jb]=Cc=[],Cc.dims=Jb,va.push(Cc));Cc.push(Fb)}}return va}function hb(t){h.Transform.call(this,null,t)}function bb(t){h.Transform.call(this,null,t)}function tb(t){h.Transform.call(this,null,t)}function Pb(t,ba){const va=t.pointRadius();t.context(null);null!=ba&&t.pointRadius(ba);return va}function eb(t){h.Transform.call(this,null,t)}function T(t){h.Transform.call(this,
null,t)}function Z(t,ba,va){const Ca=null==va?Sa=>t(ba(Sa)):Sa=>{var kb=t.pointRadius();Sa=t.pointRadius(va)(ba(Sa));t.pointRadius(kb);return Sa};Ca.context=Sa=>{t.context(Sa);return Ca};return Ca}function ca(t,ba,va){var Ca=Cb(t,ba-1E-6,va).concat(ba);return function(Sa){return Ca.map(function(kb){return[Sa,kb]})}}function ha(t,ba,va){var Ca=Cb(t,ba-1E-6,va).concat(ba);return function(Sa){return Ca.map(function(kb){return[kb,Sa]})}}function La(){function t(){return{type:"MultiLineString",coordinates:ba()}}
function ba(){return Cb(Nb(kb/vd)*vd,Sa,vd).map(Dd).concat(Cb(Nb(Cc/od)*od,Jb,od).map(rd)).concat(Cb(Nb(Ca/Gc)*Gc,va,Gc).filter(function(Bd){return 1E-6<Hb(Bd%vd)}).map(gd)).concat(Cb(Nb(Fb/Sc)*Sc,Rb,Sc).filter(function(Bd){return 1E-6<Hb(Bd%od)}).map(Cd))}var va,Ca,Sa,kb,Rb,Fb,Jb,Cc,Gc=10,Sc=Gc,vd=90,od=360,gd,Cd,Dd,rd,we=2.5;t.lines=function(){return ba().map(function(Bd){return{type:"LineString",coordinates:Bd}})};t.outline=function(){return{type:"Polygon",coordinates:[Dd(kb).concat(rd(Jb).slice(1),
Dd(Sa).reverse().slice(1),rd(Cc).reverse().slice(1))]}};t.extent=function(Bd){return arguments.length?t.extentMajor(Bd).extentMinor(Bd):t.extentMinor()};t.extentMajor=function(Bd){if(!arguments.length)return[[kb,Cc],[Sa,Jb]];kb=+Bd[0][0];Sa=+Bd[1][0];Cc=+Bd[0][1];Jb=+Bd[1][1];kb>Sa&&(Bd=kb,kb=Sa,Sa=Bd);Cc>Jb&&(Bd=Cc,Cc=Jb,Jb=Bd);return t.precision(we)};t.extentMinor=function(Bd){if(!arguments.length)return[[Ca,Fb],[va,Rb]];Ca=+Bd[0][0];va=+Bd[1][0];Fb=+Bd[0][1];Rb=+Bd[1][1];Ca>va&&(Bd=Ca,Ca=va,va=
Bd);Fb>Rb&&(Bd=Fb,Fb=Rb,Rb=Bd);return t.precision(we)};t.step=function(Bd){return arguments.length?t.stepMajor(Bd).stepMinor(Bd):t.stepMinor()};t.stepMajor=function(Bd){if(!arguments.length)return[vd,od];vd=+Bd[0];od=+Bd[1];return t};t.stepMinor=function(Bd){if(!arguments.length)return[Gc,Sc];Gc=+Bd[0];Sc=+Bd[1];return t};t.precision=function(Bd){if(!arguments.length)return we;we=+Bd;gd=ca(Fb,Rb,90);Cd=ha(Ca,va,we);Dd=ca(Cc,Jb,90);rd=ha(kb,Sa,we);return t};return t.extentMajor([[-180,-89.999999],
[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function na(t){h.Transform.call(this,[],t);this.generator=La()}function pa(t,ba,va){t.prototype=ba.prototype=va;va.constructor=t}function m(t,ba){t=Object.create(t.prototype);for(var va in ba)t[va]=ba[va];return t}function E(){}function L(){return this.rgb().formatHex()}function w(){return this.rgb().formatRgb()}function Q(t){var ba,va;t=(t+"").trim().toLowerCase();return(ba=ic.exec(t))?(va=ba[1].length,ba=parseInt(ba[1],16),6===va?
A(ba):3===va?new z(ba>>8&15|ba>>4&240,ba>>4&15|ba&240,(ba&15)<<4|ba&15,1):8===va?y(ba>>24&255,ba>>16&255,ba>>8&255,(ba&255)/255):4===va?y(ba>>12&15|ba>>8&240,ba>>8&15|ba>>4&240,ba>>4&15|ba&240,((ba&15)<<4|ba&15)/255):null):(ba=Bc.exec(t))?new z(ba[1],ba[2],ba[3],1):(ba=jd.exec(t))?new z(255*ba[1]/100,255*ba[2]/100,255*ba[3]/100,1):(ba=Vc.exec(t))?y(ba[1],ba[2],ba[3],ba[4]):(ba=ma.exec(t))?y(255*ba[1]/100,255*ba[2]/100,255*ba[3]/100,ba[4]):(ba=Ha.exec(t))?la(ba[1],ba[2]/100,ba[3]/100,1):(ba=gb.exec(t))?
la(ba[1],ba[2]/100,ba[3]/100,ba[4]):R.hasOwnProperty(t)?A(R[t]):"transparent"===t?new z(NaN,NaN,NaN,0):null}function A(t){return new z(t>>16&255,t>>8&255,t&255,1)}function y(t,ba,va,Ca){0>=Ca&&(t=ba=va=NaN);return new z(t,ba,va,Ca)}function N(t,ba,va,Ca){if(1===arguments.length){var Sa=t;Sa instanceof E||(Sa=Q(Sa));Sa?(Sa=Sa.rgb(),Sa=new z(Sa.r,Sa.g,Sa.b,Sa.opacity)):Sa=new z}else Sa=new z(t,ba,va,null==Ca?1:Ca);return Sa}function z(t,ba,va,Ca){this.r=+t;this.g=+ba;this.b=+va;this.opacity=+Ca}function C(){return`#${O(this.r)}${O(this.g)}${O(this.b)}`}
function H(){const t=V(this.opacity);return`${1===t?"rgb(":"rgba("}${Aa(this.r)}, ${Aa(this.g)}, ${Aa(this.b)}${1===t?")":`, ${t})`}`}function V(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Aa(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function O(t){t=Aa(t);return(16>t?"0":"")+t.toString(16)}function la(t,ba,va,Ca){0>=Ca?t=ba=va=NaN:0>=va||1<=va?t=ba=NaN:0>=ba&&(t=NaN);return new Ma(t,ba,va,Ca)}function za(t){if(t instanceof Ma)return new Ma(t.h,t.s,t.l,t.opacity);t instanceof
E||(t=Q(t));if(!t)return new Ma;if(t instanceof Ma)return t;t=t.rgb();var ba=t.r/255,va=t.g/255,Ca=t.b/255,Sa=Math.min(ba,va,Ca),kb=Math.max(ba,va,Ca),Rb=NaN,Fb=kb-Sa,Jb=(kb+Sa)/2;Fb?(Rb=ba===kb?(va-Ca)/Fb+6*(va<Ca):va===kb?(Ca-ba)/Fb+2:(ba-va)/Fb+4,Fb/=.5>Jb?kb+Sa:2-kb-Sa,Rb*=60):Fb=0<Jb&&1>Jb?0:Rb;return new Ma(Rb,Fb,Jb,t.opacity)}function Ma(t,ba,va,Ca){this.h=+t;this.s=+ba;this.l=+va;this.opacity=+Ca}function Pa(t){t=(t||0)%360;return 0>t?t+360:t}function Ya(t){return Math.max(0,Math.min(1,t||
0))}function vb(t,ba,va){return 255*(60>t?ba+(va-ba)*t/60:180>t?va:240>t?ba+(va-ba)*(240-t)/60:ba)}function jb(t){h.Transform.call(this,null,t)}function Tb(t,ba){let va;ia.isFunction(t)?(va=Ca=>N(t(Ca,ba)),va.dep=Ea(t)):va=ia.constant(N(t||"#888"));return va}function W(t,ba){let va;ia.isFunction(t)?(va=Ca=>t(Ca,ba),va.dep=Ea(t)):t?va=ia.constant(t):(va=Ca=>Ca.$value/Ca.$max||0,va.dep=!0);return va}function Ea(t){if(!ia.isFunction(t))return!1;t=ia.toSet(ia.accessorFields(t));return t.$x||t.$y||t.$value||
t.$max}function Lb(t,ba,va,Ca){const Sa=t.width;var kb=t.height;const Rb=t.x1||0,Fb=t.y1||0,Jb=t.x2||Sa;kb=t.y2||kb;const Cc=t.values;t=Cc?gd=>Cc[gd]:ia.zero;const Gc=Yb.canvas(Jb-Rb,kb-Fb),Sc=Gc.getContext("2d"),vd=Sc.getImageData(0,0,Jb-Rb,kb-Fb),od=vd.data;for(let gd=Fb,Cd=0;gd<kb;++gd){ba.$y=gd-Fb;for(let Dd=Rb,rd=gd*Sa;Dd<Jb;++Dd,Cd+=4){ba.$x=Dd-Rb;ba.$value=t(Dd+rd);const we=va(ba);od[Cd+0]=we.r;od[Cd+1]=we.g;od[Cd+2]=we.b;od[Cd+3]=~~(255*Ca(ba))}}Sc.putImageData(vd,0,0);return Gc}function oc(t){h.Transform.call(this,
null,t);this.modified(!0)}function $b(t,ba){const va=Qb(ba.fit);ba.extent?t.fitExtent(ba.extent,va):ba.size?t.fitSize(ba.size,va):0}function Mb(t){const ba=zb.projection((t||"mercator").toLowerCase());ba||ia.error("Unrecognized projection type: "+t);return ba()}function Qb(t){t=ia.array(t);return 1===t.length?t[0]:{type:"FeatureCollection",features:t.reduce((ba,va)=>ba.concat(xc(va)),[])}}function xc(t){return"FeatureCollection"===t.type?t.features:ia.array(t).filter(ba=>null!=ba).map(ba=>"Feature"===
ba.type?ba:{type:"Feature",geometry:ba})}const ed=Math.sqrt(50),qa=Math.sqrt(10),Db=Math.sqrt(2),Ua=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];wb.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},
{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean","default":!1},{name:"resolve",type:"enum",values:["shared","independent"],"default":"independent"},{name:"zero",type:"boolean","default":!0},{name:"smooth",type:"boolean","default":!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string","null":!0,"default":"contour"}]};ia.inherits(wb,h.Transform,{transform(t,ba){if(this.value&&!ba.changed()&&
!t.modified())return ba.StopPropagation;var va=ba.fork(ba.NO_SOURCE|ba.NO_FIELDS);ba=ba.materialize(ba.SOURCE).source;var Ca=t.field||ia.identity,Sa=Ba().smooth(!1!==t.smooth),kb=t.thresholds||ub(ba,Ca,t),Rb=null===t.as?null:t.as||"contour",Fb=[];ba.forEach(Jb=>{const Cc=Ca(Jb),Gc=Sa.size([Cc.width,Cc.height])(Cc.values,ia.isArray(kb)?kb:kb(Cc.values));sb(Gc,Cc,Jb,t);Gc.forEach(Sc=>{Fb.push(h.rederive(Jb,h.ingest(null!=Rb?{[Rb]:Sc}:Sc)))})});this.value&&(va.rem=this.value);this.value=va.source=va.add=
Fb;return va}});Ra.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean","default":!1},{name:"as",type:"string","default":"grid"}]};const yb="x y weight size cellSize bandwidth".split(" ");
ia.inherits(Ra,h.Transform,{transform(t,ba){if(this.value&&!ba.changed()&&!t.modified())return ba.StopPropagation;var va=ba.fork(ba.NO_SOURCE|ba.NO_FIELDS);ba=ba.materialize(ba.SOURCE).source;ba=Ga(ba,t.groupby);var Ca=(t.groupby||[]).map(ia.accessorName),Sa=Va(ra(),t),kb=t.as||"grid",Rb=[];Rb=ba.map(Fb=>{var Jb=h.ingest,Cc={[kb]:Sa(Fb,t.counts)};Fb=Fb.dims;for(let Gc=0;Gc<Ca.length;++Gc)Cc[Ca[Gc]]=Fb[Gc];return Jb.call(h,Cc)});this.value&&(va.rem=this.value);this.value=va.source=va.add=Rb;return va}});
hb.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean","default":!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean","default":!0}]};ia.inherits(hb,h.Transform,{transform(t,
ba){if(this.value&&!ba.changed()&&!t.modified())return ba.StopPropagation;var va=ba.fork(ba.NO_SOURCE|ba.NO_FIELDS),Ca=Ba().smooth(!1!==t.smooth),Sa=t.values,kb=t.thresholds||Za(t.count||10,t.nice,!!Sa),Rb=t.size;if(!Sa){Sa=ba.materialize(ba.SOURCE).source;t=Va(ra(),t)(Sa,!0);var Fb=xb(t,t.scale||1,t.scale||1,0,0);Rb=[t.width,t.height];Sa=t.values}kb=ia.isArray(kb)?kb:kb(Sa);Sa=Ca.size(Rb)(Sa,kb);Fb&&Sa.forEach(Fb);this.value&&(va.rem=this.value);this.value=va.source=va.add=(Sa||[]).map(h.ingest);
return va}});bb.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ia.inherits(bb,h.Transform,{transform(t,ba){var va=this._features,Ca=this._points,Sa=t.fields,kb=Sa&&Sa[0],Rb=Sa&&Sa[1],Fb=t.geojson||!Sa&&ia.identity;Sa=ba.ADD;t=t.modified()||ba.changed(ba.REM)||ba.modified(ia.accessorFields(Fb))||kb&&ba.modified(ia.accessorFields(kb))||Rb&&ba.modified(ia.accessorFields(Rb));if(!this.value||t)Sa=ba.SOURCE,this._features=va=
[],this._points=Ca=[];Fb&&ba.visit(Sa,Jb=>va.push(Fb(Jb)));kb&&Rb&&(ba.visit(Sa,Jb=>{var Cc=kb(Jb);Jb=Rb(Jb);null!=Cc&&null!=Jb&&(Cc=+Cc)===Cc&&(Jb=+Jb)===Jb&&Ca.push([Cc,Jb])}),va=va.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:Ca}}));this.value={type:"FeatureCollection",features:va}}});tb.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",
"default":"path"}]};ia.inherits(tb,h.Transform,{transform(t,ba){var va=ba.fork(ba.ALL),Ca=this.value,Sa=t.field||ia.identity,kb=t.as||"path",Rb=va.SOURCE;!Ca||t.modified()?(this.value=Ca=zb.getProjectionPath(t.projection),va.materialize().reflow()):Rb=Sa===ia.identity||ba.modified(Sa.fields)?va.ADD_MOD:va.ADD;t=Pb(Ca,t.pointRadius);va.visit(Rb,Fb=>Fb[kb]=Ca(Sa(Fb)));Ca.pointRadius(t);return va.modifies(kb)}});eb.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",
required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,"default":["x","y"]}]};ia.inherits(eb,h.Transform,{transform(t,ba){function va(Cc){const Gc=Ca([Sa(Cc),kb(Cc)]);Gc?(Cc[Fb]=Gc[0],Cc[Jb]=Gc[1]):(Cc[Fb]=void 0,Cc[Jb]=void 0)}var Ca=t.projection,Sa=t.fields[0],kb=t.fields[1],Rb=t.as||["x","y"],Fb=Rb[0],Jb=Rb[1];t.modified()?ba=ba.materialize().reflow(!0).visit(ba.SOURCE,va):(t=ba.modified(Sa.fields)||ba.modified(kb.fields),ba.visit(t?ba.ADD_MOD:
ba.ADD,va));return ba.modifies(Rb)}});T.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field","default":"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string","default":"shape"}]};ia.inherits(T,h.Transform,{transform(t,ba){ba=ba.fork(ba.ALL);var va=this.value,Ca=t.as||"shape",Sa=ba.ADD;if(!va||t.modified())this.value=va=Z(zb.getProjectionPath(t.projection),t.field||ia.field("datum"),t.pointRadius),
ba.materialize().reflow(),Sa=ba.SOURCE;ba.visit(Sa,kb=>kb[Ca]=va);return ba.modifies(Ca)}});var Hb=Math.abs,Nb=Math.ceil;na.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,
length:2},{name:"stepMajor",type:"number",array:!0,length:2,"default":[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,"default":[10,10]},{name:"precision",type:"number","default":2.5}]};ia.inherits(na,h.Transform,{transform(t,ba){var va=this.value,Ca=this.generator;if(!va.length||t.modified())for(const Sa in t)if(ia.isFunction(Ca[Sa]))Ca[Sa](t[Sa]);t=Ca();va.length?ba.mod.push(h.replace(va[0],t)):ba.add.push(h.ingest(t));va[0]=t;return ba}});var Zb=1/.7,ic=/^#([0-9a-f]{3,8})$/,Bc=RegExp("^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$"),
jd=RegExp("^rgb\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),Vc=RegExp("^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),ma=RegExp("^rgba\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),
Ha=RegExp("^hsl\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),gb=RegExp("^hsla\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),R={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,
bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,
darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,
lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,
mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,
plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,
yellow:16776960,yellowgreen:10145074};pa(E,Q,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:L,formatHex:L,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return za(this).formatHsl()},formatRgb:w,toString:w});pa(z,N,m(E,{brighter(t){t=null==t?Zb:Math.pow(Zb,t);return new z(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){t=null==t?.7:Math.pow(.7,t);return new z(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},
clamp(){return new z(Aa(this.r),Aa(this.g),Aa(this.b),V(this.opacity))},displayable(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:C,formatHex:C,formatHex8:function(){return`#${O(this.r)}${O(this.g)}${O(this.b)}${O(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:H,toString:H}));pa(Ma,function(t,ba,va,Ca){return 1===arguments.length?za(t):new Ma(t,ba,va,null==Ca?1:Ca)},m(E,{brighter(t){t=null==t?Zb:Math.pow(Zb,t);
return new Ma(this.h,this.s,this.l*t,this.opacity)},darker(t){t=null==t?.7:Math.pow(.7,t);return new Ma(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(0>this.h),ba=isNaN(t)||isNaN(this.s)?0:this.s,va=this.l;ba=va+(.5>va?va:1-va)*ba;va=2*va-ba;return new z(vb(240<=t?t-240:t+120,va,ba),vb(t,va,ba),vb(120>t?t+240:t-120,va,ba),this.opacity)},clamp(){return new Ma(Pa(this.h),Ya(this.s),Ya(this.l),V(this.opacity))},displayable(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&
1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl(){const t=V(this.opacity);return`${1===t?"hsl(":"hsla("}${Pa(this.h)}, ${100*Ya(this.s)}%, ${100*Ya(this.l)}%${1===t?")":`, ${t})`}`}}));jb.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],"default":"independent"},{name:"as",type:"string","default":"image"}]};ia.inherits(jb,
h.Transform,{transform(t,ba){if(!ba.changed()&&!t.modified())return ba.StopPropagation;var va=ba.materialize(ba.SOURCE).source,Ca="shared"===t.resolve,Sa=t.field||ia.identity,kb=W(t.opacity,t),Rb=Tb(t.color,t),Fb=t.as||"image",Jb={$x:0,$y:0,$value:0,$max:Ca?mc(va.map(Cc=>mc(Sa(Cc).values))):0};va.forEach(Cc=>{const Gc=Sa(Cc),Sc=ia.extend({},Cc,Jb);Ca||(Sc.$max=mc(Gc.values||[]));Cc[Fb]=Lb(Gc,Sc,Rb.dep?Rb:ia.constant(Rb(Sc)),kb.dep?kb:ia.constant(kb(Sc)))});return ba.reflow(!0).modifies(Fb)}});ia.inherits(oc,
h.Transform,{transform(t,ba){let va=this.value;!va||t.modified("type")?(this.value=va=Mb(t.type),zb.projectionProperties.forEach(Ca=>{if(null!=t[Ca]){var Sa=va,kb=t[Ca];if(ia.isFunction(Sa[Ca]))Sa[Ca](kb)}})):zb.projectionProperties.forEach(Ca=>{if(t.modified(Ca)){var Sa=va,kb=t[Ca];if(ia.isFunction(Sa[Ca]))Sa[Ca](kb)}});null!=t.pointRadius&&va.path.pointRadius(t.pointRadius);t.fit&&$b(va,t);return ba.fork(ba.NO_SOURCE|ba.NO_FIELDS)}});u.contour=hb;u.geojson=bb;u.geopath=tb;u.geopoint=eb;u.geoshape=
T;u.graticule=na;u.heatmap=jb;u.isocontour=wb;u.kde2d=Ra;u.projection=oc})};
shadow$provide[39]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(29),ob(21)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-util"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h((u.vega=u.vega||{},u.vega.transforms={}),u.vega,u.vega))})(this,function(u,h,ia){function ab(O,la,za,Ma){if(isNaN(la)||isNaN(za))return O;var Pa,Ya=O._root;Ma={data:Ma};var vb=O._x0,jb=O._y0,Tb=O._x1,W=O._y1,Ea,Lb,oc,$b,Mb;if(!Ya)return O._root=
Ma,O;for(;Ya.length;)if((oc=la>=(Ea=(vb+Tb)/2))?vb=Ea:Tb=Ea,($b=za>=(Lb=(jb+W)/2))?jb=Lb:W=Lb,Pa=Ya,!(Ya=Ya[Mb=$b<<1|oc]))return Pa[Mb]=Ma,O;var Qb=+O._x.call(null,Ya.data);var xc=+O._y.call(null,Ya.data);if(la===Qb&&za===xc)return Ma.next=Ya,Pa?Pa[Mb]=Ma:O._root=Ma,O;do Pa=Pa?Pa[Mb]=Array(4):O._root=Array(4),(oc=la>=(Ea=(vb+Tb)/2))?vb=Ea:Tb=Ea,($b=za>=(Lb=(jb+W)/2))?jb=Lb:W=Lb;while((Mb=$b<<1|oc)===(oc=(xc>=Lb)<<1|Qb>=Ea));return Pa[oc]=Ya,Pa[Mb]=Ma,O}function zb(O,la,za,Ma,Pa){this.node=O;this.x0=
la;this.y0=za;this.x1=Ma;this.y1=Pa}function Yb(O){return O[0]}function ac(O){return O[1]}function Xb(O,la,za){la=new mc(null==la?Yb:la,null==za?ac:za,NaN,NaN,NaN,NaN);return null==O?la:la.addAll(O)}function mc(O,la,za,Ma,Pa,Ya){this._x=O;this._y=la;this._x0=za;this._y0=Ma;this._x1=Pa;this._y1=Ya;this._root=void 0}function Cb(O){for(var la={data:O.data},za=la;O=O.next;)za=za.next={data:O.data};return la}function Ub(O){return function(){return O}}function jc(O){return O.x+O.vx}function Ba(O){return O.y+
O.vy}function Za(O){return O.index}function wb(O,la){O=O.get(la);if(!O)throw Error("node not found: "+la);return O}function ub(){for(var O=0,la=arguments.length,za={},Ma;O<la;++O){if(!(Ma=arguments[O]+"")||Ma in za||/[\s.]/.test(Ma))throw Error("illegal type: "+Ma);za[Ma]=[]}return new sb(za)}function sb(O){this._=O}function xb(O,la){return O.trim().split(/^|\s+/).map(function(za){var Ma="",Pa=za.indexOf(".");0<=Pa&&(Ma=za.slice(Pa+1),za=za.slice(0,Pa));if(za&&!la.hasOwnProperty(za))throw Error("unknown type: "+
za);return{type:za,name:Ma}})}function ib(O,la,za){for(var Ma=0,Pa=O.length;Ma<Pa;++Ma)if(O[Ma].name===la){O[Ma]=La;O=O.slice(0,Ma).concat(O.slice(Ma+1));break}null!=za&&O.push({name:la,value:za});return O}function ec(){Q=0}function ra(){this._call=this._time=this._next=null}function fa(O,la,za){var Ma=new ra;Ma.restart(O,la,za);return Ma}function xa(){Q=(w=y.now())+A;na=pa=0;try{Q||(N(ec),Q=y.now()+A);++na;for(var O=E,la;O;)0<=(la=Q-O._time)&&O._call.call(void 0,la),O=O._next;--na}finally{na=0;O=
E;for(var za=Infinity;O;)if(O._call){za>O._time&&(za=O._time);var Ma=O;O=O._next}else la=O._next,O._next=null,O=Ma?Ma._next=la:E=la;L=Ma;Va(za);Q=0}}function Ra(){var O=y.now(),la=O-w;1E3<la&&(A-=la,w=O)}function Va(O){na||(pa&&(pa=clearTimeout(pa)),24<O-Q?(Infinity>O&&(pa=setTimeout(xa,O-y.now()-A)),m&&(m=clearInterval(m))):(m||(w=y.now(),m=setInterval(Ra,1E3)),na=1,N(xa)))}function Ga(){let O=1;return()=>(O=(1664525*O+1013904223)%4294967296)/4294967296}function hb(O){return O.x}function bb(O){return O.y}
function tb(O){function la(){za();$b.call("tick",Ya);vb<jb&&(oc.stop(),$b.call("end",Ya))}function za(Qb){var xc,ed=O.length;void 0===Qb&&(Qb=1);for(var qa=0;qa<Qb;++qa)for(vb+=(W-vb)*Tb,Lb.forEach(function(Ua){Ua(vb)}),xc=0;xc<ed;++xc){var Db=O[xc];null==Db.fx?Db.x+=Db.vx*=Ea:(Db.x=Db.fx,Db.vx=0);null==Db.fy?Db.y+=Db.vy*=Ea:(Db.y=Db.fy,Db.vy=0)}return Ya}function Ma(){for(var Qb=0,xc=O.length,ed;Qb<xc;++Qb){ed=O[Qb];ed.index=Qb;null!=ed.fx&&(ed.x=ed.fx);null!=ed.fy&&(ed.y=ed.fy);if(isNaN(ed.x)||
isNaN(ed.y)){var qa=10*Math.sqrt(.5+Qb),Db=Qb*z;ed.x=qa*Math.cos(Db);ed.y=qa*Math.sin(Db)}if(isNaN(ed.vx)||isNaN(ed.vy))ed.vx=ed.vy=0}}function Pa(Qb){Qb.initialize&&Qb.initialize(O,Mb);return Qb}var Ya,vb=1,jb=.001,Tb=1-Math.pow(jb,1/300),W=0,Ea=.6,Lb=new Map,oc=fa(la),$b=ub("tick","end"),Mb=Ga();null==O&&(O=[]);Ma();return Ya={tick:za,restart:function(){return oc.restart(la),Ya},stop:function(){return oc.stop(),Ya},nodes:function(Qb){return arguments.length?(O=Qb,Ma(),Lb.forEach(Pa),Ya):O},alpha:function(Qb){return arguments.length?
(vb=+Qb,Ya):vb},alphaMin:function(Qb){return arguments.length?(jb=+Qb,Ya):jb},alphaDecay:function(Qb){return arguments.length?(Tb=+Qb,Ya):+Tb},alphaTarget:function(Qb){return arguments.length?(W=+Qb,Ya):W},velocityDecay:function(Qb){return arguments.length?(Ea=1-Qb,Ya):1-Ea},randomSource:function(Qb){return arguments.length?(Mb=Qb,Lb.forEach(Pa),Ya):Mb},force:function(Qb,xc){return 1<arguments.length?(null==xc?Lb.delete(Qb):Lb.set(Qb,Pa(xc)),Ya):Lb.get(Qb)},find:function(Qb,xc,ed){var qa,Db=O.length;
ed=null==ed?Infinity:ed*ed;for(qa=0;qa<Db;++qa){var Ua=O[qa];var yb=Qb-Ua.x;var Hb=xc-Ua.y;yb=yb*yb+Hb*Hb;if(yb<ed){var Nb=Ua;ed=yb}}return Nb},on:function(Qb,xc){return 1<arguments.length?($b.on(Qb,xc),Ya):$b.on(Qb)}}}function Pb(O){h.Transform.call(this,null,O)}function eb(O,la){return()=>O.touch(la).run()}function T(O,la){O=tb(O);const za=O.stop,Ma=O.restart;let Pa=!1;O.stopped=()=>Pa;O.restart=()=>(Pa=!1,Ma());O.stop=()=>(Pa=!0,za());return Z(O,la,!0).on("end",()=>Pa=!0)}function Z(O,la,za,Ma){var Pa=
ia.array(la.forces),Ya;var vb=0;for(Ya=H.length;vb<Ya;++vb){var jb=H[vb];if("forces"!==jb&&la.modified(jb))O[jb](la[jb])}vb=0;for(Ya=Pa.length;vb<Ya;++vb){var Tb="forces"+vb;if(za||la.modified("forces",vb)){jb=void 0;var W=Pa[vb];ia.hasOwnProperty(C,W.force)||ia.error("Unrecognized force: "+W.force);var Ea=C[W.force]();for(jb in W)ia.isFunction(Ea[jb])&&ca(Ea[jb],W[jb],W);jb=Ea}else{if(jb=Ma)a:{Ea=jb=void 0;W=Pa[vb];var Lb=Ma;for(Ea in W)if(ia.isFunction(jb=W[Ea])&&Lb.modified(ia.accessorFields(jb))){jb=
1;break a}jb=0}jb=jb?O.force(Tb):null}jb&&O.force(Tb,jb)}for(Ya=O.numForces||0;vb<Ya;++vb)O.force("forces"+vb,null);O.numForces=Pa.length;return O}function ca(O,la,za){O(ia.isFunction(la)?Ma=>la(Ma,za):la)}var ha=Xb.prototype=mc.prototype;ha.copy=function(){var O=new mc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),la=this._root,za,Ma;if(!la)return O;if(!la.length)return O._root=Cb(la),O;for(za=[{source:la,target:O._root=Array(4)}];la=za.pop();)for(var Pa=0;4>Pa;++Pa)if(Ma=la.source[Pa])Ma.length?
za.push({source:Ma,target:la.target[Pa]=Array(4)}):la.target[Pa]=Cb(Ma);return O};ha.add=function(O){const la=+this._x.call(null,O),za=+this._y.call(null,O);return ab(this.cover(la,za),la,za,O)};ha.addAll=function(O){var la,za,Ma=O.length,Pa,Ya,vb=Array(Ma),jb=Array(Ma),Tb=Infinity,W=Infinity,Ea=-Infinity,Lb=-Infinity;for(za=0;za<Ma;++za)isNaN(Pa=+this._x.call(null,la=O[za]))||isNaN(Ya=+this._y.call(null,la))||(vb[za]=Pa,jb[za]=Ya,Pa<Tb&&(Tb=Pa),Pa>Ea&&(Ea=Pa),Ya<W&&(W=Ya),Ya>Lb&&(Lb=Ya));if(Tb>Ea||
W>Lb)return this;this.cover(Tb,W).cover(Ea,Lb);for(za=0;za<Ma;++za)ab(this,vb[za],jb[za],O[za]);return this};ha.cover=function(O,la){if(isNaN(O=+O)||isNaN(la=+la))return this;var za=this._x0,Ma=this._y0,Pa=this._x1,Ya=this._y1;if(isNaN(za))Pa=(za=Math.floor(O))+1,Ya=(Ma=Math.floor(la))+1;else{for(var vb=Pa-za||1,jb=this._root,Tb,W;za>O||O>=Pa||Ma>la||la>=Ya;)switch(W=(la<Ma)<<1|O<za,Tb=Array(4),Tb[W]=jb,jb=Tb,vb*=2,W){case 0:Pa=za+vb;Ya=Ma+vb;break;case 1:za=Pa-vb;Ya=Ma+vb;break;case 2:Pa=za+vb;Ma=
Ya-vb;break;case 3:za=Pa-vb,Ma=Ya-vb}this._root&&this._root.length&&(this._root=jb)}this._x0=za;this._y0=Ma;this._x1=Pa;this._y1=Ya;return this};ha.data=function(){var O=[];this.visit(function(la){if(!la.length){do O.push(la.data);while(la=la.next)}});return O};ha.extent=function(O){return arguments.length?this.cover(+O[0][0],+O[0][1]).cover(+O[1][0],+O[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};ha.find=function(O,la,za){var Ma=this._x0,Pa=this._y0,Ya,vb,jb,Tb,W=this._x1,
Ea=this._y1,Lb=[],oc=this._root,$b;oc&&Lb.push(new zb(oc,Ma,Pa,W,Ea));null==za?za=Infinity:(Ma=O-za,Pa=la-za,W=O+za,Ea=la+za,za*=za);for(;$b=Lb.pop();)if(!(!(oc=$b.node)||(Ya=$b.x0)>W||(vb=$b.y0)>Ea||(jb=$b.x1)<Ma||(Tb=$b.y1)<Pa))if(oc.length){$b=(Ya+jb)/2;var Mb=(vb+Tb)/2;Lb.push(new zb(oc[3],$b,Mb,jb,Tb),new zb(oc[2],Ya,Mb,$b,Tb),new zb(oc[1],$b,vb,jb,Mb),new zb(oc[0],Ya,vb,$b,Mb));if(oc=(la>=Mb)<<1|O>=$b)$b=Lb[Lb.length-1],Lb[Lb.length-1]=Lb[Lb.length-1-oc],Lb[Lb.length-1-oc]=$b}else if($b=O-+this._x.call(null,
oc.data),Mb=la-+this._y.call(null,oc.data),$b=$b*$b+Mb*Mb,$b<za){var Qb=Math.sqrt(za=$b);Ma=O-Qb;Pa=la-Qb;W=O+Qb;Ea=la+Qb;Qb=oc.data}return Qb};ha.remove=function(O){if(isNaN(Tb=+this._x.call(null,O))||isNaN(W=+this._y.call(null,O)))return this;var la,za=this._root,Ma,Pa=this._x0,Ya=this._y0,vb=this._x1,jb=this._y1,Tb,W,Ea,Lb,oc,$b,Mb;if(!za)return this;if(za.length)for(;;){(oc=Tb>=(Ea=(Pa+vb)/2))?Pa=Ea:vb=Ea;($b=W>=(Lb=(Ya+jb)/2))?Ya=Lb:jb=Lb;if(!(la=za,za=za[Mb=$b<<1|oc]))return this;if(!za.length)break;
if(la[Mb+1&3]||la[Mb+2&3]||la[Mb+3&3]){var Qb=la;var xc=Mb}}for(;za.data!==O;)if(!(Ma=za,za=za.next))return this;(O=za.next)&&delete za.next;if(Ma)return O?Ma.next=O:delete Ma.next,this;if(!la)return this._root=O,this;O?la[Mb]=O:delete la[Mb];(za=la[0]||la[1]||la[2]||la[3])&&za===(la[3]||la[2]||la[1]||la[0])&&!za.length&&(Qb?Qb[xc]=za:this._root=za);return this};ha.removeAll=function(O){for(var la=0,za=O.length;la<za;++la)this.remove(O[la]);return this};ha.root=function(){return this._root};ha.size=
function(){var O=0;this.visit(function(la){if(!la.length){do++O;while(la=la.next)}});return O};ha.visit=function(O){var la=[],za,Ma=this._root,Pa,Ya,vb,jb,Tb;for(Ma&&la.push(new zb(Ma,this._x0,this._y0,this._x1,this._y1));za=la.pop();)if(!O(Ma=za.node,Ya=za.x0,vb=za.y0,jb=za.x1,Tb=za.y1)&&Ma.length){za=(Ya+jb)/2;var W=(vb+Tb)/2;(Pa=Ma[3])&&la.push(new zb(Pa,za,W,jb,Tb));(Pa=Ma[2])&&la.push(new zb(Pa,Ya,W,za,Tb));(Pa=Ma[1])&&la.push(new zb(Pa,za,vb,jb,W));(Pa=Ma[0])&&la.push(new zb(Pa,Ya,vb,za,W))}return this};
ha.visitAfter=function(O){var la=[],za=[],Ma;for(this._root&&la.push(new zb(this._root,this._x0,this._y0,this._x1,this._y1));Ma=la.pop();){var Pa=Ma.node;if(Pa.length){var Ya,vb=Ma.x0,jb=Ma.y0,Tb=Ma.x1,W=Ma.y1,Ea=(vb+Tb)/2,Lb=(jb+W)/2;(Ya=Pa[0])&&la.push(new zb(Ya,vb,jb,Ea,Lb));(Ya=Pa[1])&&la.push(new zb(Ya,Ea,jb,Tb,Lb));(Ya=Pa[2])&&la.push(new zb(Ya,vb,Lb,Ea,W));(Ya=Pa[3])&&la.push(new zb(Ya,Ea,Lb,Tb,W))}za.push(Ma)}for(;Ma=za.pop();)O(Ma.node,Ma.x0,Ma.y0,Ma.x1,Ma.y1);return this};ha.x=function(O){return arguments.length?
(this._x=O,this):this._x};ha.y=function(O){return arguments.length?(this._y=O,this):this._y};var La={value:()=>{}};sb.prototype=ub.prototype={constructor:sb,on:function(O,la){var za=this._,Ma=xb(O+"",za),Pa,Ya=-1,vb=Ma.length;if(2>arguments.length)for(;++Ya<vb;){var jb;if(jb=Pa=(O=Ma[Ya]).type){a:{jb=za[Pa];for(var Tb=0,W=jb.length;Tb<W;++Tb)if((Pa=jb[Tb]).name===O.name){Pa=Pa.value;break a}Pa=void 0}jb=Pa}if(jb)return Pa}else{if(null!=la&&"function"!==typeof la)throw Error("invalid callback: "+la);
for(;++Ya<vb;)if(Pa=(O=Ma[Ya]).type)za[Pa]=ib(za[Pa],O.name,la);else if(null==la)for(Pa in za)za[Pa]=ib(za[Pa],O.name,null);return this}},copy:function(){var O={},la=this._,za;for(za in la)O[za]=la[za].slice();return new sb(O)},call:function(O,la){if(0<(Pa=arguments.length-2))for(var za=Array(Pa),Ma=0,Pa,Ya;Ma<Pa;++Ma)za[Ma]=arguments[Ma+2];if(!this._.hasOwnProperty(O))throw Error("unknown type: "+O);Ya=this._[O];Ma=0;for(Pa=Ya.length;Ma<Pa;++Ma)Ya[Ma].value.apply(la,za)},apply:function(O,la,za){if(!this._.hasOwnProperty(O))throw Error("unknown type: "+
O);O=this._[O];for(var Ma=0,Pa=O.length;Ma<Pa;++Ma)O[Ma].value.apply(la,za)}};var na=0,pa=0,m=0,E,L,w=0,Q=0,A=0,y="object"===typeof performance&&performance.now?performance:Date,N="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(O){setTimeout(O,17)};ra.prototype=fa.prototype={constructor:ra,restart:function(O,la,za){if("function"!==typeof O)throw new TypeError("callback is not a function");za=(null==za?Q||(N(ec),Q=y.now()+A):+za)+(null==la?
0:+la);this._next||L===this||(L?L._next=this:E=this,L=this);this._call=O;this._time=za;Va()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Va())}};var z=Math.PI*(3-Math.sqrt(5));const C={center:function(O,la){function za(){var Ya,vb=Ma.length,jb=0,Tb=0;for(Ya=0;Ya<vb;++Ya){var W=Ma[Ya];jb+=W.x;Tb+=W.y}jb=(jb/vb-O)*Pa;Tb=(Tb/vb-la)*Pa;for(Ya=0;Ya<vb;++Ya)W=Ma[Ya],W.x-=jb,W.y-=Tb}var Ma,Pa=1;null==O&&(O=0);null==la&&(la=0);za.initialize=function(Ya){Ma=Ya};za.x=function(Ya){return arguments.length?
(O=+Ya,za):O};za.y=function(Ya){return arguments.length?(la=+Ya,za):la};za.strength=function(Ya){return arguments.length?(Pa=+Ya,za):Pa};return za},collide:function(O){function la(){function W(Db,Ua,yb,Hb,Nb){var Zb=Db.data;Db=Db.r;var ic=xc+Db;if(Zb)Zb.index>$b.index&&(Ua=Mb-Zb.x-Zb.vx,yb=Qb-Zb.y-Zb.vy,Hb=Ua*Ua+yb*yb,Hb<ic*ic&&(0===Ua&&(Ua=1E-6*(vb()-.5),Hb+=Ua*Ua),0===yb&&(yb=1E-6*(vb()-.5),Hb+=yb*yb),Hb=(ic-(Hb=Math.sqrt(Hb)))/Hb*jb,$b.vx+=(Ua*=Hb)*(ic=(Db*=Db)/(ed+Db)),$b.vy+=(yb*=Hb)*ic,Zb.vx-=
Ua*(ic=1-ic),Zb.vy-=yb*ic));else return Ua>Mb+ic||Hb<Mb-ic||yb>Qb+ic||Nb<Qb-ic}for(var Ea,Lb=Pa.length,oc,$b,Mb,Qb,xc,ed,qa=0;qa<Tb;++qa)for(oc=Xb(Pa,jc,Ba).visitAfter(za),Ea=0;Ea<Lb;++Ea)$b=Pa[Ea],xc=Ya[$b.index],ed=xc*xc,Mb=$b.x+$b.vx,Qb=$b.y+$b.vy,oc.visit(W)}function za(W){if(W.data)return W.r=Ya[W.data.index];for(var Ea=W.r=0;4>Ea;++Ea)W[Ea]&&W[Ea].r>W.r&&(W.r=W[Ea].r)}function Ma(){if(Pa){var W,Ea=Pa.length;Ya=Array(Ea);for(W=0;W<Ea;++W){var Lb=Pa[W];Ya[Lb.index]=+O(Lb,W,Pa)}}}var Pa,Ya,vb,
jb=1,Tb=1;"function"!==typeof O&&(O=Ub(null==O?1:+O));la.initialize=function(W,Ea){Pa=W;vb=Ea;Ma()};la.iterations=function(W){return arguments.length?(Tb=+W,la):Tb};la.strength=function(W){return arguments.length?(jb=+W,la):jb};la.radius=function(W){return arguments.length?(O="function"===typeof W?W:Ub(+W),Ma(),la):O};return la},nbody:function(){function O($b){var Mb=Pa.length,Qb=Xb(Pa,hb,bb).visitAfter(za);jb=$b;for($b=0;$b<Mb;++$b)Ya=Pa[$b],Qb.visit(Ma)}function la(){if(Pa){var $b,Mb=Pa.length;
W=Array(Mb);for($b=0;$b<Mb;++$b){var Qb=Pa[$b];W[Qb.index]=+Tb(Qb,$b,Pa)}}}function za($b){var Mb=0,Qb,xc,ed=0,qa,Db,Ua;if($b.length){for(qa=Db=Ua=0;4>Ua;++Ua)(Qb=$b[Ua])&&(xc=Math.abs(Qb.value))&&(Mb+=Qb.value,ed+=xc,qa+=xc*Qb.x,Db+=xc*Qb.y);$b.x=qa/ed;$b.y=Db/ed}else{Qb=$b;Qb.x=Qb.data.x;Qb.y=Qb.data.y;do Mb+=W[Qb.data.index];while(Qb=Qb.next)}$b.value=Mb}function Ma($b,Mb,Qb,xc){if(!$b.value)return!0;Qb=$b.x-Ya.x;var ed=$b.y-Ya.y;Mb=xc-Mb;xc=Qb*Qb+ed*ed;if(Mb*Mb/oc<xc)return xc<Lb&&(0===Qb&&(Qb=
1E-6*(vb()-.5),xc+=Qb*Qb),0===ed&&(ed=1E-6*(vb()-.5),xc+=ed*ed),xc<Ea&&(xc=Math.sqrt(Ea*xc)),Ya.vx+=Qb*$b.value*jb/xc,Ya.vy+=ed*$b.value*jb/xc),!0;if(!($b.length||xc>=Lb)){if($b.data!==Ya||$b.next)0===Qb&&(Qb=1E-6*(vb()-.5),xc+=Qb*Qb),0===ed&&(ed=1E-6*(vb()-.5),xc+=ed*ed),xc<Ea&&(xc=Math.sqrt(Ea*xc));do $b.data!==Ya&&(Mb=W[$b.data.index]*jb/xc,Ya.vx+=Qb*Mb,Ya.vy+=ed*Mb);while($b=$b.next)}}var Pa,Ya,vb,jb,Tb=Ub(-30),W,Ea=1,Lb=Infinity,oc=.81;O.initialize=function($b,Mb){Pa=$b;vb=Mb;la()};O.strength=
function($b){return arguments.length?(Tb="function"===typeof $b?$b:Ub(+$b),la(),O):Tb};O.distanceMin=function($b){return arguments.length?(Ea=$b*$b,O):Math.sqrt(Ea)};O.distanceMax=function($b){return arguments.length?(Lb=$b*$b,O):Math.sqrt(Lb)};O.theta=function($b){return arguments.length?(oc=$b*$b,O):Math.sqrt(oc)};return O},link:function(O){function la(Qb){for(var xc=0,ed=O.length;xc<Mb;++xc)for(var qa=0,Db,Ua,yb,Hb,Nb;qa<ed;++qa)Db=O[qa],Ua=Db.source,Db=Db.target,yb=Db.x+Db.vx-Ua.x-Ua.vx||1E-6*
($b()-.5),Hb=Db.y+Db.vy-Ua.y-Ua.vy||1E-6*($b()-.5),Nb=Math.sqrt(yb*yb+Hb*Hb),Nb=(Nb-W[qa])/Nb*Qb*jb[qa],yb*=Nb,Hb*=Nb,Db.vx-=yb*(Nb=oc[qa]),Db.vy-=Hb*Nb,Ua.vx+=yb*(Nb=1-Nb),Ua.vy+=Hb*Nb}function za(){if(Ea){var Qb=Ea.length,xc=O.length,ed=new Map(Ea.map((Db,Ua)=>[Ya(Db,Ua,Ea),Db]));var qa=0;for(Lb=Array(Qb);qa<xc;++qa)Qb=O[qa],Qb.index=qa,"object"!==typeof Qb.source&&(Qb.source=wb(ed,Qb.source)),"object"!==typeof Qb.target&&(Qb.target=wb(ed,Qb.target)),Lb[Qb.source.index]=(Lb[Qb.source.index]||0)+
1,Lb[Qb.target.index]=(Lb[Qb.target.index]||0)+1;qa=0;for(oc=Array(xc);qa<xc;++qa)Qb=O[qa],oc[qa]=Lb[Qb.source.index]/(Lb[Qb.source.index]+Lb[Qb.target.index]);jb=Array(xc);Ma();W=Array(xc);Pa()}}function Ma(){if(Ea)for(var Qb=0,xc=O.length;Qb<xc;++Qb)jb[Qb]=+vb(O[Qb],Qb,O)}function Pa(){if(Ea)for(var Qb=0,xc=O.length;Qb<xc;++Qb)W[Qb]=+Tb(O[Qb],Qb,O)}var Ya=Za,vb=function(Qb){return 1/Math.min(Lb[Qb.source.index],Lb[Qb.target.index])},jb,Tb=Ub(30),W,Ea,Lb,oc,$b,Mb=1;null==O&&(O=[]);la.initialize=
function(Qb,xc){Ea=Qb;$b=xc;za()};la.links=function(Qb){return arguments.length?(O=Qb,za(),la):O};la.id=function(Qb){return arguments.length?(Ya=Qb,la):Ya};la.iterations=function(Qb){return arguments.length?(Mb=+Qb,la):Mb};la.strength=function(Qb){return arguments.length?(vb="function"===typeof Qb?Qb:Ub(+Qb),Ma(),la):vb};la.distance=function(Qb){return arguments.length?(Tb="function"===typeof Qb?Qb:Ub(+Qb),Pa(),la):Tb};return la},x:function(O){function la(jb){for(var Tb=0,W=Pa.length,Ea;Tb<W;++Tb)Ea=
Pa[Tb],Ea.vx+=(vb[Tb]-Ea.x)*Ya[Tb]*jb}function za(){if(Pa){var jb,Tb=Pa.length;Ya=Array(Tb);vb=Array(Tb);for(jb=0;jb<Tb;++jb)Ya[jb]=isNaN(vb[jb]=+O(Pa[jb],jb,Pa))?0:+Ma(Pa[jb],jb,Pa)}}var Ma=Ub(.1),Pa,Ya,vb;"function"!==typeof O&&(O=Ub(null==O?0:+O));la.initialize=function(jb){Pa=jb;za()};la.strength=function(jb){return arguments.length?(Ma="function"===typeof jb?jb:Ub(+jb),za(),la):Ma};la.x=function(jb){return arguments.length?(O="function"===typeof jb?jb:Ub(+jb),za(),la):O};return la},y:function(O){function la(jb){for(var Tb=
0,W=Pa.length,Ea;Tb<W;++Tb)Ea=Pa[Tb],Ea.vy+=(vb[Tb]-Ea.y)*Ya[Tb]*jb}function za(){if(Pa){var jb,Tb=Pa.length;Ya=Array(Tb);vb=Array(Tb);for(jb=0;jb<Tb;++jb)Ya[jb]=isNaN(vb[jb]=+O(Pa[jb],jb,Pa))?0:+Ma(Pa[jb],jb,Pa)}}var Ma=Ub(.1),Pa,Ya,vb;"function"!==typeof O&&(O=Ub(null==O?0:+O));la.initialize=function(jb){Pa=jb;za()};la.strength=function(jb){return arguments.length?(Ma="function"===typeof jb?jb:Ub(+jb),za(),la):Ma};la.y=function(jb){return arguments.length?(O="function"===typeof jb?jb:Ub(+jb),za(),
la):O};return la}},H=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],V=["static","iterations"],Aa=["x","y","vx","vy"];Pb.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean","default":!1},{name:"restart",type:"boolean","default":!1},{name:"iterations",type:"number","default":300},{name:"alpha",type:"number","default":1},{name:"alphaMin",type:"number","default":.001},{name:"alphaTarget",type:"number","default":0},{name:"velocityDecay",type:"number","default":.4},
{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number","default":0},{name:"y",type:"number","default":0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number","default":.7},{name:"iterations",type:"number","default":1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number","default":-30,expr:!0},{name:"theta",type:"number","default":.9},{name:"distanceMin",type:"number","default":1},{name:"distanceMax",
type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number","default":30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number","default":1}]},{key:{force:"x"},params:[{name:"strength",type:"number","default":.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number","default":.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,"default":Aa}]};ia.inherits(Pb,
h.Transform,{transform(O,la){var za=this.value,Ma=la.changed(la.ADD_REM),Pa=O.modified(H),Ya=O.iterations||300;za?(Ma&&(la.modifies("index"),za.nodes(la.source)),(Pa||la.changed(la.MOD))&&Z(za,O,0,la)):(this.value=za=T(la.source,O),za.on("tick",eb(la.dataflow,this)),O.static||(Ma=!0,za.tick()),la.modifies("index"));if(Pa||Ma||O.modified(V)||la.changed()&&O.restart)if(za.alpha(Math.max(za.alpha(),O.alpha||1)).alphaDecay(1-Math.pow(za.alphaMin(),1/Ya)),O.static)for(za.stop();0<=--Ya;)za.tick();else if(za.stopped()&&
za.restart(),!Ma)return la.StopPropagation;return this.finish(O,la)},finish(O,la){const za=la.dataflow;for(let jb=this._argops,Tb=0,W=jb.length,Ea;Tb<W;++Tb)if(Ea=jb[Tb],"forces"===Ea.name&&"link"===Ea.op._argval.force)for(var Ma=Ea.op._argops,Pa=0,Ya=Ma.length,vb;Pa<Ya;++Pa)if("links"===Ma[Pa].name&&(vb=Ma[Pa].op.source)){za.pulse(vb,za.changeset().reflow());break}return la.reflow(O.modified()).modifies(Aa)}});u.force=Pb})};
shadow$provide[40]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(29),ob(21)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-util"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega))})(this,function(u,h,ia){function ab(qa,Db,Ua){const yb={};qa.each(Hb=>{const Nb=Hb.data;Ua(Nb)&&(yb[Db(Nb)]=Hb)});qa.lookup=yb;return qa}function zb(qa,Db){return qa.parent===Db.parent?1:2}function Yb(qa,Db){return qa+
Db.x}function ac(qa,Db){return Math.max(qa,Db.y)}function Xb(qa){for(var Db;Db=qa.children;)qa=Db[0];return qa}function mc(qa){for(var Db;Db=qa.children;)qa=Db[Db.length-1];return qa}function Cb(qa){var Db=0,Ua=qa.children,yb=Ua&&Ua.length;if(yb)for(;0<=--yb;)Db+=Ua[yb].value;else Db=1;qa.value=Db}function Ub(qa,Db){qa instanceof Map?(qa=[void 0,qa],void 0===Db&&(Db=Ba)):void 0===Db&&(Db=jc);qa=new ub(qa);for(var Ua,yb=[qa],Hb,Nb,Zb,ic;Ua=yb.pop();)if((Nb=Db(Ua.data))&&(ic=(Nb=Array.from(Nb)).length))for(Ua.children=
Nb,Zb=ic-1;0<=Zb;--Zb)yb.push(Hb=Nb[Zb]=new ub(Nb[Zb])),Hb.parent=Ua,Hb.depth=Ua.depth+1;return qa.eachBefore(wb)}function jc(qa){return qa.children}function Ba(qa){return Array.isArray(qa)?qa[1]:null}function Za(qa){void 0!==qa.data.value&&(qa.value=qa.data.value);qa.data=qa.data.data}function wb(qa){var Db=0;do qa.height=Db;while((qa=qa.parent)&&qa.height<++Db)}function ub(qa){this.data=qa;this.depth=this.height=0;this.parent=null}function sb(qa){if("function"!==typeof qa)throw Error();return qa}
function xb(){return 0}function ib(qa){return function(){return qa}}function ec(){let qa=1;return()=>(qa=(1664525*qa+1013904223)%4294967296)/4294967296}function ra(qa,Db){var Ua=qa.r-Db.r,yb=Db.x-qa.x;qa=Db.y-qa.y;return 0>Ua||Ua*Ua<yb*yb+qa*qa}function fa(qa,Db){var Ua=qa.r-Db.r+1E-9*Math.max(qa.r,Db.r,1),yb=Db.x-qa.x;qa=Db.y-qa.y;return 0<Ua&&Ua*Ua>yb*yb+qa*qa}function xa(qa,Db){for(var Ua=0;Ua<Db.length;++Ua)if(!fa(qa,Db[Ua]))return!1;return!0}function Ra(qa,Db){var Ua=qa.x,yb=qa.y;qa=qa.r;var Hb=
Db.x,Nb=Db.y;Db=Db.r;var Zb=Hb-Ua,ic=Nb-yb,Bc=Db-qa,jd=Math.sqrt(Zb*Zb+ic*ic);return{x:(Ua+Hb+Zb/jd*Bc)/2,y:(yb+Nb+ic/jd*Bc)/2,r:(jd+qa+Db)/2}}function Va(qa,Db,Ua){var yb=qa.x,Hb=qa.y;qa=qa.r;var Nb=Db.x,Zb=Db.y,ic=Db.r,Bc=Ua.x,jd=Ua.y,Vc=Ua.r;Ua=yb-Nb;Db=yb-Bc;var ma=Hb-Zb,Ha=Hb-jd,gb=ic-qa,R=Vc-qa,t=yb*yb+Hb*Hb-qa*qa;Zb=t-Nb*Nb-Zb*Zb+ic*ic;jd=t-Bc*Bc-jd*jd+Vc*Vc;Bc=Db*ma-Ua*Ha;Nb=(ma*jd-Ha*Zb)/(2*Bc)-yb;ma=(Ha*gb-ma*R)/Bc;Ha=(Db*Zb-Ua*jd)/(2*Bc)-Hb;Ua=(Ua*R-Db*gb)/Bc;Db=ma*ma+Ua*Ua-1;gb=2*(qa+
Nb*ma+Ha*Ua);qa=Nb*Nb+Ha*Ha-qa*qa;qa=-(1E-6<Math.abs(Db)?(gb+Math.sqrt(gb*gb-4*Db*qa))/(2*Db):qa/gb);return{x:yb+Nb+ma*qa,y:Hb+Ha+Ua*qa,r:qa}}function Ga(qa,Db,Ua){var yb=qa.x-Db.x,Hb=qa.y-Db.y,Nb=yb*yb+Hb*Hb;if(Nb){var Zb=Db.r+Ua.r;Zb*=Zb;var ic=qa.r+Ua.r;ic*=ic;if(Zb>ic){var Bc=(Nb+ic-Zb)/(2*Nb);Zb=Math.sqrt(Math.max(0,ic/Nb-Bc*Bc));Ua.x=qa.x-Bc*yb-Zb*Hb;Ua.y=qa.y-Bc*Hb+Zb*yb}else Bc=(Nb+Zb-ic)/(2*Nb),Zb=Math.sqrt(Math.max(0,Zb/Nb-Bc*Bc)),Ua.x=Db.x+Bc*yb-Zb*Hb,Ua.y=Db.y+Bc*Hb+Zb*yb}else Ua.x=Db.x+
Ua.r,Ua.y=Db.y}function hb(qa,Db){var Ua=qa.r+Db.r-1E-6,yb=Db.x-qa.x;qa=Db.y-qa.y;return 0<Ua&&Ua*Ua>yb*yb+qa*qa}function bb(qa){var Db=qa._,Ua=qa.next._,yb=Db.r+Ua.r;qa=(Db.x*Ua.r+Ua.x*Db.r)/yb;Db=(Db.y*Ua.r+Ua.y*Db.r)/yb;return qa*qa+Db*Db}function tb(qa){this._=qa;this.previous=this.next=null}function Pb(qa,Db){if(!(yb=(qa="object"===typeof qa&&"length"in qa?qa:Array.from(qa)).length))return 0;var Ua,yb;var Hb=qa[0];Hb.x=0;Hb.y=0;if(!(1<yb))return Hb.r;var Nb=qa[1];Hb.x=-Nb.r;Nb.x=Hb.r;Nb.y=0;
if(!(2<yb))return Hb.r+Nb.r;Ga(Nb,Hb,Ua=qa[2]);Hb=new tb(Hb);Nb=new tb(Nb);Ua=new tb(Ua);Hb.next=Ua.previous=Nb;Nb.next=Hb.previous=Ua;Ua.next=Nb.previous=Hb;var Zb=3;a:for(;Zb<yb;++Zb){Ga(Hb._,Nb._,Ua=qa[Zb]);Ua=new tb(Ua);var ic=Nb.next;var Bc=Hb.previous;var jd=Nb._.r;var Vc=Hb._.r;do if(jd<=Vc){if(hb(ic._,Ua._)){Nb=ic;Hb.next=Nb;Nb.previous=Hb;--Zb;continue a}jd+=ic._.r;ic=ic.next}else{if(hb(Bc._,Ua._)){Hb=Bc;Hb.next=Nb;Nb.previous=Hb;--Zb;continue a}Vc+=Bc._.r;Bc=Bc.previous}while(ic!==Bc.next);
Ua.previous=Hb;Ua.next=Nb;Hb.next=Nb.previous=Nb=Ua;for(ic=bb(Hb);(Ua=Ua.next)!==Nb;)(Bc=bb(Ua))<ic&&(Hb=Ua,ic=Bc);Nb=Hb.next}Hb=[Nb._];for(Ua=Nb;(Ua=Ua.next)!==Nb;)Hb.push(Ua._);Nb=0;Hb=Array.from(Hb);for(Ua=Hb.length;Ua;)ic=Db()*Ua--|0,Zb=Hb[Ua],Hb[Ua]=Hb[ic],Hb[ic]=Zb;Hb=(Db=Hb).length;Ua=[];for(var ma;Nb<Hb;)if(Zb=Db[Nb],ma&&fa(ma,Zb))++Nb;else{a:if(ma=Ua,xa(Zb,ma))ma=[Zb];else{for(Ua=0;Ua<ma.length;++Ua)if(ra(Zb,ma[Ua])&&xa(Ra(ma[Ua],Zb),ma)){ma=[ma[Ua],Zb];break a}for(Ua=0;Ua<ma.length-1;++Ua)for(Nb=
Ua+1;Nb<ma.length;++Nb)if(ra(Ra(ma[Ua],ma[Nb]),Zb)&&ra(Ra(ma[Ua],Zb),ma[Nb])&&ra(Ra(ma[Nb],Zb),ma[Ua])&&xa(Va(ma[Ua],ma[Nb],Zb),ma)){ma=[ma[Ua],ma[Nb],Zb];break a}throw Error();}a:{ma=Ua=ma;switch(ma.length){case 1:ma=ma[0];ma={x:ma.x,y:ma.y,r:ma.r};break a;case 2:ma=Ra(ma[0],ma[1]);break a;case 3:ma=Va(ma[0],ma[1],ma[2]);break a}ma=void 0}Nb=0}Ua=ma;for(Zb=0;Zb<yb;++Zb)Hb=qa[Zb],Hb.x-=Ua.x,Hb.y-=Ua.y;return Ua.r}function eb(qa){return Math.sqrt(qa.value)}function T(qa){return function(Db){Db.children||
(Db.r=Math.max(0,+qa(Db)||0))}}function Z(qa,Db,Ua){return function(yb){if(Hb=yb.children){var Hb,Nb,Zb=Hb.length,ic=qa(yb)*Db||0;if(ic)for(Nb=0;Nb<Zb;++Nb)Hb[Nb].r+=ic;var Bc=Pb(Hb,Ua);if(ic)for(Nb=0;Nb<Zb;++Nb)Hb[Nb].r-=ic;yb.r=Bc+ic}}}function ca(qa){return function(Db){var Ua=Db.parent;Db.r*=qa;Ua&&(Db.x=Ua.x+qa*Db.x,Db.y=Ua.y+qa*Db.y)}}function ha(qa){qa.x0=Math.round(qa.x0);qa.y0=Math.round(qa.y0);qa.x1=Math.round(qa.x1);qa.y1=Math.round(qa.y1)}function La(qa,Db,Ua,yb,Hb){var Nb=qa.children,
Zb=-1,ic=Nb.length;for(yb=qa.value&&(yb-Db)/qa.value;++Zb<ic;)qa=Nb[Zb],qa.y0=Ua,qa.y1=Hb,qa.x0=Db,qa.x1=Db+=qa.value*yb}function na(qa){return qa.id}function pa(qa){return qa.parentId}function m(){function qa(Hb){var Nb=Array.from(Hb),Zb=Db,ic=Ua,Bc,jd,Vc=new Map;if(null!=yb){const ba=Nb.map((Ca,Sa)=>{Ca=yb(Ca,Sa,Hb);Ca=`${Ca}`;Sa=Ca.length;L(Ca,Sa-1)&&!L(Ca,Sa-2)&&(Ca=Ca.slice(0,-1));return"/"===Ca[0]?Ca:`/${Ca}`}),va=ba.map(E);Zb=(new Set(ba)).add("");for(gb of va)Zb.has(gb)||(Zb.add(gb),ba.push(gb),
va.push(E(gb)),Nb.push(Ea));Zb=(Ca,Sa)=>ba[Sa];ic=(Ca,Sa)=>va[Sa]}var ma=0;for(Bc=Nb.length;ma<Bc;++ma){var Ha=Nb[ma];var gb=Nb[ma]=new ub(Ha);if(null!=(jd=Zb(Ha,ma,Hb))&&(jd+="")){var R=gb.id=jd;Vc.set(R,Vc.has(R)?W:gb)}null!=(jd=ic(Ha,ma,Hb))&&(jd+="")&&(gb.parent=jd)}for(ma=0;ma<Bc;++ma)if(gb=Nb[ma],jd=gb.parent){Zb=Vc.get(jd);if(!Zb)throw Error("missing: "+jd);if(Zb===W)throw Error("ambiguous: "+jd);Zb.children?Zb.children.push(gb):Zb.children=[gb];gb.parent=Zb}else{if(t)throw Error("multiple roots");
var t=gb}if(!t)throw Error("no root");if(null!=yb){for(;t.data===Ea&&1===t.children.length;)t=t.children[0],--Bc;for(jd=Nb.length-1;0<=jd;--jd){gb=Nb[jd];if(gb.data!==Ea)break;gb.data=null}}t.parent=Tb;t.eachBefore(function(ba){ba.depth=ba.parent.depth+1;--Bc}).eachBefore(wb);t.parent=null;if(0<Bc)throw Error("cycle");return t}var Db=na,Ua=pa,yb;qa.id=function(Hb){return arguments.length?(Db=null==Hb?null:sb(Hb),qa):Db};qa.parentId=function(Hb){return arguments.length?(Ua=null==Hb?null:sb(Hb),qa):
Ua};qa.path=function(Hb){return arguments.length?(yb=null==Hb?null:sb(Hb),qa):yb};return qa}function E(qa){let Db=qa.length;if(2>Db)return"";for(;1<--Db&&!L(qa,Db););return qa.slice(0,Db)}function L(qa,Db){if("/"===qa[Db]){let Ua=0;for(;0<Db&&"\\"===qa[--Db];)++Ua;if(0===(Ua&1))return!0}return!1}function w(qa,Db){return qa.parent===Db.parent?1:2}function Q(qa){var Db=qa.children;return Db?Db[0]:qa.t}function A(qa){var Db=qa.children;return Db?Db[Db.length-1]:qa.t}function y(qa,Db){this._=qa;this.A=
this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=Db}function N(qa){qa=new y(qa,0);for(var Db,Ua=[qa],yb,Hb,Nb;Db=Ua.pop();)if(Hb=Db._.children)for(Db.children=Array(yb=Hb.length),Nb=yb-1;0<=Nb;--Nb)Ua.push(yb=Db.children[Nb]=new y(Hb[Nb],Nb)),yb.parent=Db;(qa.parent=new y(null,0)).children=[qa];return qa}function z(qa,Db,Ua,yb,Hb){var Nb=qa.children,Zb=-1,ic=Nb.length;for(Hb=qa.value&&(Hb-Ua)/qa.value;++Zb<ic;)qa=Nb[Zb],qa.x0=Db,qa.x1=yb,qa.y0=Ua,qa.y1=Ua+=
qa.value*Hb}function C(qa,Db,Ua,yb,Hb,Nb){for(var Zb=[],ic=Db.children,Bc,jd,Vc=Bc=0,ma=ic.length,Ha,gb=Db.value,R,t,ba,va,Ca,Sa;Bc<ma;){Db=Hb-Ua;Ha=Nb-yb;do R=ic[Vc++].value;while(!R&&Vc<ma);t=ba=R;Sa=Math.max(Ha/Db,Db/Ha)/(gb*qa);va=R*R*Sa;for(Ca=Math.max(ba/va,va/t);Vc<ma;++Vc){R+=jd=ic[Vc].value;jd<t&&(t=jd);jd>ba&&(ba=jd);va=R*R*Sa;va=Math.max(ba/va,va/t);if(va>Ca){R-=jd;break}Ca=va}Zb.push(Bc={value:R,dice:Db<Ha,children:ic.slice(Bc,Vc)});Bc.dice?La(Bc,Ua,yb,Hb,gb?yb+=Ha*R/gb:Nb):z(Bc,Ua,yb,
gb?Ua+=Db*R/gb:Hb,Nb);gb-=R;Bc=Vc}return Zb}function H(){function qa(Ha){Ha.x0=Ha.y0=0;Ha.x1=Hb;Ha.y1=Nb;Ha.eachBefore(Db);Zb=[0];yb&&Ha.eachBefore(ha);return Ha}function Db(Ha){var gb=Zb[Ha.depth],R=Ha.x0+gb,t=Ha.y0+gb,ba=Ha.x1-gb,va=Ha.y1-gb;ba<R&&(R=ba=(R+ba)/2);va<t&&(t=va=(t+va)/2);Ha.x0=R;Ha.y0=t;Ha.x1=ba;Ha.y1=va;Ha.children&&(gb=Zb[Ha.depth+1]=ic(Ha)/2,R+=ma(Ha)-gb,t+=Bc(Ha)-gb,ba-=jd(Ha)-gb,va-=Vc(Ha)-gb,ba<R&&(R=ba=(R+ba)/2),va<t&&(t=va=(t+va)/2),Ua(Ha,R,t,ba,va))}var Ua=oc,yb=!1,Hb=1,Nb=
1,Zb=[0],ic=xb,Bc=xb,jd=xb,Vc=xb,ma=xb;qa.round=function(Ha){return arguments.length?(yb=!!Ha,qa):yb};qa.size=function(Ha){return arguments.length?(Hb=+Ha[0],Nb=+Ha[1],qa):[Hb,Nb]};qa.tile=function(Ha){return arguments.length?(Ua=sb(Ha),qa):Ua};qa.padding=function(Ha){return arguments.length?qa.paddingInner(Ha).paddingOuter(Ha):qa.paddingInner()};qa.paddingInner=function(Ha){return arguments.length?(ic="function"===typeof Ha?Ha:ib(+Ha),qa):ic};qa.paddingOuter=function(Ha){return arguments.length?
qa.paddingTop(Ha).paddingRight(Ha).paddingBottom(Ha).paddingLeft(Ha):qa.paddingTop()};qa.paddingTop=function(Ha){return arguments.length?(Bc="function"===typeof Ha?Ha:ib(+Ha),qa):Bc};qa.paddingRight=function(Ha){return arguments.length?(jd="function"===typeof Ha?Ha:ib(+Ha),qa):jd};qa.paddingBottom=function(Ha){return arguments.length?(Vc="function"===typeof Ha?Ha:ib(+Ha),qa):Vc};qa.paddingLeft=function(Ha){return arguments.length?(ma="function"===typeof Ha?Ha:ib(+Ha),qa):ma};return qa}function V(qa){h.Transform.call(this,
null,qa)}function Aa(){function qa(Hb,Nb){if(Nb>=Ua.length)return Hb;const Zb=Hb.length,ic=Ua[Nb++],Bc={},jd={};let Vc=-1,ma,Ha,gb;for(;++Vc<Zb;)ma=ic(Ha=Hb[Vc])+"",(gb=Bc[ma])?gb.push(Ha):Bc[ma]=[Ha];for(ma in Bc)jd[ma]=qa(Bc[ma],Nb);return jd}function Db(Hb,Nb){if(++Nb>Ua.length)return Hb;const Zb=[];for(const ic in Hb)Zb.push({key:ic,values:Db(Hb[ic],Nb)});return Zb}const Ua=[],yb={entries:Hb=>Db(qa(Hb,0),0),key:Hb=>(Ua.push(Hb),yb)};return yb}function O(qa){h.Transform.call(this,null,qa)}function la(qa,
Db,Ua){for(let yb,Hb=0,Nb=Db.length;Hb<Nb;++Hb)if(yb=Db[Hb],yb in Ua)qa[yb](Ua[yb])}function za(qa){O.call(this,qa)}function Ma(qa){O.call(this,qa)}function Pa(qa){h.Transform.call(this,null,qa)}function Ya(qa){O.call(this,qa)}function vb(qa){h.Transform.call(this,[],qa)}function jb(qa){O.call(this,qa)}ub.prototype=Ub.prototype={constructor:ub,count:function(){return this.eachAfter(Cb)},each:function(qa,Db){let Ua=-1;for(const yb of this)qa.call(Db,yb,++Ua,this);return this},eachAfter:function(qa,
Db){for(var Ua,yb=[this],Hb=[],Nb,Zb,ic=-1;Ua=yb.pop();)if(Hb.push(Ua),Ua=Ua.children)for(Nb=0,Zb=Ua.length;Nb<Zb;++Nb)yb.push(Ua[Nb]);for(;Ua=Hb.pop();)qa.call(Db,Ua,++ic,this);return this},eachBefore:function(qa,Db){for(var Ua,yb=[this],Hb,Nb=-1;Ua=yb.pop();)if(qa.call(Db,Ua,++Nb,this),Ua=Ua.children)for(Hb=Ua.length-1;0<=Hb;--Hb)yb.push(Ua[Hb]);return this},find:function(qa,Db){let Ua=-1;for(const yb of this)if(qa.call(Db,yb,++Ua,this))return yb},sum:function(qa){return this.eachAfter(function(Db){for(var Ua=
+qa(Db.data)||0,yb=Db.children,Hb=yb&&yb.length;0<=--Hb;)Ua+=yb[Hb].value;Db.value=Ua})},sort:function(qa){return this.eachBefore(function(Db){Db.children&&Db.children.sort(qa)})},path:function(qa){var Db=this;var Ua=Db;var yb=qa;if(Ua!==yb){var Hb=Ua.ancestors(),Nb=yb.ancestors(),Zb=null;Ua=Hb.pop();for(yb=Nb.pop();Ua===yb;)Zb=Ua,Ua=Hb.pop(),yb=Nb.pop();Ua=Zb}for(yb=[Db];Db!==Ua;)Db=Db.parent,yb.push(Db);for(Db=yb.length;qa!==Ua;)yb.splice(Db,0,qa),qa=qa.parent;return yb},ancestors:function(){for(var qa=
this,Db=[qa];qa=qa.parent;)Db.push(qa);return Db},descendants:function(){return Array.from(this)},leaves:function(){var qa=[];this.eachBefore(function(Db){Db.children||qa.push(Db)});return qa},links:function(){var qa=this,Db=[];qa.each(function(Ua){Ua!==qa&&Db.push({source:Ua.parent,target:Ua})});return Db},copy:function(){return Ub(this).eachBefore(Za)},[Symbol.iterator]:function*(){var qa,Db=[this],Ua;do{var yb=Db.reverse();for(Db=[];qa=yb.pop();)if(yield qa,qa=qa.children){var Hb=0;for(Ua=qa.length;Hb<
Ua;++Hb)Db.push(qa[Hb])}}while(Db.length)}};var Tb={depth:-1},W={},Ea={};y.prototype=Object.create(ub.prototype);var Lb=(1+Math.sqrt(5))/2,oc=function Ua(Db){function yb(Hb,Nb,Zb,ic,Bc){C(Db,Hb,Nb,Zb,ic,Bc)}yb.ratio=function(Hb){return Ua(1<(Hb=+Hb)?Hb:1)};return yb}(Lb);Lb=function yb(Ua){function Hb(Nb,Zb,ic,Bc,jd){if((Vc=Nb._squarify)&&Vc.ratio===Ua)for(var Vc,ma,Ha,gb=-1,R,t=Vc.length,ba=Nb.value;++gb<t;){Nb=Vc[gb];ma=Nb.children;Ha=Nb.value=0;for(R=ma.length;Ha<R;++Ha)Nb.value+=ma[Ha].value;
Nb.dice?La(Nb,Zb,ic,Bc,ba?ic+=(jd-ic)*Nb.value/ba:jd):z(Nb,Zb,ic,ba?Zb+=(Bc-Zb)*Nb.value/ba:Bc,jd);ba-=Nb.value}else Nb._squarify=Vc=C(Ua,Nb,Zb,ic,Bc,jd),Vc.ratio=Ua}Hb.ratio=function(Nb){return yb(1<(Nb=+Nb)?Nb:1)};return Hb}(Lb);V.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const $b=Ua=>Ua.values;ia.inherits(V,h.Transform,{transform(Ua,yb){yb.source||ia.error("Nest transform requires an upstream data source.");
var Hb=Ua.generate,Nb=Ua.modified(),Zb=yb.clone(),ic=this.value;if(!ic||Nb||yb.changed())ic&&ic.each(Bc=>{Bc.children&&h.isTuple(Bc.data)&&Zb.rem.push(Bc.data)}),this.value=ic=Ub({values:ia.array(Ua.keys).reduce((Bc,jd)=>{Bc.key(jd);return Bc},Aa()).entries(Zb.source)},$b),Hb&&ic.each(Bc=>{Bc.children&&(Bc=h.ingest(Bc.data),Zb.add.push(Bc),Zb.source.push(Bc))}),ab(ic,h.tupleid,h.tupleid);Zb.source.root=ic;return Zb}});const Mb=(Ua,yb)=>Ua.parent===yb.parent?1:2;ia.inherits(O,h.Transform,{transform(Ua,
yb){yb.source&&yb.source.root||ia.error(this.constructor.name+" transform requires a backing tree data source.");const Hb=this.layout(Ua.method),Nb=this.fields,Zb=yb.source.root,ic=Ua.as||Nb;Ua.field?Zb.sum(Ua.field):Zb.count();Ua.sort&&Zb.sort(h.stableCompare(Ua.sort,Bc=>Bc.data));la(Hb,this.params,Ua);Hb.separation&&Hb.separation(!1!==Ua.separation?Mb:ia.one);try{this.value=Hb(Zb)}catch(Bc){ia.error(Bc)}Zb.each(Bc=>{const jd=Bc.data,Vc=Nb.length-1;for(let ma=0;ma<Vc;++ma)jd[ic[ma]]=Bc[Nb[ma]];jd[ic[Vc]]=
Bc.children?Bc.children.length:0});return yb.reflow(Ua.modified()).modifies(ic).modifies("leaf")}});var Qb=["x","y","r","depth","children"];za.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number","default":0},{name:"radius",type:"field","default":null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Qb.length,"default":Qb}]};ia.inherits(za,O,{layout:function(){function Ua(ic){const Bc=
ec();ic.x=Hb/2;ic.y=Nb/2;yb?ic.eachBefore(T(yb)).eachAfter(Z(Zb,.5,Bc)).eachBefore(ca(1)):ic.eachBefore(T(eb)).eachAfter(Z(xb,1,Bc)).eachAfter(Z(Zb,ic.r/Math.min(Hb,Nb),Bc)).eachBefore(ca(Math.min(Hb,Nb)/(2*ic.r)));return ic}var yb=null,Hb=1,Nb=1,Zb=xb;Ua.radius=function(ic){return arguments.length?(yb=null==ic?null:sb(ic),Ua):yb};Ua.size=function(ic){return arguments.length?(Hb=+ic[0],Nb=+ic[1],Ua):[Hb,Nb]};Ua.padding=function(ic){return arguments.length?(Zb="function"===typeof ic?ic:ib(+ic),Ua):
Zb};return Ua},params:["radius","size","padding"],fields:Qb});Qb="x0 y0 x1 y1 depth children".split(" ");Ma.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number","default":0},{name:"round",type:"boolean","default":!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Qb.length,"default":Qb}]};ia.inherits(Ma,O,{layout:function(){function Ua(Bc){var jd=Bc.height+
1;Bc.x0=Bc.y0=Zb;Bc.x1=Hb;Bc.y1=Nb/jd;Bc.eachBefore(yb(Nb,jd));ic&&Bc.eachBefore(ha);return Bc}function yb(Bc,jd){return function(Vc){Vc.children&&La(Vc,Vc.x0,Bc*(Vc.depth+1)/jd,Vc.x1,Bc*(Vc.depth+2)/jd);var ma=Vc.x0,Ha=Vc.y0,gb=Vc.x1-Zb,R=Vc.y1-Zb;gb<ma&&(ma=gb=(ma+gb)/2);R<Ha&&(Ha=R=(Ha+R)/2);Vc.x0=ma;Vc.y0=Ha;Vc.x1=gb;Vc.y1=R}}var Hb=1,Nb=1,Zb=0,ic=!1;Ua.round=function(Bc){return arguments.length?(ic=!!Bc,Ua):ic};Ua.size=function(Bc){return arguments.length?(Hb=+Bc[0],Nb=+Bc[1],Ua):[Hb,Nb]};Ua.padding=
function(Bc){return arguments.length?(Zb=+Bc,Ua):Zb};return Ua},params:["size","round","padding"],fields:Qb});Pa.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ia.inherits(Pa,h.Transform,{transform(Ua,yb){yb.source||ia.error("Stratify transform requires an upstream data source.");let Hb=this.value;const Nb=Ua.modified(),Zb=yb.fork(yb.ALL).materialize(yb.SOURCE);yb=!Hb||Nb||yb.changed(yb.ADD_REM)||yb.modified(Ua.key.fields)||
yb.modified(Ua.parentKey.fields);Zb.source=Zb.source.slice();yb&&(Hb=Zb.source.length?ab(m().id(Ua.key).parentId(Ua.parentKey)(Zb.source),Ua.key,ia.truthy):ab(m()([{}]),Ua.key,Ua.key));Zb.source.root=this.value=Hb;return Zb}});const xc={tidy:function(){function Ua(Vc){var ma=N(Vc);ma.eachAfter(yb);ma.parent.m=-ma.z;ma.eachBefore(Hb);if(jd)Vc.eachBefore(Nb);else{var Ha=Vc,gb=Vc,R=Vc;Vc.eachBefore(function(Ca){Ca.x<Ha.x&&(Ha=Ca);Ca.x>gb.x&&(gb=Ca);Ca.depth>R.depth&&(R=Ca)});ma=Ha===gb?1:Zb(Ha,gb)/2;
var t=ma-Ha.x,ba=ic/(gb.x+ma+t),va=Bc/(R.depth||1);Vc.eachBefore(function(Ca){Ca.x=(Ca.x+t)*ba;Ca.y=Ca.depth*va})}return Vc}function yb(Vc){var ma=Vc.children,Ha=Vc.parent.children,gb=Vc.i?Ha[Vc.i-1]:null;if(ma){for(var R=0,t=0,ba=Vc.children,va=ba.length,Ca;0<=--va;)Ca=ba[va],Ca.z+=R,Ca.m+=R,R+=Ca.s+(t+=Ca.c);ma=(ma[0].z+ma[ma.length-1].z)/2;gb?(Vc.z=gb.z+Zb(Vc._,gb._),Vc.m=Vc.z-ma):Vc.z=ma}else gb&&(Vc.z=gb.z+Zb(Vc._,gb._));ma=Vc.parent;Ha=Vc.parent.A||Ha[0];if(gb){t=R=Vc;ba=R.parent.children[0];
va=R.m;Ca=t.m;for(var Sa=gb.m,kb=ba.m,Rb;gb=A(gb),R=Q(R),gb&&R;){ba=Q(ba);t=A(t);t.a=Vc;Rb=gb.z+Sa-R.z-va+Zb(gb._,R._);if(0<Rb){var Fb=gb.a.parent===Vc.parent?gb.a:Ha,Jb=Vc,Cc=Rb,Gc=Cc/(Jb.i-Fb.i);Jb.c-=Gc;Jb.s+=Cc;Fb.c+=Gc;Jb.z+=Cc;Jb.m+=Cc;va+=Rb;Ca+=Rb}Sa+=gb.m;va+=R.m;kb+=ba.m;Ca+=t.m}gb&&!A(t)&&(t.t=gb,t.m+=Sa-Ca);R&&!Q(ba)&&(ba.t=R,ba.m+=va-kb,Ha=Vc)}ma.A=Ha}function Hb(Vc){Vc._.x=Vc.z+Vc.parent.m;Vc.m+=Vc.parent.m}function Nb(Vc){Vc.x*=ic;Vc.y=Vc.depth*Bc}var Zb=w,ic=1,Bc=1,jd=null;Ua.separation=
function(Vc){return arguments.length?(Zb=Vc,Ua):Zb};Ua.size=function(Vc){return arguments.length?(jd=!1,ic=+Vc[0],Bc=+Vc[1],Ua):jd?null:[ic,Bc]};Ua.nodeSize=function(Vc){return arguments.length?(jd=!0,ic=+Vc[0],Bc=+Vc[1],Ua):jd?[ic,Bc]:null};return Ua},cluster:function(){function Ua(ic){var Bc,jd=0;ic.eachAfter(function(R){var t=R.children;if(t){var ba=t.reduce(Yb,0)/t.length;R.x=ba;R.y=1+t.reduce(ac,0)}else R.x=Bc?jd+=yb(R,Bc):0,R.y=0,Bc=R});var Vc=Xb(ic),ma=mc(ic),Ha=Vc.x-yb(Vc,ma)/2,gb=ma.x+yb(ma,
Vc)/2;return ic.eachAfter(Zb?function(R){R.x=(R.x-ic.x)*Hb;R.y=(ic.y-R.y)*Nb}:function(R){R.x=(R.x-Ha)/(gb-Ha)*Hb;R.y=(1-(ic.y?R.y/ic.y:1))*Nb})}var yb=zb,Hb=1,Nb=1,Zb=!1;Ua.separation=function(ic){return arguments.length?(yb=ic,Ua):yb};Ua.size=function(ic){return arguments.length?(Zb=!1,Hb=+ic[0],Nb=+ic[1],Ua):Zb?null:[Hb,Nb]};Ua.nodeSize=function(ic){return arguments.length?(Zb=!0,Hb=+ic[0],Nb=+ic[1],Ua):Zb?[Hb,Nb]:null};return Ua}};Qb=["x","y","depth","children"];Ya.Definition={type:"Tree",metadata:{tree:!0,
modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum","default":"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean","default":!0},{name:"as",type:"string",array:!0,length:Qb.length,"default":Qb}]};ia.inherits(Ya,O,{layout(Ua){Ua=Ua||"tidy";if(ia.hasOwnProperty(xc,Ua))return xc[Ua]();ia.error("Unrecognized Tree layout method: "+Ua)},params:["size",
"nodeSize"],fields:Qb});vb.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ia.inherits(vb,h.Transform,{transform(Ua,yb){Ua=this.value;const Hb=yb.source&&yb.source.root,Nb=yb.fork(yb.NO_SOURCE),Zb={};Hb||ia.error("TreeLinks transform requires a tree data source.");yb.changed(yb.ADD_REM)?(Nb.rem=Ua,yb.visit(yb.SOURCE,ic=>Zb[h.tupleid(ic)]=1),Hb.each(ic=>{const Bc=ic.data;(ic=ic.parent&&ic.parent.data)&&Zb[h.tupleid(Bc)]&&Zb[h.tupleid(ic)]&&Nb.add.push(h.ingest({source:ic,
target:Bc}))}),this.value=Nb.add):yb.changed(yb.MOD)&&(yb.visit(yb.MOD,ic=>Zb[h.tupleid(ic)]=1),Ua.forEach(ic=>{(Zb[h.tupleid(ic.source)]||Zb[h.tupleid(ic.target)])&&Nb.mod.push(ic)}));return Nb}});const ed={binary:function(Ua,yb,Hb,Nb,Zb){function ic(gb,R,t,ba,va,Ca,Sa){if(gb>=R-1)gb=Bc[gb],gb.x0=ba,gb.y0=va,gb.x1=Ca,gb.y1=Sa;else{for(var kb=Ha[gb],Rb=t/2+kb,Fb=gb+1,Jb=R-1;Fb<Jb;){var Cc=Fb+Jb>>>1;Ha[Cc]<Rb?Fb=Cc+1:Jb=Cc}Rb-Ha[Fb-1]<Ha[Fb]-Rb&&gb+1<Fb&&--Fb;kb=Ha[Fb]-kb;Rb=t-kb;Ca-ba>Sa-va?(t=t?
(ba*Rb+Ca*kb)/t:Ca,ic(gb,Fb,kb,ba,va,t,Sa),ic(Fb,R,Rb,t,va,Ca,Sa)):(t=t?(va*Rb+Sa*kb)/t:Sa,ic(gb,Fb,kb,ba,va,Ca,t),ic(Fb,R,Rb,ba,t,Ca,Sa))}}var Bc=Ua.children,jd,Vc=Bc.length,ma,Ha=Array(Vc+1);for(Ha[0]=ma=jd=0;jd<Vc;++jd)Ha[jd+1]=ma+=Bc[jd].value;ic(0,Vc,Ua.value,yb,Hb,Nb,Zb)},dice:La,slice:z,slicedice:function(Ua,yb,Hb,Nb,Zb){(Ua.depth&1?z:La)(Ua,yb,Hb,Nb,Zb)},squarify:oc,resquarify:Lb};Lb="x0 y0 x1 y1 depth children".split(" ");jb.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",
type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum","default":"squarify",values:"squarify resquarify binary dice slice slicedice".split(" ")},{name:"padding",type:"number","default":0},{name:"paddingInner",type:"number","default":0},{name:"paddingOuter",type:"number","default":0},{name:"paddingTop",type:"number","default":0},{name:"paddingRight",type:"number","default":0},{name:"paddingBottom",type:"number","default":0},{name:"paddingLeft",type:"number","default":0},{name:"ratio",
type:"number","default":1.618033988749895},{name:"round",type:"boolean","default":!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Lb.length,"default":Lb}]};ia.inherits(jb,O,{layout(){const Ua=H();Ua.ratio=yb=>{const Hb=Ua.tile();Hb.ratio&&Ua.tile(Hb.ratio(yb))};Ua.method=yb=>{ia.hasOwnProperty(ed,yb)?Ua.tile(ed[yb]):ia.error("Unrecognized Treemap layout method: "+yb)};return Ua},params:"method ratio size round padding paddingInner paddingOuter paddingTop paddingRight paddingBottom paddingLeft".split(" "),
fields:Lb});u.nest=V;u.pack=za;u.partition=Ma;u.stratify=Pa;u.tree=Ya;u.treelinks=vb;u.treemap=jb})};
shadow$provide[41]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(34),ob(32),ob(29),ob(21)):"function"===typeof define&&define.amd?define(["exports","vega-scenegraph","vega-canvas","vega-dataflow","vega-util"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h((u.vega=u.vega||{},u.vega.transforms={}),u.vega,u.vega,u.vega,u.vega))})(this,function(u,h,ia,ab,zb){function Yb(eb,T){const Z=eb.bitmap();(T||[]).forEach(ca=>Z.set(eb(ca.boundary[0]),eb(ca.boundary[3])));
return[Z,void 0]}function ac(eb,T,Z,ca,ha){const La=eb.width,na=eb.height;ca=ca||ha;const pa=ia.canvas(La,na).getContext("2d");var m=ia.canvas(La,na).getContext("2d"),E=ca&&ia.canvas(La,na).getContext("2d");Z.forEach(H=>Xb(pa,H,!1));Xb(m,T,!1);ca&&Xb(E,T,!0);T=new Uint32Array(pa.getImageData(0,0,La,na).data.buffer);Z=new Uint32Array(m.getImageData(0,0,La,na).data.buffer);E=ca&&new Uint32Array(E.getImageData(0,0,La,na).data.buffer);m=eb.bitmap();const L=ca&&eb.bitmap();let w,Q;let A,y,N,z;for(Q=0;Q<
na;++Q)for(w=0;w<La;++w){var C=Q*La+w;y=T[C]&4278190080;z=Z[C]&4278190080;N=ca&&E[C]&4278190080;if(y||N||z)C=eb(w),A=eb(Q),ha||!y&&!z||m.set(C,A),ca&&(y||N)&&L.set(C,A)}return[m,L]}function Xb(eb,T,Z){if(T.length){var ca=T[0].mark.marktype;"group"===ca?T.forEach(ha=>{ha.items.forEach(La=>Xb(eb,La.items,Z))}):h.Marks[ca].draw(eb,{items:Z?T.map(mc):T})}}function mc(eb){eb=ab.rederive(eb,{});return eb.stroke&&0!==eb.strokeOpacity||eb.fill&&0!==eb.fillOpacity?Object.assign({},eb,{strokeOpacity:1,stroke:"#000",
fillOpacity:0}):eb}function Cb(eb,T){const Z=new Uint32Array(~~((eb*T+32)/32));return{array:Z,get:(ca,ha)=>{ca=ha*eb+ca;return Z[ca>>>5]&1<<(ca&31)},set:(ca,ha)=>{ca=ha*eb+ca;Z[ca>>>5]|=1<<(ca&31)},clear:(ca,ha)=>{ca=ha*eb+ca;Z[ca>>>5]&=~(1<<(ca&31))},getRange:(ca,ha,La,na)=>{let pa,m,E;for(;na>=ha;--na){var L=na*eb+ca;pa=na*eb+La;m=L>>>5;E=pa>>>5;if(m===E){if(Z[m]&ra[L&31]&fa[(pa&31)+1])return!0}else{if(Z[m]&ra[L&31]||Z[E]&fa[(pa&31)+1])return!0;for(L=m+1;L<E;++L)if(Z[L])return!0}}return!1},setRange:(ca,
ha,La,na)=>{let pa,m,E;for(;ha<=na;++ha){var L=ha*eb+ca;pa=ha*eb+La;m=L>>>5;E=pa>>>5;if(m===E)Z[m]|=ra[L&31]&fa[(pa&31)+1];else for(Z[m]|=ra[L&31],Z[E]|=fa[(pa&31)+1],L=m+1;L<E;++L)Z[L]|=4294967295}},clearRange:(ca,ha,La,na)=>{let pa,m,E;for(;ha<=na;++ha){var L=ha*eb+ca;pa=ha*eb+La;m=L>>>5;E=pa>>>5;if(m===E)Z[m]&=fa[L&31]|ra[(pa&31)+1];else for(Z[m]&=fa[L&31],Z[E]&=ra[(pa&31)+1],L=m+1;L<E;++L)Z[L]&=0}},outOfBounds:(ca,ha,La,na)=>0>ca||0>ha||na>=T||La>=eb}}function Ub(eb,T,Z){const ca=Math.max(1,Math.sqrt(eb*
T/1E6)),ha=~~((eb+2*Z+ca)/ca),La=~~((T+2*Z+ca)/ca),na=pa=>~~((pa+Z)/ca);na.invert=pa=>pa*ca-Z;na.bitmap=()=>Cb(ha,La);na.ratio=ca;na.padding=Z;na.width=eb;na.height=T;return na}function jc(eb,T,Z,ca,ha,La){Z/=2;return 0>eb-Z||eb+Z>ha||0>T-(Z=ca/2)||T+Z>La}function Ba(eb,T,Z,ca,ha,La,na,pa){ha=ha*La/(2*ca);ca=eb(T-ha);T=eb(T+ha);ha=eb(Z-(La/=2));eb=eb(Z+La);return na.outOfBounds(ca,ha,T,eb)||na.getRange(ca,ha,T,eb)||pa&&pa.getRange(ca,ha,T,eb)}function Za(eb,T,Z,ca){const ha=eb.width,La=eb.height,
na=T[0],pa=T[1],m=ca.length;return function(E){const L=E.boundary,w=E.datum.fontSize;if(0>L[2]||0>L[5]||L[0]>ha||L[3]>La)return!1;var Q;let A=null!=(Q=E.textWidth)?Q:0,y;let N,z;let C;let H;let V,Aa;for(let oc=0;oc<m;++oc){Q=(Z[oc]&3)-1;y=(Z[oc]>>>2&3)-1;var O=0===Q&&0===y||0>ca[oc];var la=Q&&y?Math.SQRT1_2:1;N=0>ca[oc]?-1:1;z=L[1+Q]+ca[oc]*Q*la;H=L[4+y]+N*w*y/2+ca[oc]*y*la;la=H-w/2;C=H+w/2;var za=eb(z);V=eb(la);Aa=eb(C);if(!A){var Ma=za;var Pa=V;var Ya=Aa;var vb=na,jb=pa,Tb=O;if(vb.outOfBounds(Ma,
Pa,za,Ya)||(Tb&&jb||vb).getRange(Ma,Pa,za,Ya))continue;else A=h.textMetrics.width(E.datum,E.datum.text)}Pa=z+N*A*Q/2;z=Pa-A/2;Ma=Pa+A/2;za=eb(z);Ya=eb(Ma);vb=za;jb=Ya;Tb=V;var W=Aa,Ea=na,Lb=pa;if(!Ea.outOfBounds(vb,Tb,jb,W)&&!(O&&Lb||Ea).getRange(vb,Tb,jb,W))return E.x=Q?0>Q*N?Ma:z:Pa,E.y=y?0>y*N?C:la:H,E.align=Va[Q*N+1],E.baseline=Ga[y*N+1],na.setRange(za,V,Ya,Aa),!0}return!1}}function wb(eb,T,Z,ca,ha,La,na,pa,m,E,L){if(!eb.length)return eb;var w=Math.max(ca.length,ha.length);const Q=ub(ca,w);ha=
sb(ha,w);const A=xb(eb[0].datum);var y="group"===A&&eb[0].datum.items[m].marktype;w="area"===y;const N=ib(A,y,pa,m),z=null===E||Infinity===E;y=w&&"naive"===L;let C=-1,H=-1;pa=eb.map(O=>{const la=z?h.textMetrics.width(O,O.text):void 0;C=Math.max(C,la);H=Math.max(H,O.fontSize);return{datum:O,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:N(O),textWidth:la}});E=null===E||Infinity===E?Math.max(C,H)+Math.max(...ca):E;T=Ub(T[0],T[1],E);if(!y){Z&&pa.sort((O,la)=>Z(O.datum,la.datum));var V=
!1;for(ca=0;ca<ha.length&&!V;++ca)V=5===ha[ca]||0>Q[ca];eb=(A&&na||w)&&eb.map(O=>O.datum);V=La.length||eb?ac(T,eb||[],La,V,w):Yb(T,na&&pa)}const Aa=w?bb[L](T,V,na,m):Za(T,V,ha,Q);pa.forEach(O=>O.opacity=+Aa(O));return pa}function ub(eb,T){const Z=new Float64Array(T),ca=eb.length;for(let ha=0;ha<ca;++ha)Z[ha]=eb[ha]||0;for(eb=ca;eb<T;++eb)Z[eb]=Z[ca-1];return Z}function sb(eb,T){const Z=new Int8Array(T),ca=eb.length;for(let ha=0;ha<ca;++ha)Z[ha]|=hb[eb[ha]];for(eb=ca;eb<T;++eb)Z[eb]=Z[ca-1];return Z}
function xb(eb){return eb&&eb.mark&&eb.mark.marktype}function ib(eb,T,Z,ca){const ha=La=>[La.x,La.x,La.x,La.y,La.y,La.y];return eb?"line"===eb||"area"===eb?La=>ha(La.datum):"line"===T?La=>{La=La.datum.items[ca].items;return ha(La.length?La["start"===Z?0:La.length-1]:{x:NaN,y:NaN})}:La=>{La=La.datum.bounds;return[La.x1,(La.x1+La.x2)/2,La.x2,La.y1,(La.y1+La.y2)/2,La.y2]}:ha}function ec(eb){ab.Transform.call(this,null,eb)}const ra=new Uint32Array(33),fa=new Uint32Array(33);fa[0]=0;ra[0]=~fa[0];for(let eb=
1;32>=eb;++eb)fa[eb]=fa[eb-1]<<1|1,ra[eb]=~fa[eb];const xa=[-1,-1,1,1],Ra=[-1,1,-1,1],Va=["right","center","left"],Ga=["bottom","middle","top"],hb={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},bb={naive:function(eb,T,Z,ca){const ha=eb.width,La=eb.height;return function(na){const pa=na.datum.datum.items[ca].items,m=pa.length,E=na.datum.fontSize,L=h.textMetrics.width(na.datum,na.datum.text);let w=0;let Q,A,y,N,z;for(let H=0;H<m;++H){var C=pa[H].x;
A=pa[H].y;Q=void 0===pa[H].x2?C:pa[H].x2;y=void 0===pa[H].y2?A:pa[H].y2;N=(C+Q)/2;z=(A+y)/2;C=Math.abs(Q-C+y-A);C>=w&&(w=C,na.x=N,na.y=z)}N=L/2;z=E/2;C=na.x-N;Q=na.x+N;A=na.y-z;y=na.y+z;na.align="center";0>C&&Q<=ha?na.align="left":0<=C&&ha<Q&&(na.align="right");na.baseline="middle";0>A&&y<=La?na.baseline="top":0<=A&&La<y&&(na.baseline="bottom");return!0}},"reduced-search":function(eb,T,Z,ca){function ha(E,L,w,Q,A){E=eb.invert(E);L=eb.invert(L);let y=w,N=na,z;if(!jc(E,L,Q,A,La,na)&&!Ba(eb,E,L,A,Q,
y,pa,m)&&!Ba(eb,E,L,A,Q,A,pa,null)){for(;1<=N-y;)z=(y+N)/2,Ba(eb,E,L,A,Q,z,pa,m)?N=z:y=z;if(y>w)return[E,L,y,!0]}}const La=eb.width,na=eb.height,pa=T[0],m=T[1];return function(E){const L=E.datum.datum.items[ca].items,w=L.length,Q=E.datum.fontSize,A=h.textMetrics.width(E.datum,E.datum.text);let y=Z?Q:0,N=!1,z=!1,C=0;let H;let V;let Aa,O,la,za,Ma,Pa,Ya,vb;for(let Ea=0;Ea<w;++Ea){var jb=L[Ea].x;var Tb=L[Ea].y;H=void 0===L[Ea].x2?jb:L[Ea].x2;V=void 0===L[Ea].y2?Tb:L[Ea].y2;if(jb>H){var W=jb;jb=H;H=W}Tb>
V&&(W=Tb,Tb=V,V=W);O=eb(jb);za=eb(H);la=~~((O+za)/2);Ma=eb(Tb);Ya=eb(V);Pa=~~((Ma+Ya)/2);for(W=la;W>=O;--W)for(Aa=Pa;Aa>=Ma;--Aa)(vb=ha(W,Aa,y,A,Q))&&([E.x,E.y,y,N]=vb);for(W=la;W<=za;++W)for(Aa=Pa;Aa<=Ya;++Aa)(vb=ha(W,Aa,y,A,Q))&&([E.x,E.y,y,N]=vb);N||Z||(W=Math.abs(H-jb+V-Tb),jb=(jb+H)/2,Tb=(Tb+V)/2,W>=C&&!jc(jb,Tb,A,Q,La,na)&&!Ba(eb,jb,Tb,Q,A,Q,pa,null)&&(C=W,E.x=jb,E.y=Tb,z=!0))}return N||z?(jb=A/2,Tb=Q/2,pa.setRange(eb(E.x-jb),eb(E.y-Tb),eb(E.x+jb),eb(E.y+Tb)),E.align="center",E.baseline="middle",
!0):!1}},floodfill:function(eb,T,Z,ca){const ha=eb.width,La=eb.height,na=T[0],pa=T[1],m=eb.bitmap();return function(E){const L=E.datum.datum.items[ca].items,w=L.length,Q=E.datum.fontSize,A=h.textMetrics.width(E.datum,E.datum.text),y=[];let N=Z?Q:0,z=!1,C=!1,H=0,V,Aa,O,la,za,Ma;var Pa;for(let jb=0;jb<w;++jb){V=L[jb].x;O=L[jb].y;Aa=void 0===L[jb].x2?V:L[jb].x2;la=void 0===L[jb].y2?O:L[jb].y2;for(y.push([eb((V+Aa)/2),eb((O+la)/2)]);y.length;)if([Ya,vb]=y.pop(),!(na.get(Ya,vb)||pa.get(Ya,vb)||m.get(Ya,
vb))){m.set(Ya,vb);for(Pa=0;4>Pa;++Pa)za=Ya+xa[Pa],Ma=vb+Ra[Pa],m.outOfBounds(za,Ma,za,Ma)||y.push([za,Ma]);za=eb.invert(Ya);Ma=eb.invert(vb);var Ya=N;var vb=La;if(!jc(za,Ma,A,Q,ha,La)&&!Ba(eb,za,Ma,Q,A,Ya,na,pa)&&!Ba(eb,za,Ma,Q,A,Q,na,null)){for(;1<=vb-Ya;)Pa=(Ya+vb)/2,Ba(eb,za,Ma,Q,A,Pa,na,pa)?vb=Pa:Ya=Pa;Ya>N&&(E.x=za,E.y=Ma,N=Ya,z=!0)}}z||Z||(Ya=Math.abs(Aa-V+la-O),za=(V+Aa)/2,Ma=(O+la)/2,Ya>=H&&!jc(za,Ma,A,Q,ha,La)&&!Ba(eb,za,Ma,Q,A,Q,na,null)&&(H=Ya,E.x=za,E.y=Ma,C=!0))}return z||C?(za=A/2,
Ma=Q/2,na.setRange(eb(E.x-za),eb(E.y-Ma),eb(E.x+za),eb(E.y+Ma)),E.align="center",E.baseline="middle",!0):!1}}},tb=["x","y","opacity","align","baseline"],Pb="top-left left bottom-left top bottom top-right right bottom-right".split(" ");ec.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Pb},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",
default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:tb.length,default:tb}]};zb.inherits(ec,ab.Transform,{transform(eb,T){function Z(La){La=eb[La];return zb.isFunction(La)&&T.modified(La.fields)}const ca=eb.modified();if(ca||T.changed(T.ADD_REM)||
Z("sort")){eb.size&&2===eb.size.length||zb.error("Size parameter should be specified as a [width, height] array.");var ha=eb.as||tb;wb(T.materialize(T.SOURCE).source||[],eb.size,eb.sort,zb.array(null==eb.offset?1:eb.offset),zb.array(eb.anchor||Pb),eb.avoidMarks||[],!1!==eb.avoidBaseMark,eb.lineAnchor||"end",eb.markIndex||0,void 0===eb.padding?0:eb.padding,eb.method||"naive").forEach(La=>{const na=La.datum;na[ha[0]]=La.x;na[ha[1]]=La.y;na[ha[2]]=La.opacity;na[ha[3]]=La.align;na[ha[4]]=La.baseline});
return T.reflow(ca).modifies(ha)}}});u.label=ec})};
shadow$provide[42]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(30),ob(29),ob(21)):"function"===typeof define&&define.amd?define(["exports","vega-statistics","vega-dataflow","vega-util"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega,u.vega))})(this,function(u,h,ia,ab){function zb(mc,Cb){var Ub=[],jc=function(ib){return ib(ub)},Ba;if(null==Cb)Ub.push(mc);else{var Za={};var wb=0;for(Ba=mc.length;wb<Ba;++wb){var ub=mc[wb];
var sb=Cb.map(jc);var xb=Za[sb];xb||(Za[sb]=xb=[],xb.dims=sb,Ub.push(xb));xb.push(ub)}}return Ub}function Yb(mc){ia.Transform.call(this,null,mc)}function ac(mc){ia.Transform.call(this,null,mc)}Yb.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number","default":.3},{name:"as",type:"string",array:!0}]};ab.inherits(Yb,ia.Transform,{transform(mc,Cb){const Ub=
Cb.fork(Cb.NO_SOURCE|Cb.NO_FIELDS);if(!this.value||Cb.changed()||mc.modified()){Cb=Cb.materialize(Cb.SOURCE).source;Cb=zb(Cb,mc.groupby);const jc=(mc.groupby||[]).map(ab.accessorName),Ba=jc.length,Za=mc.as||[ab.accessorName(mc.x),ab.accessorName(mc.y)],wb=[];Cb.forEach(ub=>{h.regressionLoess(ub,mc.x,mc.y,mc.bandwidth||.3).forEach(sb=>{const xb={};for(let ib=0;ib<Ba;++ib)xb[jc[ib]]=ub.dims[ib];xb[Za[0]]=sb[0];xb[Za[1]]=sb[1];wb.push(ia.ingest(xb))})});this.value&&(Ub.rem=this.value);this.value=Ub.add=
Ub.source=wb}return Ub}});const Xb={constant:h.regressionConstant,linear:h.regressionLinear,log:h.regressionLog,exp:h.regressionExp,pow:h.regressionPow,quad:h.regressionQuad,poly:h.regressionPoly};ac.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string","default":"linear",values:Object.keys(Xb)},{name:"order",type:"number","default":3},{name:"extent",
type:"number",array:!0,length:2},{name:"params",type:"boolean","default":!1},{name:"as",type:"string",array:!0}]};ab.inherits(ac,ia.Transform,{transform(mc,Cb){const Ub=Cb.fork(Cb.NO_SOURCE|Cb.NO_FIELDS);if(!this.value||Cb.changed()||mc.modified()){var jc=Cb.materialize(Cb.SOURCE).source;jc=zb(jc,mc.groupby);const Ba=(mc.groupby||[]).map(ab.accessorName),Za=mc.method||"linear",wb=null==mc.order?3:mc.order,ub="poly"===Za?wb:"quad"===Za?2:1,sb=mc.as||[ab.accessorName(mc.x),ab.accessorName(mc.y)],xb=
Xb[Za],ib=[];let ec=mc.extent;ab.hasOwnProperty(Xb,Za)||ab.error("Invalid regression method: "+Za);null!=ec&&"log"===Za&&0>=ec[0]&&(Cb.dataflow.warn("Ignoring extent with values \x3c\x3d 0 for log regression."),ec=null);jc.forEach(ra=>{if(ra.length<=ub)Cb.dataflow.warn("Skipping regression with more parameters than data points.");else{var fa=xb(ra,mc.x,mc.y,wb);if(mc.params)ib.push(ia.ingest({keys:ra.dims,coef:fa.coef,rSquared:fa.rSquared}));else{var xa=ec||ab.extent(ra,mc.x),Ra=Va=>{const Ga={};
for(let hb=0;hb<Ba.length;++hb)Ga[Ba[hb]]=ra.dims[hb];Ga[sb[0]]=Va[0];Ga[sb[1]]=Va[1];ib.push(ia.ingest(Ga))};"linear"===Za||"constant"===Za?xa.forEach(Va=>Ra([Va,fa.predict(Va)])):h.sampleCurve(fa.predict,xa,25,200).forEach(Ra)}}});this.value&&(Ub.rem=this.value);this.value=Ub.add=Ub.source=ib}return Ub}});u.loess=Yb;u.regression=ac})};
shadow$provide[43]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(29),ob(21)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-util"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h((u.vega=u.vega||{},u.vega.transforms={}),u.vega,u.vega))})(this,function(u,h,ia){function ab(T,Z,ca,ha,La){let na,pa;let m=Z[0],E=ha[0],L=0,w=0;E>m===E>-m?(na=m,m=Z[++L]):(na=E,E=ha[++w]);let Q=0;if(L<T&&w<ca){if(E>m===E>-m){pa=m+na;var A=
na-(pa-m);m=Z[++L]}else pa=E+na,A=na-(pa-E),E=ha[++w];na=pa;for(0!==A&&(La[Q++]=A);L<T&&w<ca;)E>m===E>-m?(pa=na+m,A=pa-na,A=na-(pa-A)+(m-A),m=Z[++L]):(pa=na+E,A=pa-na,A=na-(pa-A)+(E-A),E=ha[++w]),na=pa,0!==A&&(La[Q++]=A)}for(;L<T;)pa=na+m,A=pa-na,A=na-(pa-A)+(m-A),m=Z[++L],na=pa,0!==A&&(La[Q++]=A);for(;w<ca;)pa=na+E,A=pa-na,A=na-(pa-A)+(E-A),E=ha[++w],na=pa,0!==A&&(La[Q++]=A);if(0!==na||0===Q)La[Q++]=na;return Q}function zb(T,Z,ca,ha,La,na){var pa=(Z-na)*(ca-La),m=(T-La)*(ha-na),E=pa-m;if(0===pa||
0===m||0<pa!==0<m)return E;pa=Math.abs(pa+m);if(Math.abs(E)>=3.3306690738754716E-16*pa)return E;{let z;E=T-La;const C=ca-La;m=Z-na;const H=ha-na;var L=E*H;var w=134217729*E;var Q=w-(w-E);var A=E-Q;w=134217729*H;w-=w-H;z=H-w;var y=A*z-(L-Q*w-A*w-Q*z);var N=m*C;w=134217729*m;Q=w-(w-m);A=m-Q;w=134217729*C;w-=w-C;z=C-w;w=A*z-(N-Q*w-A*w-Q*z);A=y-w;Q=y-A;sb[0]=y-(A+Q)+(Q-w);y=L+A;Q=y-L;L=L-(y-Q)+(A-Q);A=L-N;Q=L-A;sb[1]=L-(A+Q)+(Q-N);N=y+A;Q=N-y;sb[2]=y-(N-Q)+(A-Q);sb[3]=N;N=sb[0];for(L=1;4>L;L++)N+=sb[L];
L=2.2204460492503146E-16*pa;N>=L||-N>=L?ha=N:(Q=T-E,T=T-(E+Q)+(Q-La),Q=ca-C,ca=ca-(C+Q)+(Q-La),Q=Z-m,Z=Z-(m+Q)+(Q-na),Q=ha-H,ha=ha-(H+Q)+(Q-na),0===T&&0===Z&&0===ca&&0===ha?ha=N:(L=1.1093356479670487E-31*pa+3.3306690738754706E-16*Math.abs(N),N+=E*ha+H*T-(m*ca+C*Z),N>=L||-N>=L?ha=N:(L=T*H,w=134217729*T,Q=w-(w-T),A=T-Q,w=134217729*H,w-=w-H,z=H-w,y=A*z-(L-Q*w-A*w-Q*z),N=Z*C,w=134217729*Z,Q=w-(w-Z),A=Z-Q,w=134217729*C,w-=w-C,z=C-w,w=A*z-(N-Q*w-A*w-Q*z),A=y-w,Q=y-A,ra[0]=y-(A+Q)+(Q-w),y=L+A,Q=y-L,L=L-
(y-Q)+(A-Q),A=L-N,Q=L-A,ra[1]=L-(A+Q)+(Q-N),N=y+A,Q=N-y,ra[2]=y-(N-Q)+(A-Q),ra[3]=N,na=ab(4,sb,4,ra,xb),L=E*ha,w=134217729*E,Q=w-(w-E),A=E-Q,w=134217729*ha,w-=w-ha,z=ha-w,y=A*z-(L-Q*w-A*w-Q*z),N=m*ca,w=134217729*m,Q=w-(w-m),A=m-Q,w=134217729*ca,w-=w-ca,z=ca-w,w=A*z-(N-Q*w-A*w-Q*z),A=y-w,Q=y-A,ra[0]=y-(A+Q)+(Q-w),y=L+A,Q=y-L,L=L-(y-Q)+(A-Q),A=L-N,Q=L-A,ra[1]=L-(A+Q)+(Q-N),N=y+A,Q=N-y,ra[2]=y-(N-Q)+(A-Q),ra[3]=N,na=ab(na,xb,4,ra,ib),L=T*ha,w=134217729*T,Q=w-(w-T),A=T-Q,w=134217729*ha,w-=w-ha,z=ha-w,
y=A*z-(L-Q*w-A*w-Q*z),N=Z*ca,w=134217729*Z,Q=w-(w-Z),A=Z-Q,w=134217729*ca,w-=w-ca,z=ca-w,w=A*z-(N-Q*w-A*w-Q*z),A=y-w,Q=y-A,ra[0]=y-(A+Q)+(Q-w),y=L+A,Q=y-L,L=L-(y-Q)+(A-Q),A=L-N,Q=L-A,ra[1]=L-(A+Q)+(Q-N),N=y+A,Q=N-y,ra[2]=y-(N-Q)+(A-Q),ra[3]=N,ha=ab(na,ib,4,ra,ec),ha=ec[ha-1])))}return-ha}function Yb(T,Z,ca,ha){T-=ca;Z-=ha;return T*T+Z*Z}function ac(T,Z,ca,ha){if(20>=ha-ca)for(var La=ca+1;La<=ha;La++){for(var na=T[La],pa=Z[na],m=La-1;m>=ca&&Z[T[m]]>pa;)T[m+1]=T[m--];T[m+1]=na}else{La=ca+1;na=ha;Xb(T,
ca+ha>>1,La);Z[T[ca]]>Z[T[ha]]&&Xb(T,ca,ha);Z[T[La]]>Z[T[ha]]&&Xb(T,La,ha);Z[T[ca]]>Z[T[La]]&&Xb(T,ca,La);pa=T[La];for(m=Z[pa];;){do La++;while(Z[T[La]]<m);do na--;while(Z[T[na]]>m);if(na<La)break;Xb(T,La,na)}T[ca+1]=T[na];T[na]=pa;ha-La+1>=na-ca?(ac(T,Z,La,ha),ac(T,Z,ca,na-1)):(ac(T,Z,ca,na-1),ac(T,Z,La,ha))}}function Xb(T,Z,ca){const ha=T[Z];T[Z]=T[ca];T[ca]=ha}function mc(T){return T[0]}function Cb(T){return T[1]}function Ub(T){return T[0]}function jc(T){return T[1]}function Ba(T){const {triangles:Z,
coords:ca}=T;for(T=0;T<Z.length;T+=3){const ha=2*Z[T],La=2*Z[T+1],na=2*Z[T+2];if(1E-10<(ca[na]-ca[ha])*(ca[La+1]-ca[ha+1])-(ca[La]-ca[ha])*(ca[na+1]-ca[ha+1]))return!1}return!0}function Za(T,Z,ca){return[T+Math.sin(T+Z)*ca,Z+Math.cos(T-Z)*ca]}function*wb(T,Z,ca,ha){let La=0;for(const na of T)yield Z.call(ha,na,La,T),yield ca.call(ha,na,La,T),++La}function ub(T){h.Transform.call(this,null,T)}const sb=new Float64Array(4),xb=new Float64Array(8),ib=new Float64Array(12),ec=new Float64Array(16),ra=new Float64Array(4),
fa=Math.pow(2,-52),xa=new Uint32Array(512);class Ra{static from(T,Z=mc,ca=Cb){const ha=T.length,La=new Float64Array(2*ha);for(let na=0;na<ha;na++){const pa=T[na];La[2*na]=Z(pa);La[2*na+1]=ca(pa)}return new Ra(La)}constructor(T){const Z=T.length>>1;if(0<Z&&"number"!==typeof T[0])throw Error("Expected coords to contain numbers.");this.coords=T;T=Math.max(2*Z-5,0);this._triangles=new Uint32Array(3*T);this._halfedges=new Int32Array(3*T);this._hashSize=Math.ceil(Math.sqrt(Z));this._hullPrev=new Uint32Array(Z);
this._hullNext=new Uint32Array(Z);this._hullTri=new Uint32Array(Z);this._hullHash=(new Int32Array(this._hashSize)).fill(-1);this._ids=new Uint32Array(Z);this._dists=new Float64Array(Z);this.update()}update(){const {coords:T,_hullPrev:Z,_hullNext:ca,_hullTri:ha,_hullHash:La}=this;var na=T.length>>1,pa=Infinity,m=Infinity,E=-Infinity,L=-Infinity;for(var w=0;w<na;w++){var Q=T[2*w];var A=T[2*w+1];Q<pa&&(pa=Q);A<m&&(m=A);Q>E&&(E=Q);A>L&&(L=A);this._ids[w]=w}E=(pa+E)/2;m=(m+L)/2;pa=Infinity;for(L=0;L<na;L++)if(w=
Yb(E,m,T[2*L],T[2*L+1]),w<pa){var y=L;pa=w}m=T[2*y];L=T[2*y+1];pa=Infinity;for(E=0;E<na;E++)if(E!==y&&(w=Yb(m,L,T[2*E],T[2*E+1]),w<pa&&0<w)){var N=E;pa=w}pa=T[2*N];E=T[2*N+1];A=Infinity;for(w=0;w<na;w++)if(w!==y&&w!==N){Q=pa-m;var z=E-L;var C=T[2*w]-m;var H=T[2*w+1]-L,V=Q*Q+z*z,Aa=C*C+H*H,O=.5/(Q*H-z*C);z=(H*V-z*Aa)*O;Q=(Q*Aa-C*V)*O;Q=z*z+Q*Q;if(Q<A){var la=w;A=Q}}w=T[2*la];Q=T[2*la+1];if(Infinity===A){for(y=0;y<na;y++)this._dists[y]=T[2*y]-T[0]||T[2*y+1]-T[1];ac(this._ids,this._dists,0,na-1);y=new Uint32Array(na);
N=0;for(let za=0,Ma=-Infinity;za<na;za++)la=this._ids[za],this._dists[la]>Ma&&(y[N++]=la,Ma=this._dists[la]);this.hull=y.subarray(0,N);this.triangles=new Uint32Array(0);this.halfedges=new Uint32Array(0)}else{0>zb(m,L,pa,E,w,Q)&&(A=N,C=pa,V=E,N=la,pa=w,E=Q,la=A,w=C,Q=V);C=pa-m;A=E-L;V=w-m;H=Q-L;Aa=C*C+A*A;O=V*V+H*H;z=.5/(C*H-A*V);A=m+(H*Aa-A*O)*z;C=L+(C*O-V*Aa)*z;this._cx=A;this._cy=C;for(V=0;V<na;V++)this._dists[V]=Yb(T[2*V],T[2*V+1],A,C);ac(this._ids,this._dists,0,na-1);this._hullStart=y;na=3;ca[y]=
Z[la]=N;ca[N]=Z[y]=la;ca[la]=Z[N]=y;ha[y]=0;ha[N]=1;ha[la]=2;La.fill(-1);La[this._hashKey(m,L)]=y;La[this._hashKey(pa,E)]=N;La[this._hashKey(w,Q)]=la;this.trianglesLen=0;this._addTriangle(y,N,la,-1,-1,-1);for(let za=0,Ma,Pa;za<this._ids.length;za++){m=this._ids[za];L=T[2*m];pa=T[2*m+1];if(0<za&&Math.abs(L-Ma)<=fa&&Math.abs(pa-Pa)<=fa)continue;Ma=L;Pa=pa;if(m===y||m===N||m===la)continue;E=0;for(let vb=0,jb=this._hashKey(L,pa);vb<this._hashSize&&(E=La[(jb+vb)%this._hashSize],-1===E||E===ca[E]);vb++);
w=E=Z[E];let Ya;for(;Ya=ca[w],0<=zb(L,pa,T[2*w],T[2*w+1],T[2*Ya],T[2*Ya+1]);)if(w=Ya,w===E){w=-1;break}if(-1!==w){Q=this._addTriangle(w,m,ca[w],-1,-1,ha[w]);ha[m]=this._legalize(Q+2);ha[w]=Q;na++;for(A=ca[w];Ya=ca[A],0>zb(L,pa,T[2*A],T[2*A+1],T[2*Ya],T[2*Ya+1]);)Q=this._addTriangle(A,m,Ya,ha[m],-1,ha[A]),ha[m]=this._legalize(Q+2),ca[A]=A,na--,A=Ya;if(w===E)for(;Ya=Z[w],0>zb(L,pa,T[2*Ya],T[2*Ya+1],T[2*w],T[2*w+1]);)Q=this._addTriangle(Ya,m,w,-1,ha[w],ha[Ya]),this._legalize(Q+2),ha[Ya]=Q,ca[w]=w,na--,
w=Ya;this._hullStart=Z[m]=w;ca[w]=Z[A]=m;ca[m]=A;La[this._hashKey(L,pa)]=m;La[this._hashKey(T[2*w],T[2*w+1])]=w}}this.hull=new Uint32Array(na);for(let za=0,Ma=this._hullStart;za<na;za++)this.hull[za]=Ma,Ma=ca[Ma];this.triangles=this._triangles.subarray(0,this.trianglesLen);this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}}_hashKey(T,Z){var ca=Math;T-=this._cx;Z-=this._cy;T/=Math.abs(T)+Math.abs(Z);return ca.floor.call(ca,(0<Z?3-T:1+T)/4*this._hashSize)%this._hashSize}_legalize(T){const {_triangles:Z,
_halfedges:ca,coords:ha}=this;let La=0;for(var na;;){const A=ca[T];var pa=T-T%3;na=pa+(T+2)%3;if(-1===A){if(0===La)break;T=xa[--La];continue}const y=A-A%3,N=y+(A+2)%3;var m=Z[na],E=Z[T],L=Z[pa+(T+1)%3];pa=Z[N];var w=ha[2*pa],Q=ha[2*pa+1];const z=ha[2*m]-w,C=ha[2*m+1]-Q,H=ha[2*E]-w;E=ha[2*E+1]-Q;w=ha[2*L]-w;Q=ha[2*L+1]-Q;L=H*H+E*E;const V=w*w+Q*Q;if(0>z*(E*V-L*Q)-C*(H*V-L*w)+(z*z+C*C)*(H*Q-E*w)){Z[T]=pa;Z[A]=m;m=ca[N];if(-1===m){pa=this._hullStart;do{if(this._hullTri[pa]===N){this._hullTri[pa]=T;break}pa=
this._hullPrev[pa]}while(pa!==this._hullStart)}this._link(T,m);this._link(A,ca[na]);this._link(na,N);na=y+(A+1)%3;La<xa.length&&(xa[La++]=na)}else{if(0===La)break;T=xa[--La]}}return na}_link(T,Z){this._halfedges[T]=Z;-1!==Z&&(this._halfedges[Z]=T)}_addTriangle(T,Z,ca,ha,La,na){const pa=this.trianglesLen;this._triangles[pa]=T;this._triangles[pa+1]=Z;this._triangles[pa+2]=ca;this._link(pa,ha);this._link(pa+1,La);this._link(pa+2,na);this.trianglesLen+=3;return pa}}class Va{constructor(){this._x0=this._y0=
this._x1=this._y1=null;this._=""}moveTo(T,Z){this._+=`M${this._x0=this._x1=+T},${this._y0=this._y1=+Z}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(T,Z){this._+=`L${this._x1=+T},${this._y1=+Z}`}arc(T,Z,ca){T=+T;Z=+Z;ca=+ca;const ha=T+ca,La=Z;if(0>ca)throw Error("negative radius");if(null===this._x1)this._+=`M${ha},${La}`;else if(1E-6<Math.abs(this._x1-ha)||1E-6<Math.abs(this._y1-La))this._+="L"+ha+","+La;ca&&(this._+=`A${ca},${ca},0,1,1,${T-ca},${Z}A${ca},${ca},0,1,1,${this._x1=
ha},${this._y1=La}`)}rect(T,Z,ca,ha){this._+=`M${this._x0=this._x1=+T},${this._y0=this._y1=+Z}h${+ca}v${+ha}h${-ca}Z`}value(){return this._||null}}class Ga{constructor(){this._=[]}moveTo(T,Z){this._.push([T,Z])}closePath(){this._.push(this._[0].slice())}lineTo(T,Z){this._.push([T,Z])}value(){return this._.length?this._:null}}let hb=class{constructor(T,[Z,ca,ha,La]=[0,0,960,500]){if(!((ha=+ha)>=(Z=+Z)&&(La=+La)>=(ca=+ca)))throw Error("invalid bounds");this.delaunay=T;this._circumcenters=new Float64Array(2*
T.points.length);this.vectors=new Float64Array(2*T.points.length);this.xmax=ha;this.xmin=Z;this.ymax=La;this.ymin=ca;this._init()}update(){this.delaunay.update();this._init();return this}_init(){const {delaunay:{points:T,hull:Z,triangles:ca},vectors:ha}=this;var La,na=this.circumcenters=this._circumcenters.subarray(0,ca.length/3*2);for(let z=0,C=0,H=ca.length,V,Aa;z<H;z+=3,C+=2){var pa=2*ca[z],m=2*ca[z+1],E=2*ca[z+2],L=T[pa];pa=T[pa+1];var w=T[E],Q=T[E+1];E=T[m]-L;const O=T[m+1]-pa;m=w-L;const la=
Q-pa;var A=2*(E*la-O*m);if(1E-9>Math.abs(A)){if(void 0===y){var y=La=0;for(var N of Z)y+=T[2*N],La+=T[2*N+1];y/=Z.length;La/=Z.length}E=1E9*Math.sign((y-L)*la-(La-pa)*m);V=(L+w)/2-E*la;Aa=(pa+Q)/2+E*m}else w=1/A,Q=E*E+O*O,A=m*m+la*la,V=L+(la*Q-O*A)*w,Aa=pa+(E*A-m*Q)*w;na[C]=V;na[C+1]=Aa}y=Z[Z.length-1];na=4*y;N=T[2*y];E=T[2*y+1];ha.fill(0);for(m=0;m<Z.length;++m)y=Z[m],La=na,L=N,pa=E,na=4*y,N=T[2*y],E=T[2*y+1],ha[La+2]=ha[na]=pa-E,ha[La+3]=ha[na+1]=N-L}render(T){const Z=null==T?T=new Va:void 0,{delaunay:{halfedges:ca,
inedges:ha,hull:La},circumcenters:na,vectors:pa}=this;if(1>=La.length)return null;for(let Q=0,A=ca.length;Q<A;++Q){var m=ca[Q];if(!(m<Q)){var E=2*Math.floor(Q/3);m=2*Math.floor(m/3);this._renderSegment(na[E],na[E+1],na[m],na[m+1],T)}}E=La[La.length-1];for(m=0;m<La.length;++m){var L=E;E=La[m];var w=2*Math.floor(ha[E]/3);const Q=na[w];w=na[w+1];L*=4;(L=this._project(Q,w,pa[L+2],pa[L+3]))&&this._renderSegment(Q,w,L[0],L[1],T)}return Z&&Z.value()}renderBounds(T){const Z=null==T?T=new Va:void 0;T.rect(this.xmin,
this.ymin,this.xmax-this.xmin,this.ymax-this.ymin);return Z&&Z.value()}renderCell(T,Z){const ca=null==Z?Z=new Va:void 0;T=this._clip(T);if(null!==T&&T.length){Z.moveTo(T[0],T[1]);for(var ha=T.length;T[0]===T[ha-2]&&T[1]===T[ha-1]&&1<ha;)ha-=2;for(let La=2;La<ha;La+=2)T[La]===T[La-2]&&T[La+1]===T[La-1]||Z.lineTo(T[La],T[La+1]);Z.closePath();return ca&&ca.value()}}*cellPolygons(){var {delaunay:{points:T}}=this;for(let Z=0,ca=T.length/2;Z<ca;++Z)if(T=this.cellPolygon(Z))T.index=Z,yield T}cellPolygon(T){const Z=
new Ga;this.renderCell(T,Z);return Z.value()}_renderSegment(T,Z,ca,ha,La){const na=this._regioncode(T,Z),pa=this._regioncode(ca,ha);if(0===na&&0===pa)La.moveTo(T,Z),La.lineTo(ca,ha);else if(T=this._clipSegment(T,Z,ca,ha,na,pa))La.moveTo(T[0],T[1]),La.lineTo(T[2],T[3])}contains(T,Z,ca){return(Z=+Z,Z!==Z)||(ca=+ca,ca!==ca)?!1:this.delaunay._step(T,Z,ca)===T}*neighbors(T){const Z=this._clip(T);if(Z)for(const ca of this.delaunay.neighbors(T))if(T=this._clip(ca))a:for(let ha=0,La=Z.length;ha<La;ha+=2)for(let na=
0,pa=T.length;na<pa;na+=2)if(Z[ha]===T[na]&&Z[ha+1]===T[na+1]&&Z[(ha+2)%La]===T[(na+pa-2)%pa]&&Z[(ha+3)%La]===T[(na+pa-1)%pa]){yield ca;break a}}_cell(T){const {circumcenters:Z,delaunay:{inedges:ca,halfedges:ha,triangles:La}}=this,na=ca[T];if(-1===na)return null;const pa=[];let m=na;do{const E=Math.floor(m/3);pa.push(Z[2*E],Z[2*E+1]);m=2===m%3?m-2:m+1;if(La[m]!==T)break;m=ha[m]}while(m!==na&&-1!==m);return pa}_clip(T){if(0===T&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,
this.xmin,this.ymax,this.xmin,this.ymin];const Z=this._cell(T);if(null===Z)return null;const {vectors:ca}=this,ha=4*T;return this._simplify(ca[ha]||ca[ha+1]?this._clipInfinite(T,Z,ca[ha],ca[ha+1],ca[ha+2],ca[ha+3]):this._clipFinite(T,Z))}_clipFinite(T,Z){const ca=Z.length;let ha=null;let La=Z[ca-2],na=Z[ca-1];let pa=this._regioncode(La,na),m=0;for(let Q=0;Q<ca;Q+=2){var E=La;var L=na;La=Z[Q];na=Z[Q+1];var w=pa;pa=this._regioncode(La,na);if(0===w&&0===pa)m=0,ha?ha.push(La,na):ha=[La,na];else{let A,
y;if(0===w){if(null===(E=this._clipSegment(E,L,La,na,w,pa)))continue;[L,w,A,y]=E}else{if(null===(E=this._clipSegment(La,na,E,L,pa,w)))continue;[A,y,L,w]=E;E=m;m=this._edgecode(L,w);E&&m&&this._edge(T,E,m,ha,ha.length);ha?ha.push(L,w):ha=[L,w]}E=m;m=this._edgecode(A,y);E&&m&&this._edge(T,E,m,ha,ha.length);ha?ha.push(A,y):ha=[A,y]}}if(ha)E=m,m=this._edgecode(ha[0],ha[1]),E&&m&&this._edge(T,E,m,ha,ha.length);else if(this.contains(T,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,
this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return ha}_clipSegment(T,Z,ca,ha,La,na){const pa=La<na;for(pa&&([T,Z,ca,ha,La,na]=[ca,ha,T,Z,na,La]);;){if(0===La&&0===na)return pa?[ca,ha,T,Z]:[T,Z,ca,ha];if(La&na)return null;var m=void 0;let E;m=La||na;m&8?(m=T+(ca-T)*(this.ymax-Z)/(ha-Z),E=this.ymax):m&4?(m=T+(ca-T)*(this.ymin-Z)/(ha-Z),E=this.ymin):m&2?(E=Z+(ha-Z)*(this.xmax-T)/(ca-T),m=this.xmax):(E=Z+(ha-Z)*(this.xmin-T)/(ca-T),m=this.xmin);La?(T=m,Z=E,La=this._regioncode(T,Z)):(ca=
m,ha=E,na=this._regioncode(ca,ha))}}_clipInfinite(T,Z,ca,ha,La,na){Z=Array.from(Z);let pa;(pa=this._project(Z[0],Z[1],ca,ha))&&Z.unshift(pa[0],pa[1]);(pa=this._project(Z[Z.length-2],Z[Z.length-1],La,na))&&Z.push(pa[0],pa[1]);if(Z=this._clipFinite(T,Z))for(let m=0,E=Z.length,L,w=this._edgecode(Z[E-2],Z[E-1]);m<E;m+=2)L=w,w=this._edgecode(Z[m],Z[m+1]),L&&w&&(m=this._edge(T,L,w,Z,m),E=Z.length);else this.contains(T,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(Z=[this.xmin,this.ymin,this.xmax,this.ymin,
this.xmax,this.ymax,this.xmin,this.ymax]);return Z}_edge(T,Z,ca,ha,La){for(;Z!==ca;){let na,pa;switch(Z){case 5:Z=4;continue;case 4:Z=6;na=this.xmax;pa=this.ymin;break;case 6:Z=2;continue;case 2:Z=10;na=this.xmax;pa=this.ymax;break;case 10:Z=8;continue;case 8:Z=9;na=this.xmin;pa=this.ymax;break;case 9:Z=1;continue;case 1:Z=5,na=this.xmin,pa=this.ymin}ha[La]===na&&ha[La+1]===pa||!this.contains(T,na,pa)||(ha.splice(La,0,na,pa),La+=2)}return La}_project(T,Z,ca,ha){let La=Infinity,na,pa,m;if(0>ha){if(Z<=
this.ymin)return null;(na=(this.ymin-Z)/ha)<La&&(m=this.ymin,pa=T+(La=na)*ca)}else if(0<ha){if(Z>=this.ymax)return null;(na=(this.ymax-Z)/ha)<La&&(m=this.ymax,pa=T+(La=na)*ca)}if(0<ca){if(T>=this.xmax)return null;(na=(this.xmax-T)/ca)<La&&(pa=this.xmax,m=Z+na*ha)}else if(0>ca){if(T<=this.xmin)return null;(na=(this.xmin-T)/ca)<La&&(pa=this.xmin,m=Z+na*ha)}return[pa,m]}_edgecode(T,Z){return(T===this.xmin?1:T===this.xmax?2:0)|(Z===this.ymin?4:Z===this.ymax?8:0)}_regioncode(T,Z){return(T<this.xmin?1:
T>this.xmax?2:0)|(Z<this.ymin?4:Z>this.ymax?8:0)}_simplify(T){if(T&&4<T.length){for(let Z=0;Z<T.length;Z+=2){const ca=(Z+2)%T.length,ha=(Z+4)%T.length;if(T[Z]===T[ca]&&T[ca]===T[ha]||T[Z+1]===T[ca+1]&&T[ca+1]===T[ha+1])T.splice(ca,2),Z-=2}T.length||(T=null)}return T}};const bb=2*Math.PI,tb=Math.pow;class Pb{static from(T,Z=Ub,ca=jc,ha){if("length"in T){const La=T.length,na=new Float64Array(2*La);for(let pa=0;pa<La;++pa){const m=T[pa];na[2*pa]=Z.call(ha,m,pa,T);na[2*pa+1]=ca.call(ha,m,pa,T)}T=na}else T=
Float64Array.from(wb(T,Z,ca,ha));return new Pb(T)}constructor(T){this._delaunator=new Ra(T);this.inedges=new Int32Array(T.length/2);this._hullIndex=new Int32Array(T.length/2);this.points=this._delaunator.coords;this._init()}update(){this._delaunator.update();this._init();return this}_init(){var T=this._delaunator;const Z=this.points;if(T.hull&&2<T.hull.length&&Ba(T)){this.collinear=Int32Array.from({length:Z.length/2},(pa,m)=>m).sort((pa,m)=>Z[2*pa]-Z[2*m]||Z[2*pa+1]-Z[2*m+1]);T=this.collinear[0];
var ca=this.collinear[this.collinear.length-1];T=[Z[2*T],Z[2*T+1],Z[2*ca],Z[2*ca+1]];T=1E-8*Math.hypot(T[3]-T[1],T[2]-T[0]);for(let pa=0,m=Z.length/2;pa<m;++pa)ca=Za(Z[2*pa],Z[2*pa+1],T),Z[2*pa]=ca[0],Z[2*pa+1]=ca[1];this._delaunator=new Ra(Z)}else delete this.collinear;T=this.halfedges=this._delaunator.halfedges;ca=this.hull=this._delaunator.hull;const ha=this.triangles=this._delaunator.triangles,La=this.inedges.fill(-1),na=this._hullIndex.fill(-1);for(let pa=0,m=T.length;pa<m;++pa){const E=ha[2===
pa%3?pa-2:pa+1];if(-1===T[pa]||-1===La[E])La[E]=pa}for(let pa=0,m=ca.length;pa<m;++pa)na[ca[pa]]=pa;2>=ca.length&&0<ca.length&&(this.triangles=(new Int32Array(3)).fill(-1),this.halfedges=(new Int32Array(3)).fill(-1),this.triangles[0]=ca[0],La[ca[0]]=1,2===ca.length&&(La[ca[1]]=0,this.triangles[1]=ca[1],this.triangles[2]=ca[1]))}voronoi(T){return new hb(this,T)}*neighbors(T){const {inedges:Z,hull:ca,_hullIndex:ha,halfedges:La,triangles:na,collinear:pa}=this;if(pa){var m=pa.indexOf(T);0<m&&(yield pa[m-
1]);m<pa.length-1&&(yield pa[m+1])}else{var E=Z[T];if(-1!==E){var L=E;do{yield(m=na[L]);L=2===L%3?L-2:L+1;if(na[L]!==T)break;L=La[L];if(-1===L){T=ca[(ha[T]+1)%ca.length];T!==m&&(yield T);break}}while(L!==E)}}}find(T,Z,ca=0){if((T=+T,T!==T)||(Z=+Z,Z!==Z))return-1;const ha=ca;let La;for(;0<=(La=this._step(ca,T,Z))&&La!==ca&&La!==ha;)ca=La;return La}_step(T,Z,ca){const {inedges:ha,hull:La,_hullIndex:na,halfedges:pa,triangles:m,points:E}=this;if(-1===ha[T]||!E.length)return(T+1)%(E.length>>1);let L=T,
w=tb(Z-E[2*T],2)+tb(ca-E[2*T+1],2);const Q=ha[T];let A=Q;do{let y=m[A];const N=tb(Z-E[2*y],2)+tb(ca-E[2*y+1],2);N<w&&(w=N,L=y);A=2===A%3?A-2:A+1;if(m[A]!==T)break;A=pa[A];if(-1===A){A=La[(na[T]+1)%La.length];if(A!==y&&tb(Z-E[2*A],2)+tb(ca-E[2*A+1],2)<w)return A;break}}while(A!==Q);return L}render(T){const Z=null==T?T=new Va:void 0,{points:ca,halfedges:ha,triangles:La}=this;for(let pa=0,m=ha.length;pa<m;++pa){var na=ha[pa];if(na<pa)continue;const E=2*La[pa];na=2*La[na];T.moveTo(ca[E],ca[E+1]);T.lineTo(ca[na],
ca[na+1])}this.renderHull(T);return Z&&Z.value()}renderPoints(T,Z){void 0!==Z||T&&"function"===typeof T.moveTo||(Z=T,T=null);Z=void 0==Z?2:+Z;const ca=null==T?T=new Va:void 0,{points:ha}=this;for(let La=0,na=ha.length;La<na;La+=2){const pa=ha[La],m=ha[La+1];T.moveTo(pa+Z,m);T.arc(pa,m,Z,0,bb)}return ca&&ca.value()}renderHull(T){const Z=null==T?T=new Va:void 0,{hull:ca,points:ha}=this;var La=2*ca[0];const na=ca.length;T.moveTo(ha[La],ha[La+1]);for(La=1;La<na;++La){const pa=2*ca[La];T.lineTo(ha[pa],
ha[pa+1])}T.closePath();return Z&&Z.value()}hullPolygon(){const T=new Ga;this.renderHull(T);return T.value()}renderTriangle(T,Z){const ca=null==Z?Z=new Va:void 0,{points:ha,triangles:La}=this,na=2*La[T*=3],pa=2*La[T+1];T=2*La[T+2];Z.moveTo(ha[na],ha[na+1]);Z.lineTo(ha[pa],ha[pa+1]);Z.lineTo(ha[T],ha[T+1]);Z.closePath();return ca&&ca.value()}*trianglePolygons(){const {triangles:T}=this;for(let Z=0,ca=T.length/3;Z<ca;++Z)yield this.trianglePolygon(Z)}trianglePolygon(T){const Z=new Ga;this.renderTriangle(T,
Z);return Z.value()}}ub.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,"default":[[-1E5,-1E5],[1E5,1E5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string","default":"path"}]};const eb=[-1E5,-1E5,1E5,1E5];ia.inherits(ub,h.Transform,{transform(T,Z){const ca=T.as||"path",ha=Z.source;if(!ha||!ha.length)return Z;
var La=T.size;La=La?[0,0,La[0],La[1]]:(La=T.extent)?[La[0][0],La[0][1],La[1][0],La[1][1]]:eb;La=this.value=Pb.from(ha,T.x,T.y).voronoi(La);for(let m=0,E=ha.length;m<E;++m){var na=La.cellPolygon(m),pa=ha[m];if(!na||2===na.length&&na[0][0]===na[1][0]&&na[0][1]===na[1][1])na=null;else{const L=na[0][0],w=na[0][1];let Q=na.length-1;for(;na[Q][0]===L&&na[Q][1]===w;--Q);na="M"+na.slice(0,Q+1).join("L")+"Z"}pa[ca]=na}return Z.reflow(T.modified()).modifies(ca)}});u.voronoi=ub})};
shadow$provide[44]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(32),ob(29),ob(21),ob(33),ob(30)):"function"===typeof define&&define.amd?define("exports vega-canvas vega-dataflow vega-util vega-scale vega-statistics".split(" "),h):(u="undefined"!==typeof globalThis?globalThis:u||self,h((u.vega=u.vega||{},u.vega.transforms={}),u.vega,u.vega,u.vega,u.vega,u.vega))})(this,function(u,h,ia,ab,zb,Yb){function ac(){function xb(T){T.width=T.height=1;var Z=Math.sqrt(T.getContext("2d").getImageData(0,
0,1,1).data.length>>2);T.width=2048/Z;T.height=2048/Z;T=T.getContext("2d");T.fillStyle=T.strokeStyle="red";T.textAlign="center";return{context:T,ratio:Z}}function ib(T,Z,ca){for(var ha=Z.x,La=Z.y,na=Math.hypot(ec[0],ec[1]),pa=bb(ec),m=.5>Pb()?1:-1,E=-m,L,w;L=pa(E+=m);){w=~~L[0];L=~~L[1];if(Math.min(Math.abs(w),Math.abs(L))>=na)break;Z.x=ha+w;Z.y=La+L;if(!(0>Z.x+Z.x0||0>Z.y+Z.y0||Z.x+Z.x1>ec[0]||Z.y+Z.y1>ec[1])){if(!(w=!ca)){a:{w=ec[0];w>>=5;L=Z.sprite;var Q=Z.width>>5;var A=Z.x-(Q<<4);for(var y=A&
127,N=32-y,z=Z.y1-Z.y0,C=(Z.y+Z.y0)*w+(A>>5),H=0;H<z;H++){for(var V=A=0;V<=Q;V++)if((A<<N|(V<Q?(A=L[H*Q+V])>>>y:0))&T[C+V]){w=!0;break a}C+=w}w=!1}w=!w}if(w&&(!ca||Z.x+Z.x1>ca[0].x&&Z.x+Z.x0<ca[1].x&&Z.y+Z.y1>ca[0].y&&Z.y+Z.y0<ca[1].y)){ca=Z.sprite;ha=Z.width>>5;La=ec[0]>>5;E=Z.x-(ha<<4);na=E&127;pa=32-na;m=Z.y1-Z.y0;E=(Z.y+Z.y0)*La+(E>>5);for(L=0;L<m;L++){for(Q=w=0;Q<=ha;Q++)T[E+Q]=T[E+Q]|w<<pa|(Q<ha?(w=ca[L*ha+Q])>>>na:0);E+=La}Z.sprite=null;return!0}}}return!1}var ec=[256,256],ra,fa,xa,Ra,Va,Ga,
hb,bb=Cb,tb=[],Pb=Math.random,eb={layout:function(){for(var T=xb(h.canvas()),Z=Ub((ec[0]>>5)*ec[1]),ca=null,ha=tb.length,La=-1,na=[],pa=tb.map(E=>({text:ra(E),font:fa(E),style:Ra(E),weight:Va(E),rotate:Ga(E),size:~~(xa(E)+1E-14),padding:hb(E),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:E})).sort((E,L)=>L.size-E.size);++La<ha;){var m=pa[La];m.x=ec[0]*(Pb()+.5)>>1;m.y=ec[1]*(Pb()+.5)>>1;Xb(T,m,pa,La);m.hasText&&ib(Z,m,ca)&&(na.push(m),ca?mc(ca,m):ca=[{x:m.x+m.x0,y:m.y+m.y0},{x:m.x+
m.x1,y:m.y+m.y1}],m.x-=ec[0]>>1,m.y-=ec[1]>>1)}return na},words:function(T){return arguments.length?(tb=T,eb):tb},size:function(T){return arguments.length?(ec=[+T[0],+T[1]],eb):ec},font:function(T){return arguments.length?(fa=jc(T),eb):fa},fontStyle:function(T){return arguments.length?(Ra=jc(T),eb):Ra},fontWeight:function(T){return arguments.length?(Va=jc(T),eb):Va},rotate:function(T){return arguments.length?(Ga=jc(T),eb):Ga},text:function(T){return arguments.length?(ra=jc(T),eb):ra},spiral:function(T){return arguments.length?
(bb=wb[T]||T,eb):bb},fontSize:function(T){return arguments.length?(xa=jc(T),eb):xa},padding:function(T){return arguments.length?(hb=jc(T),eb):hb},random:function(T){return arguments.length?(Pb=T,eb):Pb}};return eb}function Xb(xb,ib,ec,ra){if(!ib.sprite){var fa=xb.context,xa=xb.ratio;fa.clearRect(0,0,2048/xa,2048/xa);var Ra=xb=0,Va=0,Ga=ec.length;for(--ra;++ra<Ga;){ib=ec[ra];fa.save();fa.font=ib.style+" "+ib.weight+" "+~~((ib.size+1)/xa)+"px "+ib.font;var hb=fa.measureText(ib.text+"m").width*xa;var bb=
ib.size<<1;if(ib.rotate){var tb=Math.sin(ib.rotate*Za),Pb=Math.cos(ib.rotate*Za),eb=hb*Pb,T=hb*tb;Pb*=bb;hb=bb*tb;hb=Math.max(Math.abs(eb+hb),Math.abs(eb-hb))+31>>5<<5;bb=~~Math.max(Math.abs(T+Pb),Math.abs(T-Pb))}else hb=hb+31>>5<<5;bb>Va&&(Va=bb);2048<=xb+hb&&(xb=0,Ra+=Va,Va=0);if(2048<=Ra+bb)break;fa.translate((xb+(hb>>1))/xa,(Ra+(bb>>1))/xa);ib.rotate&&fa.rotate(ib.rotate*Za);fa.fillText(ib.text,0,0);ib.padding&&(fa.lineWidth=2*ib.padding,fa.strokeText(ib.text,0,0));fa.restore();ib.width=hb;ib.height=
bb;ib.xoff=xb;ib.yoff=Ra;ib.x1=hb>>1;ib.y1=bb>>1;ib.x0=-ib.x1;ib.y0=-ib.y1;ib.hasText=!0;xb+=hb}Ga=fa.getImageData(0,0,2048/xa,2048/xa).data;for(eb=[];0<=--ra;)if(ib=ec[ra],ib.hasText){hb=ib.width;fa=hb>>5;bb=ib.y1-ib.y0;for(xa=0;xa<bb*fa;xa++)eb[xa]=0;xb=ib.xoff;if(null==xb)break;Ra=ib.yoff;T=0;tb=-1;for(Va=0;Va<bb;Va++){for(xa=0;xa<hb;xa++)Pb=Ga[2048*(Ra+Va)+(xb+xa)<<2]?1<<31-xa%32:0,eb[fa*Va+(xa>>5)]|=Pb,T|=Pb;T?tb=Va:(ib.y0++,bb--,Va--,Ra++)}ib.y1=ib.y0+tb;ib.sprite=eb.slice(0,(ib.y1-ib.y0)*fa)}}}
function mc(xb,ib){var ec=xb[0];xb=xb[1];ib.x+ib.x0<ec.x&&(ec.x=ib.x+ib.x0);ib.y+ib.y0<ec.y&&(ec.y=ib.y+ib.y0);ib.x+ib.x1>xb.x&&(xb.x=ib.x+ib.x1);ib.y+ib.y1>xb.y&&(xb.y=ib.y+ib.y1)}function Cb(xb){var ib=xb[0]/xb[1];return function(ec){return[ib*(ec*=.1)*Math.cos(ec),ec*Math.sin(ec)]}}function Ub(xb){for(var ib=[],ec=-1;++ec<xb;)ib[ec]=0;return ib}function jc(xb){return"function"===typeof xb?xb:function(){return xb}}function Ba(xb){ia.Transform.call(this,ac(),xb)}var Za=Math.PI/180,wb={archimedean:Cb,
rectangular:function(xb){var ib=4*xb[0]/xb[1],ec=0,ra=0;return function(fa){var xa=0>fa?-1:1;switch(Math.sqrt(1+4*xa*fa)-xa&3){case 0:ec+=ib;break;case 1:ra+=4;break;case 2:ec-=ib;break;default:ra-=4}return[ec,ra]}}};const ub="x y font fontSize fontStyle fontWeight angle".split(" "),sb="text font rotate fontSize fontStyle fontWeight".split(" ");Ba.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,"default":"sans-serif"},
{name:"fontStyle",type:"string",expr:!0,"default":"normal"},{name:"fontWeight",type:"string",expr:!0,"default":"normal"},{name:"fontSize",type:"number",expr:!0,"default":14},{name:"fontSizeRange",type:"number",array:"nullable","default":[10,50]},{name:"rotate",type:"number",expr:!0,"default":0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,"default":ub}]};ab.inherits(Ba,
ia.Transform,{transform(xb,ib){function ec(hb){hb=xb[hb];return ab.isFunction(hb)&&ib.modified(hb.fields)}!xb.size||xb.size[0]&&xb.size[1]||ab.error("Wordcloud size dimensions must be non-zero.");const ra=xb.modified();if(ra||ib.changed(ib.ADD_REM)||sb.some(ec)){var fa=ib.materialize(ib.SOURCE).source,xa=this.value,Ra=xb.as||ub,Va=xb.fontSize||14,Ga;ab.isFunction(Va)?Ga=xb.fontSizeRange:Va=ab.constant(Va);if(Ga){const hb=Va,bb=zb.scale("sqrt")().domain(ab.extent(fa,hb)).range(Ga);Va=tb=>bb(hb(tb))}fa.forEach(hb=>
{hb[Ra[0]]=NaN;hb[Ra[1]]=NaN;hb[Ra[3]]=0});fa=xa.words(fa).text(xb.text).size(xb.size||[500,500]).padding(xb.padding||1).spiral(xb.spiral||"archimedean").rotate(xb.rotate||0).font(xb.font||"sans-serif").fontStyle(xb.fontStyle||"normal").fontWeight(xb.fontWeight||"normal").fontSize(Va).random(Yb.random).layout();Va=xa.size();xa=Va[0]>>1;Va=Va[1]>>1;Ga=fa.length;for(let hb=0,bb,tb;hb<Ga;++hb)bb=fa[hb],tb=bb.datum,tb[Ra[0]]=bb.x+xa,tb[Ra[1]]=bb.y+Va,tb[Ra[2]]=bb.font,tb[Ra[3]]=bb.size,tb[Ra[4]]=bb.style,
tb[Ra[5]]=bb.weight,tb[Ra[6]]=bb.rotate;return ib.reflow(ra).modifies(Ra)}}});u.wordcloud=Ba})};
shadow$provide[45]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(29),ob(21)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-util"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h((u.vega=u.vega||{},u.vega.transforms={}),u.vega,u.vega))})(this,function(u,h,ia){function ab(){let fa=8,xa=[],Ra=new Uint32Array(0),Va=zb(0,fa),Ga=zb(0,fa);return{data:()=>xa,seen:()=>{var hb=Ra;var bb=xa.length;hb.length>=bb||(bb=new hb.constructor(bb),
bb.set(hb),hb=bb);return Ra=hb},add(hb){for(let bb=0,tb=xa.length,Pb=hb.length,eb;bb<Pb;++bb)eb=hb[bb],eb._index=tb++,xa.push(eb)},remove(hb,bb){const tb=xa.length;hb=Array(tb-hb);const Pb=xa;let eb,T,Z;for(T=0;!bb[T]&&T<tb;++T)hb[T]=xa[T],Pb[T]=T;for(Z=T;T<tb;++T)eb=xa[T],bb[T]?Pb[T]=-1:(Pb[T]=Z,Va[Z]=Va[T],Ga[Z]=Ga[T],hb[Z]=eb,eb._index=Z++),Va[T]=0;xa=hb;return Pb},size:()=>xa.length,curr:()=>Va,prev:()=>Ga,reset:hb=>Ga[hb]=Va[hb],all:()=>257>fa?255:65537>fa?65535:4294967295,set(hb,bb){Va[hb]|=
bb},clear(hb,bb){Va[hb]&=~bb},resize(hb,bb){if(hb>Va.length||bb>fa)fa=Math.max(bb,fa),Va=zb(hb,fa,Va),Ga=zb(hb,fa)}}}function zb(fa,xa,Ra){fa=(257>xa?ub:65537>xa?sb:xb)(fa);Ra&&fa.set(Ra);return fa}function Yb(fa,xa,Ra){const Va=1<<xa;return{one:Va,zero:~Va,range:Ra.slice(),bisect:fa.bisect,index:fa.index,size:fa.size,onAdd(Ga,hb){var bb=this.bisect(this.range,Ga.value);Ga=Ga.index;const tb=bb[0];bb=bb[1];const Pb=Ga.length;let eb;for(eb=0;eb<tb;++eb)hb[Ga[eb]]|=Va;for(eb=bb;eb<Pb;++eb)hb[Ga[eb]]|=
Va;return this}}}function ac(fa,xa){return null==fa||null==xa?NaN:fa<xa?-1:fa>xa?1:fa>=xa?0:NaN}function Xb(fa,xa){return null==fa||null==xa?NaN:xa<fa?-1:xa>fa?1:xa>=fa?0:NaN}function mc(fa){function xa(hb,bb,tb=0,Pb=hb.length){if(tb<Pb){if(0!==Ra(bb,bb))return Pb;do{const eb=tb+Pb>>>1;0>Va(hb[eb],bb)?tb=eb+1:Pb=eb}while(tb<Pb)}return tb}let Ra,Va,Ga;2!==fa.length?(Ra=ac,Va=(hb,bb)=>ac(fa(hb),bb),Ga=(hb,bb)=>fa(hb)-bb):(Ra=fa===ac||fa===Xb?fa:Cb,Ga=Va=fa);return{left:xa,center:function(hb,bb,tb=0,
Pb=hb.length){Pb=xa(hb,bb,tb,Pb-1);return Pb>tb&&Ga(hb[Pb-1],bb)>-Ga(hb[Pb],bb)?Pb-1:Pb},right:function(hb,bb,tb=0,Pb=hb.length){if(tb<Pb){if(0!==Ra(bb,bb))return Pb;do{const eb=tb+Pb>>>1;0>=Va(hb[eb],bb)?tb=eb+1:Pb=eb}while(tb<Pb)}return tb}}}function Cb(){return 0}function Ub(fa,xa){return Array.from(xa,Ra=>fa[Ra])}function jc(){let fa=new Uint32Array(0),xa=[],Ra=0;return{insert:function(Va,Ga,hb){if(!Ga.length)return[];const bb=Ra,tb=Ga.length,Pb=new Uint32Array(tb);let eb=Array(tb);var T;for(T=
0;T<tb;++T)eb[T]=Va(Ga[T]),Pb[T]=T;eb=Ba(eb,Pb);if(bb){Va=xa;Ga=fa;xa=Array(bb+tb);fa=new Uint32Array(bb+tb);T=eb;var Z=xa,ca=fa;let ha=0,La=0,na;for(na=0;ha<bb&&La<tb;++na)Va[ha]<T[La]?(Z[na]=Va[ha],ca[na]=Ga[ha++]):(Z[na]=T[La],ca[na]=Pb[La++]+hb);for(;ha<bb;++ha,++na)Z[na]=Va[ha],ca[na]=Ga[ha];for(;La<tb;++La,++na)Z[na]=T[La],ca[na]=Pb[La]+hb}else{if(0<hb)for(T=0;T<tb;++T)Pb[T]+=hb;xa=eb;fa=Pb}Ra=bb+tb;return{index:Pb,value:eb}},remove:function(Va,Ga){const hb=Ra;let bb,tb,Pb;for(tb=0;!Ga[fa[tb]]&&
tb<hb;++tb);for(Pb=tb;tb<hb;++tb)Ga[bb=fa[tb]]||(fa[Pb]=bb,xa[Pb]=xa[tb],++Pb);Ra=hb-Va},bisect:function(Va,Ga){let hb;Ga?hb=Ga.length:(Ga=xa,hb=Ra);return[ra(Ga,Va[0],0,hb),ec(Ga,Va[1],0,hb)]},reindex:function(Va){for(let Ga=0,hb=Ra;Ga<hb;++Ga)fa[Ga]=Va[fa[Ga]]},index:()=>fa,size:()=>Ra}}function Ba(fa,xa){fa.sort.call(xa,(Ra,Va)=>{Ra=fa[Ra];Va=fa[Va];return Ra<Va?-1:Ra>Va?1:0});return Ub(fa,xa)}function Za(fa){h.Transform.call(this,ab(),fa);this._dims=this._indices=null}function wb(fa){h.Transform.call(this,
null,fa)}const ub=fa=>new Uint8Array(fa),sb=fa=>new Uint16Array(fa),xb=fa=>new Uint32Array(fa),ib=mc(ac),ec=ib.right,ra=ib.left;mc(function(fa){return null===fa?NaN:+fa}).center;Za.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ia.inherits(Za,h.Transform,{transform(fa,xa){return this._dims?fa.modified("fields")||fa.fields.some(Ra=>xa.modified(Ra.fields))?
this.reinit(fa,xa):this.eval(fa,xa):this.init(fa,xa)},init(fa,xa){const Ra=fa.fields,Va=fa.query,Ga=this._indices={},hb=this._dims=[],bb=Va.length;let tb=0;for(var Pb;tb<bb;++tb)Pb=Ra[tb].fname,Pb=Ga[Pb]||(Ga[Pb]=jc()),hb.push(Yb(Pb,tb,Va[tb]));return this.eval(fa,xa)},reinit(fa,xa){const Ra=xa.materialize().fork(),Va=fa.fields,Ga=fa.query,hb=this._indices,bb=this._dims,tb=this.value,Pb=tb.curr(),eb=tb.prev(),T=tb.all(),Z=Ra.rem=Ra.add,ca=Ra.mod,ha=Ga.length,La={};let na;var pa;let m,E,L,w;eb.set(Pb);
xa.rem.length&&(m=this.remove(fa,xa,Ra));xa.add.length&&tb.add(xa.add);if(xa.mod.length){E={};var Q=xa.mod;L=0;for(pa=Q.length;L<pa;++L)E[Q[L]._index]=1}for(L=0;L<ha;++L)if(w=Va[L],!bb[L]||fa.modified("fields",L)||xa.modified(w.fields))pa=w.fname,(Q=La[pa])||(hb[pa]=na=jc(),La[pa]=Q=na.insert(w,xa.source,0)),bb[L]=Yb(na,L,Ga[L]).onAdd(Q,Pb);L=0;for(pa=tb.data().length;L<pa;++L)m[L]||(eb[L]!==Pb[L]?Z.push(L):E[L]&&Pb[L]!==T&&ca.push(L));tb.mask=(1<<ha)-1;return Ra},eval(fa,xa){const Ra=xa.materialize().fork(),
Va=this._dims.length;let Ga=0;xa.rem.length&&(this.remove(fa,xa,Ra),Ga|=(1<<Va)-1);fa.modified("query")&&!fa.modified("fields")&&(Ga|=this.update(fa,xa,Ra));xa.add.length&&(this.insert(fa,xa,Ra),Ga|=(1<<Va)-1);xa.mod.length&&(this.modify(xa,Ra),Ga|=(1<<Va)-1);this.value.mask=Ga;return Ra},insert(fa,xa,Ra){xa=xa.add;var Va=this.value;const Ga=this._dims,hb=this._indices;fa=fa.fields;const bb={};Ra=Ra.add;const tb=Va.size()+xa.length,Pb=Ga.length;let eb=Va.size();Va.resize(tb,Pb);Va.add(xa);const T=
Va.curr(),Z=Va.prev(),ca=Va.all();for(Va=0;Va<Pb;++Va){var ha=fa[Va].fname;ha=bb[ha]||(bb[ha]=hb[ha].insert(fa[Va],xa,eb));Ga[Va].onAdd(ha,T)}for(;eb<tb;++eb)Z[eb]=ca,T[eb]!==ca&&Ra.push(eb)},modify(fa,xa){xa=xa.mod;var Ra=this.value;const Va=Ra.curr();Ra=Ra.all();fa=fa.mod;let Ga,hb,bb;Ga=0;for(hb=fa.length;Ga<hb;++Ga)bb=fa[Ga]._index,Va[bb]!==Ra&&xa.push(bb)},remove(fa,xa,Ra){fa=this._indices;var Va=this.value;const Ga=Va.curr(),hb=Va.prev();Va=Va.all();const bb={};Ra=Ra.rem;const tb=xa.rem;let Pb,
eb,T,Z;Pb=0;for(eb=tb.length;Pb<eb;++Pb)T=tb[Pb]._index,bb[T]=1,hb[T]=Z=Ga[T],Ga[T]=Va,Z!==Va&&Ra.push(T);for(T in fa)fa[T].remove(eb,bb);this.reindex(xa,eb,bb);return bb},reindex(fa,xa,Ra){const Va=this._indices,Ga=this.value;fa.runAfter(()=>{const hb=Ga.remove(xa,Ra);for(const bb in Va)Va[bb].reindex(hb)})},update(fa,xa,Ra){const Va=this._dims,Ga=fa.query;xa=xa.stamp;const hb=Va.length;let bb=0,tb,Pb;for(Pb=Ra.filters=0;Pb<hb;++Pb)fa.modified("query",Pb)&&(tb=Pb,++bb);if(1===bb)bb=Va[tb].one,this.incrementOne(Va[tb],
Ga[tb],Ra.add,Ra.rem);else for(bb=Pb=0;Pb<hb;++Pb)fa.modified("query",Pb)&&(bb|=Va[Pb].one,this.incrementAll(Va[Pb],Ga[Pb],xa,Ra.add),Ra.rem=Ra.add);return bb},incrementAll(fa,xa,Ra,Va){var Ga=this.value;const hb=Ga.seen(),bb=Ga.curr();Ga=Ga.prev();const tb=fa.index();var Pb=fa.bisect(fa.range),eb=fa.bisect(xa);const T=eb[0];eb=eb[1];const Z=Pb[0];Pb=Pb[1];const ca=fa.one;let ha,La,na;if(T<Z)for(ha=T,La=Math.min(Z,eb);ha<La;++ha)na=tb[ha],hb[na]!==Ra&&(Ga[na]=bb[na],hb[na]=Ra,Va.push(na)),bb[na]^=
ca;else if(T>Z)for(ha=Z,La=Math.min(T,Pb);ha<La;++ha)na=tb[ha],hb[na]!==Ra&&(Ga[na]=bb[na],hb[na]=Ra,Va.push(na)),bb[na]^=ca;if(eb>Pb)for(ha=Math.max(T,Pb),La=eb;ha<La;++ha)na=tb[ha],hb[na]!==Ra&&(Ga[na]=bb[na],hb[na]=Ra,Va.push(na)),bb[na]^=ca;else if(eb<Pb)for(ha=Math.max(Z,eb),La=Pb;ha<La;++ha)na=tb[ha],hb[na]!==Ra&&(Ga[na]=bb[na],hb[na]=Ra,Va.push(na)),bb[na]^=ca;fa.range=xa.slice()},incrementOne(fa,xa,Ra,Va){const Ga=this.value.curr(),hb=fa.index();var bb=fa.bisect(fa.range),tb=fa.bisect(xa);
const Pb=tb[0];tb=tb[1];const eb=bb[0];bb=bb[1];const T=fa.one;let Z,ca,ha;if(Pb<eb)for(Z=Pb,ca=Math.min(eb,tb);Z<ca;++Z)ha=hb[Z],Ga[ha]^=T,Ra.push(ha);else if(Pb>eb)for(Z=eb,ca=Math.min(Pb,bb);Z<ca;++Z)ha=hb[Z],Ga[ha]^=T,Va.push(ha);if(tb>bb)for(Z=Math.max(Pb,bb),ca=tb;Z<ca;++Z)ha=hb[Z],Ga[ha]^=T,Ra.push(ha);else if(tb<bb)for(Z=Math.max(eb,tb),ca=bb;Z<ca;++Z)ha=hb[Z],Ga[ha]^=T,Va.push(ha);fa.range=xa.slice()}});wb.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",
required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ia.inherits(wb,h.Transform,{transform(fa,xa){const Ra=~(fa.ignore||0);fa=fa.filter;const Va=fa.mask;if(0===(Va&Ra))return xa.StopPropagation;xa=xa.fork(xa.ALL);const Ga=fa.data(),hb=fa.curr(),bb=fa.prev(),tb=Pb=>hb[Pb]&Ra?null:Ga[Pb];xa.filter(xa.MOD,tb);Va&Va-1?(xa.filter(xa.ADD,Pb=>{const eb=hb[Pb]&Ra;return!eb&&
eb^bb[Pb]&Ra?Ga[Pb]:null}),xa.filter(xa.REM,Pb=>{const eb=hb[Pb]&Ra;return!eb||eb^eb^bb[Pb]&Ra?null:Ga[Pb]})):(xa.filter(xa.ADD,tb),xa.filter(xa.REM,Pb=>(hb[Pb]&Ra)===Va?Ga[Pb]:null));return xa.filter(xa.SOURCE,Pb=>tb(Pb._index))}});u.crossfilter=Za;u.resolvefilter=wb})};
shadow$provide[46]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(21)):"function"===typeof define&&define.amd?define(["exports","vega-util"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega))})(this,function(u,h){function ia(z){this.type=z}function ab(z){switch(z.type){case "ArrayExpression":return z.elements;case "BinaryExpression":case "LogicalExpression":return[z.left,z.right];case "CallExpression":return[z.callee].concat(z.arguments);
case "ConditionalExpression":return[z.test,z.consequent,z.alternate];case "MemberExpression":return[z.object,z.property];case "ObjectExpression":return z.properties;case "Property":return[z.key,z.value];case "UnaryExpression":return[z.argument];default:return[]}}function zb(z,C){if(!z)throw Error("ASSERT: "+C);}function Yb(z){return 48<=z&&57>=z}function ac(z){return"0123456789abcdefABCDEF".includes(z)}function Xb(z){return"01234567".includes(z)}function mc(z){return 10===z||13===z||8232===z||8233===
z}function Cb(z){return 36===z||95===z||65<=z&&90>=z||97<=z&&122>=z||92===z||128<=z&&w.test(String.fromCharCode(z))}function Ub(z){return 36===z||95===z||65<=z&&90>=z||97<=z&&122>=z||48<=z&&57>=z||92===z||128<=z&&Q.test(String.fromCharCode(z))}function jc(){for(;m<E;){const z=pa.charCodeAt(m);if(32===z||9===z||11===z||12===z||160===z||5760<=z&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(z)||mc(z))++m;else break}}function Ba(z){var C=0;var H="u"===
z?4:2;for(z=0;z<H;++z)if(m<E&&ac(pa[m])){var V=pa[m++];C=16*C+"0123456789abcdef".indexOf(V.toLowerCase())}else Ga({},"Unexpected token %0","ILLEGAL");return String.fromCharCode(C)}function Za(){var z=pa.charCodeAt(m++);var C=String.fromCharCode(z);92===z&&(117!==pa.charCodeAt(m)&&Ga({},"Unexpected token %0","ILLEGAL"),++m,(z=Ba("u"))&&"\\"!==z&&Cb(z.charCodeAt(0))||Ga({},"Unexpected token %0","ILLEGAL"),C=z);for(;m<E;){z=pa.charCodeAt(m);if(!Ub(z))break;++m;C+=String.fromCharCode(z);92===z&&(C=C.substr(0,
C.length-1),117!==pa.charCodeAt(m)&&Ga({},"Unexpected token %0","ILLEGAL"),++m,(z=Ba("u"))&&"\\"!==z&&Ub(z.charCodeAt(0))||Ga({},"Unexpected token %0","ILLEGAL"),C+=z)}return C}function wb(){var z=m,C=pa.charCodeAt(m),H=pa[m];switch(C){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++m,{type:7,value:String.fromCharCode(C),start:z,end:m};default:var V=pa.charCodeAt(m+1);if(61===V)switch(C){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return m+=
2,{type:7,value:String.fromCharCode(C)+String.fromCharCode(V),start:z,end:m};case 33:case 61:return m+=2,61===pa.charCodeAt(m)&&++m,{type:7,value:pa.slice(z,m),start:z,end:m}}}C=pa.substr(m,4);if("\x3e\x3e\x3e\x3d"===C)return m+=4,{type:7,value:C,start:z,end:m};C=C.substr(0,3);if("\x3e\x3e\x3e"===C||"\x3c\x3c\x3d"===C||"\x3e\x3e\x3d"===C)return m+=3,{type:7,value:C,start:z,end:m};C=C.substr(0,2);if(H===C[1]&&"+-\x3c\x3e\x26|".includes(H)||"\x3d\x3e"===C)return m+=2,{type:7,value:C,start:z,end:m};
"//"===C&&Ga({},"Unexpected token %0","ILLEGAL");if("\x3c\x3e\x3d!+-*%\x26|^/".includes(H))return++m,{type:7,value:H,start:z,end:m};Ga({},"Unexpected token %0","ILLEGAL")}function ub(){var z=pa[m];zb(Yb(z.charCodeAt(0))||"."===z,"Numeric literal must start with a decimal digit or a decimal point");var C=m;var H="";if("."!==z){H=pa[m++];z=pa[m];if("0"===H){if("x"===z||"X"===z){++m;for(H="";m<E&&ac(pa[m]);)H+=pa[m++];0===H.length&&Ga({},"Unexpected token %0","ILLEGAL");Cb(pa.charCodeAt(m))&&Ga({},"Unexpected token %0",
"ILLEGAL");return{type:6,value:parseInt("0x"+H,16),start:C,end:m}}if(Xb(z)){for(H="0"+pa[m++];m<E&&Xb(pa[m]);)H+=pa[m++];(Cb(pa.charCodeAt(m))||Yb(pa.charCodeAt(m)))&&Ga({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseInt(H,8),octal:!0,start:C,end:m}}z&&Yb(z.charCodeAt(0))&&Ga({},"Unexpected token %0","ILLEGAL")}for(;Yb(pa.charCodeAt(m));)H+=pa[m++];z=pa[m]}if("."===z){for(H+=pa[m++];Yb(pa.charCodeAt(m));)H+=pa[m++];z=pa[m]}if("e"===z||"E"===z){H+=pa[m++];z=pa[m];if("+"===z||"-"===z)H+=
pa[m++];if(Yb(pa.charCodeAt(m)))for(;Yb(pa.charCodeAt(m));)H+=pa[m++];else Ga({},"Unexpected token %0","ILLEGAL")}Cb(pa.charCodeAt(m))&&Ga({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseFloat(H),start:C,end:m}}function sb(z,C){let H=z;C.includes("u")&&(H=H.replace(/\\u\{([0-9a-fA-F]+)\}/g,(V,Aa)=>{if(1114111>=parseInt(Aa,16))return"x";Ga({},"Invalid regular expression")}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(H)}catch(V){Ga({},"Invalid regular expression")}try{return new RegExp(z,
C)}catch(V){return null}}function xb(){jc();if(m>=E)return{type:2,start:m,end:m};var z=pa.charCodeAt(m);if(Cb(z)){z=m;if(92===pa.charCodeAt(m))var C=Za();else a:{for(C=m++;m<E;){var H=pa.charCodeAt(m);if(92===H){m=C;C=Za();break a}if(Ub(H))++m;else break}C=pa.slice(C,m)}return{type:1===C.length?3:A.hasOwnProperty(C)?4:"null"===C?5:"true"===C||"false"===C?1:3,value:C,start:z,end:m}}if(40===z||41===z||59===z)return wb();if(39===z||34===z){var V="";H=!1;z=pa[m];zb("'"===z||'"'===z,"String literal must starts with a quote");
C=m;for(++m;m<E;){var Aa=pa[m++];if(Aa===z){z="";break}else if("\\"===Aa)if((Aa=pa[m++])&&mc(Aa.charCodeAt(0)))"\r"===Aa&&"\n"===pa[m]&&++m;else switch(Aa){case "u":case "x":if("{"===pa[m]){++m;var O=pa[m];Aa=0;for("}"===O&&Ga({},"Unexpected token %0","ILLEGAL");m<E;){O=pa[m++];if(!ac(O))break;Aa=16*Aa+"0123456789abcdef".indexOf(O.toLowerCase())}(1114111<Aa||"}"!==O)&&Ga({},"Unexpected token %0","ILLEGAL");Aa=65535>=Aa?String.fromCharCode(Aa):String.fromCharCode((Aa-65536>>10)+55296,(Aa-65536&1023)+
56320);V+=Aa}else V+=Ba(Aa);break;case "n":V+="\n";break;case "r":V+="\r";break;case "t":V+="\t";break;case "b":V+="\b";break;case "f":V+="\f";break;case "v":V+="\v";break;default:Xb(Aa)?(O="01234567".indexOf(Aa),0!==O&&(H=!0),m<E&&Xb(pa[m])&&(H=!0,O=8*O+"01234567".indexOf(pa[m++]),"0123".includes(Aa)&&m<E&&Xb(pa[m])&&(O=8*O+"01234567".indexOf(pa[m++]))),V+=String.fromCharCode(O)):V+=Aa}else if(mc(Aa.charCodeAt(0)))break;else V+=Aa}""!==z&&Ga({},"Unexpected token %0","ILLEGAL");return{type:8,value:V,
octal:H,start:C,end:m}}return 46===z?Yb(pa.charCodeAt(m+1))?ub():wb():Yb(z)?ub():wb()}function ib(){const z=L;m=z.end;L=xb();m=z.end;return z}function ec(){const z=m;L=xb();m=z}function ra(z,C,H){const V=new ia("||"===z||"\x26\x26"===z?"LogicalExpression":"BinaryExpression");V.operator=z;V.left=C;V.right=H;return V}function fa(z){const C=new ia("Identifier");C.name=z;return C}function xa(z){const C=new ia("Literal");C.value=z.value;C.raw=pa.slice(z.start,z.end);z.regex&&("//"===C.raw&&(C.raw="/(?:)/"),
C.regex=z.regex);return C}function Ra(z,C,H){const V=new ia("MemberExpression");V.computed="["===z;V.object=C;V.property=H;V.computed||(H.member=!0);return V}function Va(z,C,H){const V=new ia("Property");V.key=C;V.value=H;V.kind=z;return V}function Ga(z,C){var H=Array.prototype.slice.call(arguments,2),V=C.replace(/%(\d)/g,(O,la)=>{zb(la<H.length,"Message reference must be in range");return H[la]});var Aa=Error(V);Aa.index=m;Aa.description=V;throw Aa;}function hb(z){2===z.type&&Ga(z,"Unexpected end of input");
6===z.type&&Ga(z,"Unexpected number");8===z.type&&Ga(z,"Unexpected string");3===z.type&&Ga(z,"Unexpected identifier");4===z.type&&Ga(z,"Unexpected reserved word");Ga(z,"Unexpected token %0",z.value)}function bb(z){const C=ib();7===C.type&&C.value===z||hb(C)}function tb(z){return 7===L.type&&L.value===z}function Pb(){m=L.start;const z=ib();return 8===z.type||6===z.type?(z.octal&&Ga(z,"Octal literals are not allowed in strict mode."),xa(z)):fa(z.value)}function eb(){if(tb("(")){bb("(");var z=La();bb(")");
return z}if(tb("[")){z=[];m=L.start;for(bb("[");!tb("]");)tb(",")?(ib(),z.push(null)):(z.push(ha()),tb("]")||bb(","));ib();var C=new ia("ArrayExpression");C.elements=z;return C}if(tb("{")){z=[];C={};var H=String;m=L.start;for(bb("{");!tb("}");){m=L.start;var V=L;if(3===V.type){var Aa=Pb();bb(":");V=ha();V=Va("init",Aa,V)}else 2===V.type||7===V.type?(hb(V),V=void 0):(Aa=Pb(),bb(":"),V=ha(),V=Va("init",Aa,V));Aa="Identifier"===V.key.type?V.key.name:H(V.key.value);Aa="$"+Aa;Object.prototype.hasOwnProperty.call(C,
Aa)?Ga({},"Duplicate data property in object literal not allowed in strict mode"):C[Aa]=!0;z.push(V);tb("}")||bb(",")}bb("}");C=new ia("ObjectExpression");C.properties=z;return C}z=L.type;m=L.start;if(3===z||y[L.value])C=fa(ib().value);else if(8===z||6===z)L.octal&&Ga(L,"Octal literals are not allowed in strict mode."),C=xa(ib());else{if(4===z)throw Error("Disabled.");if(1===z)z=ib(),z.value="true"===z.value,C=xa(z);else if(5===z)z=ib(),z.value=null,C=xa(z);else if(tb("/")||tb("/\x3d")){var O;L=null;
jc();z=m;C=pa[m];zb("/"===C,"Regular expression literal must start with a slash");H=pa[m++];for(Aa=V=!1;m<E;)if(C=pa[m++],H+=C,"\\"===C)C=pa[m++],mc(C.charCodeAt(0))&&Ga({},"Invalid regular expression: missing /"),H+=C;else if(mc(C.charCodeAt(0)))Ga({},"Invalid regular expression: missing /");else if(V)"]"===C&&(V=!1);else if("/"===C){Aa=!0;break}else"["===C&&(V=!0);Aa||Ga({},"Invalid regular expression: missing /");C=H.substr(1,H.length-2);for(O=Aa="";m<E;){V=pa[m];if(!Ub(V.charCodeAt(0)))break;
++m;"\\"===V&&m<E?Ga({},"Unexpected token %0","ILLEGAL"):(O+=V,Aa+=V)}0<=O.search(/[^gimuy]/g)&&Ga({},"Invalid regular expression",O);V=O;O=sb(C,V);C=xa({literal:H+Aa,value:O,regex:{pattern:C,flags:V},start:z,end:m});ec()}else hb(ib())}return C}function T(){var z;for(z=eb();;)if(tb(".")){bb(".");m=L.start;var C=ib();3===C.type||4===C.type||1===C.type||5===C.type||hb(C);C=fa(C.value);z=Ra(".",z,C)}else if(tb("(")){C=[];bb("(");if(!tb(")"))for(;m<E;){C.push(ha());if(tb(")"))break;bb(",")}bb(")");const H=
new ia("CallExpression");H.callee=z;H.arguments=C;z=H}else if(tb("["))bb("["),C=La(),bb("]"),z=Ra("[",z,C);else break;if(7===L.type&&(tb("++")||tb("--")))throw Error("Disabled.");return z}function Z(){if(7!==L.type&&4!==L.type)var z=T();else{if(tb("++")||tb("--"))throw Error("Disabled.");if(tb("+")||tb("-")||tb("~")||tb("!")){var C=ib();z=Z();C=C.value;const H=new ia("UnaryExpression");H.operator=C;H.argument=z;H.prefix=!0;z=H}else{if(4===L.type&&"delete"===L.value||4===L.type&&"void"===L.value||
4===L.type&&"typeof"===L.value)throw Error("Disabled.");z=T()}}return z}function ca(z){let C=0;if(7!==z.type&&4!==z.type)return 0;switch(z.value){case "||":C=1;break;case "\x26\x26":C=2;break;case "|":C=3;break;case "^":C=4;break;case "\x26":C=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":C=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":case "in":C=7;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":C=8;break;case "+":case "-":C=
9;break;case "*":case "/":case "%":C=11}return C}function ha(){var z=L;var C=Z();var H=L;var V=ca(H);if(0===V)var Aa=C;else{H.prec=V;ib();z=[z,L];var O=Z();for(Aa=[C,H,O];0<(V=ca(L));){for(;2<Aa.length&&V<=Aa[Aa.length-2].prec;)O=Aa.pop(),H=Aa.pop().value,C=Aa.pop(),z.pop(),C=ra(H,C,O),Aa.push(C);H=ib();H.prec=V;Aa.push(H);z.push(L);C=Z();Aa.push(C)}V=Aa.length-1;C=Aa[V];for(z.pop();1<V;)z.pop(),C=ra(Aa[V-1].value,Aa[V-2],C),V-=2;Aa=C}tb("?")&&(ib(),z=ha(),bb(":"),V=ha(),C=new ia("ConditionalExpression"),
C.test=Aa,C.consequent=z,C.alternate=V,Aa=C);return Aa}function La(){const z=ha();if(tb(","))throw Error("Disabled.");return z}function na(z){function C(H,V,Aa){return O=>{let la=z(O[0]);V&&(la=V+"("+la+")",0===V.lastIndexOf("new ",0)&&(la="("+la+")"));return la+"."+H+(0>Aa?"":0===Aa?"()":"("+O.slice(1).map(z).join(",")+")")}}return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",
floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(H){3>H.length&&h.error("Missing arguments to clamp function.");3<H.length&&h.error("Too many arguments to clamp function.");H=H.map(z);return"Math.max("+H[1]+", Math.min("+H[2]+","+H[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:"new Date",date:C("getDate","new Date",0),day:C("getDay","new Date",0),
year:C("getFullYear","new Date",0),month:C("getMonth","new Date",0),hours:C("getHours","new Date",0),minutes:C("getMinutes","new Date",0),seconds:C("getSeconds","new Date",0),milliseconds:C("getMilliseconds","new Date",0),time:C("getTime","new Date",0),timezoneoffset:C("getTimezoneOffset","new Date",0),utcdate:C("getUTCDate","new Date",0),utcday:C("getUTCDay","new Date",0),utcyear:C("getUTCFullYear","new Date",0),utcmonth:C("getUTCMonth","new Date",0),utchours:C("getUTCHours","new Date",0),utcminutes:C("getUTCMinutes",
"new Date",0),utcseconds:C("getUTCSeconds","new Date",0),utcmilliseconds:C("getUTCMilliseconds","new Date",0),length:C("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:C("toUpperCase","String",0),lower:C("toLowerCase","String",0),substring:C("substring","String"),split:C("split","String"),trim:C("trim","String",0),btoa:"btoa",atob:"atob",regexp:"RegExp",test:C("test","RegExp"),if:function(H){3>H.length&&h.error("Missing arguments to if function.");3<H.length&&h.error("Too many arguments to if function.");
H=H.map(z);return"("+H[0]+"?"+H[1]+":"+H[2]+")"}}}ia.prototype.visit=function(z){let C,H,V;if(z(this))return 1;C=ab(this);H=0;for(V=C.length;H<V;++H)if(C[H].visit(z))return 1};var pa,m,E,L,w=RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),
Q=RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");
const A={"if":1,"in":1,"do":1,"var":1,"for":1,"new":1,"try":1,let:1,"this":1,"else":1,"case":1,"void":1,"with":1,"enum":1,"while":1,"break":1,"catch":1,"throw":1,"const":1,yield:1,"class":1,"super":1,"return":1,"typeof":1,"delete":1,"switch":1,"export":1,"import":1,"public":1,"static":1,"default":1,"finally":1,"extends":1,"package":1,"private":1,"function":1,"continue":1,"debugger":1,"interface":1,"protected":1,"instanceof":1,"implements":1},y={"if":1};var N={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",
LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};u.ASTNode=ia;u.ArrayExpression="ArrayExpression";u.BinaryExpression="BinaryExpression";u.CallExpression="CallExpression";u.ConditionalExpression="ConditionalExpression";u.Identifier="Identifier";u.Literal="Literal";u.LogicalExpression="LogicalExpression";u.MemberExpression="MemberExpression";u.ObjectExpression="ObjectExpression";u.Property="Property";
u.RawCode="RawCode";u.UnaryExpression="UnaryExpression";u.codegenExpression=function(z){function C(W){if(h.isString(W))return W;const Ea=Tb[W.type];null==Ea&&h.error("Unsupported type: "+W.type);return Ea(W)}function H(W){W={code:C(W),globals:Object.keys(Ya),fields:Object.keys(vb)};Ya={};vb={};return W}z=z||{};const V=z.allowed?h.toSet(z.allowed):{},Aa=z.forbidden?h.toSet(z.forbidden):{},O=z.constants||N,la=(z.functions||na)(C),za=z.globalvar,Ma=z.fieldvar,Pa=h.isFunction(za)?za:W=>`${za}["${W}"]`;
let Ya={},vb={},jb=0;const Tb={Literal:W=>W.raw,Identifier:W=>{W=W.name;if(0<jb)return W;if(h.hasOwnProperty(Aa,W))return h.error("Illegal identifier: "+W);if(h.hasOwnProperty(O,W))return O[W];if(h.hasOwnProperty(V,W))return W;Ya[W]=1;return Pa(W)},MemberExpression:W=>{const Ea=!W.computed,Lb=C(W.object);Ea&&(jb+=1);W=C(W.property);if(Lb===Ma){var oc=vb;var $b=($b=W&&W.length-1)&&('"'===W[0]&&'"'===W[$b]||"'"===W[0]&&"'"===W[$b])?W.slice(1,-1):W;oc[$b]=1}Ea&&--jb;return Lb+(Ea?"."+W:"["+W+"]")},CallExpression:W=>
{"Identifier"!==W.callee.type&&h.error("Illegal callee type: "+W.callee.type);const Ea=W.callee.name;W=W.arguments;const Lb=h.hasOwnProperty(la,Ea)&&la[Ea];Lb||h.error("Unrecognized function: "+Ea);return h.isFunction(Lb)?Lb(W):Lb+"("+W.map(C).join(",")+")"},ArrayExpression:W=>"["+W.elements.map(C).join(",")+"]",BinaryExpression:W=>"("+C(W.left)+" "+W.operator+" "+C(W.right)+")",UnaryExpression:W=>"("+W.operator+C(W.argument)+")",ConditionalExpression:W=>"("+C(W.test)+"?"+C(W.consequent)+":"+C(W.alternate)+
")",LogicalExpression:W=>"("+C(W.left)+W.operator+C(W.right)+")",ObjectExpression:W=>"{"+W.properties.map(C).join(",")+"}",Property:W=>{jb+=1;const Ea=C(W.key);--jb;return Ea+":"+C(W.value)}};H.functions=la;H.constants=O;return H};u.constants=N;u.functions=na;u.parseExpression=function(z){pa=z;m=0;E=pa.length;L=null;ec();z=La();if(2!==L.type)throw Error("Unexpect token after expression.");return z}})};
shadow$provide[47]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(21),ob(46)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-expression"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega))})(this,function(u,h,ia){function ab(ra,fa){return null==ra||null==fa?NaN:ra<fa?-1:ra>fa?1:ra>=fa?0:NaN}function zb(ra,fa){return null==ra||null==fa?NaN:fa<ra?-1:fa>ra?1:fa>=ra?0:NaN}function Yb(){return 0}function ac({_intern:ra,
_key:fa},xa){fa=fa(xa);return ra.has(fa)?ra.get(fa):xa}function Xb({_intern:ra,_key:fa},xa){fa=fa(xa);if(ra.has(fa))return ra.get(fa);ra.set(fa,xa);return xa}function mc({_intern:ra,_key:fa},xa){fa=fa(xa);ra.has(fa)&&(xa=ra.get(fa),ra.delete(fa));return xa}function Cb(ra){return null!==ra&&"object"===typeof ra?ra.valueOf():ra}function Ub(ra){return ra instanceof Za?ra:new Za(ra)}function jc(ra){ra.getter&&ra.getter[wb]||(ra.getter=h.field(ra.field),ra.getter[wb]=!0);return ra.getter}function Ba(ra,
fa){var xa=fa.fields;fa=fa.values;for(var Ra=xa.length,Va=0,Ga,hb;Va<Ra;++Va)if(hb=xa[Va],Ga=jc(hb)(ra),h.isDate(Ga)&&(Ga=h.toNumber(Ga)),h.isDate(fa[Va])&&(fa[Va]=h.toNumber(fa[Va])),h.isArray(fa[Va])&&h.isDate(fa[Va][0])&&(fa[Va]=fa[Va].map(h.toNumber)),"E"===hb.type){if(h.isArray(fa[Va])?!fa[Va].includes(Ga):Ga!==fa[Va])return!1}else if("R"===hb.type){if(!h.inrange(Ga,fa[Va]))return!1}else if("R-RE"===hb.type){if(!h.inrange(Ga,fa[Va],!0,!1))return!1}else if("R-E"===hb.type){if(!h.inrange(Ga,fa[Va],
!1,!1))return!1}else if("R-LE"===hb.type){if(!h.inrange(Ga,fa[Va],!1,!0))return!1}else if("E-LT"===hb.type){if(Ga>=fa[Va])return!1}else if("E-LTE"===hb.type){if(Ga>fa[Va])return!1}else if("E-GT"===hb.type){if(Ga<=fa[Va])return!1}else if("E-GTE"===hb.type){if(Ga<fa[Va])return!1}else if("E-VALID"===hb.type){if(null===Ga||isNaN(Ga))return!1}else if("E-ONE"===hb.type&&-1===fa[Va].indexOf(Ga))return!1;return!0}class Za extends Set{constructor(ra,fa=Cb){super();Object.defineProperties(this,{_intern:{value:new Map},
_key:{value:fa}});if(null!=ra)for(const xa of ra)this.add(xa)}has(ra){return super.has(ac(this,ra))}add(ra){return super.add(Xb(this,ra))}delete(ra){return super.delete(mc(this,ra))}}const wb=Symbol("vega_selection_getter"),ub=h.field("_vgsid_"),sb=function(ra){function fa(Ga,hb,bb=0,tb=Ga.length){if(bb<tb){if(0!==xa(hb,hb))return tb;do{const Pb=bb+tb>>>1;0>Ra(Ga[Pb],hb)?bb=Pb+1:tb=Pb}while(bb<tb)}return bb}let xa,Ra,Va;2!==ra.length?(xa=ab,Ra=(Ga,hb)=>ab(ra(Ga),hb),Va=(Ga,hb)=>ra(Ga)-hb):(xa=ra===
ab||ra===zb?ra:Yb,Va=Ra=ra);return{left:fa,center:function(Ga,hb,bb=0,tb=Ga.length){tb=fa(Ga,hb,bb,tb-1);return tb>bb&&Va(Ga[tb-1],hb)>-Va(Ga[tb],hb)?tb-1:tb},right:function(Ga,hb,bb=0,tb=Ga.length){if(bb<tb){if(0!==xa(hb,hb))return tb;do{const Pb=bb+tb>>>1;0>=Ra(Ga[Pb],hb)?bb=Pb+1:tb=Pb}while(bb<tb)}return bb}}}(ub),xb=sb.left,ib=sb.right;var ec={_vgsid__union:function(...ra){const fa=new Za;for(const xa of ra)for(const Ra of xa)fa.add(Ra);return fa},_vgsid__intersect:function(ra,...fa){ra=new Za(ra);
fa=fa.map(Ub);a:for(const xa of ra)for(const Ra of fa)if(!Ra.has(xa)){ra.delete(xa);continue a}return ra},E_union:function(ra,fa){if(!ra.length)return fa;for(var xa=0,Ra=fa.length;xa<Ra;++xa)ra.includes(fa[xa])||ra.push(fa[xa]);return ra},E_intersect:function(ra,fa){return ra.length?ra.filter(xa=>fa.includes(xa)):fa},R_union:function(ra,fa){var xa=h.toNumber(fa[0]),Ra=h.toNumber(fa[1]);xa>Ra&&(xa=fa[1],Ra=fa[0]);if(!ra.length)return[xa,Ra];ra[0]>xa&&(ra[0]=xa);ra[1]<Ra&&(ra[1]=Ra);return ra},R_intersect:function(ra,
fa){var xa=h.toNumber(fa[0]),Ra=h.toNumber(fa[1]);xa>Ra&&(xa=fa[1],Ra=fa[0]);if(!ra.length)return[xa,Ra];if(Ra<ra[0]||ra[1]<xa)return[];ra[0]<xa&&(ra[0]=xa);ra[1]>Ra&&(ra[1]=Ra);return ra}};u.selectionIdTest=function(ra,fa,xa){var Ra=this.context.data[ra];ra=Ra?Ra.values.value:[];Ra=Ra?Ra["index:unit"]&&Ra["index:unit"].value:void 0;xa="intersect"===xa;fa=ub(fa);const Va=xb(ra,fa);if(Va===ra.length||ub(ra[Va])!==fa)return!1;if(Ra&&xa){if(1===Ra.size)return!0;if(ib(ra,fa)-Va<Ra.size)return!1}return!0};
u.selectionResolve=function(ra,fa,xa,Ra){ra=(ra=this.context.data[ra])?ra.values.value:[];for(var Va={},Ga={},hb={},bb,tb,Pb,eb,T,Z,ca=ra.length,ha=0,La,na;ha<ca;++ha)if(bb=ra[ha],eb=bb.unit,tb=bb.fields,Pb=bb.values,tb&&Pb){La=0;for(na=tb.length;La<na;++La)T=tb[La],bb=Va[T.field]||(Va[T.field]={}),Z=bb[eb]||(bb[eb]=[]),hb[T.field]=T=T.type.charAt(0),T=ec[`${T}_union`],bb[eb]=T(Z,h.array(Pb[La]));xa&&(Z=Ga[eb]||(Ga[eb]=[]),Z.push(h.array(Pb).reduce((pa,m,E)=>(pa[tb[E].field]=m,pa),{})))}else T="_vgsid_",
Pb=ub(bb),bb=Va[T]||(Va[T]={}),Z=bb[eb]||(bb[eb]=[]),Z.push(Pb),xa&&(Z=Ga[eb]||(Ga[eb]=[]),Z.push({_vgsid_:Pb}));fa=fa||"union";Va._vgsid_?Va._vgsid_=ec[`${"_vgsid_"}_${fa}`](...Object.values(Va._vgsid_)):Object.keys(Va).forEach(pa=>{Va[pa]=Object.keys(Va[pa]).map(m=>Va[pa][m]).reduce((m,E)=>void 0===m?E:ec[`${hb[pa]}_${fa}`](m,E))});ra=Object.keys(Ga);xa&&ra.length&&(Va[Ra?"vlPoint":"vlMulti"]="union"===fa?{or:ra.reduce((pa,m)=>(pa.push(...Ga[m]),pa),[])}:{and:ra.map(pa=>({or:Ga[pa]}))});return Va};
u.selectionTest=function(ra,fa,xa){var Ra=this.context.data[ra];ra=Ra?Ra.values.value:[];Ra=Ra?Ra["index:unit"]&&Ra["index:unit"].value:void 0;xa="intersect"===xa;for(var Va=ra.length,Ga=0,hb,bb,tb,Pb;Ga<Va;++Ga)if(hb=ra[Ga],Ra&&xa){if(bb=bb||{},tb=bb[Pb=hb.unit]||0,-1!==tb){hb=Ba(fa,hb);bb[Pb]=hb?-1:++tb;if(hb&&1===Ra.size)return!0;if(!hb&&tb===Ra.get(Pb).count)return!1}}else if(hb=Ba(fa,hb),xa^hb)return hb;return Va&&xa};u.selectionTuples=function(ra,fa){return ra.map(xa=>h.extend(fa.fields?{values:fa.fields.map(Ra=>
jc(Ra)(xa.datum))}:{_vgsid_:ub(xa.datum)},fa))};u.selectionVisitor=function(ra,fa,xa,Ra){fa[0].type!==ia.Literal&&h.error("First argument to selection functions must be a string literal.");ra=fa[0].value;fa=2<=fa.length&&h.peek(fa).value;const Va=":"+ra;"intersect"!==fa||h.hasOwnProperty(Ra,"@unit")||(Ra["@unit"]=xa.getData(ra).indataRef(xa,"unit"));h.hasOwnProperty(Ra,Va)||(Ra[Va]=xa.getData(ra).tuplesRef())}})};
shadow$provide[48]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(21),ob(46),ob(33),ob(29),ob(34),ob(47),ob(30),ob(23)):"function"===typeof define&&define.amd?define("exports vega-util vega-expression vega-scale vega-dataflow vega-scenegraph vega-selections vega-statistics vega-time".split(" "),h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega,u.vega,u.vega,u.vega,u.vega,u.vega,u.vega))})(this,function(u,h,ia,ab,zb,Yb,ac,
Xb,mc){function Cb(U){return(U=this.context.data[U])?U.values.value:[]}function Ub(U,Ja,mb){return(mb=(U=this.context.data[U]["index:"+Ja])?U.value.get(mb):void 0)?mb.count:mb}function jc(U,Ja){const mb=this.context.dataflow;mb.pulse(this.context.data[U].input,mb.changeset().remove(h.truthy).insert(Ja));return 1}function Ba(U,Ja,mb){if(U){const Dc=this.context.dataflow;Dc.pulse(U.mark.source,Dc.changeset().encode(U,Ja))}return void 0!==mb?mb:U}function Za(U,Ja,mb){if(!Number.isInteger(U)||!Number.isInteger(Ja))return"";
Md.setYear(2E3);Md.setMonth(U);Md.setDate(Ja);return Oc.call(this,Md,mb)}function wb(U){return Za.call(this,U,1,"%B")}function ub(U){return Za.call(this,U,1,"%b")}function sb(U){return Za.call(this,0,2+U,"%A")}function xb(U){return Za.call(this,0,2+U,"%a")}function ib(U,Ja,mb,Dc){Ja[0].type!==ia.Literal&&h.error("First argument to data functions must be a string literal.");U=Ja[0].value;Ja=":"+U;if(!h.hasOwnProperty(Ja,Dc))try{Dc[Ja]=mb.getData(U).tuplesRef()}catch(Lc){}}function ec(U,Ja,mb,Dc){Ja[0].type!==
ia.Literal&&h.error("First argument to indata must be a string literal.");Ja[1].type!==ia.Literal&&h.error("Second argument to indata must be a string literal.");U=Ja[0].value;Ja=Ja[1].value;const Lc="@"+Ja;h.hasOwnProperty(Lc,Dc)||(Dc[Lc]=mb.getData(U).indataRef(mb,Ja))}function ra(U,Ja,mb,Dc){if(Ja[0].type===ia.Literal)fa(mb,Dc,Ja[0].value);else for(U in mb.scales)fa(mb,Dc,U)}function fa(U,Ja,mb){const Dc="%"+mb;if(!h.hasOwnProperty(Ja,Dc))try{Ja[Dc]=U.scaleRef(mb)}catch(Lc){}}function xa(U,Ja){if(h.isString(U))return(U=
Ja.scales[U])&&ab.isRegisteredScale(U.value)?U.value:void 0}function Ra(U,Ja,mb){Ja.__bandwidth=Lc=>Lc&&Lc.bandwidth?Lc.bandwidth():0;mb._bandwidth=ra;mb._range=ra;mb._scale=ra;const Dc=Lc=>"_["+(Lc.type===ia.Literal?h.stringValue("%"+Lc.value):h.stringValue("%")+"+"+U(Lc))+"]";return{_bandwidth:Lc=>`this.__bandwidth(${Dc(Lc[0])})`,_range:Lc=>`${Dc(Lc[0])}.range()`,_scale:Lc=>`${Dc(Lc[0])}(${U(Lc[1])})`}}function Va(U){return 1<U?Oa:-1>U?-Oa:Math.asin(U)}function Ga(){}function hb(U,Ja){if(U&&Ke.hasOwnProperty(U.type))Ke[U.type](U,
Ja)}function bb(U,Ja,mb){var Dc=-1;mb=U.length-mb;for(Ja.lineStart();++Dc<mb;){var Lc=U[Dc];Ja.point(Lc[0],Lc[1],Lc[2])}Ja.lineEnd()}function tb(U,Ja){var mb=-1,Dc=U.length;for(Ja.polygonStart();++mb<Dc;)bb(U[mb],Ja,1);Ja.polygonEnd()}function Pb(U,Ja){if(U&&Qe.hasOwnProperty(U.type))Qe[U.type](U,Ja);else hb(U,Ja)}function eb(){Ee.point=Z}function T(){ca(kf,Le)}function Z(U,Ja){Ee.point=ca;kf=U;Le=Ja;U*=Hc;Ja*=Hc;Xe=U;Ze=Tc(Ja=Ja/2+cc);Ae=bd(Ja)}function ca(U,Ja){U*=Hc;Ja*=Hc;Ja=Ja/2+cc;var mb=U-
Xe,Dc=0<=mb?1:-1,Lc=Dc*mb;mb=Tc(Ja);Ja=bd(Ja);var Gd=Ae*Ja,le=Ze*mb+Gd*Tc(Lc);Dc=Gd*Dc*bd(Lc);ne.add(Yc(Dc,le));Xe=U;Ze=mb;Ae=Ja}function ha(U,Ja){return[U[1]*Ja[2]-U[2]*Ja[1],U[2]*Ja[0]-U[0]*Ja[2],U[0]*Ja[1]-U[1]*Ja[0]]}function La(U,Ja){rb.push(nb=[qe=U,l=U]);Ja<oa&&(oa=Ja);Ja>q&&(q=Ja)}function na(U,Ja){var mb=[U*Hc,Ja*Hc];var Dc=mb[0];mb=mb[1];var Lc=Tc(mb);Dc=[Lc*Tc(Dc),Lc*bd(Dc),bd(mb)];if(Qa){mb=ha(Qa,Dc);Lc=mb=ha([mb[1],-mb[0],0],mb);var Gd=fe(Lc[0]*Lc[0]+Lc[1]*Lc[1]+Lc[2]*Lc[2]);Lc[0]/=Gd;
Lc[1]/=Gd;Lc[2]/=Gd;mb=[Yc(mb[1],mb[0]),Va(mb[2])];var le=U-J;Lc=0<le?1:-1;Gd=mb[0]*vc*Lc;le=180<Jc(le);le^(Lc*J<Gd&&Gd<Lc*U)?(mb=mb[1]*vc,mb>q&&(q=mb)):(Gd=(Gd+360)%360-180,le^(Lc*J<Gd&&Gd<Lc*U))?(mb=-mb[1]*vc,mb<oa&&(oa=mb)):(Ja<oa&&(oa=Ja),Ja>q&&(q=Ja));le?U<J?Q(qe,U)>Q(qe,l)&&(l=U):Q(U,l)>Q(qe,l)&&(qe=U):l>=qe?(U<qe&&(qe=U),U>l&&(l=U)):U>J?Q(qe,U)>Q(qe,l)&&(l=U):Q(U,l)>Q(qe,l)&&(qe=U)}else rb.push(nb=[qe=U,l=U]);Ja<oa&&(oa=Ja);Ja>q&&(q=Ja);Qa=Dc;J=U}function pa(){tc.point=na}function m(){nb[0]=
qe;nb[1]=l;tc.point=La;Qa=null}function E(U,Ja){if(Qa){var mb=U-J;Ia.add(180<Jc(mb)?mb+(0<mb?360:-360):mb)}else ja=U,Da=Ja;Ee.point(U,Ja);na(U,Ja)}function L(){Ee.lineStart()}function w(){E(ja,Da);Ee.lineEnd();1E-6<Jc(Ia)&&(qe=-(l=180));nb[0]=qe;nb[1]=l;Qa=null}function Q(U,Ja){return 0>(Ja-=U)?Ja+360:Ja}function A(U,Ja){return U[0]-Ja[0]}function y(U,Ja){return U[0]<=U[1]?U[0]<=Ja&&Ja<=U[1]:Ja<U[0]||U[1]<Ja}function N(U,Ja){U*=Hc;Ja*=Hc;var mb=Tc(Ja);z(mb*Tc(U),mb*bd(U),bd(Ja))}function z(U,Ja,mb){++wc;
yc+=(U-yc)/wc;Rc+=(Ja-Rc)/wc;fd+=(mb-fd)/wc}function C(){xe.point=H}function H(U,Ja){U*=Hc;Ja*=Hc;var mb=Tc(Ja);ke=mb*Tc(U);Qd=mb*bd(U);Od=bd(Ja);xe.point=V;z(ke,Qd,Od)}function V(U,Ja){U*=Hc;Ja*=Hc;var mb=Tc(Ja),Dc=mb*Tc(U);U=mb*bd(U);Ja=bd(Ja);var Lc=Yc(fe((Lc=Qd*Ja-Od*U)*Lc+(Lc=Od*Dc-ke*Ja)*Lc+(Lc=ke*U-Qd*Dc)*Lc),ke*Dc+Qd*U+Od*Ja);zc+=Lc;Td+=Lc*(ke+(ke=Dc));Ad+=Lc*(Qd+(Qd=U));Ld+=Lc*(Od+(Od=Ja));z(ke,Qd,Od)}function Aa(){xe.point=N}function O(){xe.point=za}function la(){Ma(Be,te);xe.point=N}function za(U,
Ja){Be=U;te=Ja;U*=Hc;Ja*=Hc;xe.point=Ma;var mb=Tc(Ja);ke=mb*Tc(U);Qd=mb*bd(U);Od=bd(Ja);z(ke,Qd,Od)}function Ma(U,Ja){U*=Hc;Ja*=Hc;var mb=Tc(Ja),Dc=mb*Tc(U);U=mb*bd(U);Ja=bd(Ja);mb=Qd*Ja-Od*U;var Lc=Od*Dc-ke*Ja,Gd=ke*U-Qd*Dc,le=qd(mb,Lc,Gd),Xd=Va(le);le=le&&-Xd/le;Ud.add(le*mb);qc.add(le*Lc);Fd.add(le*Gd);zc+=Xd;Td+=Xd*(ke+(ke=Dc));Ad+=Xd*(Qd+(Qd=U));Ld+=Xd*(Od+(Od=Ja));z(ke,Qd,Od)}function Pa(U,Ja){return function(mb,Dc,Lc){return mb?(mb=xa(mb,(Lc||this).context))&&mb.path[U](Dc):Ja(Dc)}}function Ya(U,
Ja){return(U=xa(U,(Ja||this).context))&&U.scale()}function vb(U){const Ja=this.context.group;let mb=!1;if(Ja)for(;U;){if(U===Ja){mb=!0;break}U=U.mark.group}return mb}function jb(U,Ja,mb){try{U[Ja].apply(U,["EXPRESSION"].concat([].slice.call(mb)))}catch(Dc){U.warn(Dc)}return mb[mb.length-1]}function Tb(){return jb(this.context.dataflow,"warn",arguments)}function W(){return jb(this.context.dataflow,"info",arguments)}function Ea(){return jb(this.context.dataflow,"debug",arguments)}function Lb(U,Ja,mb){U.prototype=
Ja.prototype=mb;mb.constructor=U}function oc(U,Ja){U=Object.create(U.prototype);for(var mb in Ja)U[mb]=Ja[mb];return U}function $b(){}function Mb(){return this.rgb().formatHex()}function Qb(){return this.rgb().formatRgb()}function xc(U){var Ja,mb;U=(U+"").trim().toLowerCase();return(Ja=ve.exec(U))?(mb=Ja[1].length,Ja=parseInt(Ja[1],16),6===mb?ed(Ja):3===mb?new yb(Ja>>8&15|Ja>>4&240,Ja>>4&15|Ja&240,(Ja&15)<<4|Ja&15,1):8===mb?qa(Ja>>24&255,Ja>>16&255,Ja>>8&255,(Ja&255)/255):4===mb?qa(Ja>>12&15|Ja>>
8&240,Ja>>8&15|Ja>>4&240,Ja>>4&15|Ja&240,((Ja&15)<<4|Ja&15)/255):null):(Ja=ff.exec(U))?new yb(Ja[1],Ja[2],Ja[3],1):(Ja=lf.exec(U))?new yb(255*Ja[1]/100,255*Ja[2]/100,255*Ja[3]/100,1):(Ja=Dg.exec(U))?qa(Ja[1],Ja[2],Ja[3],Ja[4]):(Ja=vf.exec(U))?qa(255*Ja[1]/100,255*Ja[2]/100,255*Ja[3]/100,Ja[4]):(Ja=Of.exec(U))?jd(Ja[1],Ja[2]/100,Ja[3]/100,1):(Ja=bg.exec(U))?jd(Ja[1],Ja[2]/100,Ja[3]/100,Ja[4]):gf.hasOwnProperty(U)?ed(gf[U]):"transparent"===U?new yb(NaN,NaN,NaN,0):null}function ed(U){return new yb(U>>
16&255,U>>8&255,U&255,1)}function qa(U,Ja,mb,Dc){0>=Dc&&(U=Ja=mb=NaN);return new yb(U,Ja,mb,Dc)}function Db(U){U instanceof $b||(U=xc(U));if(!U)return new yb;U=U.rgb();return new yb(U.r,U.g,U.b,U.opacity)}function Ua(U,Ja,mb,Dc){return 1===arguments.length?Db(U):new yb(U,Ja,mb,null==Dc?1:Dc)}function yb(U,Ja,mb,Dc){this.r=+U;this.g=+Ja;this.b=+mb;this.opacity=+Dc}function Hb(){return`#${Bc(this.r)}${Bc(this.g)}${Bc(this.b)}`}function Nb(){const U=Zb(this.opacity);return`${1===U?"rgb(":"rgba("}${ic(this.r)}, ${ic(this.g)}, ${ic(this.b)}${1===
U?")":`, ${U})`}`}function Zb(U){return isNaN(U)?1:Math.max(0,Math.min(1,U))}function ic(U){return Math.max(0,Math.min(255,Math.round(U)||0))}function Bc(U){U=ic(U);return(16>U?"0":"")+U.toString(16)}function jd(U,Ja,mb,Dc){0>=Dc?U=Ja=mb=NaN:0>=mb||1<=mb?U=Ja=NaN:0>=Ja&&(U=NaN);return new Ha(U,Ja,mb,Dc)}function Vc(U){if(U instanceof Ha)return new Ha(U.h,U.s,U.l,U.opacity);U instanceof $b||(U=xc(U));if(!U)return new Ha;if(U instanceof Ha)return U;U=U.rgb();var Ja=U.r/255,mb=U.g/255,Dc=U.b/255,Lc=
Math.min(Ja,mb,Dc),Gd=Math.max(Ja,mb,Dc),le=NaN,Xd=Gd-Lc,Jf=(Gd+Lc)/2;Xd?(le=Ja===Gd?(mb-Dc)/Xd+6*(mb<Dc):mb===Gd?(Dc-Ja)/Xd+2:(Ja-mb)/Xd+4,Xd/=.5>Jf?Gd+Lc:2-Gd-Lc,le*=60):Xd=0<Jf&&1>Jf?0:le;return new Ha(le,Xd,Jf,U.opacity)}function ma(U,Ja,mb,Dc){return 1===arguments.length?Vc(U):new Ha(U,Ja,mb,null==Dc?1:Dc)}function Ha(U,Ja,mb,Dc){this.h=+U;this.s=+Ja;this.l=+mb;this.opacity=+Dc}function gb(U){U=(U||0)%360;return 0>U?U+360:U}function R(U){return Math.max(0,Math.min(1,U||0))}function t(U,Ja,mb){return 255*
(60>U?Ja+(mb-Ja)*U/60:180>U?mb:240>U?Ja+(mb-Ja)*(240-U)/60:Ja)}function ba(U){if(U instanceof Ca)return new Ca(U.l,U.a,U.b,U.opacity);if(U instanceof Gc)return Sc(U);U instanceof yb||(U=Db(U));var Ja=Fb(U.r),mb=Fb(U.g),Dc=Fb(U.b),Lc=Sa(.2225045*Ja+.7168786*mb+.0606169*Dc);if(Ja===mb&&mb===Dc)var Gd=Ja=Lc;else Gd=Sa((.4360747*Ja+.3850649*mb+.1430804*Dc)/.96422),Ja=Sa((.0139322*Ja+.0971045*mb+.7141733*Dc)/.82521);return new Ca(116*Lc-16,500*(Gd-Lc),200*(Lc-Ja),U.opacity)}function va(U,Ja,mb,Dc){return 1===
arguments.length?ba(U):new Ca(U,Ja,mb,null==Dc?1:Dc)}function Ca(U,Ja,mb,Dc){this.l=+U;this.a=+Ja;this.b=+mb;this.opacity=+Dc}function Sa(U){return U>Hf?Math.pow(U,1/3):U/dg+Tg}function kb(U){return U>Bf?U*U*U:dg*(U-Tg)}function Rb(U){return 255*(.0031308>=U?12.92*U:1.055*Math.pow(U,1/2.4)-.055)}function Fb(U){return.04045>=(U/=255)?U/12.92:Math.pow((U+.055)/1.055,2.4)}function Jb(U){if(U instanceof Gc)return new Gc(U.h,U.c,U.l,U.opacity);U instanceof Ca||(U=ba(U));if(0===U.a&&0===U.b)return new Gc(NaN,
0<U.l&&100>U.l?0:NaN,U.l,U.opacity);var Ja=Math.atan2(U.b,U.a)*cg;return new Gc(0>Ja?Ja+360:Ja,Math.sqrt(U.a*U.a+U.b*U.b),U.l,U.opacity)}function Cc(U,Ja,mb,Dc){return 1===arguments.length?Jb(U):new Gc(U,Ja,mb,null==Dc?1:Dc)}function Gc(U,Ja,mb,Dc){this.h=+U;this.c=+Ja;this.l=+mb;this.opacity=+Dc}function Sc(U){if(isNaN(U.h))return new Ca(U.l,0,0,U.opacity);var Ja=U.h*Re;return new Ca(U.l,Math.cos(Ja)*U.c,Math.sin(Ja)*U.c,U.opacity)}function vd(U){U/=255;return.03928>=U?U/12.92:Math.pow((U+.055)/
1.055,2.4)}function od(U){var Ja=Ua(U);U=vd(Ja.r);const mb=vd(Ja.g);Ja=vd(Ja.b);return.2126*U+.7152*mb+.0722*Ja}function gd(U,Ja){U=od(U);Ja=od(Ja);return(Math.max(U,Ja)+.05)/(Math.min(U,Ja)+.05)}function Cd(){const U=[].slice.call(arguments);U.unshift({});return h.extend(...U)}function Dd(U,Ja){if(U===Ja||U!==U&&Ja!==Ja)U=!0;else if(h.isArray(U))if(h.isArray(Ja)&&U.length===Ja.length)a:{for(let mb=0,Dc=U.length;mb<Dc;++mb)if(!Dd(U[mb],Ja[mb])){U=!1;break a}U=!0}else U=!1;else U=h.isObject(U)&&h.isObject(Ja)?
rd(U,Ja):!1;return U}function rd(U,Ja){for(const mb in U)if(!Dd(U[mb],Ja[mb]))return!1;return!0}function we(U){return Ja=>rd(U,Ja)}function Bd(U,Ja,mb,Dc,Lc,Gd){const le=this.context.dataflow,Xd=this.context.data[U],Jf=Xd.input;U=le.stamp();let mf=Xd.changes,wg;if(!1===le._trigger||!(Jf.value.length||Ja||Dc))return 0;if(!mf||mf.stamp<U)Xd.changes=mf=le.changeset(),mf.stamp=U,le.runAfter(()=>{Xd.modified=!0;le.pulse(Jf,mf).run()},!0,1);mb&&(mb=!0===mb?h.truthy:h.isArray(mb)||zb.isTuple(mb)?mb:we(mb),
mf.remove(mb));Ja&&mf.insert(Ja);Dc&&(mb=we(Dc),Jf.value.some(mb)?mf.remove(mb):mf.insert(Dc));if(Lc)for(wg in Gd)mf.modify(Lc,wg,Gd[wg]);return 1}function x(U){U=U.touches;return Math.hypot(U[0].clientX-U[1].clientX,U[0].clientY-U[1].clientY)}function K(U){U=U.touches;return Math.atan2(U[0].clientY-U[1].clientY,U[0].clientX-U[1].clientX)}function ua(U,Ja){Ja=Ug[Ja]||(Ug[Ja]=h.field(Ja));return h.isArray(U)?U.map(Ja):Ja(U)}function Ka(U){return h.isArray(U)||ArrayBuffer.isView(U)?U:null}function lb(U){return Ka(U)||
(h.isString(U)?U:null)}function Bb(U,...Ja){return Ka(U).join(...Ja)}function bc(U,...Ja){return lb(U).indexOf(...Ja)}function Sb(U,...Ja){return lb(U).lastIndexOf(...Ja)}function nc(U,...Ja){return lb(U).slice(...Ja)}function Kc(U,Ja,mb){h.isFunction(mb)&&h.error("Function argument passed to replace.");h.isString(Ja)||h.isRegExp(Ja)||h.error("Please pass a string or RegExp argument to replace.");return String(U).replace(Ja,mb)}function Ac(U){return Ka(U).slice().reverse()}function Xc(U){return Ka(U).slice().sort(h.ascending)}
function kd(U,Ja,mb){return ab.bandSpace(U||0,Ja||0,mb||0)}function pd(U,Ja){return(U=xa(U,(Ja||this).context))&&U.bandwidth?U.bandwidth():0}function xd(U,Ja){return(U=xa(U,(Ja||this).context))?U.copy():void 0}function nd(U,Ja){return(U=xa(U,(Ja||this).context))?U.domain():[]}function Jd(U,Ja,mb){return(U=xa(U,(mb||this).context))?h.isArray(Ja)?(U.invertRange||U.invert)(Ja):(U.invert||U.invertExtent)(Ja):void 0}function me(U,Ja){return(U=xa(U,(Ja||this).context))&&U.range?U.range():[]}function Me(U,
Ja,mb){return(U=xa(U,(mb||this).context))?U(Ja):void 0}function He(U,Ja,mb,Dc,Lc){let Gd="string"===typeof U?xa(U,(Lc||this).context):U;const le=Yb.Gradient(Ja,mb);U=Gd.domain();Ja=U[0];mb=h.peek(U);let Xd=h.identity;mb-Ja?Xd=ab.scaleFraction(Gd,Ja,mb):Gd=(Gd.interpolator?ab.scale("sequential")().interpolator(Gd.interpolator()):ab.scale("linear")().interpolate(Gd.interpolate()).range(Gd.range())).domain([Ja=0,mb=1]);Gd.ticks&&(U=Gd.ticks(+Dc||15),Ja!==U[0]&&U.unshift(Ja),mb!==h.peek(U)&&U.push(mb));
U.forEach(Jf=>le.stop(Xd(Jf),Gd(Jf)));return le}function Ie(U,Ja,mb){const Dc=xa(U,(mb||this).context);return function(Lc){return Dc?Dc.path.context(Lc)(Ja):""}}function tf(U){let Ja=null;return function(mb){return mb?Yb.pathRender(mb,Ja=Ja||Yb.pathParse(U)):U}}function bf(U,Ja){U=Cb.call(Ja,U);return U.root&&U.root.lookup||{}}function F(U,Ja,mb){U=bf(U,this);Ja=U[Ja];mb=U[mb];return Ja&&mb?Ja.path(mb).map(eh):void 0}function aa(U,Ja){return(U=bf(U,this)[Ja])?U.ancestors().map(eh):void 0}function Fa(){const U=
"undefined"!==typeof window&&window||null;return U?U.screen:{}}function fb(){const U="undefined"!==typeof window&&window||null;return U?[U.innerWidth,U.innerHeight]:[void 0,void 0]}function Gb(){var U=this.context.dataflow;return(U=U.container&&U.container())?[U.clientWidth,U.clientHeight]:[void 0,void 0]}function pc(U,Ja,mb){if(!U)return[];const [Dc,Lc]=U;U=(new Yb.Bounds).set(Dc[0],Dc[1],Lc[0],Lc[1]);mb=mb||this.context.dataflow.scenegraph().root;return Yb.intersect(mb,U,Vb(Ja))}function Vb(U){let Ja=
null;if(U){const mb=h.array(U.marktype),Dc=h.array(U.markname);Ja=Lc=>(!mb.length||mb.some(Gd=>Lc.marktype===Gd))&&(!Dc.length||Dc.some(Gd=>Lc.name===Gd))}return Ja}function Ec(U,Ja,mb){if(1===arguments.length)return Sg[U];Sg[U]=Ja;mb&&(Wg[U]=mb);If&&(If.functions[U]="this."+U);return this}const ld=U=>function(Ja,mb){const Dc=this.context.dataflow.locale();return null===Ja?"null":Dc[U](mb)(Ja)},ad=ld("format"),Oc=ld("timeFormat"),Nd=ld("utcFormat"),ce=ld("timeParse"),Kd=ld("utcParse"),Md=new Date(2E3,
0,1);class Wd{constructor(){this._partials=new Float64Array(32);this._n=0}add(U){const Ja=this._partials;let mb=0;for(let Dc=0;Dc<this._n&&32>Dc;Dc++){const Lc=Ja[Dc],Gd=U+Lc;(U=Math.abs(U)<Math.abs(Lc)?U-(Gd-Lc):Lc-(Gd-U))&&(Ja[mb++]=U);U=Gd}Ja[mb]=U;this._n=mb+1;return this}valueOf(){const U=this._partials;let Ja=this._n;let mb,Dc=0;if(0<Ja){for(Dc=U[--Ja];0<Ja;){var Lc=Dc;mb=U[--Ja];Dc=Lc+mb;if(Lc=mb-(Dc-Lc))break}0<Ja&&(0>Lc&&0>U[Ja-1]||0<Lc&&0<U[Ja-1])&&(mb=2*Lc,Lc=Dc+mb,mb==Lc-Dc&&(Dc=Lc))}return Dc}}
var ya=Math.PI,Oa=ya/2,cc=ya/4,id=2*ya,vc=180/ya,Hc=ya/180,Jc=Math.abs,Yc=Math.atan2,Tc=Math.cos,qd=Math.hypot,bd=Math.sin,fe=Math.sqrt,Qe={Feature:function(U,Ja){hb(U.geometry,Ja)},FeatureCollection:function(U,Ja){U=U.features;for(var mb=-1,Dc=U.length;++mb<Dc;)hb(U[mb].geometry,Ja)}},Ke={Sphere:function(U,Ja){Ja.sphere()},Point:function(U,Ja){U=U.coordinates;Ja.point(U[0],U[1],U[2])},MultiPoint:function(U,Ja){for(var mb=U.coordinates,Dc=-1,Lc=mb.length;++Dc<Lc;)U=mb[Dc],Ja.point(U[0],U[1],U[2])},
LineString:function(U,Ja){bb(U.coordinates,Ja,0)},MultiLineString:function(U,Ja){U=U.coordinates;for(var mb=-1,Dc=U.length;++mb<Dc;)bb(U[mb],Ja,0)},Polygon:function(U,Ja){tb(U.coordinates,Ja)},MultiPolygon:function(U,Ja){U=U.coordinates;for(var mb=-1,Dc=U.length;++mb<Dc;)tb(U[mb],Ja)},GeometryCollection:function(U,Ja){U=U.geometries;for(var mb=-1,Dc=U.length;++mb<Dc;)hb(U[mb],Ja)}},ne=new Wd,Ye=new Wd,kf,Le,Xe,Ze,Ae,Ee={point:Ga,lineStart:Ga,lineEnd:Ga,polygonStart:function(){ne=new Wd;Ee.lineStart=
eb;Ee.lineEnd=T},polygonEnd:function(){var U=+ne;Ye.add(0>U?id+U:U);this.lineStart=this.lineEnd=this.point=Ga},sphere:function(){Ye.add(id)}},qe,oa,l,q,J,ja,Da,Qa,Ia,rb,nb,tc={point:La,lineStart:pa,lineEnd:m,polygonStart:function(){tc.point=E;tc.lineStart=L;tc.lineEnd=w;Ia=new Wd;Ee.polygonStart()},polygonEnd:function(){Ee.polygonEnd();tc.point=La;tc.lineStart=pa;tc.lineEnd=m;0>ne?(qe=-(l=180),oa=-(q=90)):1E-6<Ia?q=90:-1E-6>Ia&&(oa=-90);nb[0]=qe;nb[1]=l},sphere:function(){qe=-(l=180);oa=-(q=90)}},
wc,zc,yc,Rc,fd,Td,Ad,Ld,Ud,qc,Fd,Be,te,ke,Qd,Od,xe={sphere:Ga,point:N,lineStart:C,lineEnd:Aa,polygonStart:function(){xe.lineStart=O;xe.lineEnd=la},polygonEnd:function(){xe.lineStart=C;xe.lineEnd=Aa}};const Fe=Pa("area",function(U){Ye=new Wd;Pb(U,Ee);return 2*Ye}),re=Pa("bounds",function(U){var Ja,mb,Dc;q=l=-(qe=oa=Infinity);rb=[];Pb(U,tc);if(Ja=rb.length){rb.sort(A);U=1;var Lc=rb[0];for(mb=[Lc];U<Ja;++U){var Gd=rb[U];y(Lc,Gd[0])||y(Lc,Gd[1])?(Q(Lc[0],Gd[1])>Q(Lc[0],Lc[1])&&(Lc[1]=Gd[1]),Q(Gd[0],Lc[1])>
Q(Lc[0],Lc[1])&&(Lc[0]=Gd[0])):mb.push(Lc=Gd)}var le=-Infinity;Ja=mb.length-1;U=0;for(Lc=mb[Ja];U<=Ja;Lc=Gd,++U)Gd=mb[U],(Dc=Q(Lc[1],Gd[0]))>le&&(le=Dc,qe=Gd[0],l=Lc[1])}rb=nb=null;return Infinity===qe||Infinity===oa?[[NaN,NaN],[NaN,NaN]]:[[qe,oa],[l,q]]}),Ne=Pa("centroid",function(U){wc=zc=yc=Rc=fd=Td=Ad=Ld=0;Ud=new Wd;qc=new Wd;Fd=new Wd;Pb(U,xe);U=+Ud;var Ja=+qc,mb=+Fd,Dc=qd(U,Ja,mb);return 1E-12>Dc&&(U=Td,Ja=Ad,mb=Ld,1E-6>zc&&(U=yc,Ja=Rc,mb=fd),Dc=qd(U,Ja,mb),1E-12>Dc)?[NaN,NaN]:[Yc(Ja,U)*vc,
Va(mb/Dc)*vc]});var hd=1/.7,ve=/^#([0-9a-f]{3,8})$/,ff=RegExp("^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$"),lf=RegExp("^rgb\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),Dg=RegExp("^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),vf=RegExp("^rgba\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),
Of=RegExp("^hsl\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),bg=RegExp("^hsla\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),gf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,
bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,
darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,
lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,
mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,
plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,
yellow:16776960,yellowgreen:10145074};Lb($b,xc,{copy(U){return Object.assign(new this.constructor,this,U)},displayable(){return this.rgb().displayable()},hex:Mb,formatHex:Mb,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Vc(this).formatHsl()},formatRgb:Qb,toString:Qb});Lb(yb,Ua,oc($b,{brighter(U){U=null==U?hd:Math.pow(hd,U);return new yb(this.r*U,this.g*U,this.b*U,this.opacity)},darker(U){U=null==U?.7:Math.pow(.7,U);return new yb(this.r*U,this.g*U,this.b*U,this.opacity)},
rgb(){return this},clamp(){return new yb(ic(this.r),ic(this.g),ic(this.b),Zb(this.opacity))},displayable(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:Hb,formatHex:Hb,formatHex8:function(){return`#${Bc(this.r)}${Bc(this.g)}${Bc(this.b)}${Bc(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Nb,toString:Nb}));Lb(Ha,ma,oc($b,{brighter(U){U=null==U?hd:Math.pow(hd,U);return new Ha(this.h,this.s,this.l*U,this.opacity)},
darker(U){U=null==U?.7:Math.pow(.7,U);return new Ha(this.h,this.s,this.l*U,this.opacity)},rgb(){var U=this.h%360+360*(0>this.h),Ja=isNaN(U)||isNaN(this.s)?0:this.s,mb=this.l;Ja=mb+(.5>mb?mb:1-mb)*Ja;mb=2*mb-Ja;return new yb(t(240<=U?U-240:U+120,mb,Ja),t(U,mb,Ja),t(120>U?U+240:U-120,mb,Ja),this.opacity)},clamp(){return new Ha(gb(this.h),R(this.s),R(this.l),Zb(this.opacity))},displayable(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl(){const U=
Zb(this.opacity);return`${1===U?"hsl(":"hsla("}${gb(this.h)}, ${100*R(this.s)}%, ${100*R(this.l)}%${1===U?")":`, ${U})`}`}}));const Re=Math.PI/180,cg=180/Math.PI,Tg=4/29,Bf=6/29,dg=3*Bf*Bf,Hf=Bf*Bf*Bf;Lb(Ca,va,oc($b,{brighter(U){return new Ca(this.l+18*(null==U?1:U),this.a,this.b,this.opacity)},darker(U){return new Ca(this.l-18*(null==U?1:U),this.a,this.b,this.opacity)},rgb(){var U=(this.l+16)/116,Ja=isNaN(this.a)?U:U+this.a/500,mb=isNaN(this.b)?U:U-this.b/200;Ja=.96422*kb(Ja);U=1*kb(U);mb=.82521*
kb(mb);return new yb(Rb(3.1338561*Ja-1.6168667*U-.4906146*mb),Rb(-.9787684*Ja+1.9161415*U+.033454*mb),Rb(.0719453*Ja-.2289914*U+1.4052427*mb),this.opacity)}}));Lb(Gc,Cc,oc($b,{brighter(U){return new Gc(this.h,this.c,this.l+18*(null==U?1:U),this.opacity)},darker(U){return new Gc(this.h,this.c,this.l-18*(null==U?1:U),this.opacity)},rgb(){return Sc(this).rgb()}}));const Ug={},eh=U=>U.data,Sg={random(){return Xb.random()},cumulativeNormal:Xb.cumulativeNormal,cumulativeLogNormal:Xb.cumulativeLogNormal,
cumulativeUniform:Xb.cumulativeUniform,densityNormal:Xb.densityNormal,densityLogNormal:Xb.densityLogNormal,densityUniform:Xb.densityUniform,quantileNormal:Xb.quantileNormal,quantileLogNormal:Xb.quantileLogNormal,quantileUniform:Xb.quantileUniform,sampleNormal:Xb.sampleNormal,sampleLogNormal:Xb.sampleLogNormal,sampleUniform:Xb.sampleUniform,isArray:h.isArray,isBoolean:h.isBoolean,isDate:h.isDate,isDefined(U){return void 0!==U},isNumber:h.isNumber,isObject:h.isObject,isRegExp:h.isRegExp,isString:h.isString,
isTuple:zb.isTuple,isValid(U){return null!=U&&U===U},toBoolean:h.toBoolean,toDate(U){return h.toDate(U)},toNumber:h.toNumber,toString:h.toString,indexof:bc,join:Bb,lastindexof:Sb,replace:Kc,reverse:Ac,sort:Xc,slice:nc,flush:h.flush,lerp:h.lerp,merge:Cd,pad:h.pad,peek:h.peek,pluck:ua,span:h.span,inrange:h.inrange,truncate:h.truncate,rgb:Ua,lab:va,hcl:Cc,hsl:ma,luminance:od,contrast:gd,sequence:function(U,Ja,mb){U=+U;Ja=+Ja;mb=2>(Lc=arguments.length)?(Ja=U,U=0,1):3>Lc?1:+mb;for(var Dc=-1,Lc=Math.max(0,
Math.ceil((Ja-U)/mb))|0,Gd=Array(Lc);++Dc<Lc;)Gd[Dc]=U+Dc*mb;return Gd},format:ad,utcFormat:Nd,utcParse:Kd,utcOffset:mc.utcOffset,utcSequence:mc.utcSequence,timeFormat:Oc,timeParse:ce,timeOffset:mc.timeOffset,timeSequence:mc.timeSequence,timeUnitSpecifier:mc.timeUnitSpecifier,monthFormat:wb,monthAbbrevFormat:ub,dayFormat:sb,dayAbbrevFormat:xb,quarter:h.quarter,utcquarter:h.utcquarter,week:mc.week,utcweek:mc.utcweek,dayofyear:mc.dayofyear,utcdayofyear:mc.utcdayofyear,warn:Tb,info:W,debug:Ea,extent(U){return h.extent(U)},
inScope:vb,intersect:pc,clampRange:h.clampRange,pinchDistance:x,pinchAngle:K,screen:Fa,containerSize:Gb,windowSize:fb,bandspace:kd,setdata:jc,pathShape:tf,panLinear:h.panLinear,panLog:h.panLog,panPow:h.panPow,panSymlog:h.panSymlog,zoomLinear:h.zoomLinear,zoomLog:h.zoomLog,zoomPow:h.zoomPow,zoomSymlog:h.zoomSymlog,encode:Ba,modify:Bd,lassoAppend:function(U,Ja,mb,Dc=5){U=h.array(U);const Lc=U[U.length-1];return void 0===Lc||Math.hypot(Lc[0]-Ja,Lc[1]-mb)>Dc?[...U,[Ja,mb]]:U},lassoPath:function(U){return h.array(U).reduce((Ja,
[mb,Dc],Lc)=>Ja+(0==Lc?`M ${mb},${Dc} `:Lc===U.length-1?" Z":`L ${mb},${Dc} `),"")},intersectLasso:function(U,Ja,mb){const {x:Dc,y:Lc,mark:Gd}=mb;mb=(new Yb.Bounds).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const [le,Xd]of Ja)le<mb.x1&&(mb.x1=le),le>mb.x2&&(mb.x2=le),Xd<mb.y1&&(mb.y1=Xd),Xd>mb.y2&&(mb.y2=Xd);mb.translate(Dc,Lc);return pc([[mb.x1,mb.y1],[mb.x2,mb.y2]],U,Gd).filter(le=>{var Xd=le.y;let Jf=0;for(let mf=0,wg=Ja.length-1;mf<
Ja.length;wg=mf++){const [Vf,Xg]=Ja[wg],[ig,Kg]=Ja[mf];Kg>Xd!=Xg>Xd&&le.x<(Vf-ig)*(Xd-Kg)/(Xg-Kg)+ig&&Jf++}return Jf&1})}},Vg="view item group xy x y".split(" "),Wg={},kh={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:U=>`_[${h.stringValue("$"+U)}]`,functions:function(U){const Ja=ia.functions(U);Vg.forEach(mb=>Ja[mb]="event.vega."+mb);for(const mb in Sg)Ja[mb]="this."+mb;h.extend(Ja,Ra(U,Sg,Wg));return Ja},constants:ia.constants,visitors:Wg},If=ia.codegenExpression(kh);
Ec("bandwidth",pd,ra);Ec("copy",xd,ra);Ec("domain",nd,ra);Ec("range",me,ra);Ec("invert",Jd,ra);Ec("scale",Me,ra);Ec("gradient",He,ra);Ec("geoArea",Fe,ra);Ec("geoBounds",re,ra);Ec("geoCentroid",Ne,ra);Ec("geoShape",Ie,ra);Ec("geoScale",Ya,ra);Ec("indata",Ub,ec);Ec("data",Cb,ib);Ec("treePath",F,ib);Ec("treeAncestors",aa,ib);Ec("vlSelectionTest",ac.selectionTest,ac.selectionVisitor);Ec("vlSelectionIdTest",ac.selectionIdTest,ac.selectionVisitor);Ec("vlSelectionResolve",ac.selectionResolve,ac.selectionVisitor);
Ec("vlSelectionTuples",ac.selectionTuples);u.DataPrefix=":";u.IndexPrefix="@";u.ScalePrefix="%";u.SignalPrefix="$";u.bandspace=kd;u.bandwidth=pd;u.codeGenerator=If;u.codegenParams=kh;u.containerSize=Gb;u.contrast=gd;u.copy=xd;u.data=Cb;u.dataVisitor=ib;u.dayAbbrevFormat=xb;u.dayFormat=sb;u.debug=Ea;u.domain=nd;u.encode=Ba;u.expressionFunction=Ec;u.format=ad;u.functionContext=Sg;u.geoArea=Fe;u.geoBounds=re;u.geoCentroid=Ne;u.geoScale=Ya;u.geoShape=Ie;u.inScope=vb;u.indata=Ub;u.indataVisitor=ec;u.indexof=
bc;u.info=W;u.invert=Jd;u.join=Bb;u.lastindexof=Sb;u.luminance=od;u.merge=Cd;u.modify=Bd;u.monthAbbrevFormat=ub;u.monthFormat=wb;u.parseExpression=function(U,Ja){const mb={};let Dc;try{U=h.isString(U)?U:h.stringValue(U)+"",Dc=ia.parseExpression(U)}catch(Lc){h.error("Expression parse error: "+U)}Dc.visit(Lc=>{if(Lc.type===ia.CallExpression){var Gd=Lc.callee.name,le=kh.visitors[Gd];le&&le(Gd,Lc.arguments,Ja,mb)}});U=If(Dc);U.globals.forEach(Lc=>{const Gd="$"+Lc;!h.hasOwnProperty(mb,Gd)&&Ja.getSignal(Lc)&&
(mb[Gd]=Ja.signalRef(Lc))});return{$expr:h.extend({code:U.code},Ja.options.ast?{ast:Dc}:null),$fields:U.fields,$params:mb}};u.pathShape=tf;u.pinchAngle=K;u.pinchDistance=x;u.pluck=ua;u.range=me;u.replace=Kc;u.reverse=Ac;u.scale=Me;u.scaleGradient=He;u.scaleVisitor=ra;u.screen=Fa;u.setdata=jc;u.slice=nc;u.sort=Xc;u.timeFormat=Oc;u.timeParse=ce;u.treeAncestors=aa;u.treePath=F;u.utcFormat=Nd;u.utcParse=Kd;u.warn=Tb;u.windowSize=fb})};
shadow$provide[49]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(21),ob(29)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-dataflow"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega))})(this,function(u,h,ia){function ab(Ba,Za,wb){wb.endsWith(";")||(wb="return("+wb+");");Za=Function(...Za.concat(wb));return Ba&&Ba.functions?Za.bind(Ba.functions):Za}function zb(Ba,Za,wb){if(!Ba||!h.isObject(Ba))return Ba;
for(let ub=0,sb=Ub.length,xb;ub<sb;++ub)if(xb=Ub[ub],h.hasOwnProperty(Ba,xb.key))return xb.parse(Ba,Za,wb);return Ba}function Yb(Ba,Za,wb,ub){this.dataflow=Ba;this.transforms=Za;this.events=Ba.events.bind(Ba);this.expr=ub||Cb;this.signals={};this.scales={};this.nodes={};this.data={};this.fn={};wb&&(this.functions=Object.create(wb),this.functions.context=this)}function ac(Ba){this.dataflow=Ba.dataflow;this.transforms=Ba.transforms;this.events=Ba.events;this.expr=Ba.expr;this.signals=Object.create(Ba.signals);
this.scales=Object.create(Ba.scales);this.nodes=Object.create(Ba.nodes);this.data=Object.create(Ba.data);this.fn=Object.create(Ba.fn);Ba.functions&&(this.functions=Object.create(Ba.functions),this.functions.context=this)}const Xb=h.toSet(["rule"]),mc=h.toSet(["group","image","rect"]);var Cb={operator:(Ba,Za)=>ab(Ba,["_"],Za.code),parameter:(Ba,Za)=>ab(Ba,["datum","_"],Za.code),event:(Ba,Za)=>ab(Ba,["event"],Za.code),handler:(Ba,Za)=>ab(Ba,["_","event"],`var datum=event.item&&event.item.datum;return ${Za.code};`),
encode:(Ba,Za)=>{const {marktype:wb,channels:ub}=Za;Za="var o\x3ditem,datum\x3do.datum,m\x3d0,$;";for(var sb in ub){const xb="o["+h.stringValue(sb)+"]";Za+=`$=${ub[sb].code};if(${xb}!==$)${xb}=$,m=1;`}sb="";Xb[wb]||(ub.x2&&(ub.x?(mc[wb]&&(sb+="if(o.x\x3eo.x2)$\x3do.x,o.x\x3do.x2,o.x2\x3d$;"),sb+="o.width\x3do.x2-o.x;"):sb+="o.x\x3do.x2-(o.width||0);"),ub.xc&&(sb+="o.x\x3do.xc-(o.width||0)/2;"),ub.y2&&(ub.y?(mc[wb]&&(sb+="if(o.y\x3eo.y2)$\x3do.y,o.y\x3do.y2,o.y2\x3d$;"),sb+="o.height\x3do.y2-o.y;"):
sb+="o.y\x3do.y2-(o.height||0);"),ub.yc&&(sb+="o.y\x3do.yc-(o.height||0)/2;"));Za+=sb;return ab(Ba,["item","_"],Za+"return m;")},codegen:{get(Ba){Ba=`[${Ba.map(h.stringValue).join("][")}]`;const Za=Function("_",`return _${Ba};`);Za.path=Ba;return Za},comparator(Ba,Za){let wb;Ba=Function("a","b","var u, v; return "+Ba.map((ub,sb)=>{const xb=Za[sb];let ib;ub.path?(ib=`a${ub.path}`,ub=`b${ub.path}`):((wb=wb||{})["f"+sb]=ub,ib=`this.f${sb}(a)`,ub=`this.f${sb}(b)`);sb=-xb;return`((u = ${ib}) < (v = ${ub}) || u == null) && v != null ? ${sb}
  : (u > v || v == null) && u != null ? ${xb}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${sb}
  : v !== v && u === u ? ${xb} : `}).join("")+"0;");return wb?Ba.bind(wb):Ba}}},Ub=[{key:"$ref",parse:function(Ba,Za){return Za.get(Ba.$ref)||h.error("Operator not defined: "+Ba.$ref)}},{key:"$key",parse:function(Ba,Za){const wb="k:"+Ba.$key+"_"+!!Ba.$flat;return Za.fn[wb]||(Za.fn[wb]=h.key(Ba.$key,Ba.$flat,Za.expr.codegen))}},{key:"$expr",parse:function(Ba,Za,wb){Ba.$params&&Za.parseParameters(Ba.$params,wb);wb="e:"+Ba.$expr.code;return Za.fn[wb]||(Za.fn[wb]=h.accessor(Za.parameterExpression(Ba.$expr),
Ba.$fields))}},{key:"$field",parse:function(Ba,Za){if(!Ba.$field)return null;const wb="f:"+Ba.$field+"_"+Ba.$name;return Za.fn[wb]||(Za.fn[wb]=h.field(Ba.$field,Ba.$name,Za.expr.codegen))}},{key:"$encode",parse:function(Ba,Za){Ba=Ba.$encode;const wb={};for(const ub in Ba){const sb=Ba[ub];wb[ub]=h.accessor(Za.encodeExpression(sb.$expr),sb.$fields);wb[ub].output=sb.$output}return wb}},{key:"$compare",parse:function(Ba,Za){const wb="c:"+Ba.$compare+"_"+Ba.$order,ub=h.array(Ba.$compare).map(sb=>sb&&sb.$tupleid?
ia.tupleid:sb);return Za.fn[wb]||(Za.fn[wb]=h.compare(ub,Ba.$order,Za.expr.codegen))}},{key:"$context",parse:function(Ba,Za){return Za}},{key:"$subflow",parse:function(Ba,Za){const wb=Ba.$subflow;return function(ub,sb,xb){const ib=Za.fork().parse(wb);ub=ib.get(wb.operators[0].id);(sb=ib.signals.parent)&&sb.set(xb);ub.detachSubflow=()=>Za.detach(ib);return ub}}},{key:"$tupleid",parse:function(){return ia.tupleid}}];const jc={skip:!0};Yb.prototype=ac.prototype={fork(){const Ba=new ac(this);(this.subcontext||
(this.subcontext=[])).push(Ba);return Ba},detach(Ba){this.subcontext=this.subcontext.filter(wb=>wb!==Ba);const Za=Object.keys(Ba.nodes);for(const wb of Za)Ba.nodes[wb]._targets=null;for(const wb of Za)Ba.nodes[wb].detach();Ba.nodes=null},get(Ba){return this.nodes[Ba]},set(Ba,Za){return this.nodes[Ba]=Za},add(Ba,Za){const wb=this,ub=wb.dataflow,sb=Ba.value;wb.set(Ba.id,Za);"collect"===(Ba.type+"").toLowerCase()&&sb&&(sb.$ingest?ub.ingest(Za,sb.$ingest,sb.$format):sb.$request?ub.preload(Za,sb.$request,
sb.$format):ub.pulse(Za,ub.changeset().insert(sb)));Ba.root&&(wb.root=Za);if(Ba.parent){let xb=wb.get(Ba.parent.$ref);xb?(ub.connect(xb,[Za]),Za.targets().add(xb)):(wb.unresolved=wb.unresolved||[]).push(()=>{xb=wb.get(Ba.parent.$ref);ub.connect(xb,[Za]);Za.targets().add(xb)})}Ba.signal&&(wb.signals[Ba.signal]=Za);Ba.scale&&(wb.scales[Ba.scale]=Za);if(Ba.data)for(const xb in Ba.data){const ib=wb.data[xb]||(wb.data[xb]={});Ba.data[xb].forEach(ec=>ib[ec]=Za)}},resolve(){(this.unresolved||[]).forEach(Ba=>
Ba());delete this.unresolved;return this},operator(Ba,Za){this.add(Ba,this.dataflow.add(Ba.value,Za))},transform(Ba,Za){this.add(Ba,this.dataflow.add(this.transforms[(Za+"").toLowerCase()]))},stream(Ba,Za){this.set(Ba.id,Za)},update(Ba,Za,wb,ub,sb){this.dataflow.on(Za,wb,ub,sb,Ba.options)},operatorExpression(Ba){return this.expr.operator(this,Ba)},parameterExpression(Ba){return this.expr.parameter(this,Ba)},eventExpression(Ba){return this.expr.event(this,Ba)},handlerExpression(Ba){return this.expr.handler(this,
Ba)},encodeExpression(Ba){return this.expr.encode(this,Ba)},parse:function(Ba){const Za=this,wb=Ba.operators||[];Ba.background&&(Za.background=Ba.background);Ba.eventConfig&&(Za.eventConfig=Ba.eventConfig);Ba.locale&&(Za.locale=Ba.locale);wb.forEach(ub=>Za.parseOperator(ub));wb.forEach(ub=>Za.parseOperatorParameters(ub));(Ba.streams||[]).forEach(ub=>Za.parseStream(ub));(Ba.updates||[]).forEach(ub=>Za.parseUpdate(ub));return Za.resolve()},parseOperator:function(Ba){"operator"!==(Ba.type+"").toLowerCase()&&
Ba.type?this.transform(Ba,Ba.type):this.operator(Ba,Ba.update?this.operatorExpression(Ba.update):null)},parseOperatorParameters:function(Ba){if(Ba.params){const Za=this.get(Ba.id);Za||h.error("Invalid operator id: "+Ba.id);this.dataflow.connect(Za,Za.parameters(this.parseParameters(Ba.params),Ba.react,Ba.initonly))}},parseParameters:function(Ba,Za){Za=Za||{};const wb=this;for(const ub in Ba){const sb=Ba[ub];Za[ub]=h.isArray(sb)?sb.map(xb=>zb(xb,wb,Za)):zb(sb,wb,Za)}return Za},parseStream:function(Ba){var Za=
this,wb=null!=Ba.filter?Za.eventExpression(Ba.filter):void 0,ub=null!=Ba.stream?Za.get(Ba.stream):void 0;if(Ba.source)ub=Za.events(Ba.source,Ba.type,wb);else if(Ba.merge){var sb=Ba.merge.map(xb=>Za.get(xb));ub=sb[0].merge.apply(sb[0],sb.slice(1))}Ba.between&&(sb=Ba.between.map(xb=>Za.get(xb)),ub=ub.between(sb[0],sb[1]));Ba.filter&&(ub=ub.filter(wb));null!=Ba.throttle&&(ub=ub.throttle(+Ba.throttle));null!=Ba.debounce&&(ub=ub.debounce(+Ba.debounce));null==ub&&h.error("Invalid stream definition: "+JSON.stringify(Ba));
Ba.consume&&ub.consume(!0);Za.stream(Ba,ub)},parseUpdate:function(Ba){var Za=h.isObject(Za=Ba.source)?Za.$ref:Za;Za=this.get(Za);var wb=Ba.update,ub=void 0;Za||h.error("Source not defined: "+Ba.source);var sb=Ba.target&&Ba.target.$expr?this.eventExpression(Ba.target.$expr):this.get(Ba.target);wb&&wb.$expr&&(wb.$params&&(ub=this.parseParameters(wb.$params)),wb=this.handlerExpression(wb.$expr));this.update(Ba,Za,sb,wb,ub)},getState:function(Ba){var Za=this,wb={};if(Ba.signals){var ub=wb.signals={};
Object.keys(Za.signals).forEach(xb=>{const ib=Za.signals[xb];Ba.signals(xb,ib)&&(ub[xb]=ib.value)})}if(Ba.data){var sb=wb.data={};Object.keys(Za.data).forEach(xb=>{const ib=Za.data[xb];Ba.data(xb,ib)&&(sb[xb]=ib.input.value)})}Za.subcontext&&!1!==Ba.recurse&&(wb.subcontext=Za.subcontext.map(xb=>xb.getState(Ba)));return wb},setState:function(Ba){var Za=this,wb=Za.dataflow,ub=Ba.data,sb=Ba.signals;Object.keys(sb||{}).forEach(xb=>{wb.update(Za.signals[xb],sb[xb],jc)});Object.keys(ub||{}).forEach(xb=>
{wb.pulse(Za.data[xb].input,wb.changeset().remove(h.truthy).insert(ub[xb]))});(Ba.subcontext||[]).forEach((xb,ib)=>{(ib=Za.subcontext[ib])&&ib.setState(xb)})}};u.context=function(Ba,Za,wb,ub){return new Yb(Ba,Za,wb,ub)}})};
shadow$provide[50]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(21),ob(29),ob(34),ob(48),ob(49),ob(24)):"function"===typeof define&&define.amd?define("exports vega-util vega-dataflow vega-scenegraph vega-functions vega-runtime vega-format".split(" "),h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega,u.vega,u.vega,u.vega,u.vega))})(this,function(u,h,ia,ab,zb,Yb,ac){function Xb(ma){const Ha=ma.container();Ha&&(Ha.setAttribute("role",
"graphics-document"),Ha.setAttribute("aria-roleDescription","visualization"),mc(Ha,ma.description()))}function mc(ma,Ha){ma&&(null==Ha?ma.removeAttribute("aria-label"):ma.setAttribute("aria-label",Ha))}function Cb(ma){ma.add(null,Ha=>{ma._background=Ha.bg;ma._resize=1;return Ha.bg},{bg:ma._signals.background})}function Ub(ma){const Ha=ma._signals.cursor||(ma._signals.cursor=ma.add({user:"default",item:null}));ma.on(ma.events("view","pointermove"),Ha,(gb,R)=>{const t=(gb=Ha.value)?h.isString(gb)?gb:
gb.user:"default";R=R.item&&R.item.cursor||null;return gb&&t===gb.user&&R==gb.item?gb:{user:t,item:R}});ma.add(null,function(gb){gb=gb.cursor;let R=this.value;h.isString(gb)||(R=gb.item,gb=gb.user);jc(ma,gb&&"default"!==gb?gb:R||gb);return R},{cursor:Ha})}function jc(ma,Ha){if(ma=ma.globalCursor()?"undefined"!==typeof document&&document.body:ma.container())return null==Ha?ma.style.removeProperty("cursor"):ma.style.cursor=Ha}function Ba(ma,Ha){ma=ma._runtime.data;h.hasOwnProperty(ma,Ha)||h.error("Unrecognized data set: "+
Ha);return ma[Ha]}function Za(ma,Ha){ia.isChangeSet(Ha)||h.error("Second argument to changes must be a changeset.");ma=Ba(this,ma);ma.modified=!0;return this.pulse(ma.input,Ha)}function wb(ma){var Ha=ma.padding();return Math.max(0,ma._viewWidth+Ha.left+Ha.right)}function ub(ma){var Ha=ma.padding();return Math.max(0,ma._viewHeight+Ha.top+Ha.bottom)}function sb(ma){var Ha=ma.padding();ma=ma._origin;return[Ha.left+ma[0],Ha.top+ma[1]]}function xb(ma){var Ha=sb(ma),gb=wb(ma),R=ub(ma);ma._renderer.background(ma.background());
ma._renderer.resize(gb,R,Ha);ma._handler.origin(Ha);ma._resizeListeners.forEach(t=>{try{t(gb,R)}catch(ba){ma.error(ba)}})}function ib(ma,Ha,gb){function R(va){var Ca=ba,Sa;if(va)for(Sa=Ha;Sa;Sa=Sa.mark.group)if(Sa.mark.name===va){Ca=Sa;break}return Ca&&Ca.mark&&Ca.mark.interactive?Ca:{}}function t(va){if(!va)return gb;h.isString(va)&&(va=R(va));const Ca=gb.slice();for(;va;)Ca[0]-=va.x||0,Ca[1]-=va.y||0,va=va.mark&&va.mark.group;return Ca}const ba=Ha?"group"===Ha.mark.marktype?Ha:Ha.mark.group:null;
return{view:h.constant(ma),item:h.constant(Ha||{}),group:R,xy:t,x:va=>t(va)[0],y:va=>t(va)[1]}}function ec(ma){ma=h.extend({defaults:{}},ma);const Ha=(gb,R)=>{R.forEach(t=>{h.isArray(gb[t])&&(gb[t]=h.toSet(gb[t]))})};Ha(ma.defaults,["prevent","allow"]);Ha(ma,["view","window","selector"]);return ma}function ra(ma,Ha,gb,R){ma._eventListeners.push({type:gb,sources:h.array(Ha),handler:R})}function fa(ma,Ha,gb){const R=ma._eventConfig&&ma._eventConfig[Ha];return!1===R||h.isObject(R)&&!R[gb]?(ma.warn(`Blocked ${Ha} ${gb} event listener.`),
!1):!0}function xa(ma){return ma.item}function Ra(ma){return ma.item.mark.source}function Va(ma){return function(Ha,gb){return gb.vega.view().changeset().encode(gb.item,ma)}}function Ga(ma,Ha,gb){ma=document.createElement(ma);for(const R in Ha)ma.setAttribute(R,Ha[R]);null!=gb&&(ma.textContent=gb);return ma}function hb(ma,Ha,gb){var R=(Ha-ma)/Math.max(0,gb),t=Math.floor(Math.log10(R));R/=Math.pow(10,t);R=R>=Qb?10:R>=xc?5:R>=ed?2:1;let ba;0>t?(ba=Math.pow(10,-t)/R,t=Math.round(ma*ba),R=Math.round(Ha*
ba),t/ba<ma&&++t,R/ba>Ha&&--R,ba=-ba):(ba=Math.pow(10,t)*R,t=Math.round(ma/ba),R=Math.round(Ha/ba),t*ba<ma&&++t,R*ba>Ha&&--R);return R<t&&.5<=gb&&2>gb?hb(ma,Ha,2*gb):[t,R,ba]}function bb(ma,Ha,gb){return hb(+ma,+Ha,+gb)[2]}function tb(ma,Ha,gb){Ha=+Ha;ma=+ma;gb=+gb;const R=Ha<ma;ma=R?bb(Ha,ma,gb):bb(ma,Ha,gb);return(R?-1:1)*(0>ma?1/-ma:ma)}function Pb(ma,Ha,gb){if(Ha){var R=gb.param,t=gb.state;t||(t=gb.state={elements:null,active:!1,set:null,update:ba=>{ba!=ma.signal(R.signal)&&ma.runAsync(null,()=>
{t.source=!0;ma.signal(R.signal,ba)})}},R.debounce&&(t.update=h.debounce(R.debounce,t.update)));(null==R.input&&R.element?eb:T)(t,Ha,R,ma);t.active||(ma.on(ma._signals[R.signal],null,()=>{t.source?t.source=!1:t.set(ma.signal(R.signal))}),t.active=!0);return t}}function eb(ma,Ha,gb,R){const t=gb.event||"input",ba=()=>ma.update(Ha.value);R.signal(gb.signal,Ha.value);Ha.addEventListener(t,ba);ra(R,Ha,t,ba);ma.set=va=>{Ha.value=va;va=Ha.dispatchEvent;var Ca="undefined"!==typeof Event?new Event(t):{type:t};
va.call(Ha,Ca)}}function T(ma,Ha,gb,R){R=R.signal(gb.signal);const t=Ga("div",{"class":"vega-bind"}),ba="radio"===gb.input?t:t.appendChild(Ga("label"));ba.appendChild(Ga("span",{"class":"vega-bind-name"},gb.name||gb.signal));Ha.appendChild(t);Ha=Z;switch(gb.input){case "checkbox":Ha=ca;break;case "select":Ha=ha;break;case "radio":Ha=La;break;case "range":Ha=na}Ha(ma,ba,gb,R)}function Z(ma,Ha,gb,R){const t=Ga("input");for(const ba in gb)"signal"!==ba&&"element"!==ba&&t.setAttribute("input"===ba?"type":
ba,gb[ba]);t.setAttribute("name",gb.signal);t.value=R;Ha.appendChild(t);t.addEventListener("input",()=>ma.update(t.value));ma.elements=[t];ma.set=ba=>t.value=ba}function ca(ma,Ha,gb,R){gb={type:"checkbox",name:gb.signal};R&&(gb.checked=!0);const t=Ga("input",gb);Ha.appendChild(t);t.addEventListener("change",()=>ma.update(t.checked));ma.elements=[t];ma.set=ba=>t.checked=!!ba||null}function ha(ma,Ha,gb,R){const t=Ga("select",{name:gb.signal}),ba=gb.labels||[];gb.options.forEach((va,Ca)=>{const Sa={value:va};
pa(va,R)&&(Sa.selected=!0);t.appendChild(Ga("option",Sa,(ba[Ca]||va)+""))});Ha.appendChild(t);t.addEventListener("change",()=>{ma.update(gb.options[t.selectedIndex])});ma.elements=[t];ma.set=va=>{for(let Ca=0,Sa=gb.options.length;Ca<Sa;++Ca)if(pa(gb.options[Ca],va)){t.selectedIndex=Ca;break}}}function La(ma,Ha,gb,R){const t=Ga("span",{"class":"vega-bind-radio"}),ba=gb.labels||[];Ha.appendChild(t);ma.elements=gb.options.map((va,Ca)=>{var Sa={type:"radio",name:gb.signal,value:va};pa(va,R)&&(Sa.checked=
!0);Sa=Ga("input",Sa);Sa.addEventListener("change",()=>ma.update(va));Ca=Ga("label",{},(ba[Ca]||va)+"");Ca.prepend(Sa);t.appendChild(Ca);return Sa});ma.set=va=>{const Ca=ma.elements,Sa=Ca.length;for(let kb=0;kb<Sa;++kb)pa(Ca[kb].value,va)&&(Ca[kb].checked=!0)}}function na(ma,Ha,gb,R){R=void 0!==R?R:(+gb.max+ +gb.min)/2;const t=null!=gb.max?gb.max:Math.max(100,+R)||100,ba=gb.min||Math.min(0,t,+R)||0,va=gb.step||tb(ba,t,100),Ca=Ga("input",{type:"range",name:gb.signal,min:ba,max:t,step:va});Ca.value=
R;const Sa=Ga("span",{},+R);Ha.appendChild(Ca);Ha.appendChild(Sa);Ha=()=>{Sa.textContent=Ca.value;ma.update(+Ca.value)};Ca.addEventListener("input",Ha);Ca.addEventListener("change",Ha);ma.elements=[Ca];ma.set=kb=>{Ca.value=kb;Sa.textContent=kb}}function pa(ma,Ha){return ma===Ha||ma+""===Ha+""}function m(ma,Ha,gb,R,t,ba){Ha=Ha||new R(ma.loader());return Ha.initialize(gb,wb(ma),ub(ma),sb(ma),t,ba).background(ma.background())}function E(ma,Ha){return Ha?function(){try{Ha.apply(this,arguments)}catch(gb){ma.error(gb)}}:
null}function L(ma,Ha,gb,R){const t=(new R(ma.loader(),E(ma,ma.tooltip()))).scene(ma.scenegraph().root).initialize(gb,sb(ma),ma);Ha&&Ha.handlers().forEach(ba=>{t.on(ba.type,ba.handler)});return t}function w(ma,Ha,gb){if("string"===typeof Ha)if("undefined"!==typeof document){if(Ha=document.querySelector(Ha),!Ha)return ma.error("Signal bind element not found: "+Ha),null}else return ma.error("DOM document instance not found."),null;if(Ha&&gb)try{Ha.textContent=""}catch(R){Ha=null,ma.error(R)}return Ha}
function Q(ma){h.isObject(ma)?ma={top:+ma.top||0,bottom:+ma.bottom||0,left:+ma.left||0,right:+ma.right||0}:(ma=+ma||0,ma={top:ma,bottom:ma,left:ma,right:ma});return ma}function A(ma,Ha,gb,R){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var t=ab.renderModule(Ha);(t=t&&t.headless)||h.error("Unrecognized renderer type: "+Ha);yield ma.runAsync();return m(ma,null,null,t,gb,R).renderAsync(ma._scenegraph.root)})}function y(ma,Ha,gb){return Yb.context(ma,ia.transforms,zb.functionContext,
gb).parse(Ha)}function N(ma,Ha){var gb=ma.autosize();ma=ma.padding();return Ha-(gb&&"padding"===gb.contains?ma.left+ma.right:0)}function z(ma,Ha){var gb=ma.autosize();ma=ma.padding();return Ha-(gb&&"padding"===gb.contains?ma.top+ma.bottom:0)}function C(ma){function Ha(){ma._autosize=ma._resize=1}var gb=ma._signals,R=gb.width,t=gb.height;gb=gb.padding;ma._resizeWidth=ma.add(null,va=>{ma._width=va.size;ma._viewWidth=N(ma,va.size);Ha()},{size:R});ma._resizeHeight=ma.add(null,va=>{ma._height=va.size;
ma._viewHeight=z(ma,va.size);Ha()},{size:t});const ba=ma.add(null,Ha,{pad:gb});ma._resizeWidth.rank=R.rank+1;ma._resizeHeight.rank=t.rank+1;ba.rank=gb.rank+1}function H(ma,Ha){return Ha.modified&&h.isArray(Ha.input.value)&&!ma.startsWith("_:vega:_")}function V(ma,Ha){return!("parent"===ma||Ha instanceof ia.transforms.proxy)}function Aa(){return ic||(Vc(O),ic=jd.now()+Bc)}function O(){ic=0}function la(){this._call=this._time=this._next=null}function za(){ic=(Zb=jd.now())+Bc;Db=Ua=0;try{Aa();++Db;for(var ma=
Hb,Ha;ma;)0<=(Ha=ic-ma._time)&&ma._call.call(void 0,Ha),ma=ma._next;--Db}finally{Db=0;ma=Hb;for(var gb=Infinity;ma;)if(ma._call){gb>ma._time&&(gb=ma._time);var R=ma;ma=ma._next}else Ha=ma._next,ma._next=null,ma=R?R._next=Ha:Hb=Ha;Nb=R;Pa(gb);ic=0}}function Ma(){var ma=jd.now(),Ha=ma-Zb;1E3<Ha&&(Bc-=Ha,Zb=ma)}function Pa(ma){Db||(Ua&&(Ua=clearTimeout(Ua)),24<ma-ic?(Infinity>ma&&(Ua=setTimeout(za,ma-jd.now()-Bc)),yb&&(yb=clearInterval(yb))):(yb||(Zb=jd.now(),yb=setInterval(Ma,1E3)),Db=1,Vc(za)))}function Ya(ma,
Ha,gb){var R=new la,t=Ha;if(null==Ha)return R.restart(ma,Ha,gb),R;R._restart=R.restart;R.restart=function(ba,va,Ca){va=+va;Ca=null==Ca?Aa():+Ca;R._restart(function Rb(kb){kb+=t;R._restart(Rb,t+=va,Ca);ba(kb)},va,Ca)};R.restart(ma,Ha,gb);return R}function vb(ma,Ha,gb,R){if(ma=ma.element())Ha=ma.setAttribute,R=null==R?"":h.isArray(R)?"["+R.map(Tb).join(", ")+"]":h.isObject(R)&&!h.isDate(R)?jb(R):R+"",Ha.call(ma,"title",R)}function jb(ma){return Object.keys(ma).map(Ha=>{const gb=ma[Ha];return Ha+": "+
(h.isArray(gb)?"["+gb.map(Tb).join(", ")+"]":Tb(gb))}).join("\n")}function Tb(ma){return h.isArray(ma)?"[…]":h.isObject(ma)&&!h.isDate(ma)?"{…}":ma}function W(ma,Ha){Ha=Ha||{};ia.Dataflow.call(this);Ha.loader&&this.loader(Ha.loader);Ha.logger&&this.logger(Ha.logger);null!=Ha.logLevel&&this.logLevel(Ha.logLevel);if(Ha.locale||ma.locale){var gb=h.extend({},ma.locale,Ha.locale);this.locale(ac.locale(gb.number,gb.time))}this._elBind=this._el=null;this._renderType=Ha.renderer||ab.RenderType.Canvas;this._scenegraph=
new ab.Scenegraph;gb=this._scenegraph.root;this._renderer=null;this._tooltip=Ha.tooltip||vb;this._redraw=!0;this._handler=(new ab.CanvasHandler).scene(gb);this._preventDefault=this._globalCursor=!1;this._timers=[];this._eventListeners=[];this._resizeListeners=[];this._eventConfig=ec(ma.eventConfig);this.globalCursor(this._eventConfig.globalCursor);const R=y(this,ma,Ha.expr);this._runtime=R;this._signals=R.signals;this._bind=(ma.bindings||[]).map(t=>({state:null,param:h.extend({},t)}));R.root&&R.root.set(gb);
gb.source=R.data.root.input;this.pulse(R.data.root.input,this.changeset().insert(gb.items));this._width=this.width();this._height=this.height();this._viewWidth=N(this,this._width);this._viewHeight=z(this,this._height);this._origin=[0,0];this._resize=0;this._autosize=1;C(this);Cb(this);Ub(this);this.description(ma.description);Ha.hover&&this.hover();Ha.container&&this.initialize(Ha.container,Ha.bind);Ha.watchPixelRatio&&this._watchPixelRatio()}function Ea(ma,Ha){return h.hasOwnProperty(ma._signals,
Ha)?ma._signals[Ha]:h.error("Unrecognized signal name: "+h.stringValue(Ha))}function Lb(ma,Ha){ma=(ma._targets||[]).filter(gb=>gb._update&&gb._update.handler===Ha);return ma.length?ma[0]:null}function oc(ma,Ha,gb,R){let t=Lb(gb,R);t||(t=E(ma,()=>R(Ha,gb.value)),t.handler=R,ma.on(gb,null,t));return ma}function $b(ma,Ha,gb){(gb=Lb(Ha,gb))&&Ha._targets.remove(gb);return ma}const Mb={trap:!1},Qb=Math.sqrt(50),xc=Math.sqrt(10),ed=Math.sqrt(2);var qa={skip:!0},Db=0,Ua=0,yb=0,Hb,Nb,Zb=0,ic=0,Bc=0,jd="object"===
typeof performance&&performance.now?performance:Date,Vc="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(ma){setTimeout(ma,17)};la.prototype={constructor:la,restart:function(ma,Ha,gb){if("function"!==typeof ma)throw new TypeError("callback is not a function");gb=(null==gb?Aa():+gb)+(null==Ha?0:+Ha);this._next||Nb===this||(Nb?Nb._next=this:Hb=this,Nb=this);this._call=ma;this._time=gb;Pa()},stop:function(){this._call&&(this._call=null,this._time=
Infinity,Pa())}};h.inherits(W,ia.Dataflow,{evaluate(ma,Ha,gb){const R=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){yield ia.Dataflow.prototype.evaluate.call(R,ma,Ha);if(R._redraw||R._resize)try{R._renderer&&(R._resize&&(R._resize=0,xb(R)),yield R._renderer.renderAsync(R._scenegraph.root)),R._redraw=!1}catch(t){R.error(t)}gb&&ia.asyncCallback(R,gb);return R})},dirty(ma){this._redraw=!0;this._renderer&&this._renderer.dirty(ma)},description(ma){if(arguments.length){const Ha=null!=
ma?ma+"":null;Ha!==this._desc&&mc(this._el,this._desc=Ha);return this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(ma,Ha,gb){const R=Ea(this,ma);return 1===arguments.length?R.value:this.update(R,Ha,gb)},width(ma){return arguments.length?this.signal("width",ma):this.signal("width")},height(ma){return arguments.length?this.signal("height",ma):this.signal("height")},padding(ma){return arguments.length?this.signal("padding",
Q(ma)):Q(this.signal("padding"))},autosize(ma){return arguments.length?this.signal("autosize",ma):this.signal("autosize")},background(ma){return arguments.length?this.signal("background",ma):this.signal("background")},renderer(ma){if(!arguments.length)return this._renderType;ab.renderModule(ma)||h.error("Unrecognized renderer type: "+ma);ma!==this._renderType&&(this._renderType=ma,this._resetRenderer());return this},tooltip(ma){if(!arguments.length)return this._tooltip;ma!==this._tooltip&&(this._tooltip=
ma,this._resetRenderer());return this},loader(ma){if(!arguments.length)return this._loader;ma!==this._loader&&(ia.Dataflow.prototype.loader.call(this,ma),this._resetRenderer());return this},resize(){this._autosize=1;return this.touch(Ea(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(ma,Ha,gb,R,t,ba){this.runAfter(va=>{let Ca=0;va._autosize=0;va.width()!==gb&&(Ca=1,va.signal("width",gb,qa),va._resizeWidth.skip(!0));
va.height()!==R&&(Ca=1,va.signal("height",R,qa),va._resizeHeight.skip(!0));va._viewWidth!==ma&&(va._resize=1,va._viewWidth=ma);va._viewHeight!==Ha&&(va._resize=1,va._viewHeight=Ha);if(va._origin[0]!==t[0]||va._origin[1]!==t[1])va._resize=1,va._origin=t;Ca&&va.run("enter");ba&&va.runAfter(Sa=>Sa.resize())},!1,1)},addEventListener(ma,Ha,gb){let R=Ha;gb&&!1===gb.trap||(R=E(this,Ha),R.raw=Ha);this._handler.on(ma,R);return this},removeEventListener(ma,Ha){for(var gb=this._handler.handlers(ma),R=gb.length,
t,ba;0<=--R;)if(ba=gb[R].type,t=gb[R].handler,ma===ba&&(Ha===t||Ha===t.raw)){this._handler.off(ba,t);break}return this},addResizeListener(ma){const Ha=this._resizeListeners;Ha.includes(ma)||Ha.push(ma);return this},removeResizeListener(ma){var Ha=this._resizeListeners;ma=Ha.indexOf(ma);0<=ma&&Ha.splice(ma,1);return this},addSignalListener(ma,Ha){return oc(this,ma,Ea(this,ma),Ha)},removeSignalListener(ma,Ha){return $b(this,Ea(this,ma),Ha)},addDataListener(ma,Ha){return oc(this,ma,Ba(this,ma).values,
Ha)},removeDataListener(ma,Ha){return $b(this,Ba(this,ma).values,Ha)},globalCursor(ma){if(arguments.length){if(this._globalCursor!==!!ma){const Ha=jc(this,null);this._globalCursor=!!ma;Ha&&jc(this,Ha)}return this}return this._globalCursor},preventDefault(ma){return arguments.length?(this._preventDefault=ma,this):this._preventDefault},timer:function(ma,Ha){this._timers.push(Ya(function(gb){ma({timestamp:Date.now(),elapsed:gb})},Ha))},events:function(ma,Ha,gb){var R=this,t=new ia.EventStream(gb);gb=
function(Sa,kb){R.runAsync(null,()=>{var Rb;if(Rb="view"===ma){var Fb=R._eventConfig.defaults;Rb=Fb.prevent;Fb=Fb.allow;Rb=!1===Rb||!0===Fb?!1:!0===Rb||!1===Fb?!0:Rb?Rb[Ha]:Fb?!Fb[Ha]:R.preventDefault()}Rb&&Sa.preventDefault();Rb=t.receive;Fb=(Fb=R._renderer)&&Fb.canvas();if(Fb){var Jb=sb(R);var Cc=Sa.changedTouches?Sa.changedTouches[0]:Sa;Cc=ab.point(Cc,Fb);Cc[0]-=Jb[0];Cc[1]-=Jb[1]}Sa.dataflow=R;Sa.item=kb;Sa.vega=ib(R,kb,Cc);Rb.call(t,Sa)})};var ba;if("timer"===ma)fa(R,"timer",Ha)&&R.timer(gb,
Ha);else if("view"===ma)fa(R,"view",Ha)&&R.addEventListener(Ha,gb,Mb);else if("window"===ma?fa(R,"window",Ha)&&"undefined"!==typeof window&&(ba=[window]):"undefined"!==typeof document&&fa(R,"selector",Ha)&&(ba=Array.from(document.querySelectorAll(ma))),ba){for(var va=0,Ca=ba.length;va<Ca;++va)ba[va].addEventListener(Ha,gb);ra(R,ba,Ha,gb)}else R.warn("Can not resolve event source: "+ma);return t},finalize:function(){var ma=this._tooltip,Ha=this._timers,gb=this._handler.handlers(),R=this._eventListeners,
t;for(t=Ha.length;0<=--t;)Ha[t].stop();for(t=R.length;0<=--t;){var ba=R[t];for(Ha=ba.sources.length;0<=--Ha;)ba.sources[Ha].removeEventListener(ba.type,ba.handler)}ma&&ma.call(this,this._handler,null,null,null);for(t=gb.length;0<=--t;)R=gb[t].type,ma=gb[t].handler,this._handler.off(R,ma);return this},hover:function(ma,Ha){ma=[ma||"hover"];Ha=[Ha||"update",ma[0]];this.on(this.events("view","pointerover",xa),Ra,Va(ma));this.on(this.events("view","pointerout",xa),Ra,Va(Ha));return this},data:function(ma,
Ha){return 2>arguments.length?Ba(this,ma).values.value:Za.call(this,ma,ia.changeset().remove(h.truthy).insert(Ha))},change:Za,insert:function(ma,Ha){return Za.call(this,ma,ia.changeset().insert(Ha))},remove:function(ma,Ha){return Za.call(this,ma,ia.changeset().remove(Ha))},scale:function(ma){var Ha=this._runtime.scales;h.hasOwnProperty(Ha,ma)||h.error("Unrecognized scale or projection: "+ma);return Ha[ma].value},initialize:function(ma,Ha){const gb=this;var R=gb._renderType;const t=gb._eventConfig.bind;
var ba=ab.renderModule(R);ma=gb._el=ma?w(gb,ma,!0):null;Xb(gb);ba||gb.error("Unrecognized renderer type: "+R);R=ba.handler||ab.CanvasHandler;ba=ma?ba.renderer:ba.headless;gb._renderer=ba?m(gb,gb._renderer,ma,ba):null;gb._handler=L(gb,gb._handler,ma,R);gb._redraw=!0;ma&&"none"!==t&&(Ha=Ha?gb._elBind=w(gb,Ha,!0):ma.appendChild(Ga("form",{"class":"vega-bindings"})),gb._bind.forEach(va=>{va.param.element&&"container"!==t&&(va.element=w(gb,va.param.element,!!va.param.input))}),gb._bind.forEach(va=>{Pb(gb,
va.element||Ha,va)}));return gb},toImageURL:function(ma,Ha){const gb=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){ma!==ab.RenderType.Canvas&&ma!==ab.RenderType.SVG&&ma!==ab.RenderType.PNG&&h.error("Unrecognized image type: "+ma);var R=yield A(gb,ma,Ha);ma===ab.RenderType.SVG?(R=R.svg(),R=new Blob([R],{type:"image/svg+xml"}),R=window.URL.createObjectURL(R)):R=R.canvas().toDataURL("image/png");return R})},toCanvas:function(ma,Ha){const gb=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){return(yield A(gb,
ab.RenderType.Canvas,ma,Ha)).canvas()})},toSVG:function(ma){const Ha=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){return(yield A(Ha,ab.RenderType.SVG,ma)).svg()})},getState:function(ma){return this._runtime.getState(ma||{data:H,signals:V,recurse:!0})},setState:function(ma){this.runAsync(null,Ha=>{Ha._trigger=!1;Ha._runtime.setState(ma)},Ha=>{Ha._trigger=!0});return this},_watchPixelRatio:function(){if("canvas"===this.renderer()&&this._renderer._canvas){let ma=null;const Ha=
()=>{null!=ma&&ma();const gb=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);gb.addEventListener("change",Ha);ma=()=>{gb.removeEventListener("change",Ha)};this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1;this._redraw=!0;this._resize=1;this.resize().runAsync()};Ha()}}});u.View=W})};
shadow$provide[51]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa):"function"===typeof define&&define.amd?define(["exports"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={}))})(this,function(u){function h(Cb,Ub,jc,Ba,Za){const wb=Cb.length;let ub=0,sb;for(;Ub<wb;++Ub)if(sb=Cb[Ub],ub||sb!==jc)Za&&0<=Za.indexOf(sb)?--ub:Ba&&0<=Ba.indexOf(sb)&&++ub;else break;return Ub}function ia(Cb){const Ub=[],jc=Cb.length;let Ba=0,Za=0;for(;Za<jc;)Za=
h(Cb,Za,",","[{","]}"),Ub.push(Cb.substring(Ba,Za).trim()),Ba=++Za;if(0===Ub.length)throw"Empty event selector: "+Cb;return Ub}function ab(Cb){if("["===Cb[0]){var Ub=Cb;var jc=Ub.length;Cb=h(Ub,1,"]","[","]");if(Cb===jc)throw"Empty between selector: "+Ub;jc=ia(Ub.substring(1,Cb));if(2!==jc.length)throw"Between selector must have two elements: "+Ub;Ub=Ub.slice(Cb+1).trim();if("\x3e"!==Ub[0])throw"Expected '\x3e' after between selector: "+Ub;jc=jc.map(ab);Ub=ab(Ub.slice(1).trim());Ub.between?Ub={between:jc,
stream:Ub}:Ub.between=jc}else{jc={source:Xb};const Ba=[];let Za=[0,0],wb=0,ub=0,sb=Cb.length,xb=0,ib;if("}"===Cb[sb-1]){xb=Cb.lastIndexOf("{");if(0<=xb){try{Za=zb(Cb.substring(xb+1,sb-1))}catch(ec){throw"Invalid throttle specification: "+Cb;}Cb=Cb.slice(0,xb).trim();sb=Cb.length}else throw"Unmatched right brace: "+Cb;xb=0}if(!sb)throw Cb;"@"===Cb[0]&&(wb=++xb);ib=h(Cb,xb,":");ib<sb&&(Ba.push(Cb.substring(ub,ib).trim()),ub=xb=++ib);xb=h(Cb,xb,"[");if(xb===sb)Ba.push(Cb.substring(ub,sb).trim());else if(Ba.push(Cb.substring(ub,
xb).trim()),Ub=[],ub=++xb,ub===sb)throw"Unmatched left bracket: "+Cb;for(;xb<sb;){xb=h(Cb,xb,"]");if(xb===sb)throw"Unmatched left bracket: "+Cb;Ub.push(Cb.substring(ub,xb).trim());if(xb<sb-1&&"["!==Cb[++xb])throw"Expected left bracket: "+Cb;ub=++xb}if(!(sb=Ba.length)||Yb.test(Ba[sb-1]))throw"Invalid event selector: "+Cb;1<sb?(jc.type=Ba[1],wb?jc.markname=Ba[0].slice(1):mc[Ba[0]]?jc.marktype=Ba[0]:jc.source=Ba[0]):jc.type=Ba[0];"!"===jc.type.slice(-1)&&(jc.consume=!0,jc.type=jc.type.slice(0,-1));null!=
Ub&&(jc.filter=Ub);Za[0]&&(jc.throttle=Za[0]);Za[1]&&(jc.debounce=Za[1]);Ub=jc}return Ub}function zb(Cb){const Ub=Cb.split(",");if(!Cb.length||2<Ub.length)throw Cb;return Ub.map(jc=>{jc=+jc;if(jc!==jc)throw Cb;return jc})}const Yb=/[[\]{}]/,ac={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Xb,mc;u.parseSelector=function(Cb,Ub,jc){Xb=Ub||"view";mc=jc||ac;return ia(Cb.trim()).map(ab)}})};
shadow$provide[52]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(21),ob(48),ob(51),ob(33),ob(29)):"function"===typeof define&&define.amd?define("exports vega-util vega-functions vega-event-selector vega-scale vega-dataflow".split(" "),h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vega={},u.vega,u.vega,u.vega,u.vega,u.vega))})(this,function(u,h,ia,ab,zb,Yb){function ac(l){return h.isObject(l)?l:{type:l||"pad"}}function Xb(l){h.isObject(l)?
l=l.signal?l:{top:+l.top||0,bottom:+l.bottom||0,left:+l.left||0,right:+l.right||0}:(l=+l||0,l={top:l,bottom:l,left:l,right:l});return l}function mc(l,q,J,ja){return null!=J?(h.isObject(J)&&!h.isArray(J)||h.isArray(J)&&J.length&&h.isObject(J[0])?l.update[q]=J:l[ja||"enter"][q]={value:J},1):0}function Cb(l,q,J){for(const ja in q)mc(l,ja,q[ja]);for(const ja in J)mc(l,ja,J[ja],"update")}function Ub(l,q,J){for(const ja in q)J&&h.hasOwnProperty(J,ja)||(l[ja]=h.extend(l[ja]||{},q[ja]));return l}function jc(l,
q){return q&&(q.enter&&q.enter[l]||q.update&&q.update[l])}function Ba(l,q,J,ja,Da){const Qa={},Ia={};let rb,nb;nb="lineBreak";"text"!==q||null==Da[nb]||jc(nb,l)||Za(Qa,nb,Da[nb]);if("legend"==J||String(J).startsWith("axis"))J=null;J="frame"===J?Da.group:"mark"===J?h.extend({},Da.mark,Da[q]):null;for(nb in J)(q=jc(nb,l)||("fill"===nb||"stroke"===nb)&&(jc("fill",l)||jc("stroke",l)))||Za(Qa,nb,J[nb]);h.array(ja).forEach(tc=>{tc=Da.style&&Da.style[tc];for(const wc in tc)jc(wc,l)||Za(Qa,wc,tc[wc])});l=
h.extend({},l);for(nb in Qa)J=Qa[nb],J.signal?(rb=rb||{})[nb]=J:Ia[nb]=J;l.enter=h.extend(Ia,l.enter);rb&&(l.update=h.extend(rb,l.update));return l}function Za(l,q,J){l[q]=J&&J.signal?{signal:J.signal}:{value:J}}function wb(l){if(null!=l.gradient)return ub(l);if(l.signal)var q=`(${l.signal})`;else l.color?(q=l.color,q=q.c?kd("hcl",q.h,q.c,q.l):q.h||q.s?kd("hsl",q.h,q.s,q.l):q.l||q.a?kd("lab",q.l,q.a,q.b):q.r||q.g||q.b?kd("rgb",q.r,q.g,q.b):null):q=null!=l.field?xb(l.field):void 0!==l.value?h.stringValue(l.value):
void 0;if(null!=l.scale){const J=Xc(l.scale);null!=l.range?q=`lerp(_range(${J}), ${+l.range})`:(void 0!==q&&(q=`_scale(${J}, ${q})`),l.band&&(q=(q?q+"+":"")+`_bandwidth(${J})`+(1===+l.band?"":"*"+sb(l.band)),l.extra&&(q=`(datum.extra ? _scale(${J}, datum.extra.value) : ${q})`)),null==q&&(q="0"))}void 0===q&&(q=null);null!=l.exponent&&(q=`pow(${q},${sb(l.exponent)})`);null!=l.mult&&(q+=`*${sb(l.mult)}`);null!=l.offset&&(q+=`+${sb(l.offset)}`);l.round&&(q=`round(${q})`);return q}function ub(l){const q=
[l.start,l.stop,l.count].map(J=>null==J?null:h.stringValue(J));for(;q.length&&null==h.peek(q);)q.pop();q.unshift(Xc(l.gradient));return`gradient(${q.join(",")})`}function sb(l){return h.isObject(l)?"("+wb(l)+")":l}function xb(l){return ib(h.isObject(l)?l:{datum:l})}function ib(l){let q;if(l.signal){q="datum";var J=l.signal}else if(l.group||l.parent){J=Math.max(1,l.level||1);for(q="item";0<J--;)q+=".mark.group";l.parent?(J=l.parent,q+=".datum"):J=l.group}else l.datum?(q="datum",J=l.datum):h.error("Invalid field reference: "+
h.stringValue(l));l.signal||(J=h.isString(J)?h.splitAccessPath(J).map(h.stringValue).join("]["):ib(J));return q+"["+J+"]"}function ec(l){let q="";l.forEach(J=>{const ja=wb(J);q+=J.test?`(${J.test})?${ja}:`:ja});":"===h.peek(q)&&(q+="null");return q}function ra(l,q,J,ja,Da,Qa){const Ia={};Qa=Qa||{};Qa.encoders={$encode:Ia};l=Ba(l,q,J,ja,Da.config);for(const zc in l){J=l[zc];ja=q;var rb=Qa,nb=Da;const yc={},Rc={};for(const fd in J)if(null!=J[fd]){var tc=fa;var wc=J[fd];wc=h.isArray(wc)?ec(wc):wb(wc);
yc[fd]=tc(wc,nb,rb,Rc)}J={$expr:{marktype:ja,channels:yc},$fields:Object.keys(Rc),$output:Object.keys(J)};Ia[zc]=J}return Qa}function fa(l,q,J,ja){l=ia.parseExpression(l,q);l.$fields.forEach(Da=>ja[Da]=1);h.extend(J,l.$params);return l.$expr}function xa(l,q){h.error(l+' for "outer" push: '+h.stringValue(q))}function Ra(l,q){const J=l.name;if("outer"===l.push)q.signals[J]||xa("No prior signal definition",J),pd.forEach(ja=>{void 0!==l[ja]&&xa("Invalid property ",ja)});else{const ja=q.addSignal(J,l.value);
!1===l.react&&(ja.react=!1);l.bind&&q.addBinding(J,l.bind)}}function Va(l,q,J,ja){this.id=-1;this.type=l;this.value=q;this.params=J;ja&&(this.parent=ja)}function Ga(l){const q={$ref:l.id};0>l.id&&(l.refs=l.refs||[]).push(q);return q}function hb(l,q){return q?{$field:l,$name:q}:{$field:l}}function bb(l,q){l={$key:l};q&&(l.$flat=!0);return l}function tb(l,q){return(l&&l.signal?"$"+l.signal:l||"")+(l&&q?"_":"")+(q&&q.signal?"$"+q.signal:q||"")}function Pb(l){return l&&l.signal}function eb(l){if(Pb(l))return!0;
if(h.isObject(l))for(const q in l)if(eb(l[q]))return!0;return!1}function T(l,q){return null!=l?l:q}function Z(l){return l&&l.signal||l}function ca(l,q){return(l.merge?ha:l.stream?La:l.type?na:h.error("Invalid stream specification: "+h.stringValue(l)))(l,q)}function ha(l,q){const J=l.merge.map(ja=>ca(ja,q));l=pa({merge:J},l,q);return q.addStream(l).id}function La(l,q){const J=ca(l.stream,q);l=pa({stream:J},l,q);return q.addStream(l).id}function na(l,q){if("timer"===l.type){var J=q.event("timer",l.throttle);
l={between:l.between,filter:l.filter}}else J=l.source,J=q.event.call(q,"scope"===J?"view":J||"view",l.type);l=pa({stream:J},l,q);return 1===Object.keys(l).length?J:q.addStream(l).id}function pa(l,q,J){let ja=q.between;ja&&(2!==ja.length&&h.error('Stream "between" parameter must have 2 entries: '+h.stringValue(q)),l.between=[ca(ja[0],J),ca(ja[1],J)]);ja=q.filter?[].concat(q.filter):[];if(q.marktype||q.markname||q.markrole){var Da=ja,Qa=q.marktype,Ia=q.markname,rb=q.markrole;Da.push.call(Da,"event.item"+
(Qa&&"*"!==Qa?"\x26\x26event.item.mark.marktype\x3d\x3d\x3d'"+Qa+"'":"")+(rb?"\x26\x26event.item.mark.role\x3d\x3d\x3d'"+rb+"'":"")+(Ia?"\x26\x26event.item.mark.name\x3d\x3d\x3d'"+Ia+"'":""))}"scope"===q.source&&ja.push("inScope(event.item)");ja.length&&(l.filter=ia.parseExpression("("+ja.join(")\x26\x26(")+")",J).$expr);null!=(ja=q.throttle)&&(l.throttle=+ja);null!=(ja=q.debounce)&&(l.debounce=+ja);q.consume&&(l.consume=!0);return l}function m(l,q,J){const ja=l.encode,Da={target:J};J=l.events;let Qa=
l.update,Ia=[];J||h.error("Signal update missing events specification.");h.isString(J)&&(J=ab.parseSelector(J,q.isSubscope()?"scope":"view"));J=h.array(J).filter(rb=>rb.signal||rb.scale?(Ia.push(rb),0):1);1<Ia.length&&(Ia=[E(Ia)]);J.length&&Ia.push(1<J.length?{merge:J}:J[0]);null!=ja&&(Qa&&h.error("Signal encode and update are mutually exclusive."),Qa="encode(item(),"+h.stringValue(ja)+")");Da.update=h.isString(Qa)?ia.parseExpression(Qa,q):null!=Qa.expr?ia.parseExpression(Qa.expr,q):null!=Qa.value?
Qa.value:null!=Qa.signal?{$expr:nd,$params:{$value:q.signalRef(Qa.signal)}}:h.error("Invalid signal update specification.");l.force&&(Da.options={force:!0});Ia.forEach(rb=>{var nb=q.addUpdate,tc=h.extend;rb={source:rb.signal?q.signalRef(rb.signal):rb.scale?q.scaleRef(rb.scale):ca(rb,q)};return nb.call(q,tc.call(h,rb,Da))})}function E(l){return{signal:"["+l.map(q=>q.scale?'scale("'+q.scale+'")':q.signal)+"]"}}function L(l,q){const J=q.getSignal(l.name);let ja=l.update;l.init&&(ja?h.error("Signals can not include both init and update expressions."):
(ja=l.init,J.initonly=!0));ja&&(ja=ia.parseExpression(ja,q),J.update=ja.$expr,J.params=ja.$params);l.on&&l.on.forEach(Da=>m(Da,q,J.id))}function w(l,q){return h.isObject(l)?l.signal?q.signalRef(l.signal):h.error("Unsupported object: "+h.stringValue(l)):l}function Q(l,q){return l.signal?q.signalRef(l.signal):l.map(J=>w(J,q))}function A(l){h.error("Can not find data set: "+h.stringValue(l))}function y(l,q,J){if(l)return l.signal?J.signalRef(l.signal):(h.isArray(l)?N:l.fields?C:z)(l,q,J);null==q.domainMin&&
null==q.domainMax||h.error("No scale domain defined for domainMin/domainMax to override.")}function N(l,q,J){return l.map(ja=>w(ja,J))}function z(l,q,J){const ja=J.getData(l.data);ja||A(l.data);return zb.isDiscrete(q.type)?ja.valuesRef(J,l.field,V(l.sort,!1)):zb.isQuantile(q.type)?ja.domainRef(J,l.field):ja.extentRef(J,l.field)}function C(l,q,J){const ja=l.data,Da=l.fields.reduce((Qa,Ia)=>{if(h.isString(Ia))Ia={data:ja,field:Ia};else if(h.isArray(Ia)||Ia.signal){var rb=Ia;Ia="_:vega:_"+Jc++;const nb=
Ie({});h.isArray(rb)?nb.value={$ingest:rb}:rb.signal&&(rb="setdata("+h.stringValue(Ia)+","+rb.signal+")",nb.params.input=J.signalRef(rb));J.addDataPipeline(Ia,[nb,cc({})]);Ia={data:Ia,field:"data"}}Qa.push(Ia);return Qa},[]);return(zb.isDiscrete(q.type)?H:zb.isQuantile(q.type)?Aa:O)(l,J,Da)}function H(l,q,J){const ja=V(l.sort,!0);l=J.map(Qa=>{const Ia=q.getData(Qa.data);Ia||A(Qa.data);return Ia.countsRef(q,Qa.field,ja)});const Da={groupby:xd,pulse:l};ja&&(l=ja.op||"count",J=ja.field?tb(l,ja.field):
"count",Da.ops=[Yc[l]],Da.fields=[q.fieldRef(J)],Da.as=[J]);l=q.add(me(Da));l=q.add(Ie({pulse:Ga(l)}));J=q.add(Hc({field:xd,sort:q.sortRef(ja),pulse:Ga(l)}));return Ga(J)}function V(l,q){l&&(l.field||l.op?l.field||"count"===l.op?q&&l.field&&l.op&&!Yc[l.op]&&h.error("Multiple domain scales can not be sorted using "+l.op):h.error("No field provided for sort aggregate op: "+l.op):h.isObject(l)?l.field="key":l={field:"key"});return l}function Aa(l,q,J){l=J.map(ja=>{const Da=q.getData(ja.data);Da||A(ja.data);
return Da.domainRef(q,ja.field)});return Ga(q.add(ad({values:l})))}function O(l,q,J){l=J.map(ja=>{const Da=q.getData(ja.data);Da||A(ja.data);return Da.extentRef(q,ja.field)});return Ga(q.add(ld({extents:l})))}function la(l,q,J){const ja=q.config.range;let Da=l.range;if(Da.signal)return q.signalRef(Da.signal);if(h.isString(Da)){if(ja&&h.hasOwnProperty(ja,Da))return l=h.extend({},l,{range:ja[Da]}),la(l,q,J);"width"===Da?Da=[0,{signal:"width"}]:"height"===Da?Da=zb.isDiscrete(l.type)?[0,{signal:"height"}]:
[{signal:"height"},0]:h.error("Unrecognized scale range value: "+h.stringValue(Da))}else{if(Da.scheme){J.scheme=h.isArray(Da.scheme)?Q(Da.scheme,q):w(Da.scheme,q);Da.extent&&(J.schemeExtent=Q(Da.extent,q));Da.count&&(J.schemeCount=w(Da.count,q));return}if(Da.step){J.rangeStep=w(Da.step,q);return}if(zb.isDiscrete(l.type)&&!h.isArray(Da))return y(Da,l,q);h.isArray(Da)||h.error("Unsupported range type: "+h.stringValue(Da))}return Da.map(Qa=>(h.isArray(Qa)?Q:w)(Qa,q))}function za(l,q,J){return h.isArray(l)?
l.map(ja=>za(ja,q,J)):h.isObject(l)?l.signal?J.signalRef(l.signal):"fit"===q?l:h.error("Unsupported parameter object: "+h.stringValue(l)):l}function Ma(l){l.type="group";l.interactive=l.interactive||!1;return l}function Pa(l,q){const J=(ja,Da)=>T(l[ja],T(q[ja],Da));J.isVertical=ja=>"vertical"===T(l.direction,q.direction||(ja?q.symbolDirection:q.gradientDirection));J.gradientLength=()=>T(l.gradientLength,q.gradientLength||q.gradientWidth);J.gradientThickness=()=>T(l.gradientThickness,q.gradientThickness||
q.gradientHeight);J.entryColumns=()=>T(l.columns,T(q.columns,+J.isVertical(!0)));return J}function Ya(l,q){return(l=q&&(q.update&&q.update[l]||q.enter&&q.enter[l]))&&l.signal?l:l?l.value:null}function vb(l,q,J){return`item.anchor === '${"start"}' ? ${l} : item.anchor === '${"end"}' ? ${q} : ${J}`}function jb(l,q){return q?l?h.isObject(l)?Object.assign({},l,{offset:jb(l.offset,q)}):{value:l,offset:q}:q:l}function Tb(l,q){q?(l.name=q.name,l.style=q.style||l.style,l.interactive=!!q.interactive,l.encode=
Ub(l.encode,q,qd)):l.interactive=!1;return l}function W(l,q,J,ja){l=Pa(l,J);J=l.isVertical();var Da=l.gradientThickness();const Qa=l.gradientLength();let Ia,rb,nb;J?(J=[0,1],rb=[0,0],nb=Da,Da=Qa):(J=[0,0],rb=[1,0],nb=Qa);Da={enter:Ia={opacity:bd,x:bd,y:bd,width:Ac(nb),height:Ac(Da)},update:h.extend({},Ia,{opacity:fe,fill:{gradient:q,start:J,stop:rb}}),exit:{opacity:bd}};Cb(Da,{stroke:l("gradientStrokeColor"),strokeWidth:l("gradientStrokeWidth")},{opacity:l("gradientOpacity")});return Tb({type:"rect",
role:"legend-gradient",encode:Da},ja)}function Ea(l,q,J,ja,Da){l=Pa(l,J);const Qa=l.isVertical();J=l.gradientThickness();const Ia=l.gradientLength();var rb;let nb,tc,wc,zc="";Qa?(rb="y",tc="y2",nb="x",wc="width",zc="1-"):(rb="x",tc="x2",nb="y",wc="height");q={opacity:bd,fill:{scale:q,field:"value"}};q[rb]={signal:zc+"datum.perc",mult:Ia};q[nb]=bd;q[tc]={signal:zc+"datum.perc2",mult:Ia};q[wc]=Ac(J);rb={enter:q,update:h.extend({},q,{opacity:fe}),exit:{opacity:bd}};Cb(rb,{stroke:l("gradientStrokeColor"),
strokeWidth:l("gradientStrokeWidth")},{opacity:l("gradientOpacity")});return Tb({type:"rect",role:"legend-band",key:"value",from:Da,encode:rb},ja)}function Lb(l,q,J,ja){const Da=Pa(l,q);var Qa=Da.isVertical();const Ia=Ac(Da.gradientThickness()),rb=Da.gradientLength();let nb=Da("labelOverlap"),tc,wc,zc,yc="";const Rc={enter:tc={opacity:bd},update:wc={opacity:fe,text:{field:"label"}},exit:{opacity:bd}};Cb(Rc,{fill:Da("labelColor"),fillOpacity:Da("labelOpacity"),font:Da("labelFont"),fontSize:Da("labelFontSize"),
fontStyle:Da("labelFontStyle"),fontWeight:Da("labelFontWeight"),limit:T(l.labelLimit,q.gradientLabelLimit)});Qa?(tc.align={value:"left"},tc.baseline=wc.baseline={signal:'datum.perc\x3c\x3d0?"bottom":datum.perc\x3e\x3d1?"top":"middle"'},Qa="y",zc="x",yc="1-"):(tc.align=wc.align={signal:'datum.perc\x3c\x3d0?"left":datum.perc\x3e\x3d1?"right":"center"'},tc.baseline={value:"top"},Qa="x",zc="y");tc[Qa]=wc[Qa]={signal:yc+"datum.perc",mult:rb};tc[zc]=wc[zc]=Ia;Ia.offset=T(l.labelOffset,q.gradientLabelOffset)||
0;nb=nb?{separation:Da("labelSeparation"),method:nb,order:"datum.index"}:void 0;return Tb({type:"text",role:"legend-label",style:"guide-label",key:"value",from:ja,encode:Rc,overlap:nb},J)}function oc(l,q,J,ja,Da){var Qa=Pa(l,q);const Ia=J.entries,rb=!(!Ia||!Ia.interactive),nb=Ia?Ia.name:void 0,tc=Qa("clipHeight"),wc=Qa("symbolOffset"),zc={data:"value"},yc=`(${Da}) ? datum.${"offset"} : datum.${"size"}`,Rc=tc?Ac(tc):{field:"size"},fd=`max(1, ${Da})`;let Td,Ad;Rc.mult=.5;var Ld={enter:Td={opacity:bd,
x:{signal:yc,mult:.5,offset:wc},y:Rc},update:Ad={opacity:fe,x:Td.x,y:Td.y},exit:{opacity:bd}};let Ud=null,qc=null;l.fill||(Ud=q.symbolBaseFillColor,qc=q.symbolBaseStrokeColor);Cb(Ld,{fill:Qa("symbolFillColor",Ud),shape:Qa("symbolType"),size:Qa("symbolSize"),stroke:Qa("symbolStrokeColor",qc),strokeDash:Qa("symbolDash"),strokeDashOffset:Qa("symbolDashOffset"),strokeWidth:Qa("symbolStrokeWidth")},{opacity:Qa("symbolOpacity")});Tc.forEach(Fd=>{l[Fd]&&(Ad[Fd]=Td[Fd]={scale:l[Fd],field:"value"})});q=Tb({type:"symbol",
role:"legend-symbol",key:"value",from:zc,clip:tc?!0:void 0,encode:Ld},J.symbols);Ld=Ac(wc);Ld.offset=Qa("labelOffset");Ld={enter:Td={opacity:bd,x:{signal:yc,offset:Ld},y:Rc},update:Ad={opacity:fe,text:{field:"label"},x:Td.x,y:Td.y},exit:{opacity:bd}};Cb(Ld,{align:Qa("labelAlign"),baseline:Qa("labelBaseline"),fill:Qa("labelColor"),fillOpacity:Qa("labelOpacity"),font:Qa("labelFont"),fontSize:Qa("labelFontSize"),fontStyle:Qa("labelFontStyle"),fontWeight:Qa("labelFontWeight"),limit:Qa("labelLimit")});
J=Tb({type:"text",role:"legend-label",style:"guide-label",key:"value",from:zc,encode:Ld},J.labels);Ld={enter:{noBound:{value:!tc},width:bd,height:tc?Ac(tc):bd,opacity:bd},exit:{opacity:bd},update:Ad={opacity:fe,row:{signal:null},column:{signal:null}}};Qa.isVertical(!0)?(Qa=`ceil(item.mark.items.length / ${fd})`,Ad.row.signal=`${"datum.index"}%${Qa}`,Ad.column.signal=`floor(${"datum.index"} / ${Qa})`,Qa={field:["row","datum.index"]}):(Ad.row.signal=`floor(${"datum.index"} / ${fd})`,Ad.column.signal=
`${"datum.index"} % ${fd}`,Qa={field:"datum.index"});Ad.column.signal=`(${Da})?${Ad.column.signal}:${"datum.index"}`;ja={facet:{data:ja,name:"value",groupby:"index"}};return Ma({role:"scope",from:ja,encode:Ub(Ld,Ia,qd),marks:[q,J],name:nb,interactive:rb,sort:Qa})}function $b(l,q){l=Pa(l,q);return{align:l("gridAlign"),columns:l.entryColumns(),center:{row:!0,column:!1},padding:{row:l("rowPadding"),column:l("columnPadding")}}}function Mb(l,q,J,ja){q=Pa(l,q);const Da={enter:{opacity:bd},update:{opacity:fe,
x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:bd}};Cb(Da,{orient:q("titleOrient"),_anchor:q("titleAnchor"),anchor:{signal:'item._anchor || ((item.orient \x3d\x3d\x3d "left" || item.orient \x3d\x3d\x3d "right") ? "middle" : "start")'},angle:{signal:'datum.vgrad \x26\x26 (item.orient \x3d\x3d\x3d "left" || item.orient \x3d\x3d\x3d "right") ? (item.orient \x3d\x3d\x3d "left" ? -90 : 90) : 0'},align:{signal:ne},baseline:{signal:Ye},text:l.title,fill:q("titleColor"),fillOpacity:q("titleOpacity"),
font:q("titleFont"),fontSize:q("titleFontSize"),fontStyle:q("titleFontStyle"),fontWeight:q("titleFontWeight"),limit:q("titleLimit"),lineHeight:q("titleLineHeight")},{align:q("titleAlign"),baseline:q("titleBaseline")});return Tb({type:"text",role:"legend-title",style:"guide-title",from:ja,encode:Da},J)}function Qb(l,q){let J;h.isObject(l)&&(l.signal?J=l.signal:l.path?J="pathShape("+xc(l.path)+")":l.sphere&&(J="geoShape("+xc(l.sphere)+', {type: "Sphere"})'));return J?q.signalRef(J):!!l}function xc(l){return h.isObject(l)&&
l.signal?l.signal:h.stringValue(l)}function ed(l){const q=l.role||"";return q.startsWith("axis")||q.startsWith("legend")||q.startsWith("title")?q:"group"===l.type?"scope":q||"mark"}function qa(l){return{marktype:l.type,name:l.name||void 0,role:l.role||ed(l),zindex:+l.zindex||void 0,aria:l.aria,description:l.description}}function Db(l,q){return l&&l.signal?q.signalRef(l.signal):!1===l?!1:!0}function Ua(l,q){const J=Yb.definition(l.type);J||h.error("Unrecognized transform type: "+h.stringValue(l.type));
var ja=J.type.toLowerCase();var Da=yb(J,l,q);ja=new Va(ja,null,Da,void 0);l.signal&&q.addSignal(l.signal,q.proxy(ja));ja.metadata=J.metadata||{};return ja}function yb(l,q,J){const ja={},Da=l.params.length;for(let Qa=0;Qa<Da;++Qa){const Ia=l.params[Qa];ja[Ia.name]=Hb(Ia,q,J)}return ja}function Hb(l,q,J){const ja=l.type,Da=q[l.name];if("index"===ja)return Zb(l,q,J);if(void 0===Da)l.required&&h.error("Missing required "+h.stringValue(q.type)+" parameter: "+h.stringValue(l.name));else return"param"===
ja?ic(l,q,J):"projection"===ja?J.projectionRef(q[l.name]):l.array&&!Pb(Da)?Da.map(Qa=>Nb(l,Qa,J)):Nb(l,Da,J)}function Nb(l,q,J){const ja=l.type;return Pb(q)?"expr"===ja?h.error("Expression references can not be signals."):"field"===ja?J.fieldRef(q):"compare"===ja?J.compareRef(q):J.signalRef(q.signal):(l=l.expr||"field"===ja)&&q&&q.expr?J.exprRef(q.expr,q.as):l&&q&&q.field?hb(q.field,q.as):"expr"===ja?ia.parseExpression(q,J):"data"===ja?Ga(J.getData(q).values):"field"===ja?hb(q):"compare"===ja?J.compareRef(q):
q}function Zb(l,q,J){h.isString(q.from)||h.error('Lookup "from" parameter must be a string literal.');return J.getData(q.from).lookupRef(J,q.key)}function ic(l,q,J){q=q[l.name];return l.array?(h.isArray(q)||h.error("Expected an array of sub-parameters. Instead: "+h.stringValue(q)),q.map(ja=>Bc(l,ja,J))):Bc(l,q,J)}function Bc(l,q,J){const ja=l.params.length;let Da;for(let Qa=0;Qa<ja;++Qa){Da=l.params[Qa];for(const Ia in Da.key)if(Da.key[Ia]!==q[Ia]){Da=null;break}if(Da)break}Da||h.error("Unsupported parameter: "+
h.stringValue(q));l=h.extend(yb(Da,q,J),Da.key);return Ga(J.add(Nd(l)))}function jd(l,q,J){let ja,Da,Qa,Ia;if(!l)Qa=Ga(J.add(Ie(null,[{}])));else if(ja=l.facet)q||h.error("Only group marks can be faceted."),null!=ja.field?Qa=Ia=Vc(ja,J):(l.data?Ia=Ga(J.getData(l.data).aggregate):(q=Ua(h.extend({type:"aggregate",groupby:h.array(ja.groupby)},ja.aggregate),J),q.params.key=J.keyRef(ja.groupby),q.params.pulse=Vc(ja,J),Qa=Ia=Ga(J.add(q))),Da=J.keyRef(ja.groupby,!0));Qa||(Qa=Vc(l,J));return{key:Da,pulse:Qa,
parent:Ia}}function Vc(l,q){return l.$ref?l:l.data&&l.data.$ref?l.data:Ga(q.getData(l.data).output)}function ma(l,q,J,ja,Da){this.scope=l;this.input=q;this.output=J;this.values=ja;this.aggregate=Da;this.index={}}function Ha(l){return h.isString(l)?l:null}function gb(l,q,J){const ja=tb(J.op,J.field);let Da;if(q.ops)for(let Qa=0,Ia=q.as.length;Qa<Ia;++Qa){if(q.as[Qa]===ja)return}else q.ops=["count"],q.fields=[null],q.as=["count"];J.op&&(q.ops.push((Da=J.op.signal)?l.signalRef(Da):J.op),q.fields.push(l.fieldRef(J.field)),
q.as.push(ja))}function R(l,q,J,ja,Da,Qa,Ia){J=q[J]||(q[J]={});var rb=h.isObject(Qa)?("descending"===Qa.order?"-":"+")+tb(Qa.op,Qa.field):"";let nb=Ha(Da);if(null!=nb){l=q.scope;nb+=rb?"|"+rb:"";var tc=J[nb]}tc||(tc=Qa?{field:xd,pulse:q.countsRef(l,Da,Qa)}:{field:l.fieldRef(Da),pulse:Ga(q.output)},rb&&(tc.sort=l.sortRef(Qa)),l=l.add(new Va(ja,void 0,tc,void 0)),Ia&&(q.index[Da]=l),tc=Ga(l),null!=nb&&(J[nb]=tc));return tc}function t(l,q,J){var ja=l.from.facet;const Da=ja.name,Qa=Vc(ja,q);let Ia;ja.name||
h.error("Facet must have a name: "+h.stringValue(ja));ja.data||h.error("Facet must reference a data set: "+h.stringValue(ja));ja.field?Ia=q.add(ce({field:q.fieldRef(ja.field),pulse:Qa})):ja.groupby?Ia=q.add(Fa({key:q.keyRef(ja.groupby),group:Ga(q.proxy(J.parent)),pulse:Qa})):h.error("Facet must specify groupby or field: "+h.stringValue(ja));q=q.fork();J=q.add(Ie());ja=q.add(cc({pulse:Ga(J)}));q.addData(Da,new ma(q,J,J,ja));q.addSignal("parent",null);Ia.params.subflow={$subflow:q.parse(l).toRuntime()}}
function ba(l,q,J){J=q.add(ce({pulse:J.pulse}));q=q.fork();q.add(cc());q.addSignal("parent",null);J.params.subflow={$subflow:q.parse(l).toRuntime()}}function va(l,q,J){const ja=l.remove,Da=l.insert,Qa=l.toggle,Ia=l.modify,rb=l.values,nb=q.add(new Va("operator",void 0,void 0,void 0));l="if("+l.trigger+',modify("'+J+'",'+[Da,ja,Qa,Ia,rb].map(tc=>null==tc?"null":tc).join(",")+"),0)";q=ia.parseExpression(l,q);nb.update=q.$expr;nb.params=q.$params}function Ca(l,q){var J=ed(l),ja="group"===l.type,Da=l.from&&
l.from.facet;const Qa=l.overlap;let Ia=l.layout||"scope"===J||"frame"===J,rb,nb,tc,wc,zc,yc;const Rc="mark"===J||Ia||Da,fd=jd(l.from,ja,q);nb=q.add(bf({key:fd.key||(l.key?hb(l.key):void 0),pulse:fd.pulse,clean:!ja}));const Td=Ga(nb);nb=tc=q.add(Ie({pulse:Td}));nb=q.add(Ec({markdef:qa(l),interactive:Db(l.interactive,q),clip:Qb(l.clip,q),context:{$context:!0},groups:q.lookup(),parent:q.signals.parent?q.signalRef("parent"):null,index:q.markpath(),pulse:Ga(nb)}));var Ad=Ga(nb);nb=wc=q.add(F(ra(l.encode,
l.type,J,l.style,q,{mod:!1,pulse:Ad})));nb.params.parent=q.encode();l.transform&&l.transform.forEach(Ud=>{Ud=Ua(Ud,q);const qc=Ud.metadata;(qc.generates||qc.changes)&&h.error("Mark transforms should not generate new data.");qc.nomod||(wc.params.mod=!0);Ud.params.pulse=Ga(nb);q.add(nb=Ud)});l.sort&&(nb=q.add(id({sort:q.compareRef(l.sort),pulse:Ga(nb)})));J=Ga(nb);if(Da||Ia)Ia=q.add(vc({layout:q.objectProperty(l.layout),legends:q.legends,mark:Ad,pulse:J})),yc=Ga(Ia);const Ld=q.add(He({mark:Ad,pulse:yc||
J}));Ad=Ga(Ld);ja&&(Rc&&(rb=q.operators,rb.pop(),Ia&&rb.pop()),q.pushState(J,yc||Ad,Td),Da?t(l,q,fd):Rc?ba(l,q,fd):q.parse(l),q.popState(),Rc&&(Ia&&rb.push(Ia),rb.push(Ld)));Qa&&(Ad=Sa(Qa,Ad,q));ja=q.add(ya({pulse:Ad}));Da=q.add(cc({pulse:Ga(ja)},void 0,q.parent()));null!=l.name&&(zc=l.name,q.addData(zc,new ma(q,tc,ja,Da)),l.on&&l.on.forEach(Ud=>{(Ud.insert||Ud.remove||Ud.toggle)&&h.error("Marks only support modify triggers.");va(Ud,q,zc)}))}function Sa(l,q,J){const ja=l.method,Da=l.bound,Qa=l.separation;
q={separation:Pb(Qa)?J.signalRef(Qa.signal):Qa,method:Pb(ja)?J.signalRef(ja.signal):ja,pulse:q};l.order&&(q.sort=J.compareRef({field:l.order}));Da&&(l=Da.tolerance,q.boundTolerance=Pb(l)?J.signalRef(l.signal):+l,q.boundScale=J.scaleRef(Da.scale),q.boundOrient=Da.orient);return Ga(J.add(Oc(q)))}function kb(l,q){const J=q.config.legend,ja=l.encode||{},Da=Pa(l,J),Qa=ja.legend||{},Ia=Qa.name||void 0,rb=Qa.interactive,nb=Qa.style,tc={};let wc=0,zc,yc;Tc.forEach(Ld=>l[Ld]?(tc[Ld]=l[Ld],wc=wc||l[Ld]):0);
wc||h.error("Missing valid scale for legend.");var Rc=Rb(l,q.scaleType(wc));const fd={title:null!=l.title,scales:tc,type:Rc,vgrad:"symbol"!==Rc&&Da.isVertical()},Td=Ga(q.add(Ie(null,[fd]))),Ad=Ga(q.add(pc(yc={type:Rc,scale:q.scaleRef(wc),count:q.objectProperty(Da("tickCount")),limit:q.property(Da("symbolLimit")),values:q.objectProperty(l.values),minstep:q.property(l.tickMinStep),formatType:q.property(l.formatType),formatSpecifier:q.property(l.format)})));"gradient"===Rc?(Rc=[W(l,wc,J,ja.gradient),
Lb(l,J,ja.labels,Ad)],yc.count=yc.count||q.signalRef(`max(2,2*floor((${Z(Da.gradientLength())})/100))`)):"discrete"===Rc?Rc=[Ea(l,wc,J,ja.gradient,Ad),Lb(l,J,ja.labels,Ad)]:(zc=$b(l,J),Rc=[oc(l,J,ja,Ad,Z(zc.columns))],yc.size=Cc(l,q,Rc[0].marks));Rc=[Ma({role:"legend-entry",from:Td,encode:{enter:{x:{value:0},y:{value:0}}},marks:Rc,layout:zc,interactive:rb})];fd.title&&Rc.push(Mb(l,J,ja.title,Td));return Ca(Ma({role:"legend",from:Td,encode:Ub(Jb(Da,l,J),Qa,qd),marks:Rc,aria:Da("aria"),description:Da("description"),
zindex:Da("zindex"),name:Ia,interactive:rb,style:nb}),q)}function Rb(l,q){let J=l.type||"symbol";l.type||1!==Fb(l)||!l.fill&&!l.stroke||(J=zb.isContinuous(q)?"gradient":zb.isDiscretizing(q)?"discrete":"symbol");return"gradient"!==J?J:zb.isDiscretizing(q)?"discrete":"gradient"}function Fb(l){return Tc.reduce((q,J)=>q+(l[J]?1:0),0)}function Jb(l,q,J){const ja={enter:{},update:{}};Cb(ja,{orient:l("orient"),offset:l("offset"),padding:l("padding"),titlePadding:l("titlePadding"),cornerRadius:l("cornerRadius"),
fill:l("fillColor"),stroke:l("strokeColor"),strokeWidth:J.strokeWidth,strokeDash:J.strokeDash,x:l("legendX"),y:l("legendY"),format:q.format,formatType:q.formatType});return ja}function Cc(l,q,J){const ja=Z(Gc("size",l,J));l=Z(Gc("strokeWidth",l,J));(J=Ya("fontSize",J[1].encode))||(J=(J=q.config.style["guide-label"])&&J.fontSize);J=Z(J);return ia.parseExpression(`max(ceil(sqrt(${ja})+${l}),${J})`,q)}function Gc(l,q,J){return q[l]?`scale("${q[l]}",datum)`:Ya(l,J[0].encode)}function Sc(l,q){l=h.isString(l)?
{text:l}:l;const J=Pa(l,q.config.title);var ja=l.encode||{},Da=ja.group||{};const Qa=Da.name||void 0,Ia=Da.interactive,rb=Da.style,nb=[],tc=Ga(q.add(Ie(null,[{}])));var wc=nb.push,zc=l;var yc=(yc=l.encode)&&yc.title||h.extend({name:l.name,interactive:l.interactive,style:l.style},yc);var Rc={value:0};Rc={enter:{opacity:Rc},update:{opacity:{value:1}},exit:{opacity:Rc}};Cb(Rc,{text:zc.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},
baseline:"top",dx:J("dx"),dy:J("dy"),fill:J("color"),font:J("font"),fontSize:J("fontSize"),fontStyle:J("fontStyle"),fontWeight:J("fontWeight"),lineHeight:J("lineHeight")},{align:J("align"),angle:J("angle"),baseline:J("baseline")});zc=Tb({type:"text",role:"title-text",style:"group-title",from:tc,encode:Rc},yc);wc.call(nb,zc);l.subtitle&&(wc=nb.push,ja=ja.subtitle,zc={value:0},zc={enter:{opacity:zc},update:{opacity:{value:1}},exit:{opacity:zc}},Cb(zc,{text:l.subtitle,align:{signal:"item.mark.group.align"},
angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:J("dx"),dy:J("dy"),fill:J("subtitleColor"),font:J("subtitleFont"),fontSize:J("subtitleFontSize"),fontStyle:J("subtitleFontStyle"),fontWeight:J("subtitleFontWeight"),lineHeight:J("subtitleLineHeight")},{align:J("align"),angle:J("angle"),baseline:J("baseline")}),l=Tb({type:"text",role:"title-subtitle",style:"group-subtitle",from:tc,encode:zc},ja),wc.call(nb,l));l={enter:{},update:{}};Cb(l,{orient:J("orient"),
anchor:J("anchor"),align:{signal:Qe},angle:{signal:'item.orient\x3d\x3d\x3d"left"?-90:item.orient\x3d\x3d\x3d"right"?90:0'},limit:J("limit"),frame:J("frame"),offset:J("offset")||0,padding:J("subtitlePadding")});Da=Ub(l,Da,qd);return Ca(Ma({role:"title",from:tc,encode:Da,marks:nb,aria:J("aria"),description:J("description"),zindex:J("zindex"),name:Qa,interactive:Ia,style:rb}),q)}function vd(l,q){const J=[];l.transform&&l.transform.forEach(ja=>{J.push(Ua(ja,q))});l.on&&l.on.forEach(ja=>{va(ja,q,l.name)});
q.addDataPipeline(l.name,od(l,q,J))}function od(l,q,J){const ja=[];let Da=null,Qa=!1,Ia=!1,rb,nb,tc,wc;l.values?Pb(l.values)||eb(l.format)?(ja.push(Cd(q,l)),ja.push(Da=gd())):ja.push(Da=gd({$ingest:l.values,$format:l.format})):l.url?eb(l.url)||eb(l.format)?(ja.push(Cd(q,l)),ja.push(Da=gd())):ja.push(Da=gd({$request:l.url,$format:l.format})):l.source&&(Da=rb=h.array(l.source).map(zc=>Ga(q.getData(zc).output)),ja.push(null));l=0;for(nb=J.length;l<nb;++l)tc=J[l],wc=tc.metadata,Da||wc.source||ja.push(Da=
gd()),ja.push(tc),wc.generates&&(Ia=!0),wc.modifies&&!Ia&&(Qa=!0),wc.source?Da=tc:wc.changes&&(Da=null);rb&&(nb=rb.length-1,ja[0]=Wd({derive:Qa,pulse:nb?rb:rb[0]}),(Qa||nb)&&ja.splice(1,0,gd()));Da||ja.push(gd());ja.push(cc({}));return ja}function gd(l){l=Ie({},l);l.metadata={source:!0};return l}function Cd(l,q){return Vb({url:q.url?l.property(q.url):void 0,async:q.async?l.property(q.async):void 0,values:q.values?l.property(q.values):void 0,format:l.objectProperty(q.format)})}function Dd(l,q,J,ja){let Da;
if(q&&h.hasOwnProperty(q,l))return q[l];if(h.hasOwnProperty(J,l))return J[l];if(l.startsWith("title")){switch(l){case "titleColor":Da="fill";break;case "titleFont":case "titleFontSize":case "titleFontWeight":Da=l[5].toLowerCase()+l.slice(6)}return ja["guide-title"][Da]}if(l.startsWith("label")){switch(l){case "labelColor":Da="fill";break;case "labelFont":case "labelFontSize":Da=l[5].toLowerCase()+l.slice(6)}return ja["guide-label"][Da]}return null}function rd(l){const q={};for(const J of l)if(J)for(const ja in J)q[ja]=
1;return Object.keys(q)}function we(l,q,J,ja,Da){return{signal:'flush(range("'+l+'"), scale("'+l+'", datum.value), '+q+","+J+","+ja+","+Da+")"}}function Bd(l,q,J,ja){const Da=(Ia,rb)=>null!=Ia?(J.update[rb]=oa(Ac(Ia),J.update[rb]),!1):jc(rb,ja)?!1:!0,Qa=Da(l("titleX"),"x");l=Da(l("titleY"),"y");J.enter.auto=l===Qa?Ac(l):Le(q,Ac(l),Ac(Qa))}function x(l,q,J){const ja=h.array(l.signals),Da=h.array(l.scales);J||ja.forEach(Qa=>Ra(Qa,q));h.array(l.projections).forEach(Qa=>{const Ia=q.config.projection||
{},rb={};for(const nb in Qa)"name"!==nb&&(rb[nb]=za(Qa[nb],nb,q));for(const nb in Ia)null==rb[nb]&&(rb[nb]=za(Ia[nb],nb,q));q.addProjection(Qa.name,rb)});Da.forEach(Qa=>{const Ia=Qa.type||"linear";zb.isValidScaleType(Ia)||h.error("Unrecognized scale type: "+h.stringValue(Ia));q.addScale(Qa.name,{type:Ia,domain:void 0})});h.array(l.data).forEach(Qa=>vd(Qa,q));Da.forEach(Qa=>{const Ia=q.getScale(Qa.name).params;let rb;Ia.domain=y(Qa.domain,Qa,q);null!=Qa.range&&(Ia.range=la(Qa,q,Ia));if(null!=Qa.interpolate){var nb=
Qa.interpolate;Ia.interpolate=w(nb.type||nb);null!=nb.gamma&&(Ia.interpolateGamma=w(nb.gamma))}null!=Qa.nice&&(nb=Qa.nice,nb=nb.signal?q.signalRef(nb.signal):h.isObject(nb)?{interval:w(nb.interval),step:w(nb.step)}:w(nb),Ia.nice=nb);null!=Qa.bins&&(nb=Qa.bins,nb=nb.signal||h.isArray(nb)?Q(nb,q):q.objectProperty(nb),Ia.bins=nb);for(rb in Qa)h.hasOwnProperty(Ia,rb)||"name"===rb||(Ia[rb]=w(Qa[rb],q))});(J||ja).forEach(Qa=>L(Qa,q));h.array(l.axes).forEach(Qa=>{var Ia=q.config,rb=Ia.style,nb=Ia.axis,tc=
"band"===q.scaleType(Qa.scale)&&Ia.axisBand,wc=Qa.orient,zc;if(Pb(wc)){const Zd=rd([Ia.axisX,Ia.axisY]),ge=rd([Ia.axisTop,Ia.axisBottom,Ia.axisLeft,Ia.axisRight]);var yc={};for(zc of Zd)yc[zc]=Le(wc,Dd(zc,Ia.axisX,nb,rb),Dd(zc,Ia.axisY,nb,rb));var Rc={};for(zc of ge){var fd=Rc,Td=zc,Ad=wc.signal,Ld=Dd(zc,Ia.axisTop,nb,rb),Ud=Dd(zc,Ia.axisBottom,nb,rb),qc=Dd(zc,Ia.axisLeft,nb,rb),Fd=Dd(zc,Ia.axisRight,nb,rb);var Be={signal:(null!=qc?`${Ad} === '${"left"}' ? (${qe(qc)}) : `:"")+(null!=Ud?`${Ad} === '${"bottom"}' ? (${qe(Ud)}) : `:
"")+(null!=Fd?`${Ad} === '${"right"}' ? (${qe(Fd)}) : `:"")+(null!=Ld?`${Ad} === '${"top"}' ? (${qe(Ld)}) : `:"")+"(null)"};fd[Td]=Be}}else yc="top"===wc||"bottom"===wc?Ia.axisX:Ia.axisY,Rc=Ia["axis"+wc[0].toUpperCase()+wc.slice(1)];var te=yc||Rc||tc?h.extend({},nb,yc,Rc,tc):nb;const ke=Qa.encode||{},Qd=ke.axis||{},Od=Qd.name||void 0,xe=Qd.interactive,Fe=Qd.style,re=Pa(Qa,te),Ne=re("tickBand");let hd=re("tickOffset"),ve,ff;Ne?Ne.signal?(ve={signal:`(${Ne.signal}) === 'extent' ? 1 : 0.5`},ff={signal:`(${Ne.signal}) === 'extent'`},
h.isObject(hd)||(hd={signal:`(${Ne.signal}) === 'extent' ? 0 : ${hd}`})):"extent"===Ne?(ve=1,ff=!0,hd=0):(ve=.5,ff=!1):(ve=re("bandPosition"),ff=re("tickExtra"));var lf=ff;var Dg=ve;var vf=hd;const Of={scale:Qa.scale,ticks:!!re("ticks"),labels:!!re("labels"),grid:!!re("grid"),domain:!!re("domain"),title:null!=Qa.title},bg=Ga(q.add(Ie({},[Of]))),gf=Ga(q.add(Me({scale:q.scaleRef(Qa.scale),extra:q.property(lf),count:q.objectProperty(Qa.tickCount),values:q.objectProperty(Qa.values),minstep:q.property(Qa.tickMinStep),
formatType:q.property(Qa.formatType),formatSpecifier:q.property(Qa.format)}))),Re=[];let cg;if(Of.grid){var Tg=Re.push,Bf=ke.grid;const Zd=Pa(Qa,te),ge=Qa.orient,of=Qa.gridScale,Ge=kf(ge,1,-1);a:{var dg=Qa.offset,Hf=Ge;if(1!==Hf)if(h.isObject(dg)){let Qf=dg=h.extend({},dg);for(;null!=Qf.mult;)if(h.isObject(Qf.mult))Qf=Qf.mult=h.extend({},Qf.mult);else{Qf.mult=Pb(Hf)?{signal:`(${Qf.mult}) * (${Hf.signal})`}:Qf.mult*Hf;var Ug=dg;break a}Qf.mult=Hf}else dg=Pb(Hf)?{signal:`(${Hf.signal}) * (${dg||0})`}:
Hf*(dg||0);Ug=dg}const hf=Ug;let Ue,pf,Wf;const Pf={enter:Ue={opacity:bd},update:Wf={opacity:fe},exit:pf={opacity:bd}};Cb(Pf,{stroke:Zd("gridColor"),strokeCap:Zd("gridCap"),strokeDash:Zd("gridDash"),strokeDashOffset:Zd("gridDashOffset"),strokeOpacity:Zd("gridOpacity"),strokeWidth:Zd("gridWidth")});const $e={scale:Qa.scale,field:"value",band:Dg,extra:lf,offset:vf,round:Zd("tickRound")},Yg=Le(ge,{signal:"height"},{signal:"width"}),xg=of?{scale:of,range:0,mult:Ge,offset:hf}:{value:0,offset:hf},lh=of?
{scale:of,range:1,mult:Ge,offset:hf}:h.extend(Yg,{mult:Ge,offset:hf});Ue.x=Wf.x=Le(ge,$e,xg);Ue.y=Wf.y=Xe(ge,$e,xg);Ue.x2=Wf.x2=Xe(ge,lh);Ue.y2=Wf.y2=Le(ge,lh);pf.x=Le(ge,$e);pf.y=Xe(ge,$e);var eh=Tb({type:"rule",role:"axis-grid",key:"value",from:gf,encode:Pf},Bf);Tg.call(Re,eh)}if(Of.ticks){cg=re("tickSize");var Sg=Re.push,Vg=ke.ticks,Wg=cg;const Zd=Pa(Qa,te),ge=Qa.orient,of=kf(ge,-1,1);let Ge,hf,Ue;const pf={enter:Ge={opacity:bd},update:Ue={opacity:fe},exit:hf={opacity:bd}};Cb(pf,{stroke:Zd("tickColor"),
strokeCap:Zd("tickCap"),strokeDash:Zd("tickDash"),strokeDashOffset:Zd("tickDashOffset"),strokeOpacity:Zd("tickOpacity"),strokeWidth:Zd("tickWidth")});const Wf=Ac(Wg);Wf.mult=of;const Pf={scale:Qa.scale,field:"value",band:Dg,extra:lf,offset:vf,round:Zd("tickRound")};Ue.y=Ge.y=Le(ge,bd,Pf);Ue.y2=Ge.y2=Le(ge,Wf);hf.x=Le(ge,Pf);Ue.x=Ge.x=Xe(ge,bd,Pf);Ue.x2=Ge.x2=Xe(ge,Wf);hf.y=Xe(ge,Pf);var kh=Tb({type:"rule",role:"axis-tick",key:"value",from:gf,encode:pf},Vg);Sg.call(Re,kh)}if(Of.labels){cg=Of.ticks?
cg:0;var If=Re.push,U=ke.labels,Ja=cg;const Zd=Pa(Qa,te),ge=Qa.orient,of=Qa.scale,Ge=kf(ge,-1,1),hf=Z(Zd("labelFlush")),Ue=Z(Zd("labelFlushOffset")),pf=Zd("labelAlign"),Wf=Zd("labelBaseline");let Pf=0===hf||!!hf,$e;const Yg=Ac(Ja);Yg.mult=Ge;Yg.offset=Ac(Zd("labelPadding")||0);Yg.offset.mult=Ge;const xg={scale:of,field:"value",band:.5,offset:jb(vf,Zd("labelOffset"))};var mb=Pf?we(of,hf,'"left"','"right"','"center"'):{value:"center"},Dc=ge;var Lc=Pb(Dc)?Ee(`${Dc.signal} === '${"right"}'`,"left","right"):
"right"===Dc?{value:"left"}:{value:"right"};const lh=Le(ge,mb,Lc),Qf=Le(ge,Ze(ge,"bottom","top"),Pf?we(of,hf,'"top"','"bottom"','"middle"'):{value:"middle"}),Rh=we(of,hf,`-(${Ue})`,Ue,0);Pf=Pf&&Ue;const og={opacity:bd,x:Le(ge,xg,Yg),y:Xe(ge,xg,Yg)},vh={enter:og,update:$e={opacity:fe,text:{field:"label"},x:og.x,y:og.y,align:lh,baseline:Qf},exit:{opacity:bd,x:og.x,y:og.y}};Cb(vh,{dx:!pf&&Pf?Le(ge,Rh):null,dy:!Wf&&Pf?Xe(ge,Rh):null});Cb(vh,{angle:Zd("labelAngle"),fill:Zd("labelColor"),fillOpacity:Zd("labelOpacity"),
font:Zd("labelFont"),fontSize:Zd("labelFontSize"),fontWeight:Zd("labelFontWeight"),fontStyle:Zd("labelFontStyle"),limit:Zd("labelLimit"),lineHeight:Zd("labelLineHeight")},{align:pf,baseline:Wf});const jg=Zd("labelBound");let Sh=Zd("labelOverlap");Sh=Sh||jg?{separation:Zd("labelSeparation"),method:Sh,order:"datum.index",bound:jg?{scale:of,orient:ge,tolerance:jg}:null}:void 0;$e.align!==lh&&($e.align=oa($e.align,lh));$e.baseline!==Qf&&($e.baseline=oa($e.baseline,Qf));var Gd=Tb({type:"text",role:"axis-label",
style:"guide-label",key:"value",from:gf,encode:vh,overlap:Sh},U);If.call(Re,Gd)}if(Of.domain){var le=Re.push,Xd=ke.domain;const Zd=Pa(Qa,te),ge=Qa.orient;let of,Ge;const hf={enter:of={opacity:bd},update:Ge={opacity:fe},exit:{opacity:bd}};Cb(hf,{stroke:Zd("domainColor"),strokeCap:Zd("domainCap"),strokeDash:Zd("domainDash"),strokeDashOffset:Zd("domainDashOffset"),strokeWidth:Zd("domainWidth"),strokeOpacity:Zd("domainOpacity")});const Ue={scale:Qa.scale,range:0},pf={scale:Qa.scale,range:1};of.x=Ge.x=
Le(ge,Ue,bd);of.x2=Ge.x2=Le(ge,pf);of.y=Ge.y=Xe(ge,Ue,bd);of.y2=Ge.y2=Xe(ge,pf);var Jf=Tb({type:"rule",role:"axis-domain",from:bg,encode:hf},Xd);le.call(Re,Jf)}if(Of.title){var mf=Re.push,wg=ke.title;const Zd=Pa(Qa,te),ge=Qa.orient,of=kf(ge,-1,1);let Ge,hf;const Ue={enter:Ge={opacity:bd,anchor:Ac(Zd("titleAnchor",null)),align:{signal:Qe}},update:hf=h.extend({},Ge,{opacity:fe,text:Ac(Qa.title)}),exit:{opacity:bd}},pf={signal:`lerp(range("${Qa.scale}"), ${vb(0,1,.5)})`};hf.x=Le(ge,pf);hf.y=Xe(ge,pf);
var Vf=Ge,Xg=of;var ig=Pb(Xg)?{signal:`(${Xg.signal}) * ${90}`}:{value:90*Xg};Vf.angle=Le(ge,bd,ig);Ge.baseline=Le(ge,Ze(ge,"bottom","top"),{value:"bottom"});hf.angle=Ge.angle;hf.baseline=Ge.baseline;Cb(Ue,{fill:Zd("titleColor"),fillOpacity:Zd("titleOpacity"),font:Zd("titleFont"),fontSize:Zd("titleFontSize"),fontStyle:Zd("titleFontStyle"),fontWeight:Zd("titleFontWeight"),limit:Zd("titleLimit"),lineHeight:Zd("titleLineHeight")},{align:Zd("titleAlign"),angle:Zd("titleAngle"),baseline:Zd("titleBaseline")});
Bd(Zd,ge,Ue,wg);Ue.update.align=oa(Ue.update.align,Ge.align);Ue.update.angle=oa(Ue.update.angle,Ge.angle);Ue.update.baseline=oa(Ue.update.baseline,Ge.baseline);var Kg=Tb({type:"text",role:"axis-title",style:"guide-title",from:bg,encode:Ue},wg);mf.call(Re,Kg)}const Dh={enter:{},update:{}};Cb(Dh,{orient:re("orient"),offset:re("offset")||0,position:T(Qa.position,0),titlePadding:re("titlePadding"),minExtent:re("minExtent"),maxExtent:re("maxExtent"),range:{signal:`abs(span(range("${Qa.scale}")))`},translate:re("translate"),
format:Qa.format,formatType:Qa.formatType});return Ca(Ma({role:"axis",from:bg,encode:Ub(Dh,Qd,qd),marks:Re,aria:re("aria"),description:re("description"),zindex:re("zindex"),name:Od,interactive:xe,style:Fe}),q)});h.array(l.marks).forEach(Qa=>Ca(Qa,q));h.array(l.legends).forEach(Qa=>kb(Qa,q));l.title&&Sc(l.title,q);q.parseLambdas();return q}function K(l,q){var J=q.config;const ja=Ga(q.root=q.add(new Va("operator",void 0,void 0,void 0))),Da=Ka(l,J);Da.forEach(rb=>Ra(rb,q));q.description=l.description||
J.description;q.eventConfig=J.events;q.legends=q.objectProperty(J.legend&&J.legend.layout);q.locale=J.locale;J=q.add(Ie());const Qa=q.add(F(ra(Ub({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},l.encode),"group","frame",l.style,q,{pulse:Ga(J)}))),Ia=q.add(vc({layout:q.objectProperty(l.layout),legends:q.legends,autosize:q.signalRef("autosize"),mark:ja,pulse:Ga(Qa)}));q.operators.pop();q.pushState(Ga(Qa),Ga(Ia),null);x(l,q,Da);q.operators.push(Ia);l=q.add(He({mark:ja,
pulse:Ga(Ia)}));l=q.add(ya({pulse:Ga(l)}));l=q.add(cc({pulse:Ga(l)}));q.addData("root",new ma(q,J,J,l));return q}function ua(l,q){return q&&q.signal?{name:l,update:q.signal}:{name:l,value:q}}function Ka(l,q){const J=Ia=>T(l[Ia],q[Ia]),ja=[ua("background",J("background")),ua("autosize",ac(J("autosize"))),ua("padding",Xb(J("padding"))),ua("width",J("width")||0),ua("height",J("height")||0)],Da=ja.reduce((Ia,rb)=>(Ia[rb.name]=rb,Ia),{}),Qa={};h.array(l.signals).forEach(Ia=>{h.hasOwnProperty(Da,Ia.name)?
Ia=h.extend(Da[Ia.name],Ia):ja.push(Ia);Qa[Ia.name]=Ia});h.array(q.signals).forEach(Ia=>{h.hasOwnProperty(Qa,Ia.name)||h.hasOwnProperty(Da,Ia.name)||ja.push(Ia)});return ja}function lb(l,q){this.config=l||{};this.options=q||{};this.bindings=[];this.field={};this.signals={};this.lambdas={};this.scales={};this.events={};this.data={};this.streams=[];this.updates=[];this.operators=[];this.locale=this.eventConfig=null;this._subid=this._id=0;this._nextsub=[0];this._parent=[];this._encode=[];this._lookup=
[];this._markpath=[]}function Bb(l){this.config=l.config;this.options=l.options;this.legends=l.legends;this.field=Object.create(l.field);this.signals=Object.create(l.signals);this.lambdas=Object.create(l.lambdas);this.scales=Object.create(l.scales);this.events=Object.create(l.events);this.data=Object.create(l.data);this.streams=[];this.updates=[];this.operators=[];this._id=0;this._subid=++l._nextsub[0];this._nextsub=l._nextsub;this._parent=l._parent.slice();this._encode=l._encode.slice();this._lookup=
l._lookup.slice();this._markpath=l._markpath}function bc(l){return(h.isArray(l)?Sb:nc)(l)}function Sb(l){const q=l.length;let J="[";for(let ja=0;ja<q;++ja){const Da=l[ja];J+=(0<ja?",":"")+(h.isObject(Da)?Da.signal||bc(Da):h.stringValue(Da))}return J+"]"}function nc(l){let q="{",J=0,ja,Da;for(ja in l)Da=l[ja],q+=(1<++J?",":"")+h.stringValue(ja)+":"+(h.isObject(Da)?Da.signal||bc(Da):h.stringValue(Da));return q+"}"}function Kc(){return{description:"Vega visualization",padding:0,autosize:"pad",background:null,
events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:"#4c78a8"},area:{fill:"#4c78a8"},image:null,line:{stroke:"#4c78a8",strokeWidth:2},path:{stroke:"#4c78a8"},rect:{fill:"#4c78a8"},rule:{stroke:"#000"},shape:{stroke:"#4c78a8"},symbol:{fill:"#4c78a8",size:64},text:{fill:"#000",font:"sans-serif",fontSize:11},trail:{fill:"#4c78a8",size:2},style:{"guide-label":{fill:"#000",font:"sans-serif",fontSize:10},"guide-title":{fill:"#000",font:"sans-serif",fontSize:11,fontWeight:"bold"},"group-title":{fill:"#000",
font:"sans-serif",fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:"#000",font:"sans-serif",fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:"#ddd"},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:"#888",grid:!1,gridWidth:1,gridColor:"#ddd",labels:!0,
labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:"#888",tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:"#ddd",gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,
labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:"#888",titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:"circle square triangle-up cross diamond triangle-right triangle-down triangle-left".split(" ")}}}
const Ac=l=>h.isObject(l)&&!h.isArray(l)?h.extend({},l):{value:l},Xc=l=>h.isString(l)?h.stringValue(l):l.signal?`(${l.signal})`:xb(l),kd=(l,q,J,ja)=>`(${l}(${[q,J,ja].map(wb).join(",")})+'')`,pd=["value","update","init","react","bind"],xd=hb("key"),nd={code:"_.$value",ast:{type:"Identifier",value:"value"}},Jd=l=>(q,J,ja)=>new Va(l,J,q||void 0,ja),me=Jd("aggregate"),Me=Jd("axisticks"),He=Jd("bound"),Ie=Jd("collect"),tf=Jd("compare"),bf=Jd("datajoin"),F=Jd("encode"),aa=Jd("expression"),Fa=Jd("facet"),
fb=Jd("field"),Gb=Jd("key"),pc=Jd("legendentries"),Vb=Jd("load"),Ec=Jd("mark"),ld=Jd("multiextent"),ad=Jd("multivalues"),Oc=Jd("overlap"),Nd=Jd("params"),ce=Jd("prefacet"),Kd=Jd("projection"),Md=Jd("proxy"),Wd=Jd("relay"),ya=Jd("render"),Oa=Jd("scale"),cc=Jd("sieve"),id=Jd("sortitems"),vc=Jd("viewlayout"),Hc=Jd("values");let Jc=0;const Yc={min:"min",max:"max",count:"sum"},Tc="size shape fill stroke strokeWidth strokeDash opacity".split(" "),qd={name:1,style:1,interactive:1},bd={value:0},fe={value:1},
Qe=vb(h.stringValue("left"),h.stringValue("right"),h.stringValue("center")),Ke=vb('"top"','"bottom"','"middle"'),ne=`datum.vgrad && ${'item.orient \x3d\x3d\x3d "right"'} ? (${vb('"right"','"left"','"center"')}) : (${'(item.orient \x3d\x3d\x3d "left" || item.orient \x3d\x3d\x3d "right")'} && !(datum.vgrad && ${'item.orient \x3d\x3d\x3d "left"'})) ? "left" : ${Qe}`,Ye=`${'(item.orient \x3d\x3d\x3d "left" || item.orient \x3d\x3d\x3d "right")'} ? (datum.vgrad ? (${'item.orient \x3d\x3d\x3d "right"'} ? "bottom" : "top") : ${Ke}) : "top"`;
ma.fromEntries=function(l,q){const J=q.length,ja=q[J-1],Da=q[J-2];let Qa=q[0],Ia=null,rb=1;Qa&&"load"===Qa.type&&(Qa=q[1]);for(l.add(q[0]);rb<J;++rb)q[rb].params.pulse=Ga(q[rb-1]),l.add(q[rb]),"aggregate"===q[rb].type&&(Ia=q[rb]);return new ma(l,Qa,Da,ja,Ia)};ma.prototype={countsRef(l,q,J){const ja=this.counts||(this.counts={}),Da=Ha(q);if(null!=Da){l=this.scope;var Qa=ja[Da]}Qa?J&&J.field&&gb(l,Qa.agg.params,J):(Qa={groupby:l.fieldRef(q,"key"),pulse:Ga(this.output)},J&&J.field&&gb(l,Qa,J),J=l.add(me(Qa)),
Qa=l.add(Ie({pulse:Ga(J)})),Qa={agg:J,ref:Ga(Qa)},null!=Da&&(ja[Da]=Qa));return Qa.ref},tuplesRef(){return Ga(this.values)},extentRef(l,q){return R(l,this,"extent","extent",q,!1)},domainRef(l,q){return R(l,this,"domain","values",q,!1)},valuesRef(l,q,J){return R(l,this,"vals","values",q,J||!0)},lookupRef(l,q){return R(l,this,"lookup","tupleindex",q,!1)},indataRef(l,q){return R(l,this,"indata","tupleindex",q,!0,!0)}};const kf=(l,q,J)=>{Pb(l)?(l=l.signal,q=Ee(`${l} === '${"left"}' || ${l} === '${"top"}'`,
q,J)):q="left"===l||"top"===l?q:J;return q},Le=(l,q,J)=>{Pb(l)?(l=l.signal,q=Ae(`${l} === '${"top"}' || ${l} === '${"bottom"}'`,q,J)):q="bottom"===l||"top"===l?q:J;return q},Xe=(l,q,J)=>{Pb(l)?(l=l.signal,q=Ae(`${l} !== '${"top"}' && ${l} !== '${"bottom"}'`,q,J)):q="bottom"===l||"top"===l?J:q;return q},Ze=(l,q,J)=>Pb(l)?Ee(`${l.signal} === '${"top"}'`,q,J):"top"===l?{value:q}:{value:J},Ae=(l,q,J)=>{q=null!=q?Ac(q):q;J=null!=J?Ac(J):J;if(null!=q&&1!==Object.keys(q).length||null!=J&&1!==Object.keys(J).length)return[h.extend({test:l},
q)].concat(J||[]);q=q?q.signal||h.stringValue(q.value):null;J=J?J.signal||h.stringValue(J.value):null;return{signal:`${l} ? (${q}) : (${J})`}},Ee=(l,q,J)=>({signal:`${l} ? (${qe(q)}) : (${qe(J)})`}),qe=l=>Pb(l)?l.signal:null==l?null:h.stringValue(l),oa=(l,q)=>{const J=l.signal;return J&&J.endsWith("(null)")?{signal:J.slice(0,-6)+q.signal}:l};lb.prototype=Bb.prototype={parse(l){return x(l,this)},fork(){return new Bb(this)},isSubscope(){return 0<this._subid},toRuntime(){this.finish();return{description:this.description,
operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(l){this.operators.push(l);l.id=this.id();l.refs&&(l.refs.forEach(q=>{q.$ref=l.id}),l.refs=null);return l},proxy(l){l=l instanceof Va?Ga(l):l;return this.add(Md({value:l}))},addStream(l){this.streams.push(l);l.id=this.id();return l},addUpdate(l){this.updates.push(l);return l},finish(){function l(ja,Da,
Qa){ja&&(ja=ja.data||(ja.data={}),Da=ja[Da]||(ja[Da]=[]),Da.push(Qa))}let q,J;this.root&&(this.root.root=!0);for(q in this.signals)this.signals[q].signal=q;for(q in this.scales)this.scales[q].scale=q;for(q in this.data){J=this.data[q];l(J.input,q,"input");l(J.output,q,"output");l(J.values,q,"values");for(const ja in J.index)l(J.index[ja],q,"index:"+ja)}return this},pushState(l,q,J){this._encode.push(Ga(this.add(cc({pulse:l}))));this._parent.push(q);this._lookup.push(J?Ga(this.proxy(J)):null);this._markpath.push(-1)},
popState(){this._encode.pop();this._parent.pop();this._lookup.pop();this._markpath.pop()},parent(){return h.peek(this._parent)},encode(){return h.peek(this._encode)},lookup(){return h.peek(this._lookup)},markpath(){const l=this._markpath;return++l[l.length-1]},fieldRef(l,q){if(h.isString(l))return hb(l,q);l.signal||h.error("Unsupported field reference: "+h.stringValue(l));l=l.signal;var J=this.field[l];J||(J={name:this.signalRef(l)},q&&(J.as=q),this.field[l]=J=Ga(this.add(fb(J))));return J},compareRef(l){let q=
!1;const J=Da=>Pb(Da)?(q=!0,this.signalRef(Da.signal)):Da&&Da.expr?(q=!0,this.exprRef(Da.expr)):Da,ja=h.array(l.field).map(J);l=h.array(l.order).map(J);return q?Ga(this.add(tf({fields:ja,orders:l}))):{$compare:ja,$order:l}},keyRef(l,q){let J=!1;const ja=this.signals;l=h.array(l).map(Da=>Pb(Da)?(J=!0,Ga(ja[Da.signal])):Da);return J?Ga(this.add(Gb({fields:l,flat:q}))):bb(l,q)},sortRef(l){if(!l)return l;const q=tb(l.op,l.field);l=l.order||"ascending";return l.signal?Ga(this.add(tf({fields:q,orders:this.signalRef(l.signal)}))):
{$compare:q,$order:l}},event(l,q){const J=l+":"+q;if(!this.events[J]){const ja=this.id();this.streams.push({id:ja,source:l,type:q});this.events[J]=ja}return this.events[J]},hasOwnSignal(l){return h.hasOwnProperty(this.signals,l)},addSignal(l,q){this.hasOwnSignal(l)&&h.error("Duplicate signal name: "+h.stringValue(l));q=q instanceof Va?q:this.add(new Va("operator",q,void 0,void 0));return this.signals[l]=q},getSignal(l){this.signals[l]||h.error("Unrecognized signal name: "+h.stringValue(l));return this.signals[l]},
signalRef(l){if(this.signals[l])return Ga(this.signals[l]);h.hasOwnProperty(this.lambdas,l)||(this.lambdas[l]=this.add(new Va("operator",null,void 0,void 0)));return Ga(this.lambdas[l])},parseLambdas(){const l=Object.keys(this.lambdas);for(let J=0,ja=l.length;J<ja;++J){var q=l[J];const Da=ia.parseExpression(q,this);q=this.lambdas[q];q.params=Da.$params;q.update=Da.$expr}},property(l){return l&&l.signal?this.signalRef(l.signal):l},objectProperty(l){return l&&h.isObject(l)?this.signalRef(l.signal||
bc(l)):l},exprRef(l,q){l={expr:ia.parseExpression(l,this)};q&&(l.expr.$name=q);return Ga(this.add(aa(l)))},addBinding(l,q){this.bindings||h.error("Nested signals do not support binding: "+h.stringValue(l));this.bindings.push(h.extend({signal:l},q))},addScaleProj(l,q){h.hasOwnProperty(this.scales,l)&&h.error("Duplicate scale or projection name: "+h.stringValue(l));this.scales[l]=this.add(q)},addScale(l,q){this.addScaleProj(l,Oa(q))},addProjection(l,q){this.addScaleProj(l,Kd(q))},getScale(l){this.scales[l]||
h.error("Unrecognized scale name: "+h.stringValue(l));return this.scales[l]},scaleRef(l){return Ga(this.getScale(l))},scaleType(l){return this.getScale(l).params.type},projectionRef(l){return this.scaleRef(l)},projectionType(l){return this.scaleType(l)},addData(l,q){h.hasOwnProperty(this.data,l)&&h.error("Duplicate data set name: "+h.stringValue(l));return this.data[l]=q},getData(l){this.data[l]||h.error("Undefined data set name: "+h.stringValue(l));return this.data[l]},addDataPipeline(l,q){h.hasOwnProperty(this.data,
l)&&h.error("Duplicate data set name: "+h.stringValue(l));return this.addData(l,ma.fromEntries(this,q))}};u.AxisDomainRole="axis-domain";u.AxisGridRole="axis-grid";u.AxisLabelRole="axis-label";u.AxisRole="axis";u.AxisTickRole="axis-tick";u.AxisTitleRole="axis-title";u.DataScope=ma;u.FrameRole="frame";u.LegendEntryRole="legend-entry";u.LegendLabelRole="legend-label";u.LegendRole="legend";u.LegendSymbolRole="legend-symbol";u.LegendTitleRole="legend-title";u.MarkRole="mark";u.Scope=lb;u.ScopeRole="scope";
u.config=Kc;u.parse=function(l,q,J){h.isObject(l)||h.error("Input Vega specification must be an object.");q=h.mergeConfig(Kc(),q,l.config);return K(l,new lb(q,J)).toRuntime()};u.signal=Ra;u.signalUpdates=L;u.stream=ca})};
shadow$provide[53]=function(Eb,ob,Fc,Xa){function u(Ga){var hb=Object.create(null);Ga&&Object.keys(Ga).forEach(function(bb){if("default"!==bb){var tb=Object.getOwnPropertyDescriptor(Ga,bb);Object.defineProperty(hb,bb,tb.get?tb:{enumerable:!0,get:function(){return Ga[bb]}})}});hb.default=Ga;return Object.freeze(hb)}var h=ob(21),ia=ob(29),ab=ob(31),zb=ob(35),Yb=ob(36),ac=ob(38),Xb=ob(39),mc=ob(40),Cb=ob(41),Ub=ob(42),jc=ob(43);Fc=ob(44);Eb=ob(45);var Ba=ob(30),Za=ob(23),wb=ob(28),ub=ob(34),sb=ob(33),
xb=ob(37),ib=ob(50),ec=ob(24),ra=ob(48),fa=ob(52),xa=ob(49),Ra=ob(46),Va=ob(51);ob=u(ab);zb=u(zb);Yb=u(Yb);ac=u(ac);Xb=u(Xb);mc=u(mc);Cb=u(Cb);Ub=u(Ub);jc=u(jc);Fc=u(Fc);Eb=u(Eb);h.extend(ia.transforms,ob,zb,Yb,ac,Xb,Cb,mc,Ub,jc,Fc,Eb);Object.defineProperty(Xa,"Dataflow",{enumerable:!0,get:function(){return ia.Dataflow}});Object.defineProperty(Xa,"EventStream",{enumerable:!0,get:function(){return ia.EventStream}});Object.defineProperty(Xa,"MultiPulse",{enumerable:!0,get:function(){return ia.MultiPulse}});
Object.defineProperty(Xa,"Operator",{enumerable:!0,get:function(){return ia.Operator}});Object.defineProperty(Xa,"Parameters",{enumerable:!0,get:function(){return ia.Parameters}});Object.defineProperty(Xa,"Pulse",{enumerable:!0,get:function(){return ia.Pulse}});Object.defineProperty(Xa,"Transform",{enumerable:!0,get:function(){return ia.Transform}});Object.defineProperty(Xa,"changeset",{enumerable:!0,get:function(){return ia.changeset}});Object.defineProperty(Xa,"definition",{enumerable:!0,get:function(){return ia.definition}});
Object.defineProperty(Xa,"ingest",{enumerable:!0,get:function(){return ia.ingest}});Object.defineProperty(Xa,"isTuple",{enumerable:!0,get:function(){return ia.isTuple}});Object.defineProperty(Xa,"transform",{enumerable:!0,get:function(){return ia.transform}});Object.defineProperty(Xa,"transforms",{enumerable:!0,get:function(){return ia.transforms}});Object.defineProperty(Xa,"tupleid",{enumerable:!0,get:function(){return ia.tupleid}});Object.defineProperty(Xa,"interpolate",{enumerable:!0,get:function(){return sb.interpolate}});
Object.defineProperty(Xa,"interpolateColors",{enumerable:!0,get:function(){return sb.interpolateColors}});Object.defineProperty(Xa,"interpolateRange",{enumerable:!0,get:function(){return sb.interpolateRange}});Object.defineProperty(Xa,"quantizeInterpolator",{enumerable:!0,get:function(){return sb.quantizeInterpolator}});Object.defineProperty(Xa,"scale",{enumerable:!0,get:function(){return sb.scale}});Object.defineProperty(Xa,"scheme",{enumerable:!0,get:function(){return sb.scheme}});Object.defineProperty(Xa,
"projection",{enumerable:!0,get:function(){return xb.projection}});Object.defineProperty(Xa,"View",{enumerable:!0,get:function(){return ib.View}});Object.defineProperty(Xa,"defaultLocale",{enumerable:!0,get:function(){return ec.defaultLocale}});Object.defineProperty(Xa,"formatLocale",{enumerable:!0,get:function(){return ec.numberFormatDefaultLocale}});Object.defineProperty(Xa,"locale",{enumerable:!0,get:function(){return ec.locale}});Object.defineProperty(Xa,"resetDefaultLocale",{enumerable:!0,get:function(){return ec.resetDefaultLocale}});
Object.defineProperty(Xa,"timeFormatLocale",{enumerable:!0,get:function(){return ec.timeFormatDefaultLocale}});Object.defineProperty(Xa,"expressionFunction",{enumerable:!0,get:function(){return ra.expressionFunction}});Object.defineProperty(Xa,"parse",{enumerable:!0,get:function(){return fa.parse}});Object.defineProperty(Xa,"runtimeContext",{enumerable:!0,get:function(){return xa.context}});Object.defineProperty(Xa,"codegenExpression",{enumerable:!0,get:function(){return Ra.codegenExpression}});Object.defineProperty(Xa,
"parseExpression",{enumerable:!0,get:function(){return Ra.parseExpression}});Object.defineProperty(Xa,"parseSelector",{enumerable:!0,get:function(){return Va.parseSelector}});Xa.version="5.32.0";Object.keys(h).forEach(function(Ga){"default"===Ga||Object.prototype.hasOwnProperty.call(Xa,Ga)||Object.defineProperty(Xa,Ga,{enumerable:!0,get:function(){return h[Ga]}})});Object.keys(Ba).forEach(function(Ga){"default"===Ga||Object.prototype.hasOwnProperty.call(Xa,Ga)||Object.defineProperty(Xa,Ga,{enumerable:!0,
get:function(){return Ba[Ga]}})});Object.keys(Za).forEach(function(Ga){"default"===Ga||Object.prototype.hasOwnProperty.call(Xa,Ga)||Object.defineProperty(Xa,Ga,{enumerable:!0,get:function(){return Za[Ga]}})});Object.keys(wb).forEach(function(Ga){"default"===Ga||Object.prototype.hasOwnProperty.call(Xa,Ga)||Object.defineProperty(Xa,Ga,{enumerable:!0,get:function(){return wb[Ga]}})});Object.keys(ub).forEach(function(Ga){"default"===Ga||Object.prototype.hasOwnProperty.call(Xa,Ga)||Object.defineProperty(Xa,
Ga,{enumerable:!0,get:function(){return ub[Ga]}})})};
shadow$provide[54]=function(Eb,ob,Fc,Xa){(function(u,h){"object"===typeof Xa&&"undefined"!==typeof Fc?h(Xa,ob(53)):"function"===typeof define&&define.amd?define(["exports","vega"],h):(u="undefined"!==typeof globalThis?globalThis:u||self,h(u.vegaLite={},u.vega))})(this,function(u,h){function ia(a,b){if(a.not)ia(a.not,b);else if(a.and)for(const e of a.and)ia(e,b);else if(a.or)for(const e of a.or)ia(e,b);else b(a)}function ab(a,b){return a.not?{not:ab(a.not,b)}:a.and?{and:a.and.map(e=>ab(e,b))}:a.or?
{or:a.or.map(e=>ab(e,b))}:b(a)}function zb(a){throw Error(a);}function Yb(a,b){const e={};for(const f of b)h.hasOwnProperty(a,f)&&(e[f]=a[f]);return e}function ac(a,b){a=Object.assign({},a);for(const e of b)delete a[e];return a}function Xb(a){if(h.isNumber(a))return a;a=h.isString(a)?a:m(a);if(250>a.length)return a;let b=0;for(let e=0;e<a.length;e++){const f=a.charCodeAt(e);b=(b<<5)-b+f;b&=b}return b}function mc(a){return!1===a||null===a}function Cb(a,b){return a.includes(b)}function Ub(a,b){let e=
0;for(const f of a.entries()){const [g,p]=f;if(b(p,g,e++))return!0}return!1}function jc(a,b){let e=0;for(const f of a.entries()){const [g,p]=f;if(!b(p,g,e++))return!1}return!0}function Ba(a){for(var b=arguments.length,e=Array(1<b?b-1:0),f=1;f<b;f++)e[f-1]=arguments[f];for(const g of e){let p;b=a;e=null!=(p=g)?p:{};for(const B of sd(e))h.writeConfig(b,B,e[B],!0)}return a}function Za(a,b){const e=[],f={};for(const g of a)a=b(g),a in f||(f[a]=1,e.push(g));return e}function wb(a,b){if(a.size!==b.size)return!1;
for(const e of a)if(!b.has(e))return!1;return!0}function ub(a,b){for(const e of a)if(b.has(e))return!0;return!1}function sb(a){const b=new Set;for(const e of a){const f=h.splitAccessPath(e).map((g,p)=>0===p?g:`[${g}]`);a=f.map((g,p)=>f.slice(0,p+1).join(""));for(const g of a)b.add(g)}return b}function xb(a,b){return void 0===a||void 0===b?!0:ub(sb(a),sb(b))}function ib(a){return 0===sd(a).length}function ec(a){return!0===a||!1===a}function ra(a){const b=a.replace(/\W/g,"_");return(a.match(/^\d+/)?
"_":"")+b}function fa(a,b){return a.not?`!(${fa(a.not,b)})`:a.and?`(${a.and.map(e=>fa(e,b)).join(") \x26\x26 (")})`:a.or?`(${a.or.map(e=>fa(e,b)).join(") || (")})`:b(a)}function xa(a,b){if(0===b.length)return!0;const e=b.shift();e in a&&xa(a[e],b)&&delete a[e];return ib(a)}function Ra(a){return a.charAt(0).toUpperCase()+a.substr(1)}function Va(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"datum";const e=h.splitAccessPath(a),f=[];for(let g=1;g<=e.length;g++){const p=`[${e.slice(0,
g).map(h.stringValue).join("][")}]`;f.push(`${b}${p}`)}return f.join(" \x26\x26 ")}function Ga(a){return`${1<arguments.length&&void 0!==arguments[1]?arguments[1]:"datum"}[${h.stringValue(h.splitAccessPath(a).join("."))}]`}function hb(a){return a.replace(/(\[|\]|\.|'|")/g,"\\$1")}function bb(a){return`${h.splitAccessPath(a).map(hb).join("\\.")}`}function tb(a,b,e){return a.replace(new RegExp(b.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$\x26"),"g"),e)}function Pb(a){return`${h.splitAccessPath(a).join(".")}`}
function eb(a){return a?h.splitAccessPath(a).length:0}function T(){for(var a=arguments.length,b=Array(a),e=0;e<a;e++)b[e]=arguments[e];for(const f of b)if(void 0!==f)return f}function Z(a){const b=++Lk;return a?String(a)+b:b}function ca(a){return ha(a)?a:`__${a}`}function ha(a){return a.startsWith("__")}function La(a){if(void 0!==a)return(a%360+360)%360}function na(a){return h.isNumber(a)?!0:!isNaN(a)&&!isNaN(parseFloat(a))}function pa(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==
typeof b){if(a.constructor.name!==b.constructor.name)return!1;let f;if(Array.isArray(a)){var e=a.length;if(e!=b.length)return!1;for(f=e;0!==f--;)if(!pa(a[f],b[f]))return!1;return!0}if(a instanceof Map&&b instanceof Map){if(a.size!==b.size)return!1;for(f of a.entries())if(!b.has(f[0]))return!1;for(f of a.entries())if(!pa(f[1],b.get(f[0])))return!1;return!0}if(a instanceof Set&&b instanceof Set){if(a.size!==b.size)return!1;for(f of a.entries())if(!b.has(f[0]))return!1;return!0}if(ArrayBuffer.isView(a)&&
ArrayBuffer.isView(b)){e=a.length;if(e!=b.length)return!1;for(f=e;0!==f--;)if(a[f]!==b[f])return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf&&a.valueOf!==Kk.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString&&a.toString!==Kk.toString)return a.toString()===b.toString();const g=Object.keys(a);e=g.length;if(e!==Object.keys(b).length)return!1;for(f=e;0!==f--;)if(!Object.prototype.hasOwnProperty.call(b,
g[f]))return!1;for(f=e;0!==f--;)if(e=g[f],!pa(a[e],b[e]))return!1;return!0}return a!==a&&b!==b}function m(a){const b=[];return function g(f){f&&f.toJSON&&"function"===typeof f.toJSON&&(f=f.toJSON());if(void 0!==f){if("number"==typeof f)return isFinite(f)?""+f:"null";if("object"!==typeof f)return JSON.stringify(f);var p;if(Array.isArray(f)){var B="[";for(p=0;p<f.length;p++)p&&(B+=","),B+=g(f[p])||"null";return B+"]"}if(null===f)return"null";if(b.includes(f))throw new TypeError("Converting circular structure to JSON");
var P=b.push(f)-1,X=Object.keys(f).sort();B="";for(p=0;p<X.length;p++){const ta=X[p],cb=g(f[ta]);cb&&(B&&(B+=","),B+=JSON.stringify(ta)+":"+cb)}b.splice(P,1);return`{${B}}`}}(a)}function E(a){switch(a){case "latitude":return"y";case "latitude2":return"y2";case "longitude":return"x";case "longitude2":return"x2"}}function L(a){return"color"===a||"fill"===a||"stroke"===a}function w(a){return Q(a)!==a}function Q(a){switch(a){case "x2":return"x";case "y2":return"y";case "latitude2":return"latitude";case "longitude2":return"longitude";
case "theta2":return"theta";case "radius2":return"radius"}return a}function A(a){if(a in fk)switch(a){case "theta":return"startAngle";case "theta2":return"endAngle";case "radius":return"outerRadius";case "radius2":return"innerRadius"}return a}function y(a){switch(a){case "x":return"x2";case "y":return"y2";case "latitude":return"latitude2";case "longitude":return"longitude2";case "theta":return"theta2";case "radius":return"radius2"}}function N(a){switch(a){case "x":case "x2":return"width";case "y":case "y2":return"height"}}
function z(a){switch(a){case "x":return"xOffset";case "y":return"yOffset";case "x2":return"x2Offset";case "y2":return"y2Offset";case "theta":return"thetaOffset";case "radius":return"radiusOffset";case "theta2":return"theta2Offset";case "radius2":return"radius2Offset"}}function C(a){switch(a){case "x":return"xOffset";case "y":return"yOffset"}}function H(a){return a in gk}function V(a){return"width"===a?"x":"y"}function Aa(a){switch(a){case "color":case "fill":case "stroke":case "description":case "detail":case "key":case "tooltip":case "href":case "order":case "opacity":case "fillOpacity":case "strokeOpacity":case "strokeWidth":case "facet":case "row":case "column":return Dl;
case "x":case "y":case "xOffset":case "yOffset":case "latitude":case "longitude":return Ql;case "x2":case "y2":case "latitude2":case "longitude2":return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case "size":return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case "strokeDash":return{line:"always",
point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case "shape":return{point:"always",geoshape:"always"};case "text":return{text:"always"};case "angle":return{point:"always",square:"always",text:"always"};case "url":return{image:"always"};case "theta":return{text:"always",arc:"always"};case "radius":return{text:"always",arc:"always"};case "theta2":case "radius2":return{arc:"always"}}}function O(a){switch(a){case "facet":case "row":case "column":case "shape":case "strokeDash":case "text":case "tooltip":case "href":case "url":case "description":return"discrete";
case "color":case "fill":case "stroke":return"flexible"}}function la(a){return!!a&&!!a.argmin}function za(a){return!!a&&!!a.argmax}function Ma(a){return h.isString(a)&&!!hk[a]}function Pa(a){return h.isString(a)&&Vl.has(a)}function Ya(a){h.isBoolean(a)&&(a=ve(a,void 0));return"bin"+sd(a).map(b=>Tb(a[b])?ra(`_${b}_${Gi(a[b])}`):ra(`_${b}_${a[b]}`)).join("")}function vb(a){return!0===a||h.isObject(a)&&!a.binned}function jb(a){return"binned"===a||h.isObject(a)&&!0===a.binned}function Tb(a){return null==
a?void 0:a.param}function W(a){switch(a){case "row":case "column":case "size":case "color":case "fill":case "stroke":case "strokeWidth":case "opacity":case "fillOpacity":case "strokeOpacity":case "shape":return 6;case "strokeDash":return 4;default:return 10}}function Ea(a){return!(null==a||!a.expr)}function Lb(a){const b=sd(a||{}),e={};for(const f of b)e[f]=qa(a[f]);return e}function oc(a){var b=Object.assign({},a),e=a.anchor;const f=a.frame,g=a.offset,p=a.orient,B=a.angle,P=a.limit;var X=a.color,
ta=a.subtitleColor;const cb=a.subtitleFont,pb=a.subtitleFontSize,gc=a.subtitleFontStyle,Pc=a.subtitleFontWeight,kc=a.subtitleLineHeight,Nc=a.subtitlePadding;b=(delete b.anchor,delete b.frame,delete b.offset,delete b.orient,delete b.angle,delete b.limit,delete b.color,delete b.subtitleColor,delete b.subtitleFont,delete b.subtitleFontSize,delete b.subtitleFontStyle,delete b.subtitleFontWeight,delete b.subtitleLineHeight,delete b.subtitlePadding,b);X=Object.assign({},b,X?{fill:X}:{});e=Object.assign({},
e?{anchor:e}:{},f?{frame:f}:{},g?{offset:g}:{},p?{orient:p}:{},void 0!==B?{angle:B}:{},void 0!==P?{limit:P}:{});ta=Object.assign({},ta?{subtitleColor:ta}:{},cb?{subtitleFont:cb}:{},pb?{subtitleFontSize:pb}:{},gc?{subtitleFontStyle:gc}:{},Pc?{subtitleFontWeight:Pc}:{},kc?{subtitleLineHeight:kc}:{},Nc?{subtitlePadding:Nc}:{});a=Yb(a,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:X,subtitleMarkConfig:a,nonMarkTitleProperties:e,subtitle:ta}}function $b(a){return h.isString(a)||h.isArray(a)&&
h.isString(a[0])}function Mb(a){return!(null==a||!a.signal)}function Qb(a){return!!a.step}function xc(a){return h.isArray(a)?!1:"field"in a&&"data"in a}function ed(a){const b=h.isArray(a.condition)?a.condition.map(Db):Db(a.condition);return Object.assign({},qa(a),{condition:b})}function qa(a){if(Ea(a)){var b=Object.assign({},a);a=a.expr;b=(delete b.expr,b);return Object.assign({},{signal:a},b)}return a}function Db(a){if(Ea(a)){var b=Object.assign({},a);a=a.expr;b=(delete b.expr,b);return Object.assign({},
{signal:a},b)}return a}function Ua(a){if(Ea(a)){var b=Object.assign({},a);a=a.expr;b=(delete b.expr,b);return Object.assign({},{signal:a},b)}return Mb(a)?a:void 0!==a?{value:a}:void 0}function yb(a){return Mb(a)?a.signal:h.stringValue(a.value)}function Hb(a){return Mb(a)?a.signal:null==a?null:h.stringValue(a)}function Nb(a){let b;return[].concat(a.type,null!=(b=a.style)?b:[])}function Zb(a,b,e){let f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};const {vgChannel:g,ignoreVgConfig:p}=f;
if(g&&void 0!==b[g])return b[g];if(void 0!==b[a])return b[a];if(!p||g&&g!==a)return ic(a,b,e,f)}function ic(a,b,e){let {vgChannel:f}=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return T(f?Bc(a,b,e.style):void 0,Bc(a,b,e.style),f?e[b.type][f]:void 0,e[b.type][a],f?e.mark[f]:e.mark[a])}function Bc(a,b,e){return jd(a,Nb(b),e)}function jd(a,b,e){b=h.array(b);let f;for(const g of b)(b=e[g])&&void 0!==b[a]&&(f=b[a]);return f}function Vc(a,b){return h.array(a).reduce((e,f)=>{e.field.push(qc(f,
b));let g;e.order.push(null!=(g=f.sort)?g:"ascending");return e},{field:[],order:[]})}function ma(a,b){const e=[...a];b.forEach(f=>{for(const g of e)if(pa(g,f))return;e.push(f)});return e}function Ha(a,b){return pa(a,b)||!b?a:a?[...h.array(a),...h.array(b)].join(", "):b}function gb(a,b){const e=a.value;b=b.value;if(null==e||null===b)return{explicit:a.explicit,value:null};if(($b(e)||Mb(e))&&($b(b)||Mb(b)))return{explicit:a.explicit,value:Ha(e,b)};if($b(e)||Mb(e))return{explicit:a.explicit,value:e};
if($b(b)||Mb(b))return{explicit:a.explicit,value:b};if(!($b(e)||Mb(e)||$b(b)||Mb(b)))return{explicit:a.explicit,value:ma(e,b)};throw Error("It should never reach here");}function R(a,b,e){a:if("object"===typeof b&&null!==b){var f=b[Symbol.toPrimitive];if(void 0!==f){b=f.call(b,"string");if("object"!==typeof b)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}b="symbol"===typeof b?b:String(b);b in a?Object.defineProperty(a,b,{value:e,enumerable:!0,configurable:!0,
writable:!0}):a[b]=e;return a}function t(a,b,e){b=ba(a,b,"set");if(b.set)b.set.call(a,e);else{if(!b.writable)throw new TypeError("attempted to set read only private field");b.value=e}return e}function ba(a,b,e){if(!b.has(a))throw new TypeError("attempted to "+e+" private field on non-instance");return b.get(a)}function va(a){return`Invalid specification ${m(a)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}
function Ca(a){return`${"width"==a?"Width":"Height"} "container" only works for single views and layered views.`}function Sa(a){return`${"width"==a?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==a?"x":"y"}".`}function kb(a){return a?`Dropping "fit-${a}" because spec has discrete ${N(a)}.`:'Dropping "fit" because spec has discrete size.'}function Rb(a){return`Unknown field for ${a}. Cannot calculate view size.`}function Fb(a){return`Cannot project a selection on encoding channel "${a}", which has no field.`}
function Jb(a){return`Selection not supported for ${a} yet.`}function Cc(a){return`The "columns" property cannot be used when "${a}" has nested row/column.`}function Gc(a,b,e){return`An ancestor parsed field "${a}" as ${e} but a child wants to parse the field as ${b}.`}function Sc(a){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${a} are dropped.`}function vd(a,b){const {fill:e,stroke:f}=b;return`Dropping color ${a} as the plot also has ${e&&f?"fill and stroke":
e?"fill":"stroke"}.`}function od(a,b){return`Dropping ${m(a)} from channel "${b}" since it does not contain any data field, datum, value, or signal.`}function gd(a,b,e){return`${a} dropped as it is incompatible with "${b}"${e?` when ${e}`:""}.`}function Cd(a,b){return`Using discrete channel "${a}" to encode "${b}" field can be misleading as it does not encode ${"ordinal"===b?"order":"magnitude"}.`}function Dd(a,b,e){return`${e}-scale's "${b}" is dropped as it does not work with ${a} scale.`}function rd(a){return`The step for "${a}" is dropped because the ${"width"===
a?"x":"y"} is continuous.`}function we(a,b){return`Invalid ${a}: ${m(b)}.`}function Bd(a){return`1D error band does not support ${a}.`}function x(a){return`Channel ${a} is required for "binned" bin.`}function K(){Ai.warn(...arguments)}function ua(){Ai.debug(...arguments)}function Ka(a){if(a&&h.isObject(a))for(const b of Zk)if(b in a)return!0;return!1}function lb(a){na(a)&&(a=+a);if(h.isNumber(a))return a-1;var b=a.toLowerCase();const e=Qh.indexOf(b);if(-1!==e)return e;b=b.substr(0,3);b=Lj.indexOf(b);
if(-1!==b)return b;throw Error(we("month",a));}function Bb(a){na(a)&&(a=+a);if(h.isNumber(a))return a%7;var b=a.toLowerCase();const e=$h.indexOf(b);if(-1!==e)return e;b=b.substr(0,3);b=Ok.indexOf(b);if(-1!==b)return b;throw Error(we("day",a));}function bc(a,b){const e=[];b&&void 0!==a.day&&1<sd(a).length&&(K(`Dropping day from datetime ${m(a)} as day cannot be combined with other units.`),a=De(a),delete a.day);void 0!==a.year?e.push(a.year):e.push(2012);if(void 0!==a.month){var f=b?lb(a.month):a.month;
e.push(f)}else if(void 0!==a.quarter){if(b)if(f=a.quarter,na(f)&&(f=+f),h.isNumber(f))4<f&&K(we("quarter",f)),--f;else throw Error(we("quarter",f));else f=a.quarter;e.push(h.isNumber(f)?3*f:`${f}*3`)}else e.push(0);void 0!==a.date?e.push(a.date):void 0!==a.day?(b=b?Bb(a.day):a.day,e.push(h.isNumber(b)?b+1:`${b}+1`)):e.push(1);for(const g of["hours","minutes","seconds","milliseconds"])b=a[g],e.push("undefined"===typeof b?0:b);return e}function Sb(a){const b=bc(a,!0).join(", ");return a.utc?`utc(${b})`:
`datetime(${b})`}function nc(a){const b=bc(a,!0);return a.utc?+new Date(Date.UTC(...b)):+new Date(...b)}function Kc(a){return h.isObject(a)?a.binned:a&&a.startsWith("binned")}function Ac(a){return Zk.filter(b=>kd(a,b))}function Xc(a){a=Ac(a);return a[a.length-1]}function kd(a,b){const e=a.indexOf(b);return 0>e||0<e&&"seconds"===b&&"i"===a.charAt(e-1)||a.length>e+3&&"day"===b&&"o"===a.charAt(e+3)||0<e&&"year"===b&&"f"===a.charAt(e-1)?!1:!0}function pd(a,b){var {end:e}=2<arguments.length&&void 0!==
arguments[2]?arguments[2]:{end:!1};const f=Va(b),g=a.startsWith("utc")?"utc":"";const p={};for(const P of Zk)if(kd(a,P)){var B="quarter"===P?`(${g}quarter(${f})-1)`:`${g}${P}(${f})`;p[P]=B;B=P}e&&(p[B]+="+1");e=bc(p,!1).join(", ");return p.utc?`utc(${e})`:`datetime(${e})`}function xd(a){if(a)return a=Ac(a),`timeUnitSpecifier(${m(a)}, ${m(Uk)})`}function nd(a){if(a){var b;h.isString(a)?b=a&&a.startsWith("binned")?{unit:a.substring(6),binned:!0}:{unit:a}:h.isObject(a)&&(b=Object.assign({},a,a.unit?
{unit:a.unit}:{}));b.unit.startsWith("utc")&&(b.utc=!0,b.unit=b.unit.substring(3));return b}}function Jd(a){var b=nd(a);a=Object.assign({},b);b=b.utc;const e=(delete a.utc,a);return e.unit?(b?"utc":"")+sd(e).map(f=>ra(`${"unit"===f?"":`_${f}_`}${e[f]}`)).join(""):(b?"utc":"")+"timeunit"+sd(e).map(f=>ra(`_${f}_${e[f]}`)).join("")}function me(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:g=>g;var e=nd(a);const f=Xc(e.unit);if(f&&"day"!==f){const g={year:2001,month:1,date:1,hours:0,
minutes:0,seconds:0,milliseconds:0},{step:p,part:B}=Me(f,e.step);e=Object.assign({},g,{[B]:+g[B]+p});return`${b(Sb(e))} - ${b(Sb(g))}`}}function Me(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(pj[a])return{part:a,step:b};switch(a){case "day":case "dayofyear":return{part:"date",step:b};case "quarter":return{part:"month",step:3*b};case "week":return{part:"date",step:7*b}}}function He(a){return!(null==a||!a.field)&&void 0!==a.equal}function Ie(a){return!(null==a||!a.field)&&void 0!==
a.lt}function tf(a){return!(null==a||!a.field)&&void 0!==a.lte}function bf(a){return!(null==a||!a.field)&&void 0!==a.gt}function F(a){return!(null==a||!a.field)&&void 0!==a.gte}function aa(a){if(null==a?0:a.field)if(h.isArray(a.range)&&2===a.range.length||Mb(a.range))return!0;return!1}function Fa(a){return!(null==a||!a.field)&&(h.isArray(a.oneOf)||h.isArray(a.in))}function fb(a){return Fa(a)||He(a)||aa(a)||Ie(a)||bf(a)||tf(a)||F(a)}function Gb(a,b){return Dg(a,{timeUnit:b,wrapTime:!0})}function pc(a,
b){return a.map(e=>Gb(e,b))}function Vb(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,{field:e}=a,f=nd(a.timeUnit);const {unit:g,binned:p}=f||{};f=qc(a,{expr:"datum"});e=g?`time(${p?f:pd(g,e)})`:f;if(He(a))return`${e}===${Gb(a.equal,g)}`;if(Ie(a))return`${e}<${Gb(a.lt,g)}`;if(bf(a))return`${e}>${Gb(a.gt,g)}`;if(tf(a))return`${e}<=${Gb(a.lte,g)}`;if(F(a))return`${e}>=${Gb(a.gte,g)}`;if(Fa(a))return`indexof([${pc(a.oneOf,g).join(",")}], ${e}) !== -1`;if(null!=a&&a.field&&void 0!==
a.valid)return Ec(e,a.valid);if(aa(a)){var {range:B}=a;f=Mb(B)?{signal:`${B.signal}[0]`}:B[0];B=Mb(B)?{signal:`${B.signal}[1]`}:B[1];if(null!==f&&null!==B&&b)return"inrange("+e+", ["+Gb(f,g)+", "+Gb(B,g)+"])";b=[];null!==f&&b.push(`${e} >= ${Gb(f,g)}`);null!==B&&b.push(`${e} <= ${Gb(B,g)}`);return 0<b.length?b.join(" \x26\x26 "):"true"}throw Error(`Invalid field predicate: ${m(a)}`);}function Ec(a){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:1)?`isValid(${a}) && isFinite(+${a})`:
`!isValid(${a}) || !isFinite(+${a})`}function ld(a){return fb(a)&&a.timeUnit?Object.assign({},a,{timeUnit:nd(a.timeUnit)}):a}function ad(a){return"quantitative"===a||"temporal"===a}function Oc(a){return"ordinal"===a||"nominal"===a}function Nd(a){if(a)switch(a=a.toLowerCase(),a){case "q":case "quantitative":return"quantitative";case "t":case "temporal":return"temporal";case "o":case "ordinal":return"ordinal";case "n":case "nominal":return"nominal";case "geojson":return"geojson"}}function ce(a){return qj.has(a)}
function Kd(a){return Vk.has(a)}function Md(a,b){switch(b){case "type":case "domain":case "reverse":case "range":return!0;case "scheme":case "interpolate":return!["point","band","identity"].includes(a);case "bins":return!["point","band","identity","ordinal"].includes(a);case "round":return lg.has(a)||"band"===a||"point"===a;case "padding":case "rangeMin":case "rangeMax":return lg.has(a)||["point","band"].includes(a);case "paddingOuter":case "align":return["point","band"].includes(a);case "paddingInner":return"band"===
a;case "domainMax":case "domainMid":case "domainMin":case "domainRaw":case "clamp":return lg.has(a);case "nice":return lg.has(a)||"quantize"===a||"threshold"===a;case "exponent":return"pow"===a;case "base":return"log"===a;case "constant":return"symlog"===a;case "zero":return Kd(a)&&!Cb(["log","time","utc","threshold","quantile"],a)}}function Wd(a,b){switch(b){case "interpolate":case "scheme":case "domainMid":if(!L(a))return`Cannot use the scale property "${b}" with non-color channel.`}}function ya(a,
b){let e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(!Mh[a])return!1;switch(a){case "x":case "y":case "xOffset":case "yOffset":case "theta":case "radius":return lg.has(b)||"band"===b?!0:"point"===b?!e:!1;case "size":case "strokeWidth":case "opacity":case "fillOpacity":case "strokeOpacity":case "angle":return lg.has(b)||ai.has(b)||Cb(["band","point","ordinal"],b);case "color":case "fill":case "stroke":return"band"!==b;case "strokeDash":case "shape":return"ordinal"===b||ai.has(b)}}
function Oa(a){return["line","area","trail"].includes(a)}function cc(a){return["rect","bar","image","arc"].includes(a)}function id(a){return a.type}function vc(a){return a&&void 0!=a.band}function Hc(a){const {channel:b,channelDef:e,markDef:f,scale:g,config:p}=a;a=qd(a);if(Ia(e)&&!Pa(e.aggregate)&&g&&lg.has(g.get("type"))){{let {fieldDef:P,channel:X,markDef:ta,ref:cb,config:pb}={fieldDef:e,channel:b,markDef:f,ref:a,config:p};if(Oa(ta.type))a=cb;else if(null===Zb("invalid",ta,pb)){var B=X;a=Jc(P,!0);
B="y"===Q(B)?{field:{group:"height"}}:{value:0};a=[Object.assign({},{test:a},B),cb]}else a=cb}return a}return a}function Jc(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;return Ec(h.isString(a)?a:qc(a,{expr:"datum"}),!b)}function Yc(a,b,e,f){const g={};b&&(g.scale=b);nb(a)?({datum:a}=a,Ka(a)?g.signal=Sb(a):Mb(a)?g.signal=a.signal:Ea(a)?g.signal=a.expr:g.value=a):g.field=qc(a,e);if(f){const {offset:p,band:B}=f;p&&(g.offset=p);B&&(g.band=B)}return g}function Tc(a){let {scaleName:b,
fieldOrDatumDef:e,fieldOrDatumDef2:f,offset:g,startSuffix:p,endSuffix:B="end",bandPosition:P=.5}=a;var X=!Mb(P)&&0<P&&1>P?"datum":void 0;a=qc(e,{expr:X,suffix:p});const ta=void 0!==f?qc(f,{expr:X}):qc(e,{suffix:B,expr:X});X={};0===P||1===P?(X.scale=b,X.field=0===P?a:ta):(a=Mb(P)?`(1-${P.signal}) * ${a} + ${P.signal} * ${ta}`:`${1-P} * ${a} + ${P} * ${ta}`,X.signal=`scale("${b}", ${a})`);g&&(X.offset=g);return X}function qd(a){let {channel:b,channelDef:e,channel2Def:f,markDef:g,config:p,scaleName:B,
scale:P,stack:X,offset:ta,defaultRef:cb,bandPosition:pb}=a;if(e){if(yc(e)){a=null==P?void 0:P.get("type");if(Rc(e)){null!=pb||(pb=l({fieldDef:e,fieldDef2:f,markDef:g,config:p}));const {bin:kc,timeUnit:Nc,type:Zc}=e;if(vb(kc)||pb&&Nc&&"temporal"===Zc)return(null==X?0:X.impute)?Yc(e,B,{binSuffix:"mid"},{offset:ta}):pb&&!ce(a)?Tc({scaleName:B,fieldOrDatumDef:e,bandPosition:pb,offset:ta}):Yc(e,B,Of(e,b)?{binSuffix:"range"}:{},{offset:ta});if(jb(kc)){if(Ia(f))return Tc({scaleName:B,fieldOrDatumDef:e,fieldOrDatumDef2:f,
bandPosition:pb,offset:ta});K(x("x"===b?"x2":"y2"))}}var gc;let Pc;return Yc(e,B,ce(a)?{binSuffix:"range"}:{},{offset:ta,band:"band"===a?null!=(Pc=null!=(gc=pb)?gc:e.bandPosition)?Pc:.5:void 0})}if(fd(e))return gc=ta?{offset:ta}:{},Object.assign({},bd(b,e.value),gc)}h.isFunction(cb)&&(cb=cb());return cb?Object.assign({},cb,ta?{offset:ta}:{}):cb}function bd(a,b){return Cb(["x","x2"],a)&&"width"===b?{field:{group:"width"}}:Cb(["y","y2"],a)&&"height"===b?{field:{group:"height"}}:Ua(b)}function fe(a){return a&&
"number"!==a&&"time"!==a}function Qe(a){let {fieldOrDatumDef:b,format:e,formatType:f,expr:g,normalizeStack:p,config:B}=a;if(fe(f))return ne({fieldOrDatumDef:b,format:e,formatType:f,expr:g,config:B});a=Ke(b,g,p);var P=rb(b);if(void 0===e&&void 0===f&&B.customFormatTypes){if("quantitative"===P){if(p&&B.normalizedNumberFormatType)return ne({fieldOrDatumDef:b,format:B.normalizedNumberFormat,formatType:B.normalizedNumberFormatType,expr:g,config:B});if(B.numberFormatType)return ne({fieldOrDatumDef:b,format:B.numberFormat,
formatType:B.numberFormatType,expr:g,config:B})}if("temporal"===P&&B.timeFormatType&&Ia(b)&&void 0===b.timeUnit)return ne({fieldOrDatumDef:b,format:B.timeFormat,formatType:B.timeFormatType,expr:g,config:B})}if(lf(b)){var X,ta;{a={field:a,timeUnit:Ia(b)?null==(X=nd(b.timeUnit))?void 0:X.unit:void 0,format:e,formatType:B.timeFormatType,rawTimeFormat:B.timeFormat,isUTCScale:Td(b)&&(null==(ta=b.scale)?void 0:ta.type)===gg.UTC};let {field:cb,timeUnit:pb,format:gc,formatType:Pc,rawTimeFormat:kc,isUTCScale:Nc}=
a;!pb||gc?!pb&&Pc?X=`${Pc}(${cb}, '${gc}')`:(gc=h.isString(gc)?gc:kc,X=`${Nc?"utc":"time"}Format(${cb}, '${gc}')`):(X=pb,ta=cb,a=Nc,X?(P=xd(X),X=`${a||X.startsWith("utc")?"utc":"time"}Format(${ta}, ${P})`):X=void 0)}return X?{signal:X}:void 0}e=Le({type:P,specifiedFormat:e,config:B,normalizeStack:p});return Ia(b)&&vb(b.bin)?(X=qc(b,{expr:g,binSuffix:"end"}),{signal:Ze(a,X,e,f,B)}):e||"quantitative"===rb(b)?{signal:`${`format(${a}, "${e||""}")`}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function Ke(a,
b,e){if(Ia(a))return e?`${qc(a,{expr:b,suffix:"end"})}-${qc(a,{expr:b,suffix:"start"})}`:qc(a,{expr:b});({datum:a}=a);a=Ka(a)?Sb(a):`${m(a)}`;return a}function ne(a){let {fieldOrDatumDef:b,format:e,formatType:f,expr:g,normalizeStack:p,config:B,field:P}=a;null!=P||(P=Ke(b,g,p));return"datum.value"!==P&&Ia(b)&&vb(b.bin)?(a=qc(b,{expr:g,binSuffix:"end"}),{signal:Ze(P,a,e,f,B)}):{signal:`${f}(${P}${e?`, ${m(e)}`:""})`}}function Ye(a,b,e,f,g,p){if(!h.isString(f)||!fe(f))if(void 0!==e||void 0!==f||!g.customFormatTypes||
"quantitative"!==rb(a)||!(g.normalizedNumberFormatType&&Ad(a)&&"normalize"===a.stack||g.numberFormatType)){if(Ad(a)&&"normalize"===a.stack&&g.normalizedNumberFormat)return Le({type:"quantitative",config:g,normalizeStack:!0});if(lf(a)){let B;a=Ia(a)?null==(B=nd(a.timeUnit))?void 0:B.unit:void 0;if(void 0===a&&g.customFormatTypes&&g.timeFormatType)return;{let {specifiedFormat:P,timeUnit:X,config:ta,omitTimeFormatConfig:cb}={specifiedFormat:e,timeUnit:a,config:g,omitTimeFormatConfig:p};e=P?P:X?{signal:xd(X)}:
cb?void 0:ta.timeFormat}return e}return Le({type:b,specifiedFormat:e,config:g})}}function kf(a,b,e){if(a&&(Mb(a)||"number"===a||"time"===a))return a;if(lf(b)&&"time"!==e&&"utc"!==e){let f;return Ia(b)&&(null==(f=nd(null==b?void 0:b.timeUnit))?0:f.utc)?"utc":"time"}}function Le(a){let {type:b,specifiedFormat:e,config:f,normalizeStack:g}=a;if(h.isString(e))return e;if("quantitative"===b)return g?f.normalizedNumberFormat:f.numberFormat}function Xe(a,b,e,f){if(fe(e))return`${e}(${a}${b?`, ${m(b)}`:""})`;
let g;b=null!=(g=h.isString(b)?b:void 0)?g:f.numberFormat;return`format(${a}, "${b||""}")`}function Ze(a,b,e,f,g){if(void 0===e&&void 0===f&&g.customFormatTypes&&g.numberFormatType)return Ze(a,b,g.numberFormat,g.numberFormatType,g);const p=Xe(a,e,f,g);b=Xe(b,e,f,g);return`${Ec(a,!1)} ? "null" : ${p} + "${" – "}" + ${b}`}function Ae(a){return a&&("count"===a.op||!!a.field)}function Ee(a){return a&&h.isArray(a)}function qe(a){return"row"in a||"column"in a}function oa(a){const {field:b,timeUnit:e,bin:f,
aggregate:g}=a;return Object.assign({},e?{timeUnit:e}:{},f?{bin:f}:{},g?{aggregate:g}:{},{field:b})}function l(a){let {fieldDef:b,fieldDef2:e,markDef:f,config:g}=a;if(yc(b)&&void 0!==b.bandPosition)return b.bandPosition;if(Ia(b)){const {timeUnit:p,bin:B}=b;if(p&&!e)return ic("timeUnitBandPosition",f,g);if(vb(B))return.5}}function q(a){let {channel:b,fieldDef:e,fieldDef2:f,markDef:g,config:p,scaleType:B,useVlSizeChannel:P}=a;a=N(b);a=Zb(P?"size":a,g,p,{vgChannel:a});if(void 0!==a)return a;if(Ia(e)){const {timeUnit:X,
bin:ta}=e;if(X&&!f)return{band:ic("timeUnitBandSize",g,p)};if(vb(ta)&&!ce(B))return{band:1}}if(cc(g.type)){if(B){if(ce(B)){let cb;return(null==(cb=p[g.type])?void 0:cb.discreteBandSize)||{band:1}}let ta;return null==(ta=p[g.type])?void 0:ta.continuousBandSize}let X;return null==(X=p[g.type])?void 0:X.discreteBandSize}}function J(a,b,e,f){return vb(a.bin)||a.timeUnit&&Rc(a)&&"temporal"===a.type?void 0!==l({fieldDef:a,fieldDef2:b,markDef:e,config:f}):!1}function ja(a){return a&&"condition"in a}function Da(a){a=
null==a?void 0:a.condition;return!!a&&!h.isArray(a)&&Ia(a)}function Qa(a){a=null==a?void 0:a.condition;return!!a&&!h.isArray(a)&&yc(a)}function Ia(a){return a&&(!!a.field||"count"===a.aggregate)}function rb(a){return null==a?void 0:a.type}function nb(a){return a&&"datum"in a}function tc(a){return Rc(a)&&!Fd(a)||zc(a)}function wc(a){return Rc(a)&&"quantitative"===a.type&&!a.bin||zc(a)}function zc(a){return nb(a)&&h.isNumber(a.datum)}function yc(a){return Ia(a)||nb(a)}function Rc(a){return a&&("field"in
a||"count"===a.aggregate)&&"type"in a}function fd(a){return a&&"value"in a&&"value"in a}function Td(a){return a&&("scale"in a||"sort"in a)}function Ad(a){return a&&("axis"in a||"stack"in a||"impute"in a)}function Ld(a){return a&&("format"in a||"formatType"in a)}function Ud(a){return ac(a,["legend","axis","header","scale"])}function qc(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=a.field;const f=b.prefix;let g=b.suffix,p="";if("count"===a.aggregate)e=ca("count");else{let B;
if(!b.nofn)if("op"in a)B=a.op;else{const {bin:P,aggregate:X,timeUnit:ta}=a;if(vb(P)){B=Ya(P);let cb,pb;g=(null!=(cb=b.binSuffix)?cb:"")+(null!=(pb=b.suffix)?pb:"")}else if(X)za(X)?(p=`["${e}"]`,e=`argmax_${X.argmax}`):la(X)?(p=`["${e}"]`,e=`argmin_${X.argmin}`):B=String(X);else if(ta&&!Kc(ta)){B=Jd(ta);let cb;g=(!["range","mid"].includes(b.binSuffix)&&b.binSuffix||"")+(null!=(cb=b.suffix)?cb:"")}}B&&(e=e?`${B}_${e}`:B)}g&&(e=`${e}_${g}`);f&&(e=`${f}_${e}`);return b.forAs?Pb(e):b.expr?Ga(e,b.expr)+
p:bb(e)+p}function Fd(a){switch(a.type){case "nominal":case "ordinal":case "geojson":return!0;case "quantitative":return Ia(a)&&!!a.bin;case "temporal":return!1}throw Error(`Invalid field type "${a.type}".`);}function Be(a,b){const {field:e,bin:f,timeUnit:g,aggregate:p}=a;if("count"===p)return b.countTitle;if(vb(f))return`${e} (binned)`;if(g&&!Kc(g)){let B;if(a=null==(B=nd(g))?void 0:B.unit)return`${e} (${Ac(a).join("-")})`}else if(p)return za(p)?`${e} for max ${p.argmax}`:la(p)?`${e} for min ${p.argmin}`:
`${Ra(p)} of ${e}`;return e}function te(a,b,e){let {allowDisabling:f,includeDefault:g=!0}=e,p;e=null==(p=ke(a))?void 0:p.title;if(!Ia(a))return null!=e?e:a.title;b=g?Cf(a,b):void 0;if(f)return T(e,a.title,b);let B;return null!=(B=null!=e?e:a.title)?B:b}function ke(a){if(Ad(a)&&a.axis)return a.axis;if(a&&"legend"in a&&a.legend)return a.legend;if(a&&"header"in a&&a.header)return a.header}function Qd(a){if(Ld(a)){const {format:g,formatType:p}=a;return{format:g,formatType:p}}let b;a=null!=(b=ke(a))?b:
{};const {format:e,formatType:f}=a;return{format:e,formatType:f}}function Od(a,b){switch(b){case "latitude":case "longitude":return"quantitative";case "row":case "column":case "facet":case "shape":case "strokeDash":return"nominal";case "order":return"ordinal"}if("sort"in a&&h.isArray(a.sort))return"ordinal";const {aggregate:e,bin:f,timeUnit:g}=a;if(g)return"temporal";if(f||e&&!za(e)&&!la(e))return"quantitative";let p;if(Td(a)&&(null==(p=a.scale)?0:p.type))switch(Bg[a.scale.type]){case "numeric":case "discretizing":return"quantitative";
case "time":return"temporal"}return"nominal"}function xe(a){if(Ia(a))return a;if(Da(a))return a.condition}function Fe(a){if(yc(a))return a;if(Qa(a))return a.condition}function re(a,b,e){var f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return h.isString(a)||h.isNumber(a)||h.isBoolean(a)?(f=h.isString(a)?"string":h.isNumber(a)?"number":"boolean",K(`Channel ${b} is a ${f}. Converted to {value: ${m(a)}}.`),{value:a}):yc(a)?Ne(a,b,e,f):Qa(a)?Object.assign({},a,{condition:Ne(a.condition,
b,e,f)}):a}function Ne(a,b,e,f){if(Ld(a)){var g=Object.assign({},a),p=a.formatType;g=(delete g.format,delete g.formatType,g);if(fe(p)&&!e.customFormatTypes)return K(Sc(b)),Ne(g,b,e,f)}else if((p=Ad(a)?"axis":a&&"legend"in a?"legend":a&&"header"in a?"header":null)&&a[p]){var B=a[p];g=Object.assign({},B);B=B.formatType;g=(delete g.format,delete g.formatType,g);if(fe(B)&&!e.customFormatTypes)return K(Sc(b)),Ne(Object.assign({},a,{[p]:g}),b,e,f)}if(Ia(a))return hd(a,b,f);b=a.type;b||({datum:b}=a,b=h.isNumber(b)?
"quantitative":h.isString(b)?"nominal":Ka(b)?"temporal":void 0,a=Object.assign({},a,{type:b}));return a}function hd(a,b){var {compositeMark:e=!1}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};const {aggregate:f,timeUnit:g,bin:p,field:B}=a,P=Object.assign({},a);e||!f||Ma(f)||za(f)||la(f)||(K(`Invalid aggregation operator "${f}".`),delete P.aggregate);g&&(P.timeUnit=nd(g));B&&(P.field=`${B}`);vb(p)&&(P.bin=ve(p,b));jb(p)&&!H(b)&&K(`Channel ${b} should not be used with "binned" bin.`);if(Rc(P)){({type:e}=
P);var X=Nd(e);e!==X&&(P.type=X);"quantitative"!==e&&Pa(f)&&(K(`Invalid field type "${e}" for aggregate: "${f}", using "quantitative" instead.`),P.type="quantitative")}else w(b)||(e=Od(P,b),P.type=e);if(Rc(P)){const {compatible:cb,warning:pb}=ff(P,b)||{};!1===cb&&K(pb)}if("sort"in P&&h.isString(P.sort)){({sort:e}=P);if(e in wj)return Object.assign({},P,{sort:{encoding:e}});X=e.substr(1);if("-"===e.charAt(0)&&X in wj)return Object.assign({},P,{sort:{encoding:X,order:"descending"}})}if(P&&"header"in
P&&({header:e}=P,e)){var ta=e;X=Object.assign({},ta);ta=ta.orient;X=(delete X.orient,X);if(ta)return Object.assign({},P,{header:Object.assign({},X,{labelOrient:e.labelOrient||ta,titleOrient:e.titleOrient||ta})})}return P}function ve(a,b){return h.isBoolean(a)?{maxbins:W(b)}:"binned"===a?{binned:!0}:a.maxbins||a.step?a:Object.assign({},a,{maxbins:W(b)})}function ff(a,b){var e=a.type;if("geojson"===e&&"shape"!==b)return{compatible:!1,warning:`Channel ${b} should not be used with a geojson data.`};switch(b){case "row":case "column":case "facet":return Fd(a)?
Ii:{compatible:!1,warning:`${b} encoding should be discrete (ordinal / nominal / binned).`};case "x":case "y":case "xOffset":case "yOffset":case "color":case "fill":case "stroke":case "text":case "detail":case "key":case "tooltip":case "href":case "url":case "angle":case "theta":case "radius":case "description":return Ii;case "longitude":case "longitude2":case "latitude":case "latitude2":return"quantitative"!==e?{compatible:!1,warning:`Channel ${b} should be used with a quantitative field only, not ${a.type} field.`}:
Ii;case "opacity":case "fillOpacity":case "strokeOpacity":case "strokeWidth":case "size":case "theta2":case "radius2":case "x2":case "y2":return"nominal"!==e||a.sort?Ii:{compatible:!1,warning:`Channel ${b} should not be used with an unsorted discrete field.`};case "shape":case "strokeDash":if(e=!Fd(a)){let f;e=!(Td(a)&&ai.has(null==(f=a.scale)?void 0:f.type))}return e?{compatible:!1,warning:`${b} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}:
Ii;case "order":return"nominal"!==a.type||"sort"in a?Ii:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}function lf(a){var {formatType:b}=Qd(a),e;if(!(e="time"===b)){if(b=!b)b=a&&("temporal"===a.type||Ia(a)&&!!a.timeUnit);e=b}return e}function Dg(a,b){let {timeUnit:e,type:f,wrapTime:g,undefinedIfExprNotRequired:p}=b;var B=(b=e&&(null==(B=nd(e))?void 0:B.unit))||"temporal"===f;let P;Ea(a)?P=a.expr:Mb(a)?P=a.signal:Ka(a)?(B=!0,P=Sb(a)):(h.isString(a)||
h.isNumber(a))&&B&&(P=`datetime(${m(a)})`,yl[b]&&(h.isNumber(a)&&1E4>a||h.isString(a)&&isNaN(Date.parse(a)))&&(P=Sb({[b]:a})));return P?g&&B?`time(${P})`:P:p?void 0:m(a)}function vf(a,b){const {type:e}=a;return b.map(f=>{var g=Ia(a)&&!Kc(a.timeUnit)?a.timeUnit:void 0;g=Dg(f,{timeUnit:g,type:e,undefinedIfExprNotRequired:!0});return void 0!==g?{signal:g}:f})}function Of(a,b){return vb(a.bin)?!!Mh[b]&&["ordinal","nominal"].includes(a.type):(console.warn("Only call this method for binned field defs."),
!1)}function bg(a){return null==a?void 0:a.condition}function gf(a){return"mark"in a}function Re(a,b){return(a=a&&a[b])?h.isArray(a)?Ub(a,e=>!!e.field):Ia(a)||Da(a):!1}function cg(a,b){return(a=a&&a[b])?h.isArray(a)?Ub(a,e=>!!e.field):Ia(a)||nb(a)||Qa(a):!1}function Tg(a,b){if(H(b)){const e=a[b];if((Ia(e)||nb(e))&&(Oc(e.type)||Ia(e)&&e.timeUnit))return b=C(b),cg(a,b)}return!1}function Bf(a){return Ub(Cl,b=>Re(a,b)?(b=a[b],h.isArray(b)?Ub(b,e=>!!e.aggregate):(b=xe(b))&&!!b.aggregate):!1)}function dg(a,
b){const e=[],f=[],g=[],p=[],B={};Vg(a,(P,X)=>{if(Ia(P)){var ta=Object.assign({},P),cb=P.field;const gc=P.aggregate,Pc=P.bin,kc=P.timeUnit;ta=(delete ta.field,delete ta.aggregate,delete ta.bin,delete ta.timeUnit,ta);if(gc||kc||Pc){var pb;const Nc=null==(pb=ke(P))?void 0:pb.title;pb=qc(P,{forAs:!0});ta=Object.assign({},Nc?[]:{title:te(P,b,{allowDisabling:!0})},ta,{field:pb});if(gc){let Zc;za(gc)?(Zc="argmax",pb=qc({op:"argmax",field:gc.argmax},{forAs:!0}),ta.field=`${pb}.${cb}`):la(gc)?(Zc="argmin",
pb=qc({op:"argmin",field:gc.argmin},{forAs:!0}),ta.field=`${pb}.${cb}`):"boxplot"!==gc&&"errorbar"!==gc&&"errorband"!==gc&&(Zc=gc);Zc&&(P={op:Zc,as:pb},cb&&(P.field=cb),p.push(P))}else e.push(pb),Rc(P)&&vb(Pc)?(f.push({bin:Pc,field:cb,as:pb}),e.push(qc(P,{binSuffix:"end"})),Of(P,X)&&e.push(qc(P,{binSuffix:"range"})),H(X)&&(B[`${X}2`]={field:`${pb}_end`}),ta.bin="binned",w(X)||(ta.type="quantitative")):kc&&!Kc(kc)&&(g.push({timeUnit:kc,field:cb,as:pb}),(cb=Rc(P)&&"temporal"!==P.type&&"time")&&("text"===
X||"tooltip"===X?ta.formatType=cb:Fi[X]?ta.legend=Object.assign({},{formatType:cb},ta.legend):H(X)&&(ta.axis=Object.assign({},{formatType:cb},ta.axis))));B[X]=ta}else e.push(cb),B[X]=a[X]}else B[X]=a[X]});return{bins:f,timeUnits:g,aggregate:p,groupby:e,encoding:B}}function Hf(a,b,e){e=Aa(b)[e];return e&&("binned"!==e||(e=a["x2"===b?"x":"y"],Ia(e)&&Ia(a[b])&&jb(e.bin)))?!0:!1}function Ug(a,b,e,f){const g={};for(var p of sd(a))Ej[p]||K(`${p}-encoding is dropped as ${p} is not a valid encoding channel.`);
for(let P of Kj)if(a[P]){p=a[P];if(P in Wi){a:{switch(P){case "xOffset":var B="x";break a;case "yOffset":B="y";break a}B=void 0}const X=g[B];if(Ia(X)&&ad(X.type)&&Ia(p)&&!X.timeUnit){K(`${B}Offset dropped because ${B} is continuous`);continue}}"angle"!==P||"arc"!==b||a.theta||(K("Arc marks uses theta channel rather than angle, replacing angle with theta."),P="theta");if(Hf(a,P,b)){if("size"===P&&"line"===b){let X;if(null==(X=xe(a[P]))?0:X.aggregate){K("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.");
continue}}if("color"===P&&(e?"fill"in a:"stroke"in a))K(vd("encoding",{fill:"fill"in a,stroke:"stroke"in a}));else if("detail"===P||"order"===P&&!h.isArray(p)&&!fd(p)||"tooltip"===P&&h.isArray(p)){if(p){if("order"===P&&(B=a[P])&&B.sort&&!B.field){g[P]=B;continue}g[P]=h.array(p).reduce((X,ta)=>{Ia(ta)?X.push(hd(ta,P)):K(od(ta,P));return X},[])}}else{if("tooltip"===P&&null===p)g[P]=null;else if(!(Ia(p)||nb(p)||fd(p)||ja(p)||Mb(p))){K(od(p,P));continue}g[P]=re(p,P,f)}}else K(gd(P,b))}return g}function eh(a,
b){const e={};for(const f of sd(a)){const g=re(a[f],f,b,{compositeMark:!0});e[f]=g}return e}function Sg(a){const b=[];for(const e of sd(a))if(Re(a,e)){const f=h.array(a[e]);for(const g of f)Ia(g)?b.push(g):Da(g)&&b.push(g.condition)}return b}function Vg(a,b,e){if(a)for(const f of sd(a)){const g=a[f];if(h.isArray(g))for(const p of g)b.call(e,p,f);else b.call(e,g,f)}}function Wg(a,b,e,f){return a?sd(a).reduce((g,p)=>{const B=a[p];return h.isArray(B)?B.reduce((P,X)=>b.call(f,P,X,p),g):b.call(f,g,B,p)},
e):e}function kh(a,b){return sd(b).reduce((e,f)=>{switch(f){case "x":case "y":case "href":case "description":case "url":case "x2":case "y2":case "xOffset":case "yOffset":case "theta":case "theta2":case "radius":case "radius2":case "latitude":case "longitude":case "latitude2":case "longitude2":case "text":case "shape":case "angle":case "tooltip":return e;case "order":if("line"===a||"trail"===a)return e;case "detail":case "key":f=b[f];if(h.isArray(f)||Ia(f))for(var g of h.array(f))g.aggregate||e.push(qc(g,
{}));return e;case "size":if("trail"===a)return e;case "color":case "fill":case "stroke":case "opacity":case "fillOpacity":case "strokeOpacity":case "strokeDash":case "strokeWidth":return(g=xe(b[f]))&&!g.aggregate&&e.push(qc(g,{})),e}},[])}function If(a,b,e){let f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0;if("tooltip"in e)return{tooltip:e.tooltip};const g=a.map(B=>{let {fieldPrefix:P,titlePrefix:X}=B;B=f?` of ${U(b)}`:"";return{field:P+b.field,type:b.type,title:Mb(X)?{signal:`${X}"${escape(B)}"`}:
X+B}}),p=Sg(e).map(Ud);return{tooltip:[...g,...Za(p,Xb)]}}function U(a){const {title:b,field:e}=a;return T(b,e)}function Ja(a,b,e,f,g){const {scale:p,axis:B}=e;return P=>{let {partName:X,mark:ta,positionPrefix:cb,endPositionPrefix:pb,extraEncoding:gc={}}=P;P=U(e);return mb(a,X,g,{mark:ta,encoding:Object.assign({},{[b]:Object.assign({},{field:`${cb}_${e.field}`,type:e.type},void 0!==P?{title:P}:{},void 0!==p?{scale:p}:{},void 0!==B?{axis:B}:{})},h.isString(pb)?{[`${b}2`]:{field:`${pb}_${e.field}`}}:
{},f,gc)})}}function mb(a,b,e,f){const {clip:g,color:p,opacity:B}=a,P=a.type;return a[b]||void 0===a[b]&&e[b]?[Object.assign({},f,{mark:Object.assign({},e[b],g?{clip:g}:{},p?{color:p}:{},B?{opacity:B}:{},id(f.mark)?f.mark:{type:f.mark},{style:`${P}-${String(b)}`},h.isBoolean(a[b])?{}:a[b])})]:[]}function Dc(a,b,e){({encoding:a}=a);b="vertical"===b?"y":"x";const f=a[`${b}2`],g=a[`${b}Error`],p=a[`${b}Error2`];return{continuousAxisChannelDef:Lc(a[b],e),continuousAxisChannelDef2:Lc(f,e),continuousAxisChannelDefError:Lc(g,
e),continuousAxisChannelDefError2:Lc(p,e),continuousAxis:b}}function Lc(a,b){if(null==a?0:a.aggregate){var e=Object.assign({},a);a=a.aggregate;e=(delete e.aggregate,e);a!==b&&K(`Continuous axis should not have customized aggregation function ${a}; ${b} already agregates the axis.`);return e}return a}function Gd(a,b){const {mark:e,encoding:f}=a,{x:g,y:p}=f;if(id(e)&&e.orient)return e.orient;if(tc(g)){if(tc(p)){a=Ia(g)&&g.aggregate;const B=Ia(p)&&p.aggregate;if(!a&&B===b)return"vertical";if(B||a!==
b){if(a===b&&B===b)throw Error("Both x and y cannot have aggregate");return lf(p)&&!lf(g)?"horizontal":"vertical"}}return"horizontal"}if(tc(p))return"vertical";throw Error(`Need a valid continuous axis for ${b}s`);}function le(a){return h.isNumber(a)?"tukey":a}function Xd(a,b){var {config:e}=b,f=a=Object.assign({},a,{encoding:eh(a.encoding,e)});b=Object.assign({},f);var g=f.mark;f=f.params;b=(delete b.mark,delete b.encoding,delete b.params,delete b.projection,b);g=id(g)?g:{type:g};f&&K(Jb("boxplot"));
var p;f=null!=(p=g.extent)?p:e.boxplot.extent;var B=Zb("size",g,e),P=g.invalid;p=le(f);var X=a;a=Gd(X,"boxplot");const {continuousAxisChannelDef:ta,continuousAxis:cb}=Dc(X,a,"boxplot");var pb=ta.field,gc=le(f),Pc=[...Jf(pb),{op:"median",field:pb,as:`mid_box_${pb}`},{op:"min",field:pb,as:("min-max"===gc?"lower_whisker_":"min_")+pb},{op:"max",field:pb,as:("min-max"===gc?"upper_whisker_":"max_")+pb}];pb="min-max"===gc||"tukey"===gc?[]:[{calculate:`datum["upper_box_${pb}"] - datum["lower_box_${pb}"]`,
as:`iqr_${pb}`},{calculate:`min(datum["upper_box_${pb}"] + datum["iqr_${pb}"] * ${f}, datum["max_${pb}"])`,as:`upper_whisker_${pb}`},{calculate:`max(datum["lower_box_${pb}"] - datum["iqr_${pb}"] * ${f}, datum["min_${pb}"])`,as:`lower_whisker_${pb}`}];X=Object.assign({},X.encoding);var kc;gc=(delete X[cb],X);X=Object.assign({},gc);gc=gc.tooltip;X=(delete X.tooltip,X);if(gc){var Nc;if(h.isArray(gc)){for(var Zc of gc)Zc.aggregate?(kc||(kc=[]),kc.push(Zc)):(Nc||(Nc=[]),Nc.push(Zc));kc&&(X.tooltip=kc)}else gc.aggregate?
X.tooltip=gc:Nc=gc;h.isArray(Nc)&&1===Nc.length&&(Nc=Nc[0]);kc={customTooltipWithoutAggregatedField:Nc,filteredEncoding:X}}else kc={filteredEncoding:X};const {customTooltipWithoutAggregatedField:dd,filteredEncoding:ie}=kc,{bins:$d,timeUnits:Ce,aggregate:Oe,groupby:Lf,encoding:Sf}=dg(ie,e);kc=[...$d,...Ce,{aggregate:[...Oe,...Pc],groupby:Lf},...pb];const {bins:Ig,timeUnits:Ve,transform:Yf,continuousAxisChannelDef:We,continuousAxis:Ah,groupby:il,aggregate:Fm,encodingWithoutContinuousAxis:Dk,ticksOrient:xm,
boxOrient:Gm,customTooltipWithoutAggregatedField:ym}={bins:$d,timeUnits:Ce,transform:kc,groupby:Lf,aggregate:Oe,continuousAxisChannelDef:ta,continuousAxis:cb,encodingWithoutContinuousAxis:Sf,ticksOrient:"vertical"===a?"horizontal":"vertical",boxOrient:a,customTooltipWithoutAggregatedField:dd};Nc=Object.assign({},Dk);kc=Dk.color;Pc=Dk.size;Nc=(delete Nc.color,delete Nc.size,Nc);Zc=Ja(g,Ah,We,Nc,e.boxplot);a=Ja(g,Ah,We,Dk,e.boxplot);Pc=Ja(g,Ah,We,Object.assign({},Nc,Pc?{size:Pc}:{}),e.boxplot);pb=If([{fieldPrefix:"min-max"===
p?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===p?"lower_whisker_":"min_",titlePrefix:"Min"}],We,Dk);X={type:"tick",color:"black",opacity:1,orient:xm,invalid:P,aria:!1};gc="min-max"===p?pb:If([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],We,Dk);Zc=[...Zc({partName:"rule",
mark:{type:"rule",invalid:P,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:gc}),...Zc({partName:"rule",mark:{type:"rule",invalid:P,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:gc}),...Zc({partName:"ticks",mark:X,positionPrefix:"lower_whisker",extraEncoding:gc}),...Zc({partName:"ticks",mark:X,positionPrefix:"upper_whisker",extraEncoding:gc})];B=[...("tukey"!==p?Zc:[]),...a({partName:"box",mark:Object.assign({},{type:"bar"},
B?{size:B}:{},{orient:Gm,invalid:P,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:pb}),...Pc({partName:"median",mark:Object.assign({},{type:"tick",invalid:P},h.isObject(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{},B?{size:B}:{},{orient:xm,aria:!1}),positionPrefix:"mid_box",extraEncoding:pb})];if("min-max"===p){var Gj;return Object.assign({},b,{transform:(null!=(Gj=b.transform)?Gj:[]).concat(Yf),layer:B})}Gj=`datum["lower_box_${We.field}"]`;
p=`datum["upper_box_${We.field}"]`;P=`(${p} - ${Gj})`;Gj=`${Gj} - ${f} * ${P}`;P=`${p} + ${f} * ${P}`;a=`datum["${We.field}"]`;f={joinaggregate:Jf(We.field),groupby:il};p={transform:[{filter:`(${Gj} <= ${a}) && (${a} <= ${P})`},{aggregate:[{op:"min",field:We.field,as:`lower_whisker_${We.field}`},{op:"max",field:We.field,as:`upper_whisker_${We.field}`},{op:"min",field:`lower_box_${We.field}`,as:`lower_box_${We.field}`},{op:"max",field:`upper_box_${We.field}`,as:`upper_box_${We.field}`},...Fm],groupby:il}],
layer:Zc};Nc=Object.assign({},Nc);Nc=(delete Nc.tooltip,Nc);const {scale:zm,axis:Hm}=We;Zc=U(We);Pc=ac(Hm,["title"]);e=mb(g,"outliers",e.boxplot,{transform:[{filter:`(${a} < ${Gj}) || (${a} > ${P})`}],mark:"point",encoding:Object.assign({},{[Ah]:Object.assign({},{field:We.field,type:We.type},void 0!==Zc?{title:Zc}:{},void 0!==zm?{scale:zm}:{},ib(Pc)?{}:{axis:Pc})},Nc,kc?{color:kc}:{},ym?{tooltip:ym}:{})})[0];g=[...Ig,...Ve,f];e?e={transform:g,layer:[e,p]}:(e=p,e.transform.unshift(...g));return Object.assign({},
b,{layer:[e,{transform:Yf,layer:B}]})}function Jf(a){return[{op:"q1",field:a,as:`lower_box_${a}`},{op:"q3",field:a,as:`upper_box_${a}`}]}function mf(a,b){({config:b}=b);a=Object.assign({},a,{encoding:eh(a.encoding,b)});const {transform:e,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:p,ticksOrient:B,markDef:P,outerSpec:X,tooltipEncoding:ta}=Vf(a,"errorbar",b);delete p.size;a=Ja(P,g,f,p,b.errorbar);b=P.thickness;var cb=P.size;cb=Object.assign({},{type:"tick",orient:B,aria:!1},
void 0!==b?{thickness:b}:{},void 0!==cb?{size:cb}:{});a=[...a({partName:"ticks",mark:cb,positionPrefix:"lower",extraEncoding:ta}),...a({partName:"ticks",mark:cb,positionPrefix:"upper",extraEncoding:ta}),...a({partName:"rule",mark:Object.assign({},{type:"rule",ariaRoleDescription:"errorbar"},void 0!==b?{size:b}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:ta})];return Object.assign({},X,{transform:e},1<a.length?{layer:a}:Object.assign({},a[0]))}function wg(a,b){var {encoding:e}=
a;if(!(!yc(e.x)&&!yc(e.y)||yc(e.x2)||yc(e.y2)||yc(e.xError)||yc(e.xError2)||yc(e.yError)||yc(e.yError2)))return{orient:Gd(a,b),inputType:"raw"};var f=yc(e.x2)||yc(e.y2);var g=yc(e.xError)||yc(e.xError2)||yc(e.yError)||yc(e.yError2);a=e.x;const p=e.y;if(f){if(g)throw Error(`${b} cannot be both type aggregated-upper-lower and aggregated-error`);f=e.x2;e=e.y2;if(yc(f)&&yc(e))throw Error(`${b} cannot have both x2 and y2`);if(yc(f)){if(tc(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};
throw Error(`Both x and x2 have to be quantitative in ${b}`);}if(yc(e)){if(tc(p))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw Error(`Both y and y2 have to be quantitative in ${b}`);}}else{f=e.xError;g=e.yError;const B=e.yError2;if(yc(e.xError2)&&!yc(f))throw Error(`${b} cannot have xError2 without xError`);if(yc(B)&&!yc(g))throw Error(`${b} cannot have yError2 without yError`);if(yc(f)&&yc(g))throw Error(`${b} cannot have both xError and yError with both are quantiative`);if(yc(f)){if(tc(a))return{orient:"horizontal",
inputType:"aggregated-error"};throw Error("All x, xError, and xError2 (if exist) have to be quantitative");}if(yc(g)){if(tc(p))return{orient:"vertical",inputType:"aggregated-error"};throw Error("All y, yError, and yError2 (if exist) have to be quantitative");}}throw Error("No ranged axis");}function Vf(a,b,e){var f=Object.assign({},a),g=a.mark,p=a.encoding,B=a.params;f=(delete f.mark,delete f.encoding,delete f.params,delete f.projection,f);g=id(g)?g:{type:g};B&&K(Jb(b));const {orient:P,inputType:X}=
wg(a,b),{continuousAxisChannelDef:ta,continuousAxisChannelDef2:cb,continuousAxisChannelDefError:pb,continuousAxisChannelDefError2:gc,continuousAxis:Pc}=Dc(a,P,b);a=[];B=[];var kc=ta.field,Nc=!1;if("raw"===X){var Zc=g.center?g.center:g.extent?"iqr"===g.extent?"median":"mean":e.errorbar.center;var dd=g.extent?g.extent:"mean"===Zc?"stderr":"iqr";"median"===Zc!==("iqr"===dd)&&K(`${Zc} is not usually used with ${dd} for ${b}.`);"stderr"===dd||"stdev"===dd?(a=[{op:dd,field:kc,as:`extent_${kc}`},{op:Zc,
field:kc,as:`center_${kc}`}],B=[{calculate:`datum["center_${kc}"] + datum["extent_${kc}"]`,as:`upper_${kc}`},{calculate:`datum["center_${kc}"] - datum["extent_${kc}"]`,as:`lower_${kc}`}],kc={fieldPrefix:"center_",titlePrefix:Ra(Zc)},Nc=dd,Nc={fieldPrefix:"upper_",titlePrefix:`${Ra(Zc)} ${"+"} ${Nc}`},b=dd,b=`${Ra(Zc)} ${"-"} ${b}`,Zc=[kc,Nc,{fieldPrefix:"lower_",titlePrefix:b}],Nc=!0):("ci"===dd?(b="mean",Zc="ci0",dd="ci1"):(b="median",Zc="q1",dd="q3"),a=[{op:Zc,field:kc,as:`lower_${kc}`},{op:dd,
field:kc,as:`upper_${kc}`},{op:b,field:kc,as:`center_${kc}`}],Zc=[{fieldPrefix:"upper_",titlePrefix:te({field:kc,aggregate:dd,type:"quantitative"},e,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:te({field:kc,aggregate:Zc,type:"quantitative"},e,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:te({field:kc,aggregate:b,type:"quantitative"},e,{allowDisabling:!1})}])}else{if(g.center||g.extent){b=g.center;var ie=g.extent;K(`${ie?"extent ":""}${ie&&b?"and ":""}${b?"center ":""}${ie&&b?
"are ":"is "}not needed when data are aggregated.`)}"aggregated-upper-lower"===X?(Zc=[],B=[{calculate:`datum["${cb.field}"]`,as:`upper_${kc}`},{calculate:`datum["${kc}"]`,as:`lower_${kc}`}]):"aggregated-error"===X&&(Zc=[{fieldPrefix:"",titlePrefix:kc}],B=[{calculate:`datum["${kc}"] + datum["${pb.field}"]`,as:`upper_${kc}`}],gc?B.push({calculate:`datum["${kc}"] + datum["${gc.field}"]`,as:`lower_${kc}`}):B.push({calculate:`datum["${kc}"] - datum["${pb.field}"]`,as:`lower_${kc}`}));for(dd of B)Zc.push({fieldPrefix:dd.as.substring(0,
6),titlePrefix:tb(tb(dd.calculate,'datum["',""),'"]',"")})}const {errorBarSpecificAggregate:$d,postAggregateCalculates:Ce,tooltipSummary:Oe,tooltipTitleWithFieldName:Lf}={postAggregateCalculates:B,errorBarSpecificAggregate:a,tooltipSummary:Zc,tooltipTitleWithFieldName:Nc};p=Object.assign({},p);a="x"===Pc?"x2":"y2";B="x"===Pc?"xError":"yError";kc="x"===Pc?"xError2":"yError2";p=(delete p[Pc],delete p[a],delete p[B],delete p[kc],p);const {bins:Sf,timeUnits:Ig,aggregate:Ve,groupby:Yf,encoding:We}=dg(p,
e);e=[...Ve,...$d];p="raw"!==X?[]:Yf;a=If(Oe,ta,We,Lf);let Ah;return{transform:[...(null!=(Ah=f.transform)?Ah:[]),...Sf,...Ig,...(0===e.length?[]:[{aggregate:e,groupby:p}]),...Ce],groupby:p,continuousAxisChannelDef:ta,continuousAxis:Pc,encodingWithoutContinuousAxis:We,ticksOrient:"vertical"===P?"horizontal":"vertical",markDef:g,outerSpec:f,tooltipEncoding:a}}function Xg(a,b){({config:b}=b);a=Object.assign({},a,{encoding:eh(a.encoding,b)});const {transform:e,continuousAxisChannelDef:f,continuousAxis:g,
encodingWithoutContinuousAxis:p,markDef:B,outerSpec:P,tooltipEncoding:X}=Vf(a,"errorband",b);b=Ja(B,g,f,p,b.errorband);a=void 0!==a.encoding.x&&void 0!==a.encoding.y;let ta={type:a?"area":"rect"},cb={type:a?"line":"rule"};const pb=Object.assign({},B.interpolate?{interpolate:B.interpolate}:{},B.tension&&B.interpolate?{tension:B.tension}:{});a?(ta=Object.assign({},ta,pb,{ariaRoleDescription:"errorband"}),cb=Object.assign({},cb,pb,{aria:!1})):B.interpolate?K(Bd("interpolate")):B.tension&&K(Bd("tension"));
return Object.assign({},P,{transform:e,layer:[...b({partName:"band",mark:ta,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:X}),...b({partName:"borders",mark:cb,positionPrefix:"lower",extraEncoding:X}),...b({partName:"borders",mark:cb,positionPrefix:"upper",extraEncoding:X})]})}function ig(a,b,e){b=new $i(a,b);Qj[a]={normalizer:b,parts:e}}function Kg(a){return"legend"===a||!(null==a||!a.legend)}function Dh(a){return Kg(a)&&h.isObject(a)}function Zd(a){return!(null==a||!a.select)}function ge(a){const b=
[];for(const g of a||[])if(!Zd(g)){var e=g,f=Object.assign({},e);a=e.expr;e=e.bind;f=(delete f.expr,delete f.bind,f);e&&a?(a=Object.assign({},f,{bind:e,init:a}),b.push(a)):(a=Object.assign({},f,a?{update:a}:{},e?{bind:e}:{}),b.push(a))}return b}function of(a){let {step:b,offsetIsDiscrete:e}=a;if(e){let f;return null!=(f=b.for)?f:"offset"}return"position"}function Ge(a){return h.isObject(a)&&void 0!==a.step}function hf(a){return a.view||a.width||a.height}function Ue(a,b,e){const f={},{spacing:g,columns:p}=
e[b];void 0!==g&&(f.spacing=g);void 0!==p&&("facet"in a&&!qe(a.facet)||"concat"in a)&&(f.columns=p);"vconcat"in a&&(f.columns=1);for(const B of Wk)if(void 0!==a[B])if("spacing"===B){b=a[B];let P,X;f[B]=h.isNumber(b)?b:{row:null!=(P=b.row)?P:g,column:null!=(X=b.column)?X:g}}else f[B]=a[B];return f}function pf(a,b){let e;return null!=(e=a[b])?e:a["width"===b?"continuousWidth":"continuousHeight"]}function Wf(a,b){a=Pf(a,b);return Ge(a)?a.step:20}function Pf(a,b){let e;const f=null!=(e=a[b])?e:a["width"===
b?"discreteWidth":"discreteHeight"];return T(f,{step:a.step})}function $e(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{signals:[{name:"color",value:h.isObject(a)?Object.assign({},xl,a):xl}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},
cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Yg(a){var b=sd(a||{});const e={};for(const f of b)b=a[f],e[f]=bg(b)?ed(b):qa(b);return e}function xg(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=Object.assign({},a),e=a.color,f=a.font,g=a.fontSize;a=a.selection;b=(delete b.color,delete b.font,delete b.fontSize,delete b.selection,b);var p=h.mergeConfig,B=De(Zl);f=f?{text:{font:f},style:{"guide-label":{font:f},"guide-title":{font:f},"group-title":{font:f},"group-subtitle":{font:f}}}:{};e=e?$e(e):{};g=g?{signals:[{name:"fontSize",value:h.isObject(g)?Object.assign({},wl,g):wl}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},
"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}:{};g=p.call(h,{},B,f,e,g,b||{});a&&h.writeConfig(g,"selection",a,!0);a=ac(g,sk);for(var P of["background","lineBreak","padding"])g[P]&&(a[P]=qa(g[P]));for(var X of uj)g[X]&&(a[X]=Lb(g[X]));for(var ta of vg)g[ta]&&(a[ta]=Yg(g[ta]));for(const cb of vl)g[cb]&&(a[cb]=Lb(g[cb]));g.legend&&(a.legend=Lb(g.legend));g.scale&&(a.scale=
Lb(g.scale));if(g.style){P=g.style;X=sd(P);ta={};for(const cb of X)ta[cb]=Yg(P[cb]);a.style=ta}g.title&&(a.title=Lb(g.title));g.view&&(a.view=Lb(g.view));return a}function lh(a){a=De(a);for(var b of $l)delete a[b];if(a.axis)for(var e in a.axis)bg(a.axis[e])&&delete a.axis[e];if(a.legend)for(var f of Xl)delete a.legend[f];if(a.mark){for(var g of ri)delete a.mark[g];a.mark.tooltip&&h.isObject(a.mark.tooltip)&&delete a.mark.tooltip}a.params&&(a.signals=(a.signals||[]).concat(ge(a.params)),delete a.params);
for(var p of Zg){for(const pb of ri)delete a[p][pb];if(b=ae[p])for(const pb of b)delete a[p][pb];let cb=g=void 0;b=a;e=p;f=void 0;var B=b[e];"view"===e&&(f="cell");B=Object.assign({},B,b.style[null!=(cb=f)?cb:e]);ib(B)||(b.style[null!=(g=f)?g:e]=B);delete b[e]}for(const cb of sd(Qj))delete a[cb];p=a;const {titleMarkConfig:P,subtitleMarkConfig:X,subtitle:ta}=oc(p.title);ib(P)||(p.style["group-title"]=Object.assign({},p.style["group-title"],P));ib(X)||(p.style["group-subtitle"]=Object.assign({},p.style["group-subtitle"],
X));ib(ta)?delete p.title:p.title=ta;for(const cb in a)h.isObject(a[cb])&&ib(a[cb])&&delete a[cb];return ib(a)?void 0:a}function Qf(a){return Ia(a)&&"quantitative"===rb(a)&&!a.bin}function Rh(a,b,e){let {orient:f,type:g}=e;e="x"===b?"y":"radius";const p="x"===b&&["bar","area"].includes(g);var B=a[b];a=a[e];if(Ia(B)&&Ia(a))if(Qf(B)&&Qf(a)){if(B.stack)return b;if(a.stack)return e;B=Ia(B)&&!!B.aggregate;a=Ia(a)&&!!a.aggregate;if(B!==a)return B?b:e;if(p){if("vertical"===f)return e;if("horizontal"===f)return b}}else{if(Qf(B))return b;
if(Qf(a))return e}else{if(Qf(B))return p&&"vertical"===f?void 0:b;if(Qf(a))return p&&"horizontal"===f?void 0:e}}function og(a){switch(a){case "x":return"y";case "y":return"x";case "theta":return"radius";case "radius":return"theta"}}function vh(a,b){var e=id(a)?a:{type:a};a=e.type;if(!Th.has(a))return null;e=Rh(b,"x",e)||Rh(b,"theta",e);if(!e)return null;const f=b[e];var g=Ia(f)?qc(f,{}):void 0,p=og(e);const B=[],P=new Set;if(b[p]){var X=b[p];(X=Ia(X)?qc(X,{}):void 0)&&X!==g&&(B.push(p),P.add(X))}p=
"x"===p?"xOffset":"yOffset";X=b[p];(X=Ia(X)?qc(X,{}):void 0)&&X!==g&&(B.push(p),P.add(X));g=Nk.reduce((gc,Pc)=>{if("tooltip"!==Pc&&Re(b,Pc)){var kc=b[Pc];for(const Nc of h.array(kc)){kc=xe(Nc);if(kc.aggregate)continue;const Zc=qc(kc,{});Zc&&P.has(Zc)||gc.push({channel:Pc,fieldDef:kc})}}return gc},[]);let ta;void 0!==f.stack?ta=h.isBoolean(f.stack)?f.stack?"zero":null:f.stack:am.has(a)&&(ta="zero");if(!(ta&&ta in Ng)||Bf(b)&&0===g.length)return null;let cb,pb;if((null==f?0:null==(cb=f.scale)?0:cb.type)&&
(null==f?void 0:null==(pb=f.scale)?void 0:pb.type)!==gg.LINEAR)return(null==f?0:f.stack)&&K(`Cannot stack non-linear scale (${f.scale.type}).`),null;if(yc(b[y(e)]))return void 0!==f.stack&&K(`Cannot stack "${e}" if there is already "${e}2".`),null;Ia(f)&&f.aggregate&&!Xk.has(f.aggregate)&&K(`Stacking is applied even though the aggregate function is non-summative ("${f.aggregate}").`);return{groupbyChannels:B,groupbyFields:P,fieldChannel:e,impute:null===f.impute?!1:Oa(a),stackBy:g,offset:ta}}function jg(a,
b,e){a=Lb(a);var f=Zb("orient",a,e);a.orient=aj(a.type,b,f);void 0!==f&&f!==a.orient&&K(`Specified orient "${a.orient}" overridden with "${f}".`);if("bar"===a.type&&a.orient&&(f=Zb("cornerRadiusEnd",a,e),void 0!==f)){const p="horizontal"===a.orient&&b.x2||"vertical"===a.orient&&b.y2?["cornerRadius"]:ci[a.orient];for(var g of p)a[g]=f;void 0!==a.cornerRadiusEnd&&delete a.cornerRadiusEnd}void 0===Zb("opacity",a,e)&&(g=Cb([Rg,Ji,tj,Hi],a.type)&&!Bf(b)?.7:void 0,a.opacity=g);void 0===Zb("cursor",a,e)&&
(b=b.href||a.href||Zb("href",a,e)?"pointer":a.cursor,a.cursor=b);return a}function Sh(a,b,e){({graticule:e}=e);if(e)return!1;b=ic("filled",a,b);a=a.type;return T(b,a!==Rg&&a!==Qg&&a!==jh)}function aj(a,b,e){switch(a){case Rg:case tj:case Hi:case zl:case Rf:case oi:return}const {x:f,y:g,x2:p,y2:B}=b;switch(a){case Ch:if(Ia(f)&&(jb(f.bin)||Ia(g)&&g.aggregate&&!f.aggregate))break;if(Ia(g)&&(jb(g.bin)||Ia(f)&&f.aggregate&&!g.aggregate))return"horizontal";if(B||p){if(e)return e;if(!p){if((Ia(f)&&"quantitative"===
f.type&&!vb(f.bin)||zc(f))&&Ia(g)&&jb(g.bin))return"horizontal";break}if(!B){if((Ia(g)&&"quantitative"===g.type&&!vb(g.bin)||zc(g))&&Ia(f)&&jb(f.bin))break;return"horizontal"}}case jh:if(!(!p||Ia(f)&&jb(f.bin)||!B||Ia(g)&&jb(g.bin)))return;case bi:if(B){if(Ia(g)&&jb(g.bin))return"horizontal";break}else if(p)if(Ia(f)&&jb(f.bin))break;else return"horizontal";else if(a===jh)if(f&&!g)break;else if(g&&!f)return"horizontal";case Qg:case Ji:b=wc(f);const P=wc(g);if(e)return e;if(b&&!P)return"tick"!==a?"horizontal":
"vertical";if(!b&&P)return"tick"!==a?"vertical":"horizontal";if(!b||!P)if(a=Rc(f)&&"temporal"===f.type,e=Rc(g)&&"temporal"===g.type,!a||e){if(!a&&e)return"horizontal";return}}return"vertical"}function Fg(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length?arguments[2]:void 0;if("transparent"===a.point)return{opacity:0};if(a.point)return h.isObject(a.point)?a.point:{};if(void 0!==a.point)return null;if(b.point||e.shape)return h.isObject(b.point)?b.point:{}}function ti(a){let b=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(a.line)return!0===a.line?{}:a.line;if(void 0!==a.line)return null;if(b.line)return!0===b.line?{}:b.line}function di(a,b){return b?Fh(a,b):a}function bj(a,b,e){const f=b[a];if(f&&!h.isString(f)&&"repeat"in f){if(f.repeat in e)return Object.assign({},b,{[a]:e[f.repeat]});K(`Unknown repeated value "${f.repeat}".`)}else return b}function ui(a,b){a=bj("field",a,b);if(void 0!==a){if(null===a)return null;"sort"in a&&Ae(a.sort)&&(b=bj("field",a.sort,
b),a=Object.assign({},a,b?{sort:b}:{}));return a}}function wh(a,b){if(Ia(a))return ui(a,b);b=bj("datum",a,b);b===a||b.type||(b.type="nominal");return b}function Li(a,b){if(yc(a)){if(b=wh(a,b))return b;if(ja(a))return{condition:a.condition}}else{if(Qa(a)){if(b=wh(a.condition,b))return Object.assign({},a,{condition:b});a=Object.assign({},a);return delete a.condition,a}return a}}function Fh(a,b){const e={};for(const g in a)if(h.hasOwnProperty(a,g)){var f=a[g];h.isArray(f)?e[g]=f.map(p=>Li(p,b)).filter(p=>
p):(f=Li(f,b),void 0!==f&&(e[g]=f))}return e}function Eg(a){let {parentEncoding:b,encoding:e={},layer:f}=a;a={};if(b){var g=new Set([...sd(b),...sd(e)]);for(const p of g){g=e[p];const B=b[p];if(yc(g))g=Object.assign({},B,g),a[p]=g;else if(Qa(g))a[p]=Object.assign({},g,{condition:Object.assign({},B,g.condition)});else if(g||null===g)a[p]=g;else if(f||fd(B)||Mb(B)||yc(B)||h.isArray(B))a[p]=B}}else a=e;return!a||ib(a)?void 0:a}function Gh(a){const {parentProjection:b,projection:e}=a;if(b&&e){const {parentProjection:f,
projection:g}={parentProjection:b,projection:e};a=`Layer's shared projection ${m(f)} is overridden by a child projection ${m(g)}.`;K(a)}return null!=e?e:b}function Hh(a){return a.map(b=>"filter"in b?{filter:ab(b.filter,ld)}:b)}function eg(a,b){var e=Object.assign({},a);const f=a.transform;e=(delete e.transform,e);return f?(a=f.map(g=>{if("filter"in g)return{filter:fh(g,b)};if("bin"in g&&h.isObject(g.bin))return Object.assign({},g,{bin:fi(g.bin)});if("lookup"in g){var p=g.from,B=Object.assign({},p);
p=p.selection;B=(delete B.selection,B);return p?Object.assign({},g,{from:Object.assign({},{param:p},B)}):g}return g}),Object.assign({},e,{transform:a})):a}function cj(a,b){a=De(a);Ia(a)&&h.isObject(a.bin)&&(a.bin=fi(a.bin));var e,f;Td(a)&&(null==(e=a.scale)?0:null==(f=e.domain)?0:f.selection)&&(f=a.scale.domain,e=Object.assign({},f),f=f.selection,e=(delete e.selection,e),a.scale.domain=Object.assign({},e,f?{param:f}:{}));ja(a)&&(h.isArray(a.condition)?a.condition=a.condition.map(g=>{var p=Object.assign({},
g);const B=g.param;p=(delete p.selection,delete p.param,delete p.test,p);return B?g:Object.assign({},p,{test:fh(g,b)})}):(f=cj(a.condition,b),e=Object.assign({},f),f=f.param,e=(delete e.selection,delete e.param,delete e.test,e),a.condition=f?a.condition:Object.assign({},e,{test:fh(a.condition,b)})));return a}function fi(a){var b=a.extent;if(null==b?0:b.selection){var e=Object.assign({},b);b=b.selection;e=(delete e.selection,e);return Object.assign({},a,{extent:Object.assign({},e,{param:b})})}return a}
function fh(a,b){const e=f=>ab(f,g=>{var p;const B=null!=(p=b.emptySelections[g])?p:!0;p={param:g,empty:B};let P;null!=(P=b.selectionPredicates)[g]||(P[g]=[]);b.selectionPredicates[g].push(p);return p});return a.selection?e(a.selection):ab(a.test||a.filter,f=>f.selection?e(f.selection):f)}function vi(a,b){void 0===b&&(b=xg(a.config));const e=Aj(a,b),{width:f,height:g}=a;{let {width:p,height:B}={width:f,height:g,autosize:a.autosize};a=gf(e)||"layer"in e;const P={};a?"container"==p&&"container"==B?
(P.type="fit",P.contains="padding"):"container"==p?(P.type="fit-x",P.contains="padding"):"container"==B&&(P.type="fit-y",P.contains="padding"):("container"==p&&(K(Ca("width")),p=void 0),"container"==B&&(K(Ca("height")),B=void 0));b=Object.assign({},{type:"pad"},P,b?gh(b.autosize):{},gh(e.autosize));"fit"!==b.type||a||(K('Autosize "fit" only works for single views and layered views.'),b.type="pad");"container"==p&&"fit"!=b.type&&"fit-x"!=b.type&&K(Sa("width"));"container"==B&&"fit"!=b.type&&"fit-y"!=
b.type&&K(Sa("height"));b=pa(b,{type:"pad"})?void 0:b}return Object.assign({},e,b?{autosize:b}:{})}function Aj(a){const b={config:1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}};return uh.map(rg.map(Og.map(a,b),b),b)}function gh(a){return h.isString(a)?{type:a}:null!=a?a:{}}function nh(a,b){const e={};for(const f of xj)a&&void 0!==a[f]&&(e[f]=qa(a[f]));b&&(e.params=a.params);return e}function Gg(a){return{explicit:!0,value:a}}function Se(a){return{explicit:!1,value:a}}function Ih(a){return(b,
e,f,g)=>{const p=a(b.value,e.value);return 0<p?b:0>p?e:Lg(b,e,f,g)}}function Lg(a,b,e,f){if(a.explicit&&b.explicit){var g=a.value;b=b.value;e=`Conflicting ${f.toString()} property "${e.toString()}" (${m(g)} and ${m(b)}). Using ${m(g)}.`;K(e)}return a}function xf(a,b,e,f){let g=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Lg;return void 0===a||void 0===a.value?b:a.explicit&&!b.explicit?a:b.explicit&&!a.explicit?b:pa(a.value,b.value)?a:g(a,b,e,f)}function Mi(a){return"name"in a&&!("url"in
a)&&!("values"in a)&&!pg(a)}function pg(a){return a&&("sequence"in a||"sphere"in a||"graticule"in a)}function Mg(a){a=Object.assign({},a);a=(delete a.signals,delete a.hasLegend,delete a.index,a);a.field=bb(a.field);return a}function oh(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:h.identity;if(h.isArray(a)){const f=a.map(g=>oh(g,b,e));return b?`[${f.join(", ")}]`:f}return Ka(a)?b?e(Sb(a)):e(nc(a)):b?e(m(a)):a}function $g(a,
b){a.component.selection&&sd(a.component.selection).length&&(a=h.stringValue(a.getName("cell")),b.unshift({name:"facet",value:{},on:[{events:h.parseSelector("pointermove","scope"),update:`isTuple(facet) ? facet : group(${a}).datum`}]}));return wa(b)}function Jh(a,b){var e=!1,f;for(const g of kg(null!=(f=a.component.selection)?f:{})){const p=g.name;e=h.stringValue(p+"_store");0===b.filter(B=>B.name===p).length&&(f="point"===g.type?", true, true)":")",b.push({name:g.name,update:`${"vlSelectionResolve"}(${e}, ${h.stringValue("global"===
g.resolve?"union":g.resolve)}${f}`}));e=!0;for(const B of dj)B.defined(g)&&B.topLevelSignals&&(b=B.topLevelSignals(a,g,b))}e&&0===b.filter(g=>"unit"===g.name).length&&b.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]});return wa(b)}function ah(a,b){b=[...b];const e=ag(a,{escape:!1});let f;for(const g of kg(null!=(f=a.component.selection)?f:{})){a={name:g.name+"_store"};g.project.hasSelectionId&&(a.transform=[{type:"collect",sort:{field:"_vgsid_"}}]);
if(g.init){const p=g.project.items.map(Mg);a.values=g.project.hasSelectionId?g.init.map(B=>({unit:e,_vgsid_:oh(B,!1)[0]})):g.init.map(B=>({unit:e,fields:p,values:oh(B,!1)}))}b.filter(p=>p.name===g.name+"_store").length||b.push(a)}return b}function D(a,b){let e;for(const f of kg(null!=(e=a.component.selection)?e:{}))for(const g of dj)g.defined(f)&&g.marks&&(b=g.marks(a,f,b));return b}function Y(a,b){for(const e of a.children)Nf(e)&&(b=D(e,b));return b}function wa(a){return a.map(b=>{b.on&&!b.on.length&&
delete b.on;return b})}function Na(a){let {timeUnit:b,field:e,reverse:f}=a;const {unit:g,utc:p}=b;a=Xc(g);const {part:B,step:P}=Me(a,b.step);return`${p?"utcOffset":"timeOffset"}('${B}', datum['${e}'], ${f?-P:P})`}function Ib(a,b,e){let [f,g]=a;if(void 0!==b&&.5!==b){a=`datum['${f}']`;const p=`datum['${g}']`;return[{type:"formula",expr:Ab([Na({timeUnit:e,field:f,reverse:!0}),a],b+.5),as:`${f}_${"offsetted_rect_start"}`},{type:"formula",expr:Ab([a,p],b+.5),as:`${f}_${"offsetted_rect_end"}`}]}return[]}
function Ab(a,b){let [e,f]=a;return`${1-b} * ${e} + ${b} * ${f}`}function dc(a,b){return`domain(${h.stringValue(a.scaleName(b))})`}function r(a){let b;return a.parent&&Ti(a.parent)&&(null!=(b=!a.parent.parent)?b:r(a.parent.parent))}function I(a,b,e,f){var g=!a.hasProjection,p=e.channel;const B=e.signals.visual,P=h.stringValue(g?a.scaleName(p):a.projectionName());var X=gc=>`scale(${P}, ${gc})`;const ta=a.getSizeSignalRef("x"===p?"width":"height").signal,cb=`${p}(unit)`,pb=b.events.reduce((gc,Pc)=>
[...gc,{events:Pc.between[0],update:`[${cb}, ${cb}]`},{events:Pc,update:`[${B}[0], clamp(${cb}, 0, ${ta})]`}],[]);if(g)return e=e.signals.data,g=Uh.defined(b),a=(a=a.getScaleComponent(p))?a.get("type"):void 0,p=f?{init:oh(f,!0,X)}:{value:[]},pb.push({events:{signal:b.name+"_scale_trigger"},update:Kd(a)?`[${X(`${e}[0]`)}, ${X(`${e}[1]`)}]`:"[0, 0]"}),g?[{name:e,on:[]}]:[Object.assign({},{name:B},p,{on:pb}),Object.assign({},{name:e},f?{init:oh(f)}:{},{on:[{events:{signal:B},update:`${B}[0] === ${B}[1] ? null : invert(${P}, ${B})`}]})];
X="x"===p?0:1;b=b.name+"_init";return[Object.assign({},{name:B},f?{init:`[${b}[0][${X}], ${b}[1][${X}]]`}:{value:[]},{on:pb})]}function ea(a,b,e,f){var g=ja(b)&&b.condition;b=f(b);return g?(g=h.array(g).map(p=>{const B=f(p);if(p.param){const {param:P,empty:X}=p;p=vk(a,{param:P,empty:X});return Object.assign({},{test:p},B)}p=Xf(a,p.test);return Object.assign({},{test:p},B)}),{[e]:[...g,...(void 0!==b?[b]:[])]}):void 0!==b?{[e]:b}:{}}function sa(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
"text";return ea(a,a.encoding[b],b,e=>$a(e,a.config))}function $a(a,b){let e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"datum";if(a){if(fd(a))return Ua(a.value);if(yc(a)){const {format:f,formatType:g}=Qd(a);return Qe({fieldOrDatumDef:a,format:f,formatType:g,expr:e,config:b})}}}function Ob(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};const {encoding:e,markDef:f,config:g,stack:p}=a,B=e.tooltip;if(h.isArray(B))return{tooltip:Mc({tooltip:B},p,g,b)};const P=b.reactiveGeom?
"datum.datum":"datum";return ea(a,B,"tooltip",X=>{const ta=$a(X,g,P);if(ta)return ta;if(null!==X){X=Zb("tooltip",f,g);!0===X&&(X={content:"encoding"});if(h.isString(X))return{value:X};if(h.isObject(X))return Mb(X)?X:"encoding"===X.content?Mc(e,p,g,b):{signal:P}}})}function hc(a,b,e){function f(ta,cb){var pb=Q(cb);ta=Rc(ta)?ta:Object.assign({},ta,{type:a[pb].type});pb=ta.title||Cf(ta,p);pb=h.array(pb).join(", ").replaceAll(/"/g,'\\"');if(H(cb)){const kc="x"===cb?"x2":"y2";var gc=xe(a[kc]);if(jb(ta.bin)&&
gc){var Pc=qc(ta,{expr:P});gc=qc(gc,{expr:P});const {format:Nc,formatType:Zc}=Qd(ta);Pc=Ze(Pc,gc,Nc,Zc,p);B[kc]=!0}}if((H(cb)||"theta"===cb||"radius"===cb)&&b&&b.fieldChannel===cb&&"normalize"===b.offset){const {format:kc,formatType:Nc}=Qd(ta);Pc=Qe({fieldOrDatumDef:ta,format:kc,formatType:Nc,expr:P,config:p,normalizeStack:!0}).signal}null!=Pc||(Pc=$a(ta,p,P).signal);X.push({channel:cb,key:pb,value:Pc})}var {reactiveGeom:g}=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};const p=Object.assign({},
e,e.tooltipFormat),B={},P=g?"datum.datum":"datum",X=[];Vg(a,(ta,cb)=>{Ia(ta)?f(ta,cb):Da(ta)&&f(ta.condition,cb)});g={};for(const ta of X){const {channel:cb,key:pb,value:gc}=ta;B[cb]||g[pb]||(g[pb]=gc)}return g}function Mc(a,b,e){var {reactiveGeom:f}=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};f=hc(a,b,e,{reactiveGeom:f});f=Gi(f).map(g=>{let [p,B]=g;return`"${p}": ${B}`});return 0<f.length?{signal:`{${f.join(", ")}}`}:void 0}function fc(a){const {encoding:b,markDef:e,config:f,stack:g}=
a;var p=b.description;if(p)return ea(a,p,"description",B=>$a(B,a.config));p=Zb("description",e,f);if(null!=p)return{description:Ua(p)};if(!1===f.aria)return{};p=hc(b,g,f);if(!ib(p))return{description:{signal:Gi(p).map((B,P)=>{let [X,ta]=B;return`"${0<P?"; ":""}${X}: " + (${ta})`}).join(" + ")}}}function $c(a,b){let e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};const {markDef:f,encoding:g,config:p}=b,{vgChannel:B}=e;let {defaultRef:P,defaultValue:X}=e;void 0===P&&(null!=X||(X=Zb(a,f,
p,{vgChannel:B,ignoreVgConfig:!0})),void 0!==X&&(P=Ua(X)));return ea(b,g[a],null!=B?B:a,ta=>qd({channel:a,channelDef:ta,markDef:f,config:p,scaleName:b.scaleName(a),scale:b.getScaleComponent(a),stack:null,defaultRef:P}))}function Wc(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{filled:void 0};const {markDef:e,encoding:f,config:g}=a;var {type:p}=e,B;b=null!=(B=b.filled)?B:Zb("filled",e,g);B=Cb(["bar","point","circle","square","geoshape"],p)?"transparent":void 0;var P,X;p=null!=(X=
null!=(P=Zb(!0===b?"color":void 0,e,g,{vgChannel:"fill"}))?P:g.mark[!0===b&&"color"])?X:B;var ta;P=null!=(ta=Zb(!1===b?"color":void 0,e,g,{vgChannel:"stroke"}))?ta:g.mark[!1===b&&"color"];ta=b?"fill":"stroke";X=Object.assign({},p?{fill:Ua(p)}:{},P?{stroke:Ua(P)}:{});e.color&&(b?e.fill:e.stroke)&&K(vd("property",{fill:"fill"in e,stroke:"stroke"in e}));return Object.assign({},X,$c("color",a,{vgChannel:ta,defaultValue:b?p:P}),$c("fill",a,{defaultValue:f.fill?p:void 0}),$c("stroke",a,{defaultValue:f.stroke?
P:void 0}))}function Hd(a){const {encoding:b,mark:e}=a,f=b.order;return!Oa(e)&&fd(f)?ea(a,f,"zindex",g=>Ua(g.value)):{}}function he(a){let {channel:b,markDef:e,encoding:f={},model:g,bandPosition:p}=a;a=`${b}Offset`;const B=e[a],P=f[a];return"xOffset"!==a&&"yOffset"!==a||!P?(a=e[a])?{offsetType:"visual",offset:a}:{}:{offsetType:"encoding",offset:qd({channel:a,channelDef:P,markDef:e,config:null==g?void 0:g.config,scaleName:g.scaleName(a),scale:g.getScaleComponent(a),stack:null,defaultRef:Ua(B),bandPosition:p})}}
function se(a,b,e){let {defaultPos:f,vgChannel:g}=e;const {encoding:p,markDef:B,config:P,stack:X}=b;e=p[a];const ta=p[y(a)],cb=b.scaleName(a),pb=b.getScaleComponent(a),{offset:gc,offsetType:Pc}=he({channel:a,markDef:B,encoding:p,model:b,bandPosition:.5}),kc=Je({model:b,defaultPos:f,channel:a,scaleName:cb,scale:pb});if(!e&&H(a)&&(p.latitude||p.longitude))b={field:b.getName(a)};else a:{b={channel:a,channelDef:e,channel2Def:ta,markDef:B,config:P,scaleName:cb,scale:pb,stack:X,offset:gc,defaultRef:kc,
bandPosition:"encoding"===Pc?0:void 0};const {channel:Nc,channelDef:Zc,scaleName:dd,stack:ie,offset:$d,markDef:Ce}=b;if(yc(Zc)&&ie&&Nc===ie.fieldChannel){if(Ia(Zc)&&(b=Zc.bandPosition,void 0!==b||"text"!==Ce.type||"radius"!==Nc&&"theta"!==Nc||(b=.5),void 0!==b)){b=Tc({scaleName:dd,fieldOrDatumDef:Zc,startSuffix:"start",bandPosition:b,offset:$d});break a}b=Yc(Zc,dd,{suffix:"end"},{offset:$d})}else b=Hc(b)}return b?{[g||a]:b}:void 0}function Je(a){let {model:b,defaultPos:e,channel:f,scaleName:g,scale:p}=
a;const {markDef:B,config:P}=b;return()=>{var X=Q(f),ta=A(f);ta=Zb(f,B,P,{vgChannel:ta});if(void 0!==ta)return bd(f,ta);switch(e){case "zeroOrMin":case "zeroOrMax":if(g&&(ta=p.get("type"),!Cb([gg.LOG,gg.TIME,gg.UTC],ta)&&p.domainDefinitelyIncludesZero()))return{scale:g,value:0};if("zeroOrMin"===e)return"y"===X?{field:{group:"height"}}:{value:0};switch(X){case "radius":return{signal:`min(${b.width.signal},${b.height.signal})/2`};case "theta":return{signal:"2*PI"};case "x":return{field:{group:"width"}};
case "y":return{value:0}}break;case "mid":return X=b[N(f)],Object.assign({},X,{mult:.5})}}}function rf(a,b,e){let f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"middle";if("radius"===a||"theta"===a)return A(a);var g="x"===a?"align":"baseline";const p=Zb(g,b,e);Mb(p)?(K(`The ${g} for range marks cannot be an expression`),g=void 0):g=p;return"x"===a?zj[g||("top"===f?"left":"center")]:xi[g||f]}function df(a,b,e){let {defaultPos:f,defaultPos2:g,range:p}=e;return p?bh(a,b,{defaultPos:f,defaultPos2:g}):
se(a,b,{defaultPos:f})}function bh(a,b,e){let {defaultPos:f,defaultPos2:g}=e;const {markDef:p,config:B}=b;var P=y(a);e=N(a);{const {encoding:gc,mark:Pc,markDef:kc,stack:Nc,config:Zc}=b;var X=Q(P),ta=N(P);const dd=A(P);var cb=gc[X],pb=b.scaleName(X);const ie=b.getScaleComponent(X);({offset:X}=P in gc||P in kc?he({channel:P,markDef:kc,encoding:gc,model:b}):he({channel:X,markDef:kc,encoding:gc,model:b}));if(cb||"x2"!==P&&"y2"!==P||!gc.latitude&&!gc.longitude){let {channel:$d,channelDef:Ce,channel2Def:Oe,
markDef:Lf,config:Sf,scaleName:Ig,scale:Ve,stack:Yf,offset:We,defaultRef:Ah}={channel:P,channelDef:cb,channel2Def:gc[P],markDef:kc,config:Zc,scaleName:pb,scale:ie,stack:Nc,offset:X,defaultRef:void 0};cb=yc(Ce)&&Yf&&$d.charAt(0)===Yf.fieldChannel.charAt(0)?Yc(Ce,Ig,{suffix:"start"},{offset:We}):Hc({channel:$d,channelDef:Oe,scaleName:Ig,scale:Ve,stack:Yf,markDef:Lf,config:Sf,offset:We,defaultRef:Ah});P=void 0!==cb?{[dd]:cb}:pe(P,kc)||pe(P,{[P]:Bc(P,kc,Zc.style),[ta]:Bc(ta,kc,Zc.style)})||pe(P,Zc[Pc])||
pe(P,Zc.mark)||{[dd]:Je({model:b,defaultPos:g,channel:P,scaleName:pb,scale:ie})()}}else ta=N(P),pb=b.markDef[ta],P=null!=pb?{[ta]:{value:pb}}:{[dd]:{field:b.getName(P)}}}e=P[e]?rf(a,p,B):A(a);return Object.assign({},se(a,b,{defaultPos:f,vgChannel:e}),P)}function pe(a,b){const e=N(a),f=A(a);if(void 0!==b[f])return{[f]:bd(a,b[f])};if(void 0!==b[a])return{[f]:bd(a,b[a])};if(b[e])if(b=b[e],vc(b))K(`Position range does not support relative band size for ${e}.`);else return{[e]:bd(a,b)}}function Pe(a,b){const {config:e,
encoding:f,markDef:g}=a;var p=g.type,B=y(b),P=N(b),X=f[b];B=f[B];var ta=a.getScaleComponent(b);ta=ta?ta.get("type"):void 0;const cb=g.orient;var pb;let gc;const Pc=null!=(gc=null!=(pb=f[P])?pb:f.size)?gc:Zb("size",g,e,{vgChannel:P});P=z(b);p="bar"===p&&("x"===b?"vertical"===cb:"horizontal"===cb);if(!Ia(X)||!(vb(X.bin)||jb(X.bin)||X.timeUnit&&!B)||Pc&&!vc(Pc)||f[P]||ce(ta)){if((yc(X)&&ce(ta)||p)&&!B){var kc;{const {markDef:Oe,encoding:Lf,config:Sf,stack:Ig}=a;p=Oe.orient;var Nc=a.scaleName(b),Zc=a.getScaleComponent(b),
dd=N(b),ie=y(b);B=z(b);B=a.scaleName(B);P=a.getScaleComponent(C(b));pb="horizontal"===p&&"y"===b||"vertical"===p&&"x"===b;if(Lf.size||Oe.size)pb?kc=$c("size",a,{vgChannel:dd,defaultRef:Ua(Oe.size)}):K(`Cannot apply size to non-oriented mark "${Oe.type}".`);ta=!!kc;var $d;p=q({channel:b,fieldDef:X,markDef:Oe,config:Sf,scaleType:null==($d=Zc||P)?void 0:$d.get("type"),useVlSizeChannel:pb});kc=kc||{[dd]:ph(dd,B||Nc,P||Zc,Sf,p,!!X,Oe.type)};var Ce;$d="band"===(null==(Ce=Zc||P)?void 0:Ce.get("type"))&&
vc(p)&&!ta?"top":"middle";Ce=rf(b,Oe,Sf,$d);$d="xc"===Ce||"yc"===Ce;const {offset:Ve,offsetType:Yf}=he({channel:b,markDef:Oe,encoding:Lf,model:a,bandPosition:$d?.5:0});a=Hc({channel:b,channelDef:X,markDef:Oe,config:Sf,scaleName:Nc,scale:Zc,stack:Ig,offset:Ve,defaultRef:Je({model:a,defaultPos:"mid",channel:b,scaleName:Nc,scale:Zc}),bandPosition:$d?"encoding"===Yf?0:.5:Mb(p)?{signal:`(1-${p})/2`}:vc(p)?(1-p.band)/2:0});dd?kc=Object.assign({},{[Ce]:a},kc):(b=A(ie),kc=kc[dd],kc=Ve?Object.assign({},kc,
{offset:Ve}):kc,kc={[Ce]:a,[b]:h.isArray(a)?[a[0],Object.assign({},a[1],{offset:kc})]:Object.assign({},a,{offset:kc})})}return kc}return bh(b,a,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}a:{let {fieldDef:Oe,fieldDef2:Lf,channel:Sf,model:Ig}={fieldDef:X,fieldDef2:B,channel:b,model:a};const {config:Ve,markDef:Yf,encoding:We}=Ig;a=Ig.getScaleComponent(Sf);kc=Ig.scaleName(Sf);b=a?a.get("type"):void 0;a=a.get("reverse");b=q({channel:Sf,fieldDef:Oe,markDef:Yf,config:Ve,scaleType:b});$d=null!=(Zc=
null==(Nc=null==(ie=Ig.component.axes[Sf])?void 0:ie[0])?void 0:Nc.get("translate"))?Zc:.5;Nc=H(Sf)?null!=(dd=Zb("binSpacing",Yf,Ve))?dd:0:0;dd=y(Sf);X=A(Sf);Ce=A(dd);Zc=ic("minBandSize",Yf,Ve);({offset:p}=he({channel:Sf,markDef:Yf,encoding:We,model:Ig,bandPosition:0}));({offset:B}=he({channel:dd,markDef:Yf,encoding:We,model:Ig,bandPosition:0}));let {scaleName:Ah,fieldDef:il}={fieldDef:Oe,scaleName:kc};ie=qc(il,{expr:"datum"});P=qc(il,{expr:"datum",suffix:"end"});P=`abs(scale("${Ah}", ${P}) - scale("${Ah}", ${ie}))`;
ie=rh(Sf,Nc,a,$d,p,Zc,P);a=rh(dd,Nc,a,$d,null!=B?B:p,Zc,P);b=Mb(b)?{signal:`(1-${b.signal})/2`}:vc(b)?(1-b.band)/2:.5;$d=l({fieldDef:Oe,fieldDef2:Lf,markDef:Yf,config:Ve});if(vb(Oe.bin)||Oe.timeUnit)$d=Oe.timeUnit&&.5!==$d,kc={[Ce]:wf({fieldDef:Oe,scaleName:kc,bandPosition:b,offset:a,useRectOffsetField:$d}),[X]:wf({fieldDef:Oe,scaleName:kc,bandPosition:Mb(b)?{signal:`1-${b.signal}`}:1-b,offset:ie,useRectOffsetField:$d})};else{if(jb(Oe.bin)){a=Yc(Oe,kc,{},{offset:a});if(Ia(Lf)){kc={[Ce]:a,[X]:Yc(Lf,
kc,{},{offset:ie})};break a}if(h.isObject(Oe.bin)&&Oe.bin.step){kc={[Ce]:a,[X]:{signal:`scale("${kc}", ${qc(Oe,{expr:"datum"})} + ${Oe.bin.step})`,offset:ie}};break a}}K(x(dd));kc=void 0}}return kc}function ph(a,b,e,f,g,p,B){if(vc(g))if(e){const P=e.get("type");if("band"===P)return a=`bandwidth('${b}')`,1!==g.band&&(a=`${g.band} * ${a}`),f=ic("minBandSize",{type:B},f),{signal:f?`max(${Hb(f)}, ${a})`:a};1!==g.band&&K(`Cannot use the relative band size with ${P} scale.`)}else return{mult:g.band,field:{group:a}};
else{if(Mb(g))return g;if(g)return{value:g}}if(e&&(g=e.get("range"),Qb(g)&&h.isNumber(g.step)))return{value:g.step-2};if(!p){const {bandPaddingInner:P,barBandPaddingInner:X,rectBandPaddingInner:ta}=f.scale;B=T(P,"bar"===B?X:ta);if(Mb(B))return{signal:`(1 - (${B.signal})) * ${a}`};if(h.isNumber(B))return{signal:`${1-B} * ${a}`}}return{value:Wf(f.view,a)-2}}function rh(a,b,e,f,g,p,B){if(a in fk)return 0;b=(a="x"===a||"y2"===a)?-b/2:b/2;if(Mb(e)||Mb(g)||Mb(f)||p){e=Hb(e);g=Hb(g);f=Hb(f);const P=Hb(p);
p=p?`(${B} < ${P} ? ${a?"":"-"}0.5 * (${P} - (${B})) : ${b})`:b;return{signal:(f?`${f} + `:"")+(e?`(${e} ? -1 : 1) * `:"")+(g?`(${g} + ${p})`:p)}}g=g||0;return f+(e?-g-b:+g+b)}function wf(a){let {fieldDef:b,scaleName:e,bandPosition:f,offset:g,useRectOffsetField:p}=a;return Tc(Object.assign({},{scaleName:e,fieldOrDatumDef:b,bandPosition:f,offset:g},p?{startSuffix:"offsetted_rect_start",endSuffix:"offsetted_rect_end"}:{}))}function zf(a,b){const {fill:e,stroke:f}="include"===b.color?Wc(a):{};var g=
Object,p=g.assign;b=mh(a.markDef,b);var B=yg(a,"fill",e),P=yg(a,"stroke",f),X=$c("opacity",a),ta=$c("fillOpacity",a),cb=$c("strokeOpacity",a),pb=$c("strokeWidth",a),gc=$c("strokeDash",a),Pc=Hd(a),kc=Ob(a),Nc=sa(a,"href");{const {markDef:$d,config:Ce}=a,Oe=Zb("aria",$d,Ce);if(!1===Oe)a={};else{var Zc=Object,dd=Zc.assign;{const {mark:Lf,markDef:Sf,config:Ig}=a;if(!1===Ig.aria)var ie={};else ie=Zb("ariaRoleDescription",Sf,Ig),ie=null!=ie?{ariaRoleDescription:{value:ie}}:Lf in bm?{}:{ariaRoleDescription:{value:Lf}}}a=
dd.call(Zc,{},Oe?{aria:Oe}:{},ie,fc(a))}}return p.call(g,{},b,B,P,X,ta,cb,pb,gc,Pc,kc,Nc,a)}function yg(a,b,e){const {config:f,mark:g,markDef:p}=a;return"hide"===Zb("invalid",p,f)&&e&&!Oa(g)&&(a=Df(a,{invalid:!0,channels:Bk}))?{[b]:[{test:a,value:null},...h.array(e)]}:e?{[b]:e}:{}}function mh(a,b){return $k.reduce((e,f)=>{pk.has(f)||void 0===a[f]||"ignore"===b[f]||(e[f]=Ua(a[f]));return e},{})}function Df(a,b){let {invalid:e=!1,channels:f}=b;b=f.reduce((g,p)=>{var B=a.getScaleComponent(p);B&&(B=B.get("type"),
(p=a.vgField(p,{expr:"datum"}))&&Kd(B)&&(g[p]=!0));return g},{});b=sd(b);if(0<b.length){const g=e?"||":"\x26\x26";return b.map(p=>Jc(p,e)).join(` ${g} `)}}function qf(a){const {config:b,markDef:e}=a;return Zb("invalid",e,b)&&(a=Hg(a,{channels:Ph}))?{defined:{signal:a}}:{}}function Hg(a,b){let {invalid:e=!1,channels:f}=b;b=f.reduce((g,p)=>{var B=a.getScaleComponent(p);if(B){B=B.get("type");let P;(p=a.vgField(p,{expr:"datum",binSuffix:(null==(P=a.stack)?0:P.impute)?"mid":void 0}))&&Kd(B)&&(g[p]=!0)}return g},
{});b=sd(b);if(0<b.length){const g=e?"||":"\x26\x26";return b.map(p=>Jc(p,e)).join(` ${g} `)}}function hg(a,b){if(void 0!==b)return{[a]:Ua(b)}}function Eh(a,b,e,f,g){var p=b.name,B=p+"_translate_anchor";p+="_translate_delta";var P=e.channel;const X=Uh.defined(b);b=g.filter(Pc=>Pc.name===e.signals[X?"data":"visual"])[0];f=a.getSizeSignalRef(f).signal;g=(a=a.getScaleComponent(P))&&a.get("type");var ta=a&&a.get("reverse");B=`${B}.extent_${P}`;P=`${X?"x"===P?ta?"":"-":ta?"-":"":""}${p}.${P} / ${X?`${f}`:
`span(${B})`}`;ta=X&&a?"log"===g?"panLog":"symlog"===g?"panSymlog":"pow"===g?"panPow":"panLinear":"panLinear";var cb;let pb;const gc=X?"pow"===g?`, ${null!=(cb=a.get("exponent"))?cb:1}`:"symlog"===g?`, ${null!=(pb=a.get("constant"))?pb:1}`:"":"";cb=`${ta}(${B}, ${P}${gc})`;b.on.push({events:{signal:p},update:X?cb:`clampRange(${cb}, 0, ${f})`})}function gi(a,b,e,f,g){var p=b.name,B=e.channel;const P=Uh.defined(b);b=g.filter(Pc=>Pc.name===e.signals[P?"data":"visual"])[0];f=a.getSizeSignalRef(f).signal;
const X=(g=a.getScaleComponent(B))&&g.get("type"),ta=P?dc(a,B):b.name;a=p+"_zoom_delta";p=`${p}${"_zoom_anchor"}.${B}`;B=P&&g?"log"===X?"zoomLog":"symlog"===X?"zoomSymlog":"pow"===X?"zoomPow":"zoomLinear":"zoomLinear";var cb;let pb;const gc=P?"pow"===X?`, ${null!=(cb=g.get("exponent"))?cb:1}`:"symlog"===X?`, ${null!=(pb=g.get("constant"))?pb:1}`:"":"";cb=`${B}(${ta}, ${p}, ${a}${gc})`;b.on.push({events:{signal:a},update:P?cb:`clampRange(${cb}, 0, ${f})`})}function ag(a){var {escape:b}=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:{escape:!0};b=b?h.stringValue(a.name):a.name;var e;for(e=a.parent;e&&!ih(e);)e=e.parent;if(e){const {facet:f}=e;for(const g of sh)f[g]&&(b+=` + '__facet_${g}_' + (facet[${h.stringValue(e.vgField(g))}])`)}return b}function Af(a){let b;return kg(null!=(b=a.component.selection)?b:{}).reduce((e,f)=>e||f.project.hasSelectionId,!1)}function Cg(a,b){!h.isString(b.select)&&b.select.on||delete a.events;!h.isString(b.select)&&b.select.clear||delete a.clear;!h.isString(b.select)&&
b.select.toggle||delete a.toggle}function Ki(a){const b=[];if("Identifier"===a.type)return[a.name];if("Literal"===a.type)return[a.value];"MemberExpression"===a.type&&(b.push(...Ki(a.object)),b.push(...Ki(a.property)));return b}function rj(a){return"MemberExpression"===a.object.type?rj(a.object):"datum"===a.object.name}function sj(a){a=h.parseExpression(a);const b=new Set;a.visit(e=>{"MemberExpression"===e.type&&rj(e)&&b.add(Ki(e).slice(1).join("."))});return b}function vk(a,b,e){var f=3<arguments.length&&
void 0!==arguments[3]?arguments[3]:"datum",g=h.isString(b)?b:b.param,p=ra(g),B=h.stringValue(p+"_store");try{var P=a.getSelectionComponent(p,g)}catch(X){return`!!${p}`}P.project.timeUnit&&(g=null!=e?e:a.component.data.raw,p=P.project.timeUnit.clone(),g.parent?p.insertAsParentOf(g):g.parent=p);g=P.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(";P="global"===P.resolve?")":`, ${h.stringValue(P.resolve)})`;f=`${g}${B}, ${f}${P}`;B=`length(data(${B}))`;return!1===b.empty?`${B} && ${f}`:
`!${B} || ${f}`}function ej(a,b,e){const f=ra(b),g=e.encoding;let p=e.field,B;try{B=a.getSelectionComponent(f,b)}catch(P){return f}g||p?g&&!p&&(a=B.project.items.filter(P=>P.channel===g),!a.length||1<a.length?(p=B.project.items[0].field,K((a.length?"Multiple ":"No ")+`matching ${h.stringValue(g)} encoding found for selection ${h.stringValue(e.param)}. `+`Using "field": ${h.stringValue(p)}.`)):p=a[0].field):(p=B.project.items[0].field,1<B.project.items.length&&K('A "field" or "encoding" must be specified when using a selection as a scale domain. '+
`Using "field": ${h.stringValue(p)}.`));return`${B.name}[${h.stringValue(bb(p))}]`}function Xf(a,b,e){return fa(b,f=>h.isString(f)?f:(null==f?0:f.param)?vk(a,f,e):Vb(f))}function wk(a,b){if(a)return h.isArray(a)&&!$b(a)?a.map(e=>Cf(e,b)).join(", "):a}function Cj(a,b,e,f){null!=a.encode||(a.encode={});let g;null!=(g=a.encode)[b]||(g[b]={});let p;null!=(p=a.encode[b]).update||(p.update={});a.encode[b].update[e]=f}function hh(a,b,e){var f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{header:!1},
g=a.combine(),p=Object.assign({},g),B=g.disable;const P=g.orient,X=g.scale;var ta=g.labelExpr;const cb=g.title;g=g.zindex;p=(delete p.disable,delete p.orient,delete p.scale,delete p.labelExpr,delete p.title,delete p.zindex,p);if(!B){for(const gc in p){var pb=Zi[gc];B=p[gc];if(pb&&pb!==b&&"both"!==pb)delete p[gc];else if(bg(B)){pb=B;B=Object.assign({},pb);pb=pb.condition;B=(delete B.condition,B);pb=h.array(pb);const Pc=Nj[gc];if(Pc){const {vgProp:kc,part:Nc}=Pc;B=[...pb.map(Zc=>{var dd=Object.assign({},
Zc);Zc=Zc.test;dd=(delete dd.test,dd);return Object.assign({},{test:Xf(null,Zc)},dd)}),B];Cj(p,Nc,kc,B);delete p[gc]}else null===Pc&&(B={signal:pb.map(kc=>{var Nc=Object.assign({},kc);kc=kc.test;Nc=(delete Nc.test,Nc);return`${Xf(null,kc)} ? ${yb(Nc)} : `}).join("")+yb(B)},p[gc]=B)}else if(Mb(B)&&(pb=Nj[gc])){const {vgProp:Pc,part:kc}=pb;Cj(p,kc,Pc,B);delete p[gc]}Cb(["labelAlign","labelBaseline"],gc)&&null===p[gc]&&delete p[gc]}if("grid"===b){if(p.grid)return p.encode&&({grid:ta}=p.encode,p.encode=
Object.assign({},ta?{grid:ta}:{}),ib(p.encode)&&delete p.encode),Object.assign({},{scale:X,orient:P},p,{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:T(g,0)})}else if(f.header||!a.mainExtracted){if(void 0!==ta){f=ta;let gc,Pc;(null==(gc=p.encode)?0:null==(Pc=gc.labels)?0:Pc.update)&&Mb(p.encode.labels.update.text)&&(f=tb(ta,"datum.label",p.encode.labels.update.text.signal));Cj(p,"labels","text",{signal:f})}null===p.labelAlign&&delete p.labelAlign;if(p.encode){for(const gc of nk)a.hasAxisPart(gc)||
delete p.encode[gc];ib(p.encode)&&delete p.encode}ta=wk(cb,e);return Object.assign({},{scale:X,orient:P,grid:!1},ta?{title:ta}:{},p,!1===e.aria?{aria:!1}:{},{zindex:T(g,0)})}}}function Oi(a){const {axes:b}=a.component,e=[];for(const f of Ph)if(b[f])for(const g of b[f])if(!g.get("disable")&&!g.get("gridScale")){const p="x"===f?"height":"width",B=a.getSizeSignalRef(p).signal;p!==B&&e.push({name:p,update:B})}return e}function Uj(a,b){const {x:e=[],y:f=[]}=a;return[...e.map(g=>hh(g,"grid",b)),...f.map(g=>
hh(g,"grid",b)),...e.map(g=>hh(g,"main",b)),...f.map(g=>hh(g,"main",b))].filter(g=>g)}function Dj(a,b,e,f){return Object.assign.apply(null,[{},...a.map(g=>{if("axisOrient"===g){g="x"===e?"bottom":"left";const p=b["x"===e?"axisBottom":"axisLeft"]||{},B=b["x"===e?"axisTop":"axisRight"]||{},P=new Set([...sd(p),...sd(B)]),X={};for(const ta of P.values())X[ta]={signal:`${f.signal} === "${g}" ? ${Hb(p[ta])} : ${Hb(B[ta])}`};return X}return b[g]})])}function cl(a,b,e,f){var g="band"===b?["axisDiscrete",
"axisBand"]:"point"===b?["axisDiscrete","axisPoint"]:ni.has(b)?["axisQuantitative"]:"time"===b||"utc"===b?["axisTemporal"]:[];const p="x"===a?"axisX":"axisY";b=Mb(e)?"axisOrient":`axis${Ra(e)}`;g=[...g,...g.map(B=>p+B.substr(4))];b=["axis",b,p];return{vlOnlyAxisConfig:Dj(g,f,a,e),vgAxisConfig:Dj(b,f,a,e),axisConfigStyle:Pi([...b,...g],f)}}function Pi(a,b){const e=[{}];for(const f of a){let g;if(a=null==(g=b[f])?void 0:g.style){a=h.array(a);for(const p of a)e.push(b.style[p])}}return Object.assign.apply(null,
e)}function zi(a,b,e){let f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};const g=jd(a,e,b);if(void 0!==g)return{configFrom:"style",configValue:g};for(const p of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"]){let B;if(void 0!==(null==(B=f[p])?void 0:B[a]))return{configFrom:p,configValue:f[p][a]}}return{}}function Vj(a,b,e,f,g){const p=null==b?void 0:b.labelAngle;if(void 0!==p)return Mb(p)?p:La(p);({configValue:b}=zi("labelAngle",f,null==b?void 0:b.style,g));if(void 0!==b)return La(b);
if("x"===e&&Cb(["nominal","ordinal"],a.type)&&(!Ia(a)||!a.timeUnit))return 270}function Qi(a){return`(((${a.signal} % 360) + 360) % 360)`}function Wj(a,b,e,f){if(void 0!==a)return"x"===e?Mb(a)?(f=Qi(a),b=Mb(b)?`(${b.signal} === "top")`:"top"===b,{signal:`(45 < ${f} && ${f} < 135) || (225 < ${f} && ${f} < 315) ? "middle" :`+`(${f} <= 45 || 315 <= ${f}) === ${b} ? "bottom" : "top"`}):45<a&&135>a||225<a&&315>a?"middle":Mb(b)?{signal:`${b.signal} ${45>=a||315<=a?"\x3d\x3d\x3d":"!\x3d\x3d"} "top" ? "bottom" : "top"`}:
(45>=a||315<=a)===("top"===b)?"bottom":"top":Mb(a)?(a=Qi(a),b=Mb(b)?`(${b.signal} === "left")`:"left"===b,{signal:`${a} <= 45 || 315 <= ${a} || (135 <= ${a} && ${a} <= 225) ? ${f?'"middle"':"null"} : (45 <= ${a} && ${a} <= 135) === ${b} ? "top" : "bottom"`}):45>=a||315<=a||135<=a&&225>=a?f?"middle":null:Mb(b)?{signal:`${b.signal} ${45<=a&&135>=a?"\x3d\x3d\x3d":"!\x3d\x3d"} "left" ? "top" : "bottom"`}:(45<=a&&135>=a)===("left"===b)?"top":"bottom"}function xk(a,b,e){if(void 0!==a){var f=(e="x"===e)?
0:90,g=e?"bottom":"left";return Mb(a)?(a=Qi(a),b=Mb(b)?`(${b.signal} === "${g}")`:b===g,{signal:`(${f?`(${a} + 90)`:a} % 180 === 0) ? ${e?null:'"center"'} :`+`(${f} < ${a} && ${a} < ${180+f}) === ${b} ? "left" : "right"`}):0===(a+f)%180?e?null:"center":Mb(b)?{signal:`${`${b.signal} ${f<a&&a<180+f?"\x3d\x3d\x3d":"!\x3d\x3d"} "${g}"`} ? "left" : "right"`}:(f<a&&a<180+f)===(b===g)?"left":"right"}}function fj(a,b){var e="x"===b?"x2":"y2";b=a.fieldDef(b);a=a.fieldDef(e);e=b?b.title:void 0;a=a?a.title:
void 0;if(e&&a)return Ha(e,a);if(e)return e;if(a)return a;if(void 0!==e)return e;if(void 0!==a)return a}function Ri(a,b,e){return qc(a,Object.assign({},{prefix:b,suffix:"sort_index"},null!=e?e:{}))}function Ag(a,b){return Cb(["top","bottom"],b)?"column":Cb(["left","right"],b)?"row":"row"===a?"row":"column"}function hi(a,b,e,f){return T((b||{})[a],("row"===f?e.headerRow:"column"===f?e.headerColumn:e.headerFacet)[a],e.header[a])}function Wh(a,b,e,f){const g={};for(const p of a)a=hi(p,b||{},e,f),void 0!==
a&&(g[p]=a);return g}function Lh(a,b){switch(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"middle"){case "start":return{align:"left"};case "end":return{align:"right"}}const e=xk(b,"row"===a?"left":"top","row"===a?"y":"x");return e?{align:e}:{}}function hj(a,b){return(a=Wj(a,"row"===b?"left":"top","row"===b?"y":"x",!0))?{baseline:a}:{}}function jj(a,b,e){const {format:f,formatType:g,labelAngle:p,labelAnchor:B,labelOrient:P,labelExpr:X}=Wh("format formatType labelAngle labelAnchor labelOrient labelExpr".split(" "),
a.header,e,b),ta=Qe({fieldOrDatumDef:a,format:f,formatType:g,expr:"parent",config:e}).signal,cb=Ag(b,P);return Object.assign({},{text:{signal:X?tb(tb(X,"datum.label",ta),"datum.value",qc(a,{expr:"parent"})):ta}},"row"===b?{orient:"left"}:{},{style:"guide-label",frame:"group"},hj(p,cb),Lh(cb,p,B),Hj(e,a,b,Yl,tl))}function Hj(a,b,e,f,g){const p={};for(const B of f){if(!g[B])continue;let P;f=hi(B,null==(P=b)?void 0:P.header,a,e);void 0!==f&&(p[g[B]]=f)}return p}function ij(a){return[...Zf(a,"width"),
...Zf(a,"height"),...Zf(a,"childWidth"),...Zf(a,"childHeight")]}function Zf(a,b){var e="width"===b?"x":"y",f=a.component.layoutSize.get(b);if(!f||"merged"===f)return[];b=a.getSizeSignalRef(b).signal;if("step"===f){if(f=a.getScaleComponent(e)){var g=f.get("type");const p=f.get("range");if(ce(g)&&Qb(p))return g=a.scaleName(e),ih(a.parent)&&"independent"===a.parent.component.resolve.scale[e]?[Si(g,p)]:[Si(g,p),{name:b,update:yh(g,f,`domain('${g}').length`)}]}throw Error("layout size is step although width/height is not step.");
}return"container"==f?(e=(f=b.endsWith("width"))?"containerSize()[0]":"containerSize()[1]",a=pf(a.config.view,f?"width":"height"),a=`isFinite(${e}) ? ${e} : ${a}`,[{name:b,init:a,on:[{update:a,events:"window:resize"}]}]):[{name:b,value:f}]}function Si(a,b){a=`${a}_step`;return Mb(b.step)?{name:a,update:b.step.signal}:{name:a,value:b.step}}function yh(a,b,e){const f=b.get("type"),g=b.get("padding"),p=T(b.get("paddingOuter"),g);b=b.get("paddingInner");return`bandspace(${e}, ${Hb("band"===f?void 0!==
b?b:g:1)}, ${Hb(p)}) * ${a}_step`}function Xi(a){return"childWidth"===a?"width":"childHeight"===a?"height":a}function ji(a,b){return sd(a).reduce((e,f)=>Object.assign({},e,ea(b,a[f],f,g=>Ua(g.value))),{})}function ii(a,b){if(ih(b))return"theta"===a?"independent":"shared";if(Ti(b))return"shared";if(Tk(b))return H(a)||"theta"===a||"radius"===a?"independent":"shared";throw Error("invalid model type for resolve");}function n(a,b){const e=a.scale[b],f=H(b)?"axis":"legend";return"independent"===e?("shared"===
a[f][b]&&K(`Setting the scale to be independent for "${b}" means we also have to set the guide (axis or legend) to be independent.`),"independent"):a[f][b]||"shared"}function G(a){return ka(a,(b,e)=>Math.max(b,e.value))}function M(a){return ka(a,(b,e)=>T(b,e.value))}function ka(a,b){const e=null==a?void 0:a.condition;if(e&&(h.isArray(e)||fd(e)))return h.array(a.condition).reduce(b,a.value);if(fd(a))return a.value}function Wa(a,b,e){a=b.get("selections");if(null!=a&&a.length){var f=h.stringValue(e.field);
return a.map(g=>`(!length(data(${h.stringValue(ra(g)+"_store")})) || (${g}[${f}] && indexof(${g}[${f}], datum.value) >= 0))`).join(" || ")}}function db(a,b,e,f){return{signal:`clamp(${a.getSizeSignalRef(b).signal}, ${e}, ${f})`}}function qb(a){if(Nf(a)){var {encoding:b}=a,e={};for(Zc of["color",...dh]){var f=Fe(b[Zc]);if(f&&a.getScaleComponent(Zc)&&("shape"!==Zc||!Ia(f)||"geojson"!==f.type)){a:{var g=void 0,p=void 0,B=void 0,P=void 0,X=void 0,ta,cb=ta=void 0,pb=void 0;f=a;var gc=Zc;let dd=f.legend(gc);
const {markDef:ie,encoding:$d,config:Ce}=f;var Pc=Ce.legend;b:{var kc=f;var Nc=gc;P=kc.scaleName(Nc);if("trail"===kc.mark){if("color"===Nc){kc={stroke:P};break b}if("size"===Nc){kc={strokeWidth:P};break b}}kc="color"===Nc?kc.markDef.filled?{fill:P}:{stroke:P}:{[Nc]:P}}kc=new Ml({},kc);Nc=null==(pb=f.fieldDef(gc))?void 0:pb.field;for(const Ve of kg(null!=(cb=f.component.selection)?cb:{})){let Yf;if((cb=null!=(Yf=Ve.project.hasField[Nc])?Yf:Ve.project.hasChannel[gc])&&yi.defined(Ve)){let We;pb=null!=
(We=kc.get("selections"))?We:[];pb.push(Ve.name);kc.set("selections",pb,!1);cb.hasLegend=!0}}cb=void 0!==dd?!dd:Pc.disable;kc.set("disable",cb,void 0!==dd);if(cb){f=kc;break a}dd=dd||{};pb=f.getScaleComponent(gc).get("type");cb=Fe($d[gc]);P=Ia(cb)?null==(ta=nd(cb.timeUnit))?void 0:ta.unit:void 0;Nc=dd.orient||Ce.legend.orient||"right";ta={legend:dd,channel:gc,timeUnit:P,scaleType:pb};({legend:P}=ta);P=P.type;b:{let {channel:Ve,timeUnit:Yf,scaleType:We}=ta;if(L(Ve)){if(Cb(["quarter","month","day"],
Yf)){ta="symbol";break b}if(lg.has(We)){ta="gradient";break b}}ta="symbol"}ta=T(P,ta);let {legendConfig:Oe,legendType:Lf,orient:Sf,legend:Ig}={legend:dd,legendType:ta,orient:Nc,legendConfig:Pc};if(null!=(P=null!=(X=Ig.direction)?X:Oe[Lf?"gradientDirection":"symbolDirection"]))X=P;else b:{switch(Sf){case "top":case "bottom":X="horizontal";break b;case "left":case "right":case "none":case void 0:break;default:X="gradient"===Lf?"horizontal":void 0;break b}X=void 0}Pc={legend:dd,channel:gc,model:f,markDef:ie,
encoding:$d,fieldOrDatumDef:cb,legendConfig:Pc,config:Ce,scaleType:pb,orient:Nc,legendType:ta,direction:X};for(const Ve of Fk)if(!("gradient"===ta&&Ve.startsWith("symbol")||"symbol"===ta&&Ve.startsWith("gradient"))&&(X=Ve in ll?ll[Ve](Pc):dd[Ve],void 0!==X)){b:{pb=P=void 0;Nc=f.fieldDef(gc);switch(Ve){case "disable":Nc=void 0!==dd;break b;case "values":Nc=!(null==(pb=dd)||!pb.values);break b;case "title":if("title"===Ve&&X===(null==(P=Nc)?void 0:P.title)){Nc=!0;break b}}Nc=X===(dd||{})[Ve]}((pb=Nc)||
void 0===Ce.legend[Ve])&&kc.set(Ve,X,pb)}Pc=null!=(p=null==(B=dd)?void 0:B.encoding)?p:{};p=kc.get("selections");B={};gc={fieldOrDatumDef:cb,model:f,channel:gc,legendCmpt:kc,legendType:ta};for(const Ve of"labels legend title symbols gradient entries".split(" ")){let Yf;X=ji(null!=(Yf=Pc[Ve])?Yf:{},f);X=Ve in Fl?Fl[Ve](X,gc):X;if(void 0!==X&&!ib(X)){let We,Ah;B[Ve]=Object.assign({},(null==(We=p)?0:We.length)&&Ia(cb)?{name:`${ra(cb.field)}_legend_${Ve}`}:{},(null==(Ah=p)?0:Ah.length)?{interactive:!!p}:
{},{update:X})}}ib(B)||kc.set("encode",B,!(null==(g=dd)||!g.encoding));f=kc}e[Zc]=f}}var Zc=e}else{const {legends:dd,resolve:ie}=a.component;for(b of a.children){qb(b);for(e of sd(b.component.legends))ie.legend[e]=n(a.component.resolve,e),"shared"===ie.legend[e]&&(dd[e]=Kb(dd[e],b.component.legends[e]),dd[e]||(ie.legend[e]="independent",delete dd[e]))}for(f of sd(dd))for(g of a.children)g.component.legends[f]&&"shared"===ie.legend[f]&&delete g.component.legends[f];Zc=dd}return a.component.legends=
Zc}function Kb(a,b){if(!a)return b.clone();var e=a.getWithExplicit("orient");const f=b.getWithExplicit("orient");if(!e.explicit||!f.explicit||e.value===f.value){var g=!1;for(const p of Fk)e=xf(a.getWithExplicit(p),b.getWithExplicit(p),p,"legend",(B,P)=>{switch(p){case "symbolType":return B="circle"===P.value?P:B,B;case "title":return gb(B,P);case "type":return g=!0,Se("symbol")}return Lg(B,P,p,"legend")}),a.setWithExplicit(p,e);if(g){let p,B;(null==(p=a.implicit)?0:null==(B=p.encode)?0:B.gradient)&&
xa(a.implicit,["encode","gradient"]);let P,X;(null==(P=a.explicit)?0:null==(X=P.encode)?0:X.gradient)&&xa(a.explicit,["encode","gradient"])}return a}}function sc(a){const b=a.component.legends,e={};for(const g of sd(b)){var f=a.getScaleComponent(g);f=m(f.get("domains"));if(e[f])for(const p of e[f])Kb(p,b[g])||e[f].push(b[g]);else e[f]=[b[g].clone()]}return kg(e).flat().map(g=>{{var p=a.config,B=g.combine();g=Object.assign({},B);const gc=B.disable;B=B.labelExpr;g=(delete g.disable,delete g.labelExpr,
delete g.selections,g);if(gc)var P=void 0;else{!1===p.aria&&void 0==g.aria&&(g.aria=!1);var X;if(null==(X=g.encode)?0:X.symbols){p=g.encode.symbols.update;!p.fill||"transparent"===p.fill.value||p.stroke||g.stroke||(p.stroke={value:"transparent"});for(var ta of dh)g[ta]&&delete p[ta]}g.title||delete g.title;if(void 0!==B){ta=B;var cb,pb;(null==(cb=g.encode)?0:null==(pb=cb.labels)?0:pb.update)&&Mb(g.encode.labels.update.text)&&(ta=tb(B,"datum.label",g.encode.labels.update.text.signal));cb=g;pb={signal:ta};
null!=cb.encode||(cb.encode={});null!=(P=cb.encode).labels||(P.labels={});let Pc;null!=(Pc=cb.encode.labels).update||(Pc.update={});cb.encode.labels.update.text=pb}P=g}}return P}).filter(g=>void 0!==g)}function cd(a){return a.children.reduce((b,e)=>b.concat(e.assembleProjections()),md(a))}function md(a){var b=a.component.projection;if(!b||b.merged)return[];const e=b.combine(),{name:f}=e;if(b.data){const g={signal:`[${b.size.map(p=>p.signal).join(", ")}]`};b=b.data.reduce((p,B)=>{B=Mb(B)?B.signal:
`data('${a.lookupDataSource(B)}')`;p.includes(B)||p.push(B);return p},[]);if(0>=b.length)throw Error("Projection's fit didn't find any data sources");return[Object.assign({},{name:f,size:g,fit:{signal:1<b.length?`[${b.join(", ")}]`:b[0]}},e)]}return[Object.assign({},{name:f},{translate:{signal:"[width / 2, height / 2]"}},e)]}function rc(a){var b=a.component;if(Nf(a))if(a.hasProjection){var e=Lb(a.specifiedProjection);var f=!(e&&(null!=e.scale||null!=e.translate));const p=f?[a.getSizeSignalRef("width"),
a.getSizeSignalRef("height")]:void 0;if(f){f=[];const {encoding:P}=a;for(g of[["longitude","latitude"],["longitude2","latitude2"]])(Fe(P[g[0]])||Fe(P[g[1]]))&&f.push({signal:a.getName(`geojson_${f.length}`)});a.channelHasField("shape")&&"geojson"===a.typedFieldDef("shape").type&&f.push({signal:a.getName(`geojson_${f.length}`)});0===f.length&&f.push(a.requestDataName(nf.Main));var g=f}else g=void 0;let B;a=new Fj(a.projectionName(!0),Object.assign({},null!=(B=Lb(a.config.projection))?B:{},null!=e?
e:{}),p,g);a.get("type")||a.set("type","equalEarth",!1);e=a}else e=void 0;else e=Yd(a);b.projection=e}function zd(a,b){const e=jc(lm,f=>!h.hasOwnProperty(a.explicit,f)&&!h.hasOwnProperty(b.explicit,f)||h.hasOwnProperty(a.explicit,f)&&h.hasOwnProperty(b.explicit,f)&&pa(a.get(f),b.get(f))?!0:!1);if(pa(a.size,b.size)){if(e)return a;if(pa(a.explicit,{}))return b;if(pa(b.explicit,{}))return a}return null}function Yd(a){if(0!==a.children.length){var b;for(var e of a.children)rc(e);e=jc(a.children,f=>{if(f=
f.component.projection){if(b)return(f=zd(b,f))&&(b=f),!!f;b=f}return!0});if(b&&e){e=a.projectionName(!0);const f=new Fj(e,b.specifiedProjection,b.size,De(b.data));for(const g of a.children)if(a=g.component.projection)a.isFit&&f.data.push(...g.component.projection.data),g.renameProjection(a.get("name"),e),a.merged=!0;return f}}}function ye(a,b,e){let f;e=null!=(f=ve(e,void 0))?f:{};b=`${Ya(e)}_${b}`;return a.getName(`${b}_bins`)}function Rd(a,b,e){let f;f="as"in a?h.isString(a.as)?[a.as,`${a.as}_end`]:
[a.as[0],a.as[1]]:[qc(a,{forAs:!0}),qc(a,{binSuffix:"end",forAs:!0})];b=Object.assign({},ve(b,void 0));var g=a.field;g=`${Ya(b)}_${g}`;var p={signal:e.getName(`${g}_bins`),extentSignal:e.getName(`${g}_extent`)};const {signal:B,extentSignal:P}=p;if(Tb(b.extent)){var X=b.extent;X=ej(e,X.param,X);delete b.extent}a=Object.assign({},{bin:b,field:a.field,as:[f]},B?{signal:B}:{},P?{extentSignal:P}:{},X?{span:X}:{});return{key:g,binComponent:a}}function Te(a){return a.startsWith("'")&&a.endsWith("'")||a.startsWith('"')&&
a.endsWith('"')?a.slice(1,-1):a}function Ef(a,b){a=Va(a);if("number"===b)return`toNumber(${a})`;if("boolean"===b)return`toBoolean(${a})`;if("string"===b)return`toString(${a})`;if("date"===b)return`toDate(${a})`;if("flatten"===b)return a;if(b.startsWith("date:"))return b=Te(b.slice(5,b.length)),`timeParse(${a},'${b}')`;if(b.startsWith("utc:"))return b=Te(b.slice(4,b.length)),`utcParse(${a},'${b}')`;K(`Unrecognized parse "${b}".`);return null}function sg(a){const b={};ia(a.filter,e=>{if(fb(e)){let f=
null;if(He(e))f=qa(e.equal);else if(tf(e))f=qa(e.lte);else if(Ie(e))f=qa(e.lt);else if(bf(e))f=qa(e.gt);else if(F(e))f=qa(e.gte);else if(aa(e))f=e.range[0];else if(Fa(e)){let g;f=(null!=(g=e.oneOf)?g:e["in"])[0]}f&&(Ka(f)?b[e.field]="date":h.isNumber(f)?b[e.field]="number":h.isString(f)&&(b[e.field]="string"));e.timeUnit&&(b[e.field]="date")}});return b}function tg(a){function b(f){if(lf(f))e[f.field]="date";else{var g;if(g="quantitative"===f.type)g=f.aggregate,g=h.isString(g)&&Cb(["min","max"],g);
g?e[f.field]="number":1<eb(f.field)?f.field in e||(e[f.field]="flatten"):Td(f)&&Ae(f.sort)&&1<eb(f.sort.field)&&(f.sort.field in e||(e[f.sort.field]="flatten"))}}const e={};(Nf(a)||ih(a))&&a.forEachFieldDef((f,g)=>{Rc(f)?b(f):(g=Q(g),g=a.fieldDef(g),b(Object.assign({},f,{type:g.type})))});if(Nf(a)){const {mark:f,markDef:g,encoding:p}=a;if(Oa(f)&&!a.encoding.order){const B=p["horizontal"===g.orient?"y":"x"];!Ia(B)||"quantitative"!==B.type||B.field in e||(e[B.field]="number")}}return e}function zg(a){return a instanceof
da||a instanceof v||a instanceof S}function Mf(a){return a.stack.stackBy.reduce((b,e)=>{(e=qc(e.fieldDef))&&b.push(e);return b},[])}function ze(a){return h.isArray(a)&&a.every(b=>h.isString(b))&&1<a.length}function yf(a){function b(e){if(!(e instanceof c)){const f=e.clone();if(f instanceof Pg){const g="scale_"+f.getSource();f.setSource(g);a.model.component.data.outputNodes[g]=f}else(f instanceof zh||f instanceof oe||f instanceof ue||f instanceof be)&&f.addDimensions(a.fields);for(const g of e.children.flatMap(b))g.parent=
f;return[f]}return e.children.flatMap(b)}return b}function Xh(a){if(a instanceof c)if(1!==a.numChildren()||a.children[0]instanceof Pg){var b=a.model.component.data.main;Vd(b);const e=yf(a);a=a.children.map(e).flat();for(const f of a)f.parent=b}else b=a.children[0],(b instanceof zh||b instanceof oe||b instanceof ue||b instanceof be)&&b.addDimensions(a.fields),b.swapWithParent(),Xh(a);else a.children.map(Xh)}function Vd(a){if(a instanceof Pg&&a.type===nf.Main&&1===a.numChildren()){const b=a.children[0];
b instanceof c||(b.swapWithParent(),Vd(a))}}function wd(a){for(const b of a){for(const e of b.children)if(e.parent!==b)return!1;if(!wd(b.children))return!1}return!0}function Pd(a,b){let e=!1;for(const f of b)e=a.optimize(f)||e;return e}function Ed(a,b,e){let f=a.sources,g=!1;g=Pd(new Sd,f)||g;g=Pd(new yd(b),f)||g;f=f.filter(p=>0<p.numChildren());g=Pd(new $f,f)||g;f=f.filter(p=>0<p.numChildren());e||(g=Pd(new de,f)||g,g=Pd(new Qc(b),f)||g,g=Pd(new td,f)||g,g=Pd(new je,f)||g,g=Pd(new uc,f)||g,g=Pd(new Ic,
f)||g,g=Pd(new ud,f)||g,g=Pd(new Id,f)||g);a.sources=f;return g}function af(a){const b=a.component.scales;for(const ta of sd(b)){var e=a,f=ta,g=e.getScaleComponent(f).get("type"),{encoding:p}=e;var B=e.scaleDomain(f);var P=e.typedFieldDef(f),X=e.config.scale;if("unaggregated"===B){const {valid:cb,reason:pb}=fg(P,g);cb||(K(pb),B=void 0)}else void 0===B&&X.useUnaggregatedDomain&&({valid:P}=fg(P,g),P&&(B="unaggregated"));B!==e.scaleDomain(f)&&(e.specifiedScales[f]=Object.assign({},e.specifiedScales[f],
{domain:B}));e="x"===f&&Fe(p.x2)?Fe(p.x)?xf(qg(g,B,e,"x"),qg(g,B,e,"x2"),"domain","scale",Gk):qg(g,B,e,"x2"):"y"===f&&Fe(p.y2)?Fe(p.y)?xf(qg(g,B,e,"y"),qg(g,B,e,"y2"),"domain","scale",Gk):qg(g,B,e,"y2"):qg(g,B,e,f);b[ta].setWithExplicit("domains",e);B=f=void 0;g=a.component.scales[ta];P=a.specifiedScales[ta].domain;p=null==(B=a.fieldDef(ta))?void 0:B.bin;B=(null==P?void 0:P.param)&&P;p=h.isObject(p)&&Tb(p.extent)&&p.extent;(B||p)&&g.set("selectionExtent",null!=(f=B)?f:p,!0);if(a.component.data.isFaceted){for(f=
a;!ih(f)&&f.parent;)f=f.parent;if("shared"===f.component.resolve.scale[ta])for(const cb of e.value)xc(cb)&&(cb.data="scale_"+cb.data.replace("scale_",""))}}}function Tf(a){for(var b of a.children){var e=b;Nf(e)?af(e):Tf(e)}e=a.component.scales;for(const g of sd(e)){let p;b=null;for(const B of a.children){var f=B.component.scales[g];f&&(p=void 0===p?f.getWithExplicit("domains"):xf(p,f.getWithExplicit("domains"),"domains","scale",Gk),f=f.get("selectionExtent"),b&&f&&b.param!==f.param&&K("The same selection must be used to override scale domains in a layered view."),
b=f)}e[g].setWithExplicit("domains",p);b&&e[g].set("selectionExtent",b,!0)}}function Ff(a,b,e){return a.map(f=>({signal:`{data: ${Dg(f,{timeUnit:e,type:b})}}`}))}function Uf(a,b,e){let f;e=null==(f=nd(e))?void 0:f.unit;return"temporal"===b||e?Ff(a,b,e):[a]}function qg(a,b,e,f){const {encoding:g,markDef:p,mark:B,config:P,stack:X}=e;var ta=Fe(g[f]),{type:cb}=ta;const pb=ta.timeUnit;if(null==b?0:b.unionWith)return f=qg(a,void 0,e,f),ta=Uf(b.unionWith,cb,pb),Gg([...ta,...f.value]);if(Mb(b))return Gg([b]);
if(b&&"unaggregated"!==b&&(null==b||!b.param))return Gg(Uf(b,cb,pb));if(X&&f===X.fieldChannel){if("normalize"===X.offset)return Se([[0,1]]);ta=e.requestDataName(nf.Main);return Se([{data:ta,field:e.vgField(f,{suffix:"start"})},{data:ta,field:e.vgField(f,{suffix:"end"})}])}const gc=Mh[f]&&Ia(ta)?cm(e,f,a):void 0;if(nb(ta))return f=Uf([ta.datum],cb,pb),Se(f);if("unaggregated"===b)return f=e.requestDataName(nf.Main),{field:ta}=ta,Se([{data:f,field:qc({field:ta,aggregate:"min"})},{data:f,field:qc({field:ta,
aggregate:"max"})}]);if(vb(ta.bin)){if(ce(a))return"bin-ordinal"===a?Se([]):Se([{data:ec(gc)?e.requestDataName(nf.Main):e.requestDataName(nf.Raw),field:e.vgField(f,Of(ta,f)?{binSuffix:"range"}:{}),sort:!0!==gc&&h.isObject(gc)?gc:{field:e.vgField(f,{}),op:"min"}}]);({bin:b}=ta);if(vb(b)){const Pc=ye(e,ta.field,b);return Se([new ee(()=>{const kc=e.getSignalName(Pc);return`[${kc}.start, ${kc}.stop]`})])}return Se([{data:e.requestDataName(nf.Main),field:e.vgField(f,{})}])}return ta.timeUnit&&Cb(["time",
"utc"],a)&&(cb=g[y(f)],J(ta,cb,p,P))?(b=e.requestDataName(nf.Main),ta=l({fieldDef:ta,fieldDef2:cb,markDef:p,config:P}),ta=cc(B)&&.5!==ta&&H(f),Se([{data:b,field:e.vgField(f,ta?{suffix:"offsetted_rect_start"}:{})},{data:b,field:e.vgField(f,{suffix:ta?"offsetted_rect_end":"end"})}])):gc?Se([{data:ec(gc)?e.requestDataName(nf.Main):e.requestDataName(nf.Raw),field:e.vgField(f),sort:gc}]):Se([{data:e.requestDataName(nf.Main),field:e.vgField(f)}])}function Vh(a,b){const {op:e,field:f,order:g}=a;return Object.assign({},
{op:null!=e?e:b?"sum":"min"},f?{field:bb(f)}:{},g?{order:g}:{})}function cm(a,b,e){if(ce(e)){var f=a.fieldDef(b);e=f.sort;if(Ee(e))return{op:"min",field:Ri(f,b),order:"ascending"};({stack:f}=a);var g=f?new Set([...f.groupbyFields,...f.stackBy.map(p=>p.fieldDef.field)]):void 0;if(Ae(e))return a=f&&!g.has(e.field),Vh(e,a);if(null!=e&&e.encoding){const {encoding:p,order:B}=e;a=a.fieldDef(p);const {aggregate:P,field:X}=a;b=f&&!g.has(X);if(la(P)||za(P))return Vh({field:qc(a),order:B},b);if(Ma(P)||!P)return Vh({op:P,
field:X,order:B},b)}else{if("descending"===e)return{op:"min",field:a.vgField(b),order:"descending"};if(Cb(["ascending",void 0],e))return!0}}}function fg(a,b){const {aggregate:e,type:f}=a;return e?h.isString(e)&&!Yk.has(e)?{valid:!1,reason:`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}:"quantitative"===f&&"log"===b?{valid:!1,reason:`Unaggregated domain is currently unsupported for log scale (${m(a)}).`}:{valid:!0}:{valid:!1,reason:`Using unaggregated domain with raw field has no effect (${m(a)}).`}}
function Gk(a,b,e,f){if(a.explicit&&b.explicit){var g=b.value;e=`Conflicting ${f.toString()} property "${e.toString()}" (${m(a.value)} and ${m(g)}). Using the union of the two domains.`;K(e)}return{explicit:a.explicit,value:[...a.value,...b.value]}}function Hk(a){var b=Za(a.map(g=>xc(g)?(g=Object.assign({},g),delete g.sort,g):g),Xb),e=Za(a.map(g=>{if(xc(g))return g=g.sort,void 0===g||ec(g)||("op"in g&&"count"===g.op&&delete g.field,"ascending"===g.order&&delete g.order),g}).filter(g=>void 0!==g),
Xb);if(0!==b.length){if(1===b.length){b=a[0];if(xc(b)&&0<e.length){var f=e[0];1<e.length?(K("Domains that should be unioned has conflicting sort properties. Sort will be set to true."),f=e.filter(g=>h.isObject(g)&&"op"in g&&"min"!==g.op),f=e.every(g=>h.isObject(g)&&"op"in g)&&1===f.length?f[0]:!0):h.isObject(f)&&"field"in f&&b.field===f.field&&(f=f.order?{order:f.order}:!0);return Object.assign({},b,{sort:f})}return b}e=Za(e.map(g=>{if(ec(g)||!("op"in g)||h.isString(g.op)&&g.op in Ul)return g;K(`Dropping sort property ${m(g)} as unioned domains only support boolean or op "count", "min", and "max".`);
return!0}),Xb);1===e.length?f=e[0]:1<e.length&&(K("Domains that should be unioned has conflicting sort properties. Sort will be set to true."),f=!0);e=Za(a.map(g=>xc(g)?g.data:null),g=>g);return 1===e.length&&null!==e[0]?Object.assign({},{data:e[0],fields:b.map(g=>g.field)},f?{sort:f}:{}):Object.assign({},{fields:b},f?{sort:f}:{})}}function dk(a){if(xc(a)&&h.isString(a.field))return a.field;var b=h.isArray(a)?!1:"fields"in a&&!("data"in a);if(b){let e;for(const f of a.fields)if(xc(f)&&h.isString(f.field))if(!e)e=
f.field;else if(e!==f.field)return K("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),e;K("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.");return e}b=h.isArray(a)?!1:
"fields"in a&&"data"in a;if(b)return K("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect."),a=a.fields[0],h.isString(a)?a:void 0}function Ui(a,b){b=a.component.scales[b].get("domains").map(e=>{xc(e)&&(e.data=a.lookupDataSource(e.data));return e});return Hk(b)}function nl(a){return Ti(a)||Tk(a)?a.children.reduce((b,e)=>b.concat(nl(e)),Ik(a)):Ik(a)}function Ik(a){return sd(a.component.scales).reduce((b,
e)=>{var f=a.component.scales[e];if(f.merged)return b;var g=f.combine(),p=Object.assign({},g);const B=g.name,P=g.type;var X=g.selectionExtent;const ta=g.reverse;p=(delete p.name,delete p.type,delete p.selectionExtent,delete p.domains,delete p.range,delete p.reverse,p);g=g.range;H(e)?Qb(g)&&(g={step:{signal:`${B}_step`}}):h.isObject(g)&&xc(g)&&(g=Object.assign({},g,{data:a.lookupDataSource(g.data)}));e=Ui(a,e);X?(X=ej(a,X.param,X),f={signal:Kd(f.get("type"))&&h.isArray(e)&&e[0]>e[1]?`isValid(${X}) && reverse(${X})`:
X}):f=null;b.push(Object.assign({},{name:B,type:P},e?{domain:e}:{},f?{domainRaw:f}:{},{range:g},void 0!==ta?{reverse:ta}:{},p));return b},[])}function Ij(a,b){var e=a.fieldDef(b);if(null==e?0:e.bin){const {bin:f,field:g}=e;e=N(b);const p=a.getName(e);if(h.isObject(f)&&f.binned&&void 0!==f.step)return new ee(()=>{var B=a.scaleName(b);B=`(domain("${B}")[1] - domain("${B}")[0]) / ${f.step}`;return`${a.getSignalName(p)} / (${B})`});if(vb(f)){const B=ye(a,g,f);return new ee(()=>{var P=a.getSignalName(B);
P=`(${P}.stop - ${P}.start) / ${P}.step`;return`${a.getSignalName(p)} / (${P})`})}}}function Yh(a,b){const e=b.specifiedScales[a];var {size:f}=b,g=b.getScaleComponent(a).get("type");for(var p of ef)if(void 0!==e[p]){const X=Md(g,p),ta=Wd(a,p);if(X)if(ta)K(ta);else switch(p){case "range":g=e.range;if(h.isArray(g)){if(H(a))return Gg(g.map(cb=>{if("width"===cb||"height"===cb){cb=b.getName(cb);const pb=b.getSignalName.bind(b);return ee.fromName(pb,cb)}return cb}))}else if(h.isObject(g))return Gg({data:b.requestDataName(nf.Main),
field:g.field,sort:{op:"min",field:b.vgField(a)}});return Gg(g);case "scheme":return Gg(Nh(e[p]))}else K(Dd(g,p,a))}p="x"===a||"xOffset"===a?"width":"height";f=f[p];if(Ge(f))if(H(a))if(ce(g)){if(f=Jj(f,b,a))return Gg({step:f})}else K(rd(p));else if(a in Wi&&"band"===b.getScaleComponent("xOffset"===a?"x":"y").get("type")&&(f=Tj(f,g)))return Gg(f);const {rangeMin:B,rangeMax:P}=e;a=Ll(a,b);return(void 0!==B||void 0!==P)&&Md(g,"rangeMin")&&h.isArray(a)&&2===a.length?Gg([null!=B?B:a[0],null!=P?P:a[1]]):
Se(a)}function Nh(a){return!h.isString(a)&&a.name?Object.assign({},{scheme:a.name},ac(a,["name"])):{scheme:a}}function kl(a,b,e){let {center:f}=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};var g=N(a);g=b.getName(g);const p=b.getSignalName.bind(b);return"y"===a&&Kd(e)?f?[ee.fromName(B=>`${p(B)}/2`,g),ee.fromName(B=>`-${p(B)}/2`,g)]:[ee.fromName(p,g),0]:f?[ee.fromName(B=>`-${p(B)}/2`,g),ee.fromName(B=>`${p(B)}/2`,g)]:[0,ee.fromName(p,g)]}function Ll(a,b){const {size:e,config:f,mark:g,encoding:p}=
b;var {type:B}=Fe(p[a]);const P=b.getScaleComponent(a).get("type"),{domain:X,domainMid:ta}=b.specifiedScales[a];switch(a){case "x":case "y":return Cb(["point","band"],P)&&(B=Zj(a,e,f.view),Ge(B))?{step:Jj(B,b,a)}:kl(a,b,P);case "xOffset":case "yOffset":return sf(a,b,P);case "size":B=b.component.scales[a].get("zero");B=ki(g,B,f);const cb=Di(g,e,b,f);return ai.has(P)?Ci(B,cb,ak(P,f,X,a)):[B,cb];case "theta":return[0,2*Math.PI];case "angle":return[0,360];case "radius":return[0,new ee(()=>{const pb=b.getSignalName("width"),
gc=b.getSignalName("height");return`min(${pb},${gc})/2`})];case "strokeWidth":return[f.scale.minStrokeWidth,f.scale.maxStrokeWidth];case "strokeDash":return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case "shape":return"symbol";case "color":case "fill":case "stroke":return"ordinal"===P?"nominal"===B?"category":"ordinal":void 0!==ta?"diverging":"rect"===g||"geoshape"===g?"heatmap":"ramp";case "opacity":case "fillOpacity":case "strokeOpacity":return[f.scale.minOpacity,f.scale.maxOpacity]}}function Jj(a,b,e){var {encoding:f}=
b,g=b.getScaleComponent(e);e=C(e);const p=f[e];if("offset"===of({step:a,offsetIsDiscrete:yc(p)&&Oc(p.type)})&&cg(f,e)){f=b.getScaleComponent(e);b=`domain('${b.scaleName(e)}').length`;if("band"===f.get("type")){var B;let ta;e=null!=(ta=null!=(B=f.get("paddingInner"))?B:f.get("padding"))?ta:0;var P;let cb;B=null!=(cb=null!=(P=f.get("paddingOuter"))?P:f.get("padding"))?cb:0;b=`bandspace(${b}, ${e}, ${B})`}var X;P=null!=(X=g.get("paddingInner"))?X:g.get("padding");a=a.step;g=b;X=P;X=Mb(X)?X.signal:h.stringValue(X);
return{signal:`${a} * ${g} / (1-${X})`}}return a.step}function Tj(a,b){if("offset"===of({step:a,offsetIsDiscrete:ce(b)}))return{step:a.step}}function sf(a,b,e){var f="xOffset"===a?"x":"y",g=b.getScaleComponent(f);if(!g)return kl(f,b,e,{center:!0});g=g.get("type");const p=b.scaleName(f),{markDef:B,config:P}=b;if("band"===g)return b=Zj(f,b.size,b.config.view),Ge(b)&&(b=Tj(b,e))?b:[0,{signal:`bandwidth('${p}')`}];e=b.encoding[f];return Ia(e)&&e.timeUnit?(a=me(e.timeUnit,X=>`scale('${p}', ${X})`),b=b.config.scale.bandWithNestedOffsetPaddingInner,
f=l({fieldDef:e,markDef:B,config:P})-.5,g=0!==f?` + ${f}`:"",b?(e=Mb(b)?`${b.signal}/2`+g:`${b/2+f}`,b=Mb(b)?`(1 - ${b.signal}/2)`+g:`${1-b/2+f}`,[{signal:`${e} * (${a})`},{signal:`${b} * (${a})`}]):[0,{signal:a}]):zb(`Cannot use ${a} scale if ${f} scale is not discrete.`)}function Zj(a,b,e){a="x"===a?"width":"height";return(b=b[a])?b:Pf(e,a)}function ak(a,b,e,f){switch(a){case "quantile":return b.scale.quantileCount;case "quantize":return b.scale.quantizeCount;case "threshold":if(void 0!==e&&h.isArray(e))return e.length+
1;K(`Domain for ${f} is required for threshold scale.`);return 3}}function Ci(a,b,e){const f=()=>{const g=Hb(b),p=Hb(a),B=`(${g} - ${p}) / (${e} - 1)`;return`sequence(${p}, ${g} + ${B}, ${B})`};return Mb(b)?new ee(f):{signal:f()}}function ki(a,b,e){if(b)return Mb(b)?{signal:`${b.signal} ? 0 : ${ki(a,!1,e)}`}:0;switch(a){case "bar":case "tick":return e.scale.minBandSize;case "line":case "trail":case "rule":return e.scale.minStrokeWidth;case "text":return e.scale.minFontSize;case "point":case "square":case "circle":return e.scale.minSize}throw Error(gd("size",
a));}function Di(a,b,e,f){e={x:Ij(e,"x"),y:Ij(e,"y")};switch(a){case "bar":case "tick":if(void 0!==f.scale.maxBandSize)return f.scale.maxBandSize;const g=kj(b,e,f.view);return h.isNumber(g)?g-1:new ee(()=>`${g.signal} - 1`);case "line":case "trail":case "rule":return f.scale.maxStrokeWidth;case "text":return f.scale.maxFontSize;case "point":case "square":case "circle":if(f.scale.maxSize)return f.scale.maxSize;const p=kj(b,e,f.view);return h.isNumber(p)?Math.pow(.95*p,2):new ee(()=>`pow(${.95} * ${p.signal}, 2)`)}throw Error(gd("size",
a));}function kj(a,b,e){const f=Ge(a.width)?a.width.step:Wf(e,"width"),g=Ge(a.height)?a.height.step:Wf(e,"height");return b.x||b.y?new ee(()=>`min(${[b.x?b.x.signal:f,b.y?b.y.signal:g].join(", ")})`):Math.min(f,g)}function lj(a,b){if(Nf(a)){const B=a.component.scales,{config:P,encoding:X,markDef:ta,specifiedScales:cb}=a;for(const pb of sd(B)){var e=cb[pb];const gc=B[pb];var f=a.getScaleComponent(pb),g=Fe(X[pb]),p=e[b];const Pc=f.get("type"),kc=f.get("padding");f=f.get("paddingInner");const Nc=Md(Pc,
b),Zc=Wd(pb,b);void 0!==p&&(Nc?Zc&&K(Zc):K(Dd(Pc,b,pb)));if(Nc&&void 0===Zc)if(void 0!==p)switch(p=g.timeUnit,g=g.type,b){case "domainMax":case "domainMin":Ka(e[b])||"temporal"===g||p?gc.set(b,{signal:Dg(e[b],{type:g,timeUnit:p})},!0):gc.set(b,e[b],!0);break;default:gc.copyKeyFromObject(b,e)}else e=b in pi?pi[b]({model:a,channel:pb,fieldOrDatumDef:g,scaleType:Pc,scalePadding:kc,scalePaddingInner:f,domain:e.domain,domainMin:e.domainMin,domainMax:e.domainMax,markDef:ta,config:P,hasNestedOffsetScale:Tg(X,
pb),hasSecondaryRangeChannel:!!X[y(pb)]}):P.scale[b],void 0!==e&&gc.set(b,e,!1)}}else ml(a,b)}function li(a){if(Nf(a)){const b=a.component.scales;for(const e of Bk){const f=b[e];if(!f)continue;const g=Yh(e,a);f.setWithExplicit("range",g)}}else ml(a,"range")}function ml(a,b){const e=a.component.scales;for(var f of a.children)"range"===b?li(f):lj(f,b);for(const g of sd(e)){let p;for(const B of a.children)if(f=B.component.scales[g])f=f.getWithExplicit(b),p=xf(p,f,b,"scale",Ih((P,X)=>{switch(b){case "range":if(P.step&&
X.step)return P.step-X.step}return 0}));e[g].setWithExplicit(b,p)}}function mj(a,b){const e=b.bin;if(vb(e)){const f=ye(a,b.field,e);return new ee(()=>a.getSignalName(f))}if(jb(e)&&h.isObject(e)&&void 0!==e.step)return{step:e.step}}function bk(a,b,e,f,g){let p=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1;if(void 0===a){if(H(b)){const {bandPaddingInner:B,barBandPaddingInner:P,rectBandPaddingInner:X,bandWithNestedOffsetPaddingInner:ta}=g;return p?ta:T(B,"bar"===e?P:X)}if(b in Wi&&f===gg.BAND)return g.offsetBandPaddingInner}}
function ck(a,b,e,f,g){let p=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1;if(void 0===a)if(H(b)){const {bandPaddingOuter:B,bandWithNestedOffsetPaddingOuter:P}=g;if(p)return P;if(e===gg.BAND)return T(B,Mb(f)?{signal:`${f.signal}/2`}:f/2)}else if(b in Wi){if(e===gg.POINT)return.5;if(e===gg.BAND)return g.offsetBandPaddingOuter}}function Ei(a,b,e,f){const g=Jk(b,e,f,4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1),{type:p}=a;if(!Mh[b])return null;if(void 0!==p){if(!ya(b,p))return K(`Channel "${b}" does not work with "${p}" scale. We are using "${g}" scale instead.`),
g;var B;if(B=Ia(e))B=e.type,B=!(Cb(["ordinal","nominal"],B)?void 0===p||ce(p):"temporal"===B?Cb([gg.TIME,gg.UTC,void 0],p):"quantitative"===B?ni.has(p)||ai.has(p)||void 0===p:1);return B?(K(`FieldDef does not work with "${p}" scale. We are using "${g}" scale instead.`),g):p}return g}function Jk(a,b,e,f){switch(b.type){case "nominal":case "ordinal":if(L(a)||"discrete"===O(a))return"shape"===a&&"ordinal"===b.type&&K(Cd(a,"ordinal")),"ordinal";if(H(a)||a in Wi){if(Cb(["rect","bar","image","rule"],e.type)||
f)return"band"}else if("arc"===e.type&&a in ik)return"band";a=e[N(a)];if(vc(a))return"band";let g;return Ad(b)&&(null==(g=b.axis)?0:g.tickBand)?"band":"point";case "temporal":if(!L(a)){if("discrete"===O(a))return K(Cd(a,"temporal")),"ordinal";if(Ia(b)&&b.timeUnit&&nd(b.timeUnit).utc)return"utc"}return"time";case "quantitative":if(L(a)){if(Ia(b)&&vb(b.bin))return"bin-ordinal"}else if("discrete"===O(a))return K(Cd(a,"quantitative")),"ordinal";return"linear";case "geojson":return}throw Error(`Invalid field type "${b.type}".`);
}function ek(a){let {ignoreRange:b}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};gj(a);Nf(a)?af(a):Tf(a);for(const e of lk)lj(a,e);b||li(a)}function gj(a){if(Nf(a)){var b=a.component;const {encoding:X,mark:ta,markDef:cb}=a;var e={};for(var f of Bk){var g=Fe(X[f]);if(!g||ta!==qi||"shape"!==f||"geojson"!==g.type){var p=g&&g.scale;if(g&&null!==p&&!1!==p){null!=p||(p={});var B=Tg(X,f);g=Ei(p,f,g,cb,B);e[f]=new ug(a.scaleName(`${f}`,!0),{value:g,explicit:p.type===g})}}}b.scales=e}else{f=a.component;
p=a.component.scales={};g={};const X=a.component.resolve;for(B of a.children){gj(B);for(var P of sd(B.component.scales)){let ta,cb;null!=(ta=X.scale)[cb=P]||(ta[cb]=ii(P,a));if("shared"===X.scale[P]){const pb=g[P],gc=B.component.scales[P].getWithExplicit("type");if(pb){const Pc=Bg[pb.value],kc=Bg[gc.value];Pc===kc||"ordinal-position"===Pc&&"time"===kc||"ordinal-position"===kc&&"time"===Pc?g[P]=xf(pb,gc,"type","scale",Wl):(X.scale[P]="independent",delete g[P])}else g[P]=gc}}}for(b of sd(g)){B=a.scaleName(b,
!0);p[b]=new ug(B,g[b]);for(e of a.children)if(P=e.component.scales[b])e.renameScale(P.get("name"),B),P.merged=!0}f.scales=p}}function Nf(a){return"unit"===(null==a?void 0:a.type)}function ih(a){return"facet"===(null==a?void 0:a.type)}function Tk(a){return"concat"===(null==a?void 0:a.type)}function Ti(a){return"layer"===(null==a?void 0:a.type)}function yk(a){function b(f,g){f instanceof da&&!(f.isGenerator||"url"in f.data)&&(a.push(g),g={name:null,source:g.name,transform:[]});if(f instanceof d)if(f.parent instanceof
da&&!g.source){var p;g.format=Object.assign({},null!=(p=g.format)?p:{},{parse:f.assembleFormatParse()});g.transform.push(...f.assembleTransforms(!0))}else g.transform.push(...f.assembleTransforms());if(f instanceof c)g.name||(g.name=`data_${e++}`),!g.source||0<g.transform.length?(a.push(g),f.data=g.name):f.data=g.source,a.push(...f.assemble());else switch((f instanceof v||f instanceof S||f instanceof Gl||f instanceof wi||f instanceof Ni||f instanceof Hl||f instanceof zh||f instanceof Il||f instanceof
ue||f instanceof be||f instanceof mm||f instanceof nm||f instanceof om||f instanceof pm||f instanceof qm||f instanceof rm||f instanceof k||f instanceof sm||f instanceof tm||f instanceof um)&&g.transform.push(f.assemble()),(f instanceof Bi||f instanceof xh||f instanceof Ek||f instanceof oe||f instanceof jl)&&g.transform.push(...f.assemble()),f instanceof Pg&&(g.source&&0===g.transform.length?f.setSource(g.source):f.parent instanceof Pg?f.setSource(g.name):(g.name||(g.name=`data_${e++}`),f.setSource(g.name),
1===f.numChildren()&&(a.push(g),g={name:null,source:g.name,transform:[]}))),f.numChildren()){case 0:f instanceof Pg&&(!g.source||0<g.transform.length)&&a.push(g);break;case 1:b(f.children[0],g);break;default:g.name||(g.name=`data_${e++}`);p=g.name;!g.source||0<g.transform.length?a.push(g):p=g.source;for(const B of f.children)b(B,{name:null,source:p,transform:[]})}}let e=0;return b}function Xj(a){const b=[],e=yk(b);for(const f of a.children)e(f,{source:a.name,name:null,transform:[]});return b}function zk(a,
b){const e=[];var f=yk(e);let g=0;for(const p of a.sources){p.hasName()||(p.dataName=`source_${g++}`);const B=p.assemble();f(p,B)}for(const p of e)0===p.transform.length&&delete p.transform;f=0;for(const p of e.entries()){const [B,P]=p;let X;0!==(null!=(X=P.transform)?X:[]).length||P.source||e.splice(f++,0,e.splice(B,1)[0])}for(const p of e){let B;for(const P of null!=(B=p.transform)?B:[])"lookup"===P.type&&(P.from=a.outputNodes[P.from].getSource())}for(const p of e)p.name in b&&(p.values=b[p.name]);
return e}function Qk(a,b,e){b="row"===b?"height":"width";return{labels:e,sizeSignal:a.child.component.layoutSize.get(b)?a.child.getSizeSignalRef(b):void 0,axes:[]}}function Bl(a,b){var {child:e}=a;if(e.component.axes[b]){const {layoutHeaders:f,resolve:g}=a.component;g.axis[b]=n(g,b);if("shared"===g.axis[b]){const p="x"===b?"column":"row",B=f[p];for(const P of e.component.axes[b]){b=P.get("orient");b="top"===b||"left"===b||Mb(b)?"header":"footer";let X,ta;null!=(X=B)[ta=b]||(X[ta]=[Qk(a,p,!1)]);(e=
hh(P,"main",a.config,{header:!0}))&&B[b][0].axes.push(e);P.mainExtracted=!0}}}}function Rk(a){for(const b of a.children)b.parseLayoutSize()}function Ak(a,b){const e=Xi(b),f=V(e),g=a.component.resolve,p=a.component.layoutSize;let B;for(const P of a.children){const X=P.component.layoutSize.getWithExplicit(e);let ta;const cb=null!=(ta=g.scale[f])?ta:ii(f,a);if("independent"===cb&&"step"===X.value){B=void 0;break}if(B){if("independent"===cb&&B.value!==X.value){B=void 0;break}B=xf(B,X,e,"")}else B=X}if(B){for(const P of a.children)a.renameSignal(P.getName(e),
a.getName(b)),P.component.layoutSize.set(e,"merged",!1);p.setWithExplicit(b,B)}else p.setWithExplicit(b,{explicit:!1,value:void 0})}function Pk(a,b){const e=a.config;var f=a.getScaleComponent("width"===b?"x":"y");if(f)return a=f.get("type"),f=f.get("range"),ce(a)?(b=Pf(e.view,b),Qb(f)||Ge(b)?"step":b):pf(e.view,b);if(a.hasProjection||"arc"===a.mark)return pf(e.view,b);b=Pf(e.view,b);return Ge(b)?b.step:b}function dl(a,b,e){return qc(b,Object.assign({},{suffix:`by_${qc(a)}`},null!=e?e:{}))}function pl(a,
b){for(const f of b){b=f.data;if(a.name&&f.hasName()&&a.name!==f.dataName)continue;let g;const p=null==(g=a.format)?void 0:g.mesh;let B;var e=null==(B=b.format)?void 0:B.feature;if(p&&e)continue;let P;const X=null==(P=a.format)?void 0:P.feature;if((X||e)&&X!==e)continue;let ta;e=null==(ta=b.format)?void 0:ta.mesh;if(!p&&!e||p===e)if("values"in a&&"values"in b){if(pa(a.values,b.values))return f}else if("url"in a&&"url"in b){if(a.url===b.url)return f}else if(Mi(a)&&a.name===f.dataName)return f}return null}
function dm(a,b){if(a.data||!a.parent){if(null===a.data)return a=new da({values:[]}),b.push(a),a;const e=pl(a.data,b);if(e)return pg(a.data)||(e.data.format=Ba({},a.data.format,e.data.format)),!e.hasName()&&a.data.name&&(e.dataName=a.data.name),e;a=new da(a.data);b.push(a);return a}return a.parent.component.data.facetRoot?a.parent.component.data.facetRoot:a.parent.component.data.main}function jk(a){var b=dm(a,a.component.data.sources);const {outputNodes:e,outputNodeRefCounts:f}=a.component.data;var g=
a.data;const p=g&&(pg(g)||"url"in g||"values"in g)||!a.parent?new Rj:a.parent.component.data.ancestorParse.clone();if(pg(g))"sequence"in g?b=new S(b,g.sequence):"graticule"in g&&(b=new v(b,g.graticule)),p.parseNothing=!0;else{let $d;null===(null==g?void 0:null==($d=g.format)?void 0:$d.parse)&&(p.parseNothing=!0)}var B;b=null!=(B=d.makeExplicit(b,a,p))?B:b;b=new k(b);g=a.parent&&Ti(a.parent);if((Nf(a)||ih(a))&&g){var P;b=null!=(P=Bi.makeFromEncoding(b,a))?P:b}if(0<a.transforms.length){P=0;for(var X of a.transforms){var ta=
B=void 0;if("calculate"in X)ta=b=new Ni(b,X),B="derived";else if("filter"in X){ta=sg(X);var cb=void 0;ta=b=null!=(cb=d.makeWithAncestors(b,{},ta,p))?cb:b;b=new wi(b,a,X.filter)}else if("bin"in X)ta=b=Bi.makeFromTransform(b,X,a),B="number";else if("timeUnit"in X)B="date",void 0===p.getWithExplicit(X.field).value&&(b=new d(b,{[X.field]:B}),p.set(X.field,B,!1)),ta=b=xh.makeFromTransform(b,X);else if("aggregate"in X)ta=b=zh.makeFromTransform(b,X),B="number",Af(a)&&(b=new k(b));else if("lookup"in X)ta=
b=Il.make(b,a,X,P++),B="derived";else if("window"in X)ta=b=new ue(b,X),B="number";else if("joinaggregate"in X)ta=b=new be(b,X),B="number";else if("stack"in X)ta=b=oe.makeFromTransform(b,X),B="derived";else if("fold"in X)ta=b=new mm(b,X),B="derived";else if("extent"in X&&!("density"in X))ta=b=new um(b,X),B="derived";else if("flatten"in X)ta=b=new nm(b,X),B="derived";else if("pivot"in X)ta=b=new tm(b,X),B="derived";else if("sample"in X)b=new sm(b,X);else if("impute"in X)ta=b=Ek.makeFromTransform(b,
X),B="derived";else if("density"in X)ta=b=new om(b,X),B="derived";else if("quantile"in X)ta=b=new qm(b,X),B="derived";else if("regression"in X)ta=b=new rm(b,X),B="derived";else if("loess"in X)ta=b=new pm(b,X),B="derived";else{K(`Ignoring an invalid transform: ${m(X)}.`);continue}if(ta&&void 0!==B){let $d;for(const Ce of null!=($d=ta.producedFields())?$d:[])p.set(Ce,B,!1)}}}X={};if(Nf(a)&&a.component.selection)for(var pb of sd(a.component.selection)){cb=a.component.selection[pb];for(const $d of cb.project.items)!$d.channel&&
1<eb($d.field)&&(X[$d.field]="flatten")}pb=tg(a);var gc;b=null!=(gc=d.makeWithAncestors(b,{},Object.assign({},X,pb),p))?gc:b;Nf(a)&&(b=jl.parseAll(b,a),b=Hl.parseAll(b,a));if(Nf(a)||ih(a)){if(!g){let $d;b=null!=($d=Bi.makeFromEncoding(b,a))?$d:b}var Pc;b=null!=(Pc=xh.makeFromEncoding(b,a))?Pc:b;b=Ni.parseAllForSortIndex(b,a)}Pc=a.getDataName(nf.Raw);gc=new Pg(b,Pc,nf.Raw,f);b=e[Pc]=gc;if(Nf(a)){if(Pc=zh.makeFromEncoding(b,a))b=Pc,Af(a)&&(b=new k(b));var kc;b=null!=(kc=Ek.makeFromEncoding(b,a))?kc:
b;var Nc;b=null!=(Nc=oe.makeFromEncoding(b,a))?Nc:b}if(Nf(a)){let $d;b=null!=($d=Gl.make(b,a))?$d:b}Nc=a.getDataName(nf.Main);kc=new Pg(b,Nc,nf.Main,f);b=e[Nc]=kc;if(Nf(a)){var Zc;for(var dd of Gi(null!=(Zc=a.component.selection)?Zc:{})){const [$d,Ce]=dd;Zc=a.getName(`lookup_${$d}`);a.component.data.outputNodes[Zc]=Ce.materialized=new Pg(new wi(kc,a,{param:$d}),Zc,nf.Lookup,a.component.data.outputNodeRefCounts)}}Zc=null;if(ih(a)){dd=a.getName("facet");let $d;{Zc=b;const {row:Ce,column:Oe}=a.facet;
if(Ce&&Oe){Nc=null;for(ie of[Ce,Oe])if(Ae(ie.sort)){const {field:Lf,op:Sf="min"}=ie.sort;Zc=Nc=new be(Zc,{joinaggregate:[{op:Sf,field:Lf,as:dl(ie,ie.sort,{forAs:!0})}],groupby:[qc(ie)]})}var ie=Nc}else ie=null}b=null!=($d=ie)?$d:b;Zc=new c(b,a,dd,kc.getSource());e[dd]=Zc}return Object.assign({},a.component.data,{outputNodes:e,outputNodeRefCounts:f,raw:gc,main:kc,facetRoot:Zc,ancestorParse:p})}function em(a,b,e){const {encoding:f,config:g}=a;let p;const B=null!=(p=Fe(f[b]))?p:Fe(f[y(b)]);a=a.axis(b)||
{};const {format:P,formatType:X}=a;if(fe(X))return Object.assign({},{text:ne({fieldOrDatumDef:B,field:"datum.value",format:P,formatType:X,config:g})},e);if(void 0===P&&void 0===X&&g.customFormatTypes){if("quantitative"===rb(B)){if(Ad(B)&&"normalize"===B.stack&&g.normalizedNumberFormatType)return Object.assign({},{text:ne({fieldOrDatumDef:B,field:"datum.value",format:g.normalizedNumberFormat,formatType:g.normalizedNumberFormatType,config:g})},e);if(g.numberFormatType)return Object.assign({},{text:ne({fieldOrDatumDef:B,
field:"datum.value",format:g.numberFormat,formatType:g.numberFormatType,config:g})},e)}if("temporal"===rb(B)&&g.timeFormatType&&Ia(B)&&!B.timeUnit)return Object.assign({},{text:ne({fieldOrDatumDef:B,field:"datum.value",format:g.timeFormat,formatType:g.timeFormatType,config:g})},e)}return e}function rl(a){return Ph.reduce((b,e)=>{a.component.scales[e]&&(b[e]=[hm(e,a)]);return b},{})}function fm(a,b){if(a){if(a.length!==b.length)return;const e=a.length;for(let f=0;f<e;f++){const g=a[f],p=b[f];if(!!g!==
!!p)return;if(g&&p){const B=g.getWithExplicit("orient"),P=p.getWithExplicit("orient");if(B.explicit&&P.explicit&&B.value!==P.value)return;a[f]=gm(g,p)}}}else return b.map(e=>e.clone());return a}function gm(a,b){for(const e of Am){const f=xf(a.getWithExplicit(e),b.getWithExplicit(e),e,"axis",(g,p)=>{switch(e){case "title":return gb(g,p);case "gridScale":return{explicit:g.explicit,value:T(g.value,p.value)}}return Lg(g,p,e,"axis")});a.setWithExplicit(e,f)}return a}function Ol(a,b,e,f,g){if("disable"===
b)return void 0!==e;e=e||{};switch(b){case "titleAngle":case "labelAngle":return a===(Mb(e.labelAngle)?e.labelAngle:La(e.labelAngle));case "values":return!!e.values;case "encode":return!!e.encoding||!!e.labelAngle;case "title":if(a===fj(f,g))return!0}return a===e[b]}function hm(a,b){let e=b.axis(a);const f=new Bm;var g=Fe(b.encoding[a]);const {mark:p,config:B}=b;var P,X,ta,cb=(null==(P=e)?void 0:P.orient)||(null==(X=B["x"===a?"axisX":"axisY"])?void 0:X.orient)||(null==(ta=B.axis)?void 0:ta.orient)||
("x"===a?"bottom":"left");X=b.getScaleComponent(a).get("type");P=cl(a,X,cb,b.config);var pb;ta=void 0!==e?!e:zi("disable",B.style,null==(pb=e)?void 0:pb.style,P).configValue;f.set("disable",ta,void 0!==e);if(ta)return f;e=e||{};pb=Vj(g,e,a,B.style,P);ta=kf(e.formatType,g,X);const gc=Ye(g,g.type,e.format,e.formatType,B,!0);g={fieldOrDatumDef:g,axis:e,channel:a,model:b,scaleType:X,orient:cb,labelAngle:pb,format:gc,formatType:ta,mark:p,config:B};for(const Nc of Am)if(cb=Nc in tk?tk[Nc](g):mg[Nc]?e[Nc]:
void 0,X=void 0!==cb,pb=Ol(cb,Nc,e,b,a),X&&pb)f.set(Nc,cb,pb);else{const {configValue:Zc,configFrom:dd}=mg[Nc]&&"values"!==Nc?zi(Nc,B.style,e.style,P):{};ta=void 0!==Zc;X&&!ta?f.set(Nc,cb,pb):("vgAxisConfig"!==dd||Im.has(Nc)&&ta||bg(Zc)||Mb(Zc))&&f.set(Nc,Zc,!1)}var Pc;const kc=null!=(Pc=e.encoding)?Pc:{};Pc=nk.reduce((Nc,Zc)=>{if(!f.hasAxisPart(Zc))return Nc;var dd;const ie=ji(null!=(dd=kc[Zc])?dd:{},b);dd="labels"===Zc?em(b,a,ie):ie;void 0===dd||ib(dd)||(Nc[Zc]={update:dd});return Nc},{});ib(Pc)||
f.set("encode",Pc,!!e.encoding||void 0!==e.labelAngle);return f}function Rl(a){let {encoding:b,size:e}=a;for(const f of Ph)a=N(f),Ge(e[a])&&tc(b[f])&&(delete e[a],K(rd(a)));return e}function el(a,b){var e=Object,f=e.assign,g=zf(a,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),p=se("x",a,{defaultPos:"mid"}),B=se("y",a,{defaultPos:"mid"}),P=$c("size",a),X=$c("angle",a);a=b?{shape:{value:b}}:$c("shape",a);return f.call(e,{},g,p,B,P,X,a)}function ql(a){if(Cb([Qg,
bi,ul],a.mark)){var b=kh(a.mark,a.encoding);if(0<b.length)return im(a,b)}else if(a.mark===Ch&&(b=Ck.some(e=>Zb(e,a.markDef,a.config)),a.stack&&!a.fieldDef("size")&&b))return Sl(a);return Sk(a)}function im(a,b){return[{name:a.getName("pathgroup"),type:"group",from:{facet:{name:"faceted_path_"+a.requestDataName(nf.Main),data:a.requestDataName(nf.Main),groupby:b}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Sk(a,{fromPrefix:"faceted_path_"})}]}function Sl(a){const [b]=
Sk(a,{fromPrefix:"stack_group_"}),e=a.scaleName(a.stack.fieldChannel),f=function(){return a.vgField(a.stack.fieldChannel,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})};var g=(ta,cb)=>{cb=[f({prefix:"min",suffix:"start",expr:cb}),f({prefix:"max",suffix:"start",expr:cb}),f({prefix:"min",suffix:"end",expr:cb}),f({prefix:"max",suffix:"end",expr:cb})];return`${ta}(${cb.map(pb=>`scale('${e}',${pb})`).join(",")})`};let p;"x"===a.stack.fieldChannel?(g=Object.assign({},Yb(b.encode.update,["y",
"yc","y2","height",...Ck]),{x:{signal:g("min","datum")},x2:{signal:g("max","datum")},clip:{value:!0}}),p={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},b.encode.update=Object.assign({},ac(b.encode.update,["y","yc","y2"]),{height:{field:{group:"height"}}})):(g=Object.assign({},Yb(b.encode.update,["x","xc","x2","width"]),{y:{signal:g("min","datum")},y2:{signal:g("max","datum")},clip:{value:!0}}),p={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},b.encode.update=Object.assign({},
ac(b.encode.update,["x","xc","x2"]),{width:{field:{group:"width"}}}));for(var B of Ck){var P=ic(B,a.markDef,a.config);b.encode.update[B]?(g[B]=b.encode.update[B],delete b.encode.update[B]):P&&(g[B]=Ua(P));P&&(b.encode.update[B]={value:0})}B=[];var X;if(0<(null==(X=a.stack.groupbyChannels)?void 0:X.length))for(const ta of a.stack.groupbyChannels){X=a.fieldDef(ta);(P=qc(X))&&B.push(P);let cb,pb;((null==(cb=X)?0:cb.bin)||(null==(pb=X)?0:pb.timeUnit))&&B.push(qc(X,{binSuffix:"end"}))}g="stroke strokeWidth strokeJoin strokeCap strokeDash strokeDashOffset strokeMiterLimit strokeOpacity".split(" ").reduce((ta,
cb)=>{if(b.encode.update[cb])return Object.assign({},ta,{[cb]:b.encode.update[cb]});const pb=ic(cb,a.markDef,a.config);return void 0!==pb?Object.assign({},ta,{[cb]:Ua(pb)}):ta},g);g.stroke&&(g.strokeForeground={value:!0},g.strokeOffset={value:0});return[{type:"group",from:{facet:{data:a.requestDataName(nf.Main),name:"stack_group_"+a.requestDataName(nf.Main),groupby:B,aggregate:{fields:[f({suffix:"start"}),f({suffix:"start"}),f({suffix:"end"}),f({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:g},
marks:[{type:"group",encode:{update:p},marks:[b]}]}]}function jm(a){const {encoding:b,stack:e,mark:f,markDef:g,config:p}=a;var B=b.order;if(!(!h.isArray(B)&&fd(B)&&mc(B.value)||!B&&mc(Zb("order",g,p)))){if((h.isArray(B)||Ia(B))&&!e)return Vc(B,{expr:"datum"});if(Oa(f)){const P="horizontal"===g.orient?"y":"x",X=b[P];if(Ia(X)){B=X.sort;if(h.isArray(B))return{field:qc(X,{prefix:P,suffix:"sort_index",expr:"datum"})};if(Ae(B))return{field:qc({aggregate:Bf(a.encoding)?B.op:void 0,field:B.field},{expr:"datum"})};
if(null!=B&&B.encoding)return a=a.fieldDef(B.encoding),{field:qc(a,{expr:"datum"}),order:B.order};if(null!==B){let ta;return{field:qc(X,{binSuffix:(null==(ta=a.stack)?0:ta.impute)?"mid":void 0,expr:"datum"})}}}}}}function Sk(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{fromPrefix:""};const {mark:e,markDef:f,encoding:g,config:p}=a;var B=f.clip;var P=a.getScaleComponent("x");var X=a.getScaleComponent("y");P=(null==P?0:P.get("selectionExtent"))||(null==X?0:X.get("selectionExtent"))?
!0:void 0;X=a.component.projection;B=T(B,P,X&&!X.isFit?!0:void 0);P=Nb(f);X=g.key;const ta=jm(a);var cb;if(a.component.selection){for(var pb=cb=sd(a.component.selection).length,gc=a.parent;gc&&0===pb;)pb=sd(gc.component.selection).length,gc=gc.parent;cb=pb?{interactive:0<cb||"geoshape"===a.mark||!!a.encoding.tooltip}:null}else cb=null;pb=Zb("aria",f,p);gc=Jl[e].postEncodingTransform?Jl[e].postEncodingTransform(a):null;return[Object.assign({},{name:a.getName("marks"),type:Jl[e].vgMark},B?{clip:!0}:
{},P?{style:P}:{},X?{key:X.field}:{},ta?{sort:ta}:{},cb?cb:{},!1===pb?{aria:pb}:{},{from:{data:b.fromPrefix+a.requestDataName(nf.Main)},encode:{update:Jl[e].encodeEntry(a)}},gc?{transform:gc}:{})]}function fl(a,b,e,f,g){if("facet"in a)return new Kl(a,b,e,g);if("layer"in a)return new Cm(a,b,e,f,g);if(gf(a))return new Dm(a,b,e,f,g);if("vconcat"in a||"hconcat"in a||"concat"in a)return new Jm(a,b,e,g);throw Error(va(a));}function Tl(a,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};
let f=3<arguments.length?arguments[3]:void 0;const g=a.config?lh(a.config):void 0;e=[].concat(a.assembleSelectionData([]),zk(a.component.data,e));const p=a.assembleProjections(),B=a.assembleTitle(),P=a.assembleGroupStyle(),X=a.assembleGroupEncodeEntry(!0);let ta=a.assembleLayoutSignals();ta=ta.filter(gc=>"width"!==gc.name&&"height"!==gc.name||void 0===gc.value?!0:(b[gc.name]=+gc.value,!1));var cb=Object.assign({},b);const pb=b.params;cb=(delete cb.params,cb);return Object.assign({},{$schema:"https://vega.github.io/schema/vega/v5.json"},
a.description?{description:a.description}:{},cb,B?{title:B}:{},P?{style:P}:{},X?{encode:{update:X}}:{},{data:e},0<p.length?{projections:p}:{},a.assembleGroup([...ta,...a.assembleSelectionTopLevelSignals([]),...ge(pb)]),g?{config:g}:{},f?{usermeta:f}:{})}const De=structuredClone;Set.prototype.toJSON=function(){return`Set(${[...this].map(a=>m(a)).join(",")})`};const sd=Object.keys,kg=Object.values,Gi=Object.entries;let Lk=42;const Kk=Object.getPrototypeOf(structuredClone({})),fk={theta:1,theta2:1,radius:1,
radius2:1},mi={longitude:1,longitude2:1,latitude:1,latitude2:1},Pl=sd(mi),Vi=Object.assign({},{x:1,y:1,x2:1,y2:1},fk,mi,{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1}),nj={row:1,column:1,facet:1},sh=sd(nj),Ej=Object.assign({},Vi,nj),Cl=sd(Ej);var Yj=Object.assign({},Ej),Oh=(delete Yj.order,delete Yj.detail,delete Yj.tooltip,Yj),kk=Object.assign({},
Oh);const oj=(delete kk.row,delete kk.column,delete kk.facet,kk),Mk="x2 y2 latitude2 longitude2 theta2 radius2".split(" "),Kj=sd(Vi);var Jg=Object.assign({},Vi);const Fi=(delete Jg.x,delete Jg.y,delete Jg.x2,delete Jg.y2,delete Jg.xOffset,delete Jg.yOffset,delete Jg.latitude,delete Jg.longitude,delete Jg.latitude2,delete Jg.longitude2,delete Jg.theta,delete Jg.theta2,delete Jg.radius,delete Jg.radius2,Jg),Nk=sd(Fi),gk={x:1,y:1},Ph=sd(gk),ik={theta:1,radius:1},ol=sd(ik),Wi={xOffset:1,yOffset:1};var Zh=
Object.assign({},Fi);const gl=(delete Zh.text,delete Zh.tooltip,delete Zh.href,delete Zh.url,delete Zh.description,delete Zh.detail,delete Zh.key,delete Zh.order,Zh),hl=sd(gl),Mh=Object.assign({},gk,ik,Wi,gl),Bk=sd(Mh),Dl={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"};var yj=Object.assign({},Dl);const Ql=(delete yj.geoshape,yj),hk={argmax:1,
argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Ul={count:1,min:1,max:1},Vl=new Set(["count","valid","missing","distinct"]),Xk=new Set(["count","sum","distinct","valid","missing"]),Yk=new Set("mean average median q1 q3 min max".split(" ")),$k=sd({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,
strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,
width:1,height:1,url:1,smooth:1}),bm={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Ck=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],Al=h.logger(h.Warn);let Ai=Al;const Qh="january february march april may june july august september october november december".split(" "),Lj=Qh.map(a=>a.substr(0,3)),$h="sunday monday tuesday wednesday thursday friday saturday".split(" "),Ok=$h.map(a=>a.substr(0,
3)),yl={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Zk=sd(yl),Uk={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "},pj={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},gg={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",
BAND:"band"},Bg={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},ch={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0},ni=new Set(["linear",
"log","pow","sqrt","symlog"]),lg=new Set([...ni,"time","utc"]),ai=new Set(["quantile","quantize","threshold"]),Vk=new Set([...lg,...ai,"sequential","identity"]),qj=new Set(["ordinal","bin-ordinal","point","band"]);var Bh=Object.assign({},{type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1});const mk=(delete Bh.type,
delete Bh.domain,delete Bh.range,delete Bh.rangeMax,delete Bh.rangeMin,delete Bh.scheme,Bh),lk=sd(mk),Gf={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},th=Gf.arc,bi=Gf.area,Ch=Gf.bar,oi=Gf.image,Qg=Gf.line,Rg=Gf.point,Rf=Gf.rect,jh=Gf.rule,zl=Gf.text,Ji=Gf.tick,ul=Gf.trail,tj=Gf.circle,Hi=Gf.square,qi=Gf.geoshape,Mj=new Set(sd(Gf)),Yi="stroke strokeWidth strokeDash strokeDashOffset strokeOpacity strokeJoin strokeMiterLimit fill fillOpacity".split(" "),
ri=sd({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),uj=sd({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1}),ci={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},wj={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1},vj=(a,b)=>{switch(b.fieldTitle){case "plain":return a.field;
case "functional":{const {aggregate:e,bin:f,timeUnit:g,field:p}=a;za(e)?a=`${p} for argmax(${e.argmax})`:la(e)?a=`${p} for argmin(${e.argmin})`:(a=g&&!Kc(g)?nd(g):void 0,a=(a=e||(null==a?void 0:a.unit)||(null==a?void 0:a.maxbins)&&"timeunit"||vb(f)&&"bin")?`${a.toUpperCase()}(${p})`:p)}return a;default:return Be(a,b)}};let Cf=vj;const Ii={compatible:!0},Nj={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",
vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},
tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}},nk=["domain","grid","labels","ticks","title"],Zi={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",
domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",
minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",
titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},uf={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,
labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,
titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},mg=Object.assign({},uf,{style:1,labelExpr:1,encoding:1}),vg=sd({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});class $i{constructor(a,
b){this.name=a;this.run=b}hasMatchingType(a){return gf(a)?(a=a.mark,(id(a)?a.type:a)===this.name):!1}}const Oj=new $i("boxplot",Xd),Pj=new $i("errorbar",mf),km=new $i("errorband",Xg),Qj={};ig("boxplot",Xd,["box","median","outliers","rule","ticks"]);ig("errorbar",mf,["ticks","rule"]);ig("errorband",Xg,["band","borders"]);const Xl=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],sl={titleAlign:"align",titleAnchor:"anchor",
titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},tl={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",
labelOrient:"orient",labelPadding:"offset"},ok=sd(sl),Yl=sd(tl),vl=sd({header:1,headerRow:1,headerColumn:1,headerFacet:1}),dh="size shape fill stroke strokeDash strokeWidth opacity".split(" "),Wk=sd({align:1,bounds:1,center:1,columns:1,spacing:1}),Zl={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:20},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:{binSpacing:1,continuousBandSize:5,
minBandSize:.25,timeUnitBandPosition:.5},circle:{},geoshape:{},image:{},line:{},point:{},rect:{binSpacing:0,continuousBandSize:5,minBandSize:.25,timeUnitBandPosition:.5},rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,
bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:{point:{on:"click",fields:["_vgsid_"],toggle:"event.shiftKey",
resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] \x3e window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] \x3e window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}},style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},ei="#4c78a8 #f58518 #e45756 #72b7b2 #54a24b #eeca3b #b279a2 #ff9da6 #9d755d #bab0ac".split(" "),wl={text:11,guideLabel:10,
guideTitle:11,groupTitle:13,groupSubtitle:12},xl={blue:ei[0],orange:ei[1],red:ei[2],teal:ei[3],green:ei[4],yellow:ei[5],purple:ei[6],pink:ei[7],brown:ei[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"},sk=[...uj,...vg,...vl,"background","padding","legend","lineBreak","scale","style","title","view"],Zg=new Set(["view",...Mj]),$l="color fontSize background padding facet concat numberFormat numberFormatType normalizedNumberFormat normalizedNumberFormatType timeFormat countTitle header axisQuantitative axisTemporal axisDiscrete axisPoint axisXBand axisXPoint axisXDiscrete axisXQuantitative axisXTemporal axisYBand axisYPoint axisYDiscrete axisYQuantitative axisYTemporal scale selection overlay".split(" "),
ae=Object.assign({},{view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]});class rk{map(a,b){return"facet"in a?this.mapFacet(a,b):"repeat"in a?this.mapRepeat(a,b):"hconcat"in a?this.mapHConcat(a,b):"vconcat"in a?this.mapVConcat(a,b):"concat"in a?this.mapConcat(a,
b):this.mapLayerOrUnit(a,b)}mapLayerOrUnit(a,b){if("layer"in a)return this.mapLayer(a,b);if(gf(a))return this.mapUnit(a,b);throw Error(va(a));}mapLayer(a,b){return Object.assign({},a,{layer:a.layer.map(e=>this.mapLayerOrUnit(e,b))})}mapHConcat(a,b){return Object.assign({},a,{hconcat:a.hconcat.map(e=>this.map(e,b))})}mapVConcat(a,b){return Object.assign({},a,{vconcat:a.vconcat.map(e=>this.map(e,b))})}mapConcat(a,b){var e=Object.assign({},a);a=a.concat;e=(delete e.concat,e);return Object.assign({},
e,{concat:a.map(f=>this.map(f,b))})}mapFacet(a,b){return Object.assign({},a,{spec:this.map(a.spec,b)})}mapRepeat(a,b){return Object.assign({},a,{spec:this.map(a.spec,b)})}}const Ng={zero:1,center:1,normalize:1},Th=new Set([th,Ch,bi,jh,Rg,tj,Hi,Qg,zl,Ji]),am=new Set([Ch,bi,th]);class uk{constructor(){R(this,"name","path-overlay")}hasMatchingType(a,b){if(gf(a)){const {mark:e,encoding:f}=a;a=id(e)?e:{type:e};switch(a.type){case "line":case "rule":case "trail":return!!Fg(a,b[a.type],f);case "area":return!!Fg(a,
b[a.type],f)||!!ti(a,b[a.type])}}return!1}run(a,b,e){var {config:f}=b,g=Object.assign({},a),p=a.params,B=a.projection,P=a.mark,X=a.name;a=a.encoding;g=(delete g.params,delete g.projection,delete g.mark,delete g.name,delete g.encoding,g);a=eh(a,f);P=id(P)?P:{type:P};const ta=Fg(P,f[P.type],a),cb="area"===P.type&&ti(P,f[P.type]);var pb=Object,gc=pb.assign;var Pc=Object.assign({},"area"===P.type&&void 0===P.opacity&&void 0===P.fillOpacity?{opacity:.7}:{},P);Pc=Object.assign({},Pc);Pc=(delete Pc.point,
delete Pc.line,Pc);Pc=1<sd(Pc).length?Pc:Pc.type;p=[gc.call(pb,{},{name:X},p?{params:p}:{},{mark:Pc,encoding:ac(a,["shape"])})];X=vh(jg(P,a,f),a);pb=a;if(X){const {fieldChannel:kc,offset:Nc}=X;pb=Object.assign({},a,{[kc]:Object.assign({},a[kc],Nc?{stack:Nc}:{})})}pb=ac(pb,["y2","x2"]);cb&&p.push(Object.assign({},B?{projection:B}:{},{mark:Object.assign({},{type:"line"},Yb(P,["clip","interpolate","tension","tooltip"]),cb),encoding:pb}));ta&&p.push(Object.assign({},B?{projection:B}:{},{mark:Object.assign({},
{type:"point",opacity:1,filled:!0},Yb(P,["clip","tooltip"]),ta),encoding:pb}));B=Object.assign({},g,{layer:p});g=Object;p=g.assign;for(const kc of["line","area","rule","trail"])f[kc]&&(f=Object.assign({},f,{[kc]:ac(f[kc],["point","line"])}));return e(B,p.call(g,{},b,{config:f}))}}class al{constructor(){R(this,"name","RuleForRangedLine")}hasMatchingType(a){if(gf(a)){const {encoding:b,mark:e}=a;if("line"===e||id(e)&&"line"===e.type)for(const f of Mk)if(a=Q(f),a=b[a],b[f]&&(Ia(a)&&!jb(a.bin)||nb(a)))return!0}return!1}run(a,
b,e){const {encoding:f,mark:g}=a;var p=!!f.x2;K(`Line mark is for continuous lines and thus cannot be used with ${p&&f.y2?"x2 and y2":p?"x2":"y2"}. We will use the rule mark (line segments) instead.`);return e(Object.assign({},a,{mark:h.isObject(g)?Object.assign({},g,{type:"rule"}):"rule"}),b)}}class Kh extends rk{constructor(){super(...arguments);R(this,"nonFacetUnitNormalizers",[Oj,Pj,km,new uk,new al])}map(a,b){if(gf(a)){const e=Re(a.encoding,"row"),f=Re(a.encoding,"column"),g=Re(a.encoding,"facet");
if(e||f||g)return this.mapFacetedUnit(a,b)}return super.map(a,b)}mapUnit(a,b){const {parentEncoding:e,parentProjection:f}=b;var g=di(a.encoding,b.repeater);a=Object.assign({},a,a.name?{name:[b.repeaterPrefix,a.name].filter(p=>p).join("_")}:{},g?{encoding:g}:{});if(e||f)return this.mapUnitWithParentEncodingOrProjection(a,b);g=this.mapLayerOrUnit.bind(this);for(const p of this.nonFacetUnitNormalizers)if(p.hasMatchingType(a,b.config))return p.run(a,b,g);return a}mapRepeat(a,b){return!h.isArray(a.repeat)&&
a.repeat.layer?this.mapLayerRepeat(a,b):this.mapNonLayerRepeat(a,b)}mapLayerRepeat(a,b){var e=Object.assign({},a);const f=a.repeat,g=a.spec;e=(delete e.repeat,delete e.spec,e);const {row:p,column:B,layer:P}=f,{repeater:X={},repeaterPrefix:ta=""}=b;return p||B?this.mapRepeat(Object.assign({},a,{repeat:Object.assign({},p?{row:p}:{},B?{column:B}:{}),spec:{repeat:{layer:P},spec:g}}),b):Object.assign({},e,{layer:P.map(cb=>{var pb=Object.assign({},X,{layer:cb});cb=`${(g.name?`${g.name}_`:"")+ta}child__layer_${ra(cb)}`;
pb=this.mapLayerOrUnit(g,Object.assign({},b,{repeater:pb,repeaterPrefix:cb}));pb.name=cb;return pb})})}mapNonLayerRepeat(a,b){var e=a,f=Object.assign({},e);const g=e.repeat,p=e.spec;e=e.data;f=(delete f.repeat,delete f.spec,delete f.data,f);!h.isArray(g)&&a.columns&&(a=ac(a,["columns"]),K(Cc("repeat")));const B=[],{repeater:P={},repeaterPrefix:X=""}=b,ta=!h.isArray(g)&&g.row||[P?P.row:null],cb=!h.isArray(g)&&g.column||[P?P.column:null];var pb=h.isArray(g)&&g||[P?P.repeat:null];for(const kc of pb)for(const Nc of ta)for(const Zc of cb){var gc=
{repeat:kc,row:Nc,column:Zc,layer:P.layer};pb=(p.name?`${p.name}_`:"")+X+"child__"+(h.isArray(g)?`${ra(kc)}`:(g.row?`row_${ra(Nc)}`:"")+(g.column?`column_${ra(Zc)}`:""));gc=this.map(p,Object.assign({},b,{repeater:gc,repeaterPrefix:pb}));gc.name=pb;B.push(ac(gc,["data"]))}a=h.isArray(g)?a.columns:g.column?g.column.length:1;let Pc;return Object.assign({},{data:null!=(Pc=p.data)?Pc:e,align:"all"},f,{columns:a,concat:B})}mapFacet(a,b){const {facet:e}=a;qe(e)&&a.columns&&(a=ac(a,["columns"]),K(Cc("facet")));
return super.mapFacet(a,b)}mapUnitWithParentEncodingOrProjection(a,b){const {encoding:e,projection:f}=a,{parentEncoding:g,parentProjection:p,config:B}=b,P=Gh({parentProjection:p,projection:f});b=Eg({parentEncoding:g,encoding:di(e,b.repeater)});return this.mapUnit(Object.assign({},a,P?{projection:P}:{},b?{encoding:b}:{}),{config:B})}mapFacetedUnit(a,b){var e=a.encoding,f=Object.assign({},e),g=e.row;const p=e.column;e=e.facet;const B=(delete f.row,delete f.column,delete f.facet,f);var P=Object.assign({},
a);f=a.mark;const X=a.width,ta=a.projection,cb=a.height,pb=a.view;a=a.params;P=(delete P.mark,delete P.width,delete P.projection,delete P.height,delete P.view,delete P.params,delete P.encoding,P);const {facetMapping:gc,layout:Pc}=this.getFacetMappingAndLayout({row:g,column:p,facet:e},b);g=di(B,b.repeater);return this.mapFacet(Object.assign({},P,Pc,{facet:gc,spec:Object.assign({},X?{width:X}:{},cb?{height:cb}:{},pb?{view:pb}:{},ta?{projection:ta}:{},{mark:f,encoding:g},a?{params:a}:{})}),b)}getFacetMappingAndLayout(a,
b){const {row:e,column:f,facet:g}=a;if(e||f){g&&(b=[...(e?["row"]:[]),...(f?["column"]:[])],b=`Facet encoding dropped as ${b.join(" and ")} ${1<b.length?"are":"is"} also specified.`,K(b));b={};const cb={};for(var p of["row","column"]){const pb=a[p];if(pb){var B=Object.assign({},pb);B=(delete B.align,delete B.center,delete B.spacing,delete B.columns,B);b[p]=B;for(var P of["align","center","spacing"])if(void 0!==pb[P]){var X=void 0,ta=void 0;null!=(X=cb)[ta=P]||(X[ta]={});cb[P][p]=pb[P]}}}return{facetMapping:b,
layout:cb}}ta=Object.assign({},g);a=g.align;p=g.center;P=g.spacing;X=g.columns;ta=(delete ta.align,delete ta.center,delete ta.spacing,delete ta.columns,ta);ta=(b=b.repeater)?qe(ta)?Fh(ta,b):ui(ta,b):ta;return{facetMapping:ta,layout:Object.assign({},a?{align:a}:{},p?{center:p}:{},P?{spacing:P}:{},X?{columns:X}:{})}}mapLayer(a,b){var e=Object.assign({},b),f=b.parentEncoding;b=b.parentProjection;e=(delete e.parentEncoding,delete e.parentProjection,e);var g=Object.assign({},a);const p=a.encoding,B=a.projection;
g=(delete g.encoding,delete g.projection,g);f=Object.assign({},e,{parentEncoding:Eg({parentEncoding:f,encoding:p,layer:!0}),parentProjection:Gh({parentProjection:b,projection:B})});return super.mapLayer(Object.assign({},g,a.name?{name:[f.repeaterPrefix,a.name].filter(P=>P).join("_")}:{}),f)}}class cf extends rk{map(a,b){null!=b.emptySelections||(b.emptySelections={});null!=b.selectionPredicates||(b.selectionPredicates={});a=eg(a,b);return super.map(a,b)}mapLayerOrUnit(a,b){a=eg(a,b);if(a.encoding){const e=
{};for(const f of Gi(a.encoding)){const [g,p]=f;e[g]=cj(p,b)}a=Object.assign({},a,{encoding:e})}return super.mapLayerOrUnit(a,b)}mapUnit(a,b){var e=Object.assign({},a);const f=a.selection;e=(delete e.selection,e);return f?Object.assign({},e,{params:Gi(f).map(g=>{let [p,B]=g;var P=Object.assign({},B);g=B.init;const X=B.bind,ta=B.empty;P=(delete P.init,delete P.bind,delete P.empty,P);"single"===P.type?(P.type="point",P.toggle=!1):"multi"===P.type&&(P.type="point");b.emptySelections[p]="none"!==ta;let cb;
for(const pb of kg(null!=(cb=b.selectionPredicates[p])?cb:{}))pb.empty="none"!==ta;return{name:p,value:g,select:P,bind:X}})}):a}}class ng extends rk{map(a,b){var e;const f=null!=(e=b.selections)?e:[];if(a.params&&!gf(a)){e=[];for(const g of a.params)Zd(g)?f.push(g):e.push(g);a.params=e}b.selections=f;return super.map(a,b)}mapUnit(a,b){const e=b.selections;if(!e||!e.length)return a;let f;const g=(null!=(f=b.path)?f:[]).concat(a.name);b=[];for(const p of e)if(p.views&&p.views.length)for(const B of p.views)(h.isString(B)&&
(B===a.name||g.includes(B))||h.isArray(B)&&B.map(P=>g.indexOf(P)).every((P,X,ta)=>-1!==P&&(0===X||P>ta[X-1])))&&b.push(p);else b.push(p);b.length&&(a.params=b);return a}}for(const a of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const b=ng.prototype[a];ng.prototype[a]=function(e,f){var g=b,p=g.call;let B;var P=e.name?Object.assign({},f,{path:(null!=(B=f.path)?B:[]).concat(e.name)}):f;return p.call(g,this,e,P)}}const rg=new Kh,Og=new cf,uh=new ng,xj=["background","padding"];class Kf{constructor(){let a=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.explicit=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.implicit=a}clone(){return new Kf(De(this.explicit),De(this.implicit))}combine(){return Object.assign({},this.explicit,this.implicit)}get(a){return T(this.explicit[a],this.implicit[a])}getWithExplicit(a){return void 0!==this.explicit[a]?{explicit:!0,value:this.explicit[a]}:void 0!==this.implicit[a]?{explicit:!1,value:this.implicit[a]}:{explicit:!1,value:void 0}}setWithExplicit(a,
b){let {value:e,explicit:f}=b;void 0!==e&&this.set(a,e,f)}set(a,b,e){delete this[e?"implicit":"explicit"][a];this[e?"explicit":"implicit"][a]=b;return this}copyKeyFromSplit(a,b){let {explicit:e,implicit:f}=b;void 0!==e[a]?this.set(a,e[a],!0):void 0!==f[a]&&this.set(a,f[a],!1)}copyKeyFromObject(a,b){void 0!==b[a]&&this.set(a,b[a],!0)}copyAll(a){for(const b of sd(a.combine())){const e=a.getWithExplicit(b);this.setWithExplicit(b,e)}}}class Rj extends Kf{constructor(){let a=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:{},b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;super(a,b);this.explicit=a;this.implicit=b;this.parseNothing=e}clone(){const a=super.clone();a.parseNothing=this.parseNothing;return a}}let nf=function(a){a[a.Raw=0]="Raw";a[a.Main=1]="Main";a[a.Row=2]="Row";a[a.Column=3]="Column";a[a.Lookup=4]="Lookup";return a}({});class jf{constructor(a,b){this.debugName=b;R(this,"_children",[]);R(this,"_parent",null);
R(this,"_hash",void 0);a&&(this.parent=a)}clone(){throw Error("Cannot clone node");}get parent(){return this._parent}set parent(a){(this._parent=a)&&a.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(a,b){this._children.includes(a)?K("Attempt to add the same child twice."):void 0!==b?this._children.splice(b,0,a):this._children.push(a)}removeChild(a){a=this._children.indexOf(a);this._children.splice(a,1);return a}remove(){let a=this._parent.removeChild(this);
for(const b of this._children)b._parent=this._parent,this._parent.addChild(b,a++)}insertAsParentOf(a){const b=a.parent;b.removeChild(this);this.parent=b;a.parent=this}swapWithParent(){const a=this._parent,b=a.parent;for(var e of this._children)e.parent=a;this._children=[];a.removeChild(this);e=a.parent.removeChild(a);this._parent=b;b.addChild(this,e);a.parent=this}}class Pg extends jf{clone(){const a=new this.constructor;a.debugName=`clone_${this.debugName}`;a._source=this._source;a._name=`clone_${this._name}`;
a.type=this.type;a.refCounts=this.refCounts;a.refCounts[a._name]=0;return a}constructor(a,b,e,f){super(a,b);this.type=e;this.refCounts=f;R(this,"_source",void 0);R(this,"_name",void 0);this._source=this._name=b;!this.refCounts||this._name in this.refCounts||(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){void 0===this._hash&&(this._hash=`Output ${Z()}`);return this._hash}getSource(){this.refCounts[this._name]++;return this._source}isRequired(){return!!this.refCounts[this._name]}setSource(a){this._source=
a}}class xh extends jf{clone(){return new xh(null,De(this.timeUnits))}constructor(a,b){super(a);this.timeUnits=b}static makeFromEncoding(a,b){const e=b.reduceFieldDef((f,g,p)=>{const {field:B,timeUnit:P}=g;if(P){let X;if(Kc(P)){if(Nf(b)){const {mark:ta,markDef:cb,config:pb}=b,gc=l({fieldDef:g,markDef:cb,config:pb});if(cc(ta)||gc)X={timeUnit:nd(P),field:B}}}else X={as:qc(g,{forAs:!0}),field:B,timeUnit:P};if(Nf(b)){const {mark:ta,markDef:cb,config:pb}=b;g=l({fieldDef:g,markDef:cb,config:pb});cc(ta)&&
H(p)&&.5!==g&&(X.rectBandPosition=g)}X&&(f[Xb(X)]=X)}return f},{});return ib(e)?null:new xh(a,e)}static makeFromTransform(a,b){var e=Object.assign({},b);b=Object.assign({},e);e=e.timeUnit;b=(delete b.timeUnit,b);e=nd(e);b=Object.assign({},b,{timeUnit:e});return new xh(a,{[Xb(b)]:b})}merge(a){this.timeUnits=Object.assign({},this.timeUnits);for(const b in a.timeUnits)this.timeUnits[b]||(this.timeUnits[b]=a.timeUnits[b]);for(const b of a.children)a.removeChild(b),b.parent=this;a.remove()}removeFormulas(a){const b=
{};for(const e of Gi(this.timeUnits)){const [f,g]=e;a.has(void 0!==g.as?g.as:`${g.field}_end`)||(b[f]=g)}this.timeUnits=b}producedFields(){return new Set(kg(this.timeUnits).map(a=>void 0!==a.as?a.as:`${a.field}_end`))}dependentFields(){return new Set(kg(this.timeUnits).map(a=>a.field))}hash(){return`TimeUnit ${Xb(this.timeUnits)}`}assemble(){const a=[];for(const g of kg(this.timeUnits)){const {rectBandPosition:p}=g,B=nd(g.timeUnit);if(void 0!==g.as){const {field:P,as:X}=g;var b=B,e=Object.assign({},
b),f=b.unit;b=b.utc;e=(delete e.unit,delete e.utc,e);const ta=[X,`${X}_end`];a.push(Object.assign({},{field:bb(P),type:"timeunit"},f?{units:Ac(f)}:{},b?{timezone:"utc"}:{},e,{as:ta}));a.push(...Ib(ta,p,B))}else g&&({field:f}=g,f=f.replaceAll("\\.","."),b=Na({timeUnit:B,field:f}),e=`${f}_end`,a.push({type:"formula",expr:b,as:e}),a.push(...Ib([f,e],p,B)))}return a}}class qh{constructor(){R(this,"hasChannel",void 0);R(this,"hasField",void 0);R(this,"hasSelectionId",void 0);R(this,"timeUnit",void 0);
R(this,"items",void 0);for(var a=arguments.length,b=Array(a),e=0;e<a;e++)b[e]=arguments[e];this.items=b;this.hasChannel={};this.hasField={};this.hasSelectionId=!1}}const Uh={defined:a=>"interval"===a.type&&"global"===a.resolve&&a.bind&&"scales"===a.bind,parse:(a,b)=>{const e=b.scales=[];for(const g of b.project.items){var f=g.channel;if(!Mh[f])continue;const p=(f=a.getScaleComponent(f))?f.get("type"):void 0;f&&Kd(p)?(f.set("selectionExtent",{param:b.name,field:g.field},!0),e.push(g)):K("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},
topLevelSignals:(a,b,e)=>{const f=b.scales.filter(p=>0===e.filter(B=>B.name===p.signals.data).length);if(!a.parent||r(a)||0===f.length)return e;a=e.filter(p=>p.name===b.name)[0];let g=a.update;if(0<=g.indexOf("vlSelectionResolve"))a.update=`{${f.map(p=>`${h.stringValue(bb(p.field))}: ${p.signals.data}`).join(", ")}}`;else{for(const p of f){const B=`${h.stringValue(bb(p.field))}: ${p.signals.data}`;g.includes(B)||(g=`${g.substring(0,g.length-1)}, ${B}}`)}a.update=g}return e.concat(f.map(p=>({name:p.signals.data})))},
signals:(a,b,e)=>{if(a.parent&&!r(a))for(const f of b.scales)a=e.filter(g=>g.name===f.signals.data)[0],a.push="outer",delete a.value,delete a.update;return e}},zj={left:"x",center:"xc",right:"x2"},xi={top:"y",middle:"yc",bottom:"y2"},pk=new Set(["aria","width","height"]),qk={defined:a=>"point"===a.type&&a.nearest,parse:(a,b)=>{if(b.events)for(const e of b.events)e.markname=a.getName("voronoi")},marks:(a,b,e)=>{const {x:f,y:g}=b.project.hasChannel;b=a.mark;if(Oa(b))return K(`The "nearest" transform is not supported for ${b} marks.`),
e;b={name:a.getName("voronoi"),type:"path",interactive:!0,from:{data:a.getName("marks")},encode:{update:Object.assign({},{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Ob(a,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:f||!g?"datum.datum.x || 0":"0"},y:{expr:g||!f?"datum.datum.y || 0":"0"},size:[a.getSizeSignalRef("width"),a.getSizeSignalRef("height")]}]};let p=0,B=!1;e.forEach((P,X)=>{let ta;P=null!=(ta=P.name)?ta:"";P===a.component.mark[0].name?
p=X:0<=P.indexOf("voronoi")&&(B=!0)});B||e.splice(p+1,0,b);return e}},si={defined:a=>"point"===a.type&&"global"===a.resolve&&a.bind&&"scales"!==a.bind&&!Kg(a.bind),parse:(a,b,e)=>Cg(b,e),topLevelSignals:(a,b,e)=>{const f=b.name;a=b.project;const g=b.bind,p=b.init&&b.init[0],B=qk.defined(b)?"(item().isVoronoi ? datum.datum : datum)":"datum";a.items.forEach((P,X)=>{const ta=ra(`${f}_${P.field}`);if(!e.filter(cb=>cb.name===ta).length){let cb,pb;e.unshift(Object.assign({},{name:ta},p?{init:oh(p[X])}:
{value:null},{on:b.events?[{events:b.events,update:`datum && item().mark.marktype !== 'group' ? ${B}[${h.stringValue(P.field)}] : null`}]:[],bind:null!=(pb=null!=(cb=g[P.field])?cb:g[P.channel])?pb:g}))}});return e},signals:(a,b,e)=>{const f=b.name;var g=b.project;a=e.filter(B=>B.name===f+"_tuple")[0];b=f+"_tuple_fields";g=g.items.map(B=>ra(`${f}_${B.field}`));const p=g.map(B=>`${B} !== null`).join(" \x26\x26 ");g.length&&(a.update=`${p} ? {fields: ${b}, values: [${g.join(", ")}]} : null`);delete a.value;
delete a.on;return e}},Sj={defined:a=>"point"===a.type&&!!a.toggle,signals:(a,b,e)=>e.concat({name:b.name+"_toggle",value:!1,on:[{events:b.events,update:b.toggle}]}),modifyExpr:(a,b)=>{const e=b.name+"_tuple",f=b.name+"_toggle";return`${f} ? null : ${e}, `+("global"===b.resolve?`${f} ? null : true, `:`${f} ? null : {unit: ${ag(a)}}, `)+`${f} ? ${e} : null`}},yi={defined:a=>{const b="global"===a.resolve&&a.bind&&Kg(a.bind);a=1===a.project.items.length&&"_vgsid_"!==a.project.items[0].field;b&&!a&&K("Legend bindings are only supported for selections over an individual field or encoding channel.");
return b&&a},parse:(a,b,e)=>{a=De(e);a.select=h.isString(a.select)?{type:a.select,toggle:b.toggle}:Object.assign({},a.select,{toggle:b.toggle});Cg(b,a);if(h.isObject(e.select)&&(e.select.on||e.select.clear))for(const f of b.events){let g;f.filter=h.array(null!=(g=f.filter)?g:[]);f.filter.includes('event.item \x26\x26 indexof(event.item.mark.role, "legend") \x3c 0')||f.filter.push('event.item \x26\x26 indexof(event.item.mark.role, "legend") \x3c 0')}e=Dh(b.bind)?b.bind.legend:"click";e=h.isString(e)?
h.parseSelector(e,"view"):h.array(e);b.bind={legend:{merge:e}}},topLevelSignals:(a,b,e)=>{a=b.name;const f=Dh(b.bind)&&b.bind.legend,g=B=>P=>{P=De(P);P.markname=B;return P};for(const B of b.project.items){if(!B.hasLegend)continue;var p=`${ra(B.field)}_legend`;const P=`${a}_${p}`;0===e.filter(X=>X.name===P).length&&(p=f.merge.map(g(`${p}_symbols`)).concat(f.merge.map(g(`${p}_labels`))).concat(f.merge.map(g(`${p}_entries`))),e.unshift(Object.assign({},{name:P},b.init?{}:{value:null},{on:[{events:p,
update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:f.merge,update:`!event.item || !datum ? null : ${P}`,force:!0}]})))}return e},signals:(a,b,e)=>{const f=b.name;var g=b.project;a=e.find(B=>B.name===f+"_tuple");var p=f+"_tuple_fields";g=g.items.filter(B=>B.hasLegend).map(B=>ra(`${f}_${ra(B.field)}_legend`));p=`${g.map(B=>`${B} !== null`).join(" \x26\x26 ")} ? {fields: ${p}, values: [${g.join(", ")}]} : null`;b.events&&0<g.length?a.on.push({events:g.map(B=>
({signal:B})),update:p}):0<g.length&&(a.update=p,delete a.value,delete a.on);a=e.find(B=>B.name===f+"_toggle");p=Dh(b.bind)&&b.bind.legend;a&&(b.events?a.on.push(Object.assign({},a.on[0],{events:p})):a.on[0].events=p);return e}},dj=[{defined:a=>"point"===a.type,signals:(a,b,e)=>{const f=b.name,g=f+"_tuple_fields";var p=b.project,B,P=kg(null!=(B=a.component.selection)?B:{}).reduce((X,ta)=>"interval"===ta.type?X.concat(ta.name+"_brush"):X,[]).map(X=>`indexof(item().mark.name, '${X}') < 0`).join(" \x26\x26 ");
B=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${P?` && ${P}`:""}`;P=`unit: ${ag(a)}, `;b.project.hasSelectionId?P+=`${"_vgsid_"}: ${"(item().isVoronoi ? datum.datum : datum)"}[${h.stringValue("_vgsid_")}]`:(p=p.items.map(X=>{let ta;return(null==(ta=a.fieldDef(X.channel))?0:ta.bin)?`[${"(item().isVoronoi ? datum.datum : datum)"}[${h.stringValue(a.vgField(X.channel,{}))}], `+`${"(item().isVoronoi ? datum.datum : datum)"}[${h.stringValue(a.vgField(X.channel,{binSuffix:"end"}))}]]`:
`${"(item().isVoronoi ? datum.datum : datum)"}[${h.stringValue(X.field)}]`}).join(", "),P+=`fields: ${g}, values: [${p}]`);b=b.events;return e.concat([{name:f+"_tuple",on:b?[{events:b,update:`${B} ? {${P}} : null`,force:!0}]:[]}])}},{defined:a=>"interval"===a.type,parse:(a,b,e)=>{a.hasProjection&&(a=Object.assign({},h.isObject(e.select)?e.select:{}),a.fields=["_vgsid_"],a.encodings||(a.encodings=e.value?sd(e.value):["longitude","latitude"]),e.select=Object.assign({},{type:"interval"},a));if(b.translate&&
!Uh.defined(b)){e=`!event.item || event.item.mark.name !== ${h.stringValue(b.name+"_brush")}`;for(const f of b.events){if(!f.between){K(`${f} is not an ordered event stream for interval selections.`);continue}let g,p;b=h.array(null!=(p=(g=f.between[0]).filter)?p:g.filter=[]);0>b.indexOf(e)&&b.push(e)}}},signals:(a,b,e)=>{var f=b.name;const g=f+"_tuple";var p=kg(b.project.hasChannel).filter(cb=>"x"===cb.channel||"y"===cb.channel);const B=b.init?b.init[0]:null;e.push(...p.reduce((cb,pb)=>cb.concat(I(a,
b,pb,B&&B[pb.index])),[]));if(a.hasProjection){var P=h.stringValue(a.projectionName());const cb=a.projectionName()+"_center",{x:pb,y:gc}=b.project.hasChannel;var X=pb&&pb.signals.visual;const Pc=gc&&gc.signals.visual;var ta=pb?B&&B[pb.index]:`${cb}[0]`;const kc=gc?B&&B[gc.index]:`${cb}[1]`;X="["+`[${X?X+"[0]":"0"}, ${Pc?Pc+"[0]":"0"}],`+`[${X?X+"[1]":a.getSizeSignalRef("width").signal}, `+`${Pc?Pc+"[1]":a.getSizeSignalRef("height").signal}]`+"]";B&&(e.unshift({name:f+"_init",init:`[scale(${P}, [${pb?
ta[0]:ta}, ${gc?kc[0]:kc}]), `+`scale(${P}, [${pb?ta[1]:ta}, ${gc?kc[1]:kc}])]`}),pb&&gc||e.find(Nc=>Nc.name===cb)||e.unshift({name:cb,update:`invert(${P}, [${a.getSizeSignalRef("width").signal}/2, ${a.getSizeSignalRef("height").signal}/2])`}));f=`intersect(${X}, {markname: ${h.stringValue(a.getName("marks"))}}, unit.mark)`;P=`{unit: ${ag(a)}}`;f=`vlSelectionTuples(${f}, ${P})`;p=p.map(Nc=>Nc.signals.visual);return e.concat({name:g,on:[{events:[...(p.length?[{signal:p.join(" || ")}]:[]),...(B?[{signal:"geo_interval_init_tick"}]:
[])],update:f}]})}Uh.defined(b)||(P=f+"_scale_trigger",ta=p.map(cb=>{var pb=cb.channel;const {data:gc,visual:Pc}=cb.signals;cb=h.stringValue(a.scaleName(pb));pb=a.getScaleComponent(pb).get("type");pb=Kd(pb)?"+":"";return`(!isArray(${gc}) || `+`(${pb}invert(${cb}, ${Pc})[0] === ${pb}${gc}[0] && `+`${pb}invert(${cb}, ${Pc})[1] === ${pb}${gc}[1]))`}),ta.length&&e.push({name:P,value:{},on:[{events:p.map(cb=>({scale:a.scaleName(cb.channel)})),update:ta.join(" \x26\x26 ")+` ? ${P} : {}`}]}));p=p.map(cb=>
cb.signals.data);f=`unit: ${ag(a)}, fields: ${f+"_tuple_fields"}, values`;return e.concat(Object.assign({},{name:g},B?{init:`{${f}: ${oh(B)}}`}:{},p.length?{on:[{events:[{signal:p.join(" || ")}],update:`${p.join(" \x26\x26 ")} ? {${f}: [${p}]} : null`}]}:{}))},topLevelSignals:(a,b,e)=>{Nf(a)&&a.hasProjection&&b.init&&(e.filter(f=>"geo_interval_init_tick"===f.name).length||e.unshift({name:"geo_interval_init_tick",value:null,on:[{events:"timer{1}",update:"geo_interval_init_tick \x3d\x3d\x3d null ? {} : geo_interval_init_tick"}]}));
return e},marks:(a,b,e)=>{const f=b.name,{x:g,y:p}=b.project.hasChannel,B=null==g?void 0:g.signals.visual,P=null==p?void 0:p.signals.visual;var X=`data(${h.stringValue(b.name+"_store")})`;if(Uh.defined(b)||!g&&!p)return e;const ta={x:void 0!==g?{signal:`${B}[0]`}:{value:0},y:void 0!==p?{signal:`${P}[0]`}:{value:0},x2:void 0!==g?{signal:`${B}[1]`}:{field:{group:"width"}},y2:void 0!==p?{signal:`${P}[1]`}:{field:{group:"height"}}};if("global"===b.resolve)for(var cb of sd(ta))ta[cb]=[Object.assign({},
{test:`${X}.length && ${X}[0].unit === ${ag(a)}`},ta[cb]),{value:0}];cb=b.mark;X=Object.assign({},cb);a=cb.fill;b=cb.fillOpacity;cb=cb.cursor;const pb=(delete X.fill,delete X.fillOpacity,delete X.cursor,X);X=sd(pb).reduce((gc,Pc)=>{gc[Pc]=[{test:[void 0!==g&&`${B}[0] !== ${B}[1]`,void 0!==p&&`${P}[0] !== ${P}[1]`].filter(kc=>kc).join(" \x26\x26 "),value:pb[Pc]},{value:null}];return gc},{});return[{name:`${f+"_brush"}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:a},fillOpacity:{value:b}},update:ta}},
...e,{name:f+"_brush",type:"rect",clip:!0,encode:{enter:Object.assign({},cb?{cursor:{value:cb}}:{},{fill:{value:"transparent"}}),update:Object.assign({},ta,X)}}]}},{defined:()=>!0,parse:(a,b,e)=>{const f=b.name;var g;const p=null!=(g=b.project)?g:b.project=new qh,B={};g={};const P=new Set,X=(dd,ie)=>{dd="visual"===ie?dd.channel:dd.field;let $d=ra(`${f}_${dd}`);for(let Ce=1;P.has($d);Ce++)$d=ra(`${f}_${dd}_${Ce}`);P.add($d);return{[ie]:$d}},ta=b.type,cb=a.config.selection[ta],pb=void 0!==e.value?h.array(e.value):
null;let {fields:gc,encodings:Pc}=h.isObject(e.select)?e.select:{};if(!gc&&!Pc&&pb)for(var kc of pb)if(h.isObject(kc))for(const dd of sd(kc))if(oj[dd])(Pc||(Pc=[])).push(dd);else if("interval"===ta)K('Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.'),Pc=cb.encodings;else{let ie;(null!=(ie=gc)?ie:gc=[]).push(dd)}gc||Pc||(Pc=cb.encodings,"fields"in cb&&(gc=cb.fields));var Nc;for(const dd of null!=(Nc=Pc)?Nc:[])(Nc=a.fieldDef(dd))?(e=Nc.field,Nc.aggregate?K(`Cannot project a selection on encoding channel "${dd}" as it uses an aggregate function ("${Nc.aggregate}").`):
e?(Nc.timeUnit&&!Kc(Nc.timeUnit)&&(e=a.vgField(dd),kc={timeUnit:Nc.timeUnit,as:e,field:Nc.field},g[Xb(kc)]=kc),B[e]||(Nc="interval"===ta&&Mh[dd]&&Kd(a.getScaleComponent(dd).get("type"))?"R":Nc.bin?"R-RE":"E",Nc={field:e,channel:dd,type:Nc,index:p.items.length},Nc.signals=Object.assign({},X(Nc,"data"),X(Nc,"visual")),p.items.push(B[e]=Nc),p.hasField[e]=B[e],p.hasSelectionId=p.hasSelectionId||"_vgsid_"===e,dd in mi?(Nc.geoChannel=dd,Nc.channel=E(dd),p.hasChannel[Nc.channel]=B[e]):p.hasChannel[dd]=B[e])):
K(Fb(dd))):K(Fb(dd));let Zc;for(const dd of null!=(Zc=gc)?Zc:[])p.hasField[dd]||(a={type:"E",field:dd,index:p.items.length},a.signals=Object.assign({},X(a,"data")),p.items.push(a),p.hasField[dd]=a,p.hasSelectionId=p.hasSelectionId||"_vgsid_"===dd);pb&&(b.init=pb.map(dd=>p.items.map(ie=>h.isObject(dd)?void 0!==dd[ie.geoChannel||ie.channel]?dd[ie.geoChannel||ie.channel]:dd[ie.field]:dd)));ib(g)||(p.timeUnit=new xh(null,g))},signals:(a,b,e)=>{const f=b.name+"_tuple_fields";return 0<e.filter(g=>g.name===
f).length||b.project.hasSelectionId?e:e.concat({name:f,value:b.project.items.map(Mg)})}},Sj,si,Uh,yi,{defined:a=>void 0!==a.clear&&!1!==a.clear,parse:(a,b)=>{b.clear&&(b.clear=h.isString(b.clear)?h.parseSelector(b.clear,"view"):b.clear)},topLevelSignals:(a,b,e)=>{if(si.defined(b))for(const f of b.project.items)a=e.findIndex(g=>g.name===ra(`${b.name}_${f.field}`)),-1!==a&&e[a].on.push({events:b.clear,update:"null"});return e},signals:(a,b,e)=>{function f(g,p){-1!==g&&e[g].on&&e[g].on.push({events:b.clear,
update:p})}if("interval"===b.type)for(const g of b.project.items)a=e.findIndex(p=>p.name===g.signals.visual),f(a,"[0, 0]"),-1===a&&(a=e.findIndex(p=>p.name===g.signals.data),f(a,"null"));else a=e.findIndex(g=>g.name===b.name+"_tuple"),f(a,"null"),Sj.defined(b)&&(a=e.findIndex(g=>g.name===b.name+"_toggle"),f(a,"false"));return e}},{defined:a=>"interval"===a.type&&a.translate,signals:(a,b,e)=>{const f=b.name,g=Uh.defined(b),p=f+"_translate_anchor",{x:B,y:P}=b.project.hasChannel;let X=h.parseSelector(b.translate,
"scope");g||(X=X.map(ta=>(ta.between[0].markname=f+"_brush",ta)));e.push({name:p,value:{},on:[{events:X.map(ta=>ta.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==B?`, extent_x: ${g?dc(a,"x"):`slice(${B.signals.visual})`}`:"")+(void 0!==P?`, extent_y: ${g?dc(a,"y"):`slice(${P.signals.visual})`}`:"")+"}"}]},{name:f+"_translate_delta",value:{},on:[{events:X,update:`{x: ${p}.x - x(unit), y: ${p}.y - y(unit)}`}]});void 0!==B&&Eh(a,b,B,"width",e);void 0!==P&&Eh(a,b,P,"height",e);return e}},{defined:a=>
"interval"===a.type&&a.zoom,signals:(a,b,e)=>{const f=b.name,g=Uh.defined(b),p=f+"_zoom_delta",{x:B,y:P}=b.project.hasChannel,X=h.stringValue(a.scaleName("x")),ta=h.stringValue(a.scaleName("y"));let cb=h.parseSelector(b.zoom,"scope");g||(cb=cb.map(pb=>(pb.markname=f+"_brush",pb)));e.push({name:f+"_zoom_anchor",on:[{events:cb,update:g?"{"+[X?`x: invert(${X}, x(unit))`:"",ta?`y: invert(${ta}, y(unit))`:""].filter(pb=>pb).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:p,on:[{events:cb,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]});
void 0!==B&&gi(a,b,B,"width",e);void 0!==P&&gi(a,b,P,"height",e);return e}},qk];class wi extends jf{clone(){return new wi(null,this.model,De(this.filter))}constructor(a,b,e){super(a);this.model=b;this.filter=e;R(this,"expr",void 0);R(this,"_dependentFields",void 0);this.expr=Xf(this.model,this.filter,this);this._dependentFields=sj(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}
const tk={scale:a=>{let {model:b,channel:e}=a;return b.scaleName(e)},format:a=>{({format:a}=a);return a},formatType:a=>{({formatType:a}=a);return a},grid:a=>{let {fieldOrDatumDef:b,axis:e,scaleType:f}=a,g;return null!=(g=e.grid)?g:!ce(f)&&Ia(b)&&!vb(null==b?void 0:b.bin)&&!jb(null==b?void 0:b.bin)},gridScale:a=>{let {model:b,channel:e}=a;a="x"===e?"y":"x";a=b.getScaleComponent(a)?b.scaleName(a):void 0;return a},labelAlign:a=>{let {axis:b,labelAngle:e,orient:f,channel:g}=a;return b.labelAlign||xk(e,
f,g)},labelAngle:a=>{({labelAngle:a}=a);return a},labelBaseline:a=>{let {axis:b,labelAngle:e,orient:f,channel:g}=a;return b.labelBaseline||Wj(e,f,g)},labelFlush:a=>{let {axis:b,fieldOrDatumDef:e,channel:f}=a;null==(a=b.labelFlush)&&(a="x"===f&&Cb(["quantitative","temporal"],e.type)?!0:void 0);return a},labelOverlap:a=>{let {axis:b,fieldOrDatumDef:e,scaleType:f}=a;if(null==(a=b.labelOverlap)){a=e.type;var g=Ia(e)&&!!e.timeUnit,p=Ia(e)?e.sort:void 0;a=g&&!h.isObject(p)||"nominal"!==a&&"ordinal"!==a?
"log"===f||"symlog"===f?"greedy":!0:void 0}return a},orient:a=>{({orient:a}=a);return a},tickCount:a=>{let {channel:b,model:e,axis:f,fieldOrDatumDef:g,scaleType:p}=a;a=(a="x"===b?"width":"y"===b?"height":void 0)?e.getSizeSignalRef(a):void 0;let B;if(null!=(B=f.tickCount))var P=B;else a:{let {fieldOrDatumDef:X,scaleType:ta,size:cb,values:pb}={fieldOrDatumDef:g,scaleType:p,size:a,values:f.values};if(pb||ce(ta)||"log"===ta)P=void 0;else{if(Ia(X)){if(vb(X.bin)){P={signal:`ceil(${cb.signal}/10)`};break a}if(X.timeUnit&&
Cb(["month","hours","day","quarter"],null==(P=nd(X.timeUnit))?void 0:P.unit)){P=void 0;break a}}P={signal:`ceil(${cb.signal}/40)`}}}return P},tickMinStep:function(a){let {format:b,fieldOrDatumDef:e}=a;if("d"===b)return 1;if(Ia(e)&&({timeUnit:a}=e,a&&(a=me(a))))return{signal:a}},title:a=>{let {axis:b,model:e,channel:f}=a;if(void 0!==b.title)return b.title;a=fj(e,f);if(void 0!==a)return a;a=e.typedFieldDef(f);const g=e.fieldDef("x"===f?"x2":"y2");return ma(a?[oa(a)]:[],Ia(g)?[oa(g)]:[])},values:a=>
{let {axis:b,fieldOrDatumDef:e}=a;a=b.values;a=h.isArray(a)?vf(e,a):Mb(a)?a:void 0;return a},zindex:a=>{let {axis:b,fieldOrDatumDef:e,mark:f}=a;null==(a=b.zindex)&&(a="rect"===f&&Fd(e)?1:0);return a}};class Ni extends jf{clone(){return new Ni(null,De(this.transform))}constructor(a,b){super(a);this.transform=b;R(this,"_dependentFields",void 0);this._dependentFields=sj(this.transform.calculate)}static parseAllForSortIndex(a,b){b.forEachFieldDef((e,f)=>{if(Td(e)&&Ee(e.sort)){const {field:p,timeUnit:B}=
e;var g=e.sort;g=g.map((P,X)=>`${Vb({field:p,timeUnit:B,equal:P})} ? ${X} : `).join("")+g.length;a=new Ni(a,{calculate:g,as:Ri(e,f,{forAs:!0})})}});return a}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Xb(this.transform)}`}}const Bj=["row","column"],bl=["header","footer"],El={column:{start:0,end:1},row:{start:1,end:0}},Nl=Object.assign({},
{aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,
symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,
strokeDash:1,encode:1}),Fk=sd(Nl);class Ml extends Kf{}const Fl={symbols:function(a,b){let {fieldOrDatumDef:e,model:f,channel:g,legendCmpt:p,legendType:B}=b;if("symbol"===B){var {markDef:P,encoding:X,config:ta,mark:cb}=f;b=P.filled&&"trail"!==cb;var pb=Object,gc=pb.assign,Pc={};for(var kc of Yi){const Ce=ic(kc,f.markDef,f.config);void 0!==Ce&&(Pc[kc]=Ua(Ce))}kc=gc.call(pb,{},Pc,Wc(f,{filled:b}));var Nc;pb=null!=(Nc=p.get("symbolOpacity"))?Nc:ta.legend.symbolOpacity;var Zc;Nc=null!=(Zc=p.get("symbolFillColor"))?
Zc:ta.legend.symbolFillColor;var dd;Zc=null!=(dd=p.get("symbolStrokeColor"))?dd:ta.legend.symbolStrokeColor;var ie;dd=void 0===pb?null!=(ie=G(X.opacity))?ie:P.opacity:void 0;if(kc.fill)if("fill"===g||b&&"color"===g)delete kc.fill;else if(kc.fill.field)if(Nc)delete kc.fill;else{let Ce;kc.fill=Ua(null!=(Ce=ta.legend.symbolBaseFillColor)?Ce:"black");kc.fillOpacity=Ua(null!=dd?dd:1)}else if(h.isArray(kc.fill)){var $d;let Ce,Oe;if(ie=null!=(Oe=null!=(Ce=M(null!=($d=X.fill)?$d:X.color))?Ce:P.fill)?Oe:b&&
P.color)kc.fill=Ua(ie)}kc.stroke&&("stroke"===g||!b&&"color"===g?delete kc.stroke:kc.stroke.field||Zc?delete kc.stroke:h.isArray(kc.stroke)&&($d=T(M(X.stroke||X.color),P.stroke,b?P.color:void 0))&&(kc.stroke={value:$d}));"opacity"!==g&&(($d=Ia(e)&&Wa(f,p,e))?kc.opacity=[Object.assign({},{test:$d},Ua(null!=dd?dd:1)),Ua(ta.legend.unselectedOpacity)]:dd&&(kc.opacity=Ua(dd)));kc=Object.assign({},kc,a);return ib(kc)?void 0:kc}},gradient:function(a,b){let {model:e,legendType:f,legendCmpt:g}=b;if("gradient"===
f){var {config:p,markDef:B,encoding:P}=e;b={};var X,ta=void 0===(null!=(X=g.get("gradientOpacity"))?X:p.legend.gradientOpacity)?G(P.opacity)||B.opacity:void 0;ta&&(b.opacity=Ua(ta));b=Object.assign({},b,a);return ib(b)?void 0:b}},labels:function(a,b){let {fieldOrDatumDef:e,model:f,channel:g,legendCmpt:p}=b;var B=f.legend(g)||{};b=f.config;var P=Ia(e)?Wa(f,p,e):void 0;P=P?[{test:P,value:1},{value:b.legend.unselectedOpacity}]:void 0;const {format:X,formatType:ta}=B;B=void 0;fe(ta)?B=ne({fieldOrDatumDef:e,
field:"datum.value",format:X,formatType:ta,config:b}):void 0===X&&void 0===ta&&b.customFormatTypes&&("quantitative"===e.type&&b.numberFormatType?B=ne({fieldOrDatumDef:e,field:"datum.value",format:b.numberFormat,formatType:b.numberFormatType,config:b}):"temporal"===e.type&&b.timeFormatType&&Ia(e)&&void 0===e.timeUnit&&(B=ne({fieldOrDatumDef:e,field:"datum.value",format:b.timeFormat,formatType:b.timeFormatType,config:b})));a=Object.assign({},P?{opacity:P}:{},B?{text:B}:{},a);return ib(a)?void 0:a},
entries:function(a,b){({legendCmpt:b}=b);let e;return(null==(e=b.get("selections"))?0:e.length)?Object.assign({},a,{fill:{value:"transparent"}}):a}},ll={direction:a=>{({direction:a}=a);return a},format:a=>{let {fieldOrDatumDef:b,legend:e,config:f}=a;const {format:g,formatType:p}=e;return Ye(b,b.type,g,p,f,!1)},formatType:a=>{let {legend:b,fieldOrDatumDef:e,scaleType:f}=a;({formatType:a}=b);return kf(a,e,f)},gradientLength:a=>{const {legend:b,legendConfig:e}=a;let f,g;if(null!=(g=null!=(f=b.gradientLength)?
f:e.gradientLength))a=g;else{{let {legendConfig:p,model:B,direction:P,orient:X,scaleType:ta}=a;const {gradientHorizontalMaxLength:cb,gradientHorizontalMinLength:pb,gradientVerticalMaxLength:gc,gradientVerticalMinLength:Pc}=p;a=lg.has(ta)?"horizontal"===P?"top"===X||"bottom"===X?db(B,"width",pb,cb):pb:db(B,"height",Pc,gc):void 0}}return a},labelOverlap:a=>{let {legend:b,legendConfig:e,scaleType:f}=a;var g;g=null!=(a=null!=(g=b.labelOverlap)?g:e.labelOverlap)?a:Cb(["quantile","threshold","log","symlog"],
f)?"greedy":void 0;return g},symbolType:a=>{let {legend:b,markDef:e,channel:f,encoding:g}=a;if(null!=(a=b.symbolType))var p=a;else a:{a=e.type;var B=e.shape;if("shape"!==f){const P=null!=(p=M(g.shape))?p:B;if(P){p=P;break a}}switch(a){case "bar":case "rect":case "image":case "square":p="square";break a;case "line":case "trail":case "rule":p="stroke";break a;case "arc":case "point":case "circle":case "tick":case "geoshape":case "area":case "text":p="circle";break a}p=void 0}return p},title:a=>{let {fieldOrDatumDef:b,
config:e}=a;return te(b,e,{allowDisabling:!0})},type:a=>{let {legendType:b,scaleType:e,channel:f}=a;if(L(f)&&lg.has(e)){if("gradient"===b)return}else if("symbol"===b)return;return b},values:a=>{let {fieldOrDatumDef:b,legend:e}=a;a=e.values;a=h.isArray(a)?vf(b,a):Mb(a)?a:void 0;return a}},lm="type clipAngle clipExtent center rotate precision reflectX reflectY coefficient distance fraction lobes parallel radius ratio spacing tilt".split(" ");class Fj extends Kf{constructor(a,b,e,f){super(Object.assign({},
b),{name:a});this.specifiedProjection=b;this.size=e;this.data=f;R(this,"merged",!1)}get isFit(){return!!this.data}}class Bi extends jf{clone(){return new Bi(null,De(this.bins))}constructor(a,b){super(a);this.bins=b}static makeFromEncoding(a,b){const e=b.reduceFieldDef((f,g,p)=>{if(Rc(g)&&vb(g.bin)){const {key:pb,binComponent:gc}=Rd(g,g.bin,b);var B=Object,P=B.assign,X=f[pb];var ta=b.config;if(Of(g,p)){var cb;let Pc;const kc=Nf(b)?null!=(Pc=null!=(cb=b.axis(p))?cb:b.legend(p))?Pc:{}:{};p=qc(g,{expr:"datum"});
cb=qc(g,{expr:"datum",binSuffix:"end"});g={formulaAs:qc(g,{binSuffix:"range",forAs:!0}),formula:Ze(p,cb,kc.format,kc.formatType,ta)}}else g={};f[pb]=P.call(B,{},gc,X,g)}return f},{});return ib(e)?null:new Bi(a,e)}static makeFromTransform(a,b,e){const {key:f,binComponent:g}=Rd(b,b.bin,e);return new Bi(a,{[f]:g})}merge(a,b){for(const e of sd(a.bins))e in this.bins?(b(a.bins[e].signal,this.bins[e].signal),this.bins[e].as=Za([...this.bins[e].as,...a.bins[e].as],Xb)):this.bins[e]=a.bins[e];for(const e of a.children)a.removeChild(e),
e.parent=this;a.remove()}producedFields(){return new Set(kg(this.bins).map(a=>a.as).flat(2))}dependentFields(){return new Set(kg(this.bins).map(a=>a.field))}hash(){return`Bin ${Xb(this.bins)}`}assemble(){return kg(this.bins).flatMap(a=>{const b=[],[e,...f]=a.as;var g=a.bin,p=Object.assign({},g);g=g.extent;p=(delete p.extent,p);p=Object.assign({},{type:"bin",field:bb(a.field),as:e,signal:a.signal},Tb(g)?{extent:null}:{extent:g},a.span?{span:{signal:`span(${a.span})`}}:{},p);!g&&a.extentSignal&&(b.push({type:"extent",
field:bb(a.field),signal:a.extentSignal}),p.extent={signal:a.extentSignal});b.push(p);for(const B of f)for(g=0;2>g;g++)b.push({type:"formula",expr:qc({field:e[g]},{expr:"datum"}),as:B[g]});a.formula&&b.push({type:"formula",expr:a.formula,as:a.formulaAs});return b})}}class zh extends jf{clone(){return new zh(null,new Set(this.dimensions),De(this.measures))}constructor(a,b,e){super(a);this.dimensions=b;this.measures=e}get groupBy(){return this.dimensions}static makeFromEncoding(a,b){let e=!1;b.forEachFieldDef(p=>
{p.aggregate&&(e=!0)});const f={},g=new Set;if(!e)return null;b.forEachFieldDef((p,B)=>{const {aggregate:P,field:X}=p;if(P)if("count"===P)null!=f["*"]||(f["*"]={}),f["*"].count=new Set([qc(p,{forAs:!0})]);else{if(la(P)||za(P)){p=la(P)?"argmin":"argmax";var ta=P[p];null!=f[ta]||(f[ta]={});f[ta][p]=new Set([qc({op:p,field:ta},{forAs:!0})])}else null!=f[X]||(f[X]={}),f[X][P]=new Set([qc(p,{forAs:!0})]);Mh[B]&&"unaggregated"===b.scaleDomain(B)&&(null!=f[X]||(f[X]={}),f[X].min=new Set([qc({field:X,aggregate:"min"},
{forAs:!0})]),f[X].max=new Set([qc({field:X,aggregate:"max"},{forAs:!0})]))}else{var cb=Nf(b)?b.encoding[y(B)]:void 0;if(Rc(p)&&Nf(b)&&J(p,cb,b.markDef,b.config)){g.add(qc(p,{}));g.add(qc(p,{suffix:"end"}));const {mark:pb,markDef:gc,config:Pc}=b;cb=l({fieldDef:p,markDef:gc,config:Pc});cc(pb)&&.5!==cb&&H(B)&&(g.add(qc(p,{suffix:"offsetted_rect_start"})),g.add(qc(p,{suffix:"offsetted_rect_end"})));p.bin&&Of(p,B)&&g.add(qc(p,{binSuffix:"range"}))}else B in mi?(B=E(B),g.add(b.getName(B))):g.add(qc(p));
if(B=Td(p))B=null==(ta=p.scale)?void 0:ta.range,B=h.isObject(B)&&"field"in B;B&&g.add(p.scale.range.field)}});return 0===g.size+sd(f).length?null:new zh(a,g,f)}static makeFromTransform(a,b){const e=new Set,f={};for(const p of b.aggregate){const {op:B,field:P,as:X}=p;if(B)if("count"===B){let ta;null!=(ta=f)["*"]||(ta["*"]={});f["*"].count=new Set([X?X:qc(p,{forAs:!0})])}else{let ta,cb;null!=(ta=f)[cb=P]||(ta[cb]={});f[P][B]=new Set([X?X:qc(p,{forAs:!0})])}}let g;for(const p of null!=(g=b.groupby)?
g:[])e.add(p);return 0===e.size+sd(f).length?null:new zh(a,e,f)}merge(a){if(wb(this.dimensions,a.dimensions)){var b=this.measures;a=a.measures;for(const e of sd(a)){const f=a[e];for(const g of sd(f))if(e in b){let p;b[e][g]=new Set([...(null!=(p=b[e][g])?p:[]),...f[g]])}else b[e]={[g]:f[g]}}return!0}ua("different dimensions, cannot merge");return!1}addDimensions(a){a.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...sd(this.measures)])}producedFields(){const a=
new Set;for(const b of sd(this.measures))for(const e of sd(this.measures[b])){const f=this.measures[b][e];0===f.size?a.add(`${e}_${b}`):f.forEach(a.add,a)}return a}hash(){return`Aggregate ${Xb({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const a=[],b=[],e=[];for(const f of sd(this.measures))for(const g of sd(this.measures[f]))for(const p of this.measures[f][g])e.push(p),a.push(g),b.push("*"===f?null:bb(f));return{type:"aggregate",groupby:[...this.dimensions].map(bb),ops:a,fields:b,
as:e}}}class c extends jf{constructor(a,b,e,f){super(a);this.model=b;this.name=e;this.data=f;R(this,"column",void 0);R(this,"row",void 0);R(this,"facet",void 0);R(this,"childModel",void 0);for(const g of sh)if(a=b.facet[g]){const {bin:p,sort:B}=a;this[g]=Object.assign({},{name:b.getName(`${g}_domain`),fields:[qc(a),...(vb(p)?[qc(a,{binSuffix:"end"})]:[])]},Ae(B)?{sortField:B}:h.isArray(B)?{sortIndexField:Ri(a,g)}:{})}this.childModel=b.child}hash(){let a="Facet";for(const b of sh)this[b]&&(a+=` ${b.charAt(0)}:${Xb(this[b])}`);
return a}get fields(){const a=[];for(const b of sh){let e;(null==(e=this[b])?0:e.fields)&&a.push(...this[b].fields)}return a}dependentFields(){const a=new Set(this.fields);for(const b of sh)this[b]&&(this[b].sortField&&a.add(this[b].sortField.field),this[b].sortIndexField&&a.add(this[b].sortIndexField));return a}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const a={};for(const f of Ph){var b=this.childModel.component.scales[f];if(b&&!b.merged){var e=
b.get("type");b=b.get("range");ce(e)&&Qb(b)&&(e=Ui(this.childModel,f),(e=dk(e))?a[f]=e:K(Rb(f)))}}return a}assembleRowColumnHeaderData(a,b,e){const f={row:"y",column:"x",facet:void 0}[a],g=[],p=[],B=[];f&&e&&e[f]&&(b?(g.push(`distinct_${e[f]}`),p.push("max")):(g.push(e[f]),p.push("distinct")),B.push(`distinct_${e[f]}`));const {sortField:P,sortIndexField:X}=this[a];if(P){const {op:ta="min",field:cb}=P;g.push(cb);p.push(ta);B.push(qc(P,{forAs:!0}))}else X&&(g.push(X),p.push("max"),B.push(X));return{name:this[a].name,
source:null!=b?b:this.data,transform:[Object.assign({},{type:"aggregate",groupby:this[a].fields},g.length?{fields:g,ops:p,as:B}:{})]}}assembleFacetHeaderData(a){const {columns:b}=this.model.layout,{layoutHeaders:e}=this.model.component,f=[],g={};for(const X of Bj){for(const ta of bl){let cb;var p=null!=(cb=e[X]&&e[X][ta])?cb:[];for(const pb of p){let gc;if(0<(null==(gc=pb.axes)?void 0:gc.length)){g[X]=!0;break}}}g[X]&&(p=`length(data("${this.facet.name}"))`,f.push({name:`${this.facet.name}_${X}`,
transform:[{type:"sequence",start:0,stop:"row"===X?b?{signal:`ceil(${p} / ${b})`}:1:b?{signal:`min(${p}, ${b})`}:{signal:p}}]}))}const {row:B,column:P}=g;(B||P)&&f.unshift(this.assembleRowColumnHeaderData("facet",null,a));return f}assemble(){const a=[];var b=null;const e=this.getChildIndependentFieldsWithStep(),{column:f,row:g,facet:p}=this;if(f&&g&&(e.x||e.y)){b=`cross_${this.column.name}_${this.row.name}`;var B;let P;const X=[].concat(null!=(B=e.x)?B:[],null!=(P=e.y)?P:[]);B=X.map(()=>"distinct");
a.push({name:b,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:X,ops:B}]})}for(const P of["column","row"])this[P]&&a.push(this.assembleRowColumnHeaderData(P,b,e));p&&(b=this.assembleFacetHeaderData(e))&&a.push(...b);return a}}class d extends jf{clone(){return new d(null,De(this._parse))}constructor(a,b){super(a);R(this,"_parse",void 0);this._parse=b}hash(){return`Parse ${Xb(this._parse)}`}static makeExplicit(a,b,e){let f={};b=b.data;let g;!pg(b)&&(null==b?0:null==(g=b.format)?
0:g.parse)&&(f=b.format.parse);return this.makeWithAncestors(a,f,{},e)}static makeWithAncestors(a,b,e,f){for(var g of sd(e)){const B=f.getWithExplicit(g);void 0!==B.value&&(B.explicit||B.value===e[g]||"derived"===B.value||"flatten"===e[g]?delete e[g]:K(Gc(g,e[g],B.value)))}for(var p of sd(b))g=f.get(p),void 0!==g&&(g===b[p]?delete b[p]:K(Gc(p,b[p],g)));b=new Kf(b,e);f.copyAll(b);e={};for(const B of sd(b.combine()))p=b.get(B),null!==p&&(e[B]=p);return 0===sd(e).length||f.parseNothing?null:new d(a,
e)}get parse(){return this._parse}merge(a){this._parse=Object.assign({},this._parse,a.parse);a.remove()}assembleFormatParse(){const a={};for(const b of sd(this._parse)){const e=this._parse[b];1===eb(b)&&(a[b]=e)}return a}producedFields(){return new Set(sd(this._parse))}dependentFields(){return new Set(sd(this._parse))}assembleTransforms(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;return sd(this._parse).filter(b=>a?1<eb(b):!0).map(b=>{const e=Ef(b,this._parse[b]);return e?{type:"formula",
expr:e,as:Pb(b)}:null}).filter(b=>null!==b)}}class k extends jf{clone(){return new k(null)}constructor(a){super(a)}dependentFields(){return new Set}producedFields(){return new Set(["_vgsid_"])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:"_vgsid_"}}}class v extends jf{clone(){return new v(null,this.params)}constructor(a,b){super(a);this.params=b}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Xb(this.params)}`}assemble(){return Object.assign({},{type:"graticule"},
!0===this.params?{}:this.params)}}class S extends jf{clone(){return new S(null,this.params)}constructor(a,b){super(a);this.params=b}dependentFields(){return new Set}producedFields(){let a;return new Set([null!=(a=this.params.as)?a:"data"])}hash(){return`Hash ${Xb(this.params)}`}assemble(){return Object.assign({},{type:"sequence"},this.params)}}class da extends jf{constructor(a){super(null);R(this,"_data",void 0);R(this,"_name",void 0);R(this,"_generator",void 0);null!=a||(a={name:"source"});let b;
pg(a)||(b=a.format?Object.assign({},ac(a.format,["parse"])):{});if("values"in a)this._data={values:a.values};else if("url"in a){if(this._data={url:a.url},!b.type){let e=/(?:\.([^.]+))?$/.exec(a.url)[1];Cb(["json","csv","tsv","dsv","topojson"],e)||(e="json");b.type=e}}else if("sphere"in a)this._data={values:[{type:"Sphere"}]};else if(Mi(a)||pg(a))this._data={};this._generator=pg(a);a.name&&(this._name=a.name);b&&!ib(b)&&(this._data.format=b)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(a){this._name=
a}set parent(a){throw Error("Source nodes have to be roots.");}remove(){throw Error("Source nodes are roots and cannot be removed.");}hash(){throw Error("Cannot hash sources");}assemble(){return Object.assign({},{name:this._name},this._data,{transform:[]})}}var Ta=new WeakMap;class Wb{constructor(){if(Ta.has(this))throw new TypeError("Cannot initialize the same private elements twice on an object");Ta.set(this,{writable:!0,value:void 0});t(this,Ta,!1)}setModified(){t(this,Ta,!0)}get modifiedFlag(){var a=
ba(this,Ta,"get");return a.get?a.get.call(this):a.value}}class lc extends Wb{getNodeDepths(a,b,e){e.set(a,b);for(const f of a.children)this.getNodeDepths(f,b+1,e);return e}optimize(a){a=[...this.getNodeDepths(a,0,new Map).entries()].sort((b,e)=>e[1]-b[1]);for(const b of a)this.run(b[0]);return this.modifiedFlag}}class Uc extends Wb{optimize(a){this.run(a);for(const b of a.children)this.optimize(b);return this.modifiedFlag}}class ud extends Uc{mergeNodes(a,b){const e=b.shift();for(const f of b)a.removeChild(f),
f.parent=e,f.remove()}run(a){const b=a.children.map(f=>f.hash()),e={};for(let f=0;f<b.length;f++)void 0===e[b[f]]?e[b[f]]=[a.children[f]]:e[b[f]].push(a.children[f]);for(const f of sd(e))1<e[f].length&&(this.setModified(),this.mergeNodes(a,e[f]))}}class yd extends Uc{constructor(a){super();R(this,"requiresSelectionId",void 0);this.requiresSelectionId=a&&Af(a)}run(a){!(a instanceof k)||this.requiresSelectionId&&(zg(a.parent)||a.parent instanceof zh||a.parent instanceof d)||(this.setModified(),a.remove())}}
class td extends Wb{optimize(a){this.run(a,new Set);return this.modifiedFlag}run(a,b){let e=new Set;a instanceof xh&&(e=a.producedFields(),ub(e,b)&&(this.setModified(),a.removeFormulas(b),0===a.producedFields.length&&a.remove()));for(const f of a.children)this.run(f,new Set([...b,...e]))}}class Sd extends Uc{constructor(){super()}run(a){a instanceof Pg&&!a.isRequired()&&(this.setModified(),a.remove())}}class de extends lc{run(a){if(!(zg(a)||1<a.numChildren()))for(const b of a.children)b instanceof
d&&(a instanceof d?(this.setModified(),a.merge(b)):xb(a.producedFields(),b.dependentFields())||(this.setModified(),b.swapWithParent()))}}class je extends lc{run(a){const b=[...a.children];var e=a.children.filter(g=>g instanceof d);if(1<a.numChildren()&&1<=e.length){const g={};var f=new Set;for(const p of e){e=p.parse;for(const B of sd(e))B in g?g[B]!==e[B]&&f.add(B):g[B]=e[B]}for(const p of f)delete g[p];if(!ib(g)){this.setModified();f=new d(a,g);for(const p of b){if(p instanceof d)for(const B of sd(g))delete p.parse[B];
a.removeChild(p);p.parent=f;p instanceof d&&0===sd(p.parse).length&&p.remove()}}}}}class $f extends lc{run(a){a instanceof Pg||0<a.numChildren()||a instanceof c||a instanceof da||(this.setModified(),a.remove())}}class Ic extends lc{run(a){a=a.children.filter(e=>e instanceof xh);const b=a.pop();for(const e of a)this.setModified(),b.merge(e)}}class uc extends lc{run(a){var b=a.children.filter(g=>g instanceof zh);const e={};for(var f of b)b=Xb(f.groupBy),b in e||(e[b]=[]),e[b].push(f);for(const g of sd(e))if(f=
e[g],1<f.length){b=f.pop();for(const p of f)b.merge(p)&&(a.removeChild(p),p.parent=b,p.remove(),this.setModified())}}}class Qc extends lc{constructor(a){super();this.model=a}run(a){var b=!(zg(a)||a instanceof wi||a instanceof d||a instanceof k);const e=[],f=[];for(const g of a.children)g instanceof Bi&&(b&&!xb(a.producedFields(),g.dependentFields())?e.push(g):f.push(g));if(0<e.length){b=e.pop();for(const g of e)b.merge(g,this.model.renameSignal.bind(this.model));this.setModified();a instanceof Bi?
a.merge(b,this.model.renameSignal.bind(this.model)):b.swapWithParent()}if(1<f.length){a=f.pop();for(const g of f)a.merge(g,this.model.renameSignal.bind(this.model));this.setModified()}}}class Id extends lc{run(a){var b=[...a.children];if(Ub(b,g=>g instanceof Pg)&&!(1>=a.numChildren())){var e=[];for(const g of b)if(g instanceof Pg){for(b=g;1===b.numChildren();){const [p]=b.children;if(p instanceof Pg)b=p;else break}e.push(...b.children);if(f)a.removeChild(g),g.parent=f.parent,f.parent.removeChild(f),
f.parent=b,this.setModified();else var f=b}else e.push(g);if(e.length){this.setModified();for(const g of e)g.parent.removeChild(g),g.parent=f}}}}class be extends jf{clone(){return new be(null,De(this.transform))}constructor(a,b){super(a);this.transform=b}addDimensions(a){this.transform.groupby=Za(this.transform.groupby.concat(a),b=>b)}dependentFields(){const a=new Set;this.transform.groupby&&this.transform.groupby.forEach(a.add,a);this.transform.joinaggregate.map(b=>b.field).filter(b=>void 0!==b).forEach(a.add,
a);return a}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(a){let b;return null!=(b=a.as)?b:qc(a)}hash(){return`JoinAggregateTransform ${Xb(this.transform)}`}assemble(){const a=[],b=[],e=[];for(var f of this.transform.joinaggregate)b.push(f.op),e.push(this.getDefaultName(f)),a.push(void 0===f.field?null:f.field);f=this.transform.groupby;return Object.assign({},{type:"joinaggregate",as:e,ops:b,fields:a},void 0!==f?{groupby:f}:{})}}class oe extends jf{clone(){return new oe(null,
De(this._stack))}constructor(a,b){super(a);R(this,"_stack",void 0);this._stack=b}static makeFromTransform(a,b){const {stack:e,groupby:f,as:g,offset:p="zero"}=b;var B=[];const P=[];if(void 0!==b.sort)for(const X of b.sort)B.push(X.field),P.push(T(X.order,"ascending"));B={field:B,order:P};b=ze(g)?g:h.isString(g)?[g,`${g}_end`]:[`${b.stack}_start`,`${b.stack}_end`];return new oe(a,{dimensionFieldDefs:[],stackField:e,groupby:f,offset:p,sort:B,facetby:[],as:b})}static makeFromEncoding(a,b){var e=b.stack;
const {encoding:f}=b;if(!e)return null;const {groupbyChannels:g,fieldChannel:p,offset:B,impute:P}=e;e=g.map(cb=>xe(f[cb])).filter(cb=>!!cb);const X=Mf(b);var ta=b.encoding.order;if(h.isArray(ta)||Ia(ta))ta=Vc(ta);else{const cb=ta&&ta.sort&&!ta.field?ta.sort:"y"===p?"descending":"ascending";ta=X.reduce((pb,gc)=>{pb.field.push(gc);pb.order.push(cb);return pb},{field:[],order:[]})}return new oe(a,{dimensionFieldDefs:e,stackField:b.vgField(p),facetby:[],stackby:X,sort:ta,offset:B,impute:P,as:[b.vgField(p,
{suffix:"start",forAs:!0}),b.vgField(p,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(a){this._stack.facetby.push(...a)}dependentFields(){const a=new Set;a.add(this._stack.stackField);this.getGroupbyFields().forEach(a.add,a);this._stack.facetby.forEach(a.add,a);this._stack.sort.field.forEach(a.add,a);return a}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Xb(this._stack)}`}getGroupbyFields(){const {dimensionFieldDefs:a,impute:b,groupby:e}=this._stack;
return 0<a.length?a.map(f=>f.bin?b?[qc(f,{binSuffix:"mid"})]:[qc(f,{}),qc(f,{binSuffix:"end"})]:[qc(f)]).flat():null!=e?e:[]}assemble(){const a=[],{facetby:b,dimensionFieldDefs:e,stackField:f,stackby:g,sort:p,offset:B,impute:P,as:X}=this._stack;if(P)for(const ta of e){const {bandPosition:cb=.5,bin:pb}=ta;if(pb){const gc=qc(ta,{expr:"datum"}),Pc=qc(ta,{expr:"datum",binSuffix:"end"});a.push({type:"formula",expr:`${cb}*${gc}+${1-cb}*${Pc}`,as:qc(ta,{binSuffix:"mid",forAs:!0})})}a.push({type:"impute",
field:f,groupby:[...g,...b],key:qc(ta,{binSuffix:"mid"}),method:"value",value:0})}a.push({type:"stack",groupby:[...this.getGroupbyFields(),...b],field:f,sort:p,as:X,offset:B});return a}}class ue extends jf{clone(){return new ue(null,De(this.transform))}constructor(a,b){super(a);this.transform=b}addDimensions(a){this.transform.groupby=Za(this.transform.groupby.concat(a),b=>b)}dependentFields(){const a=new Set;let b;(null!=(b=this.transform.groupby)?b:[]).forEach(a.add,a);let e;(null!=(e=this.transform.sort)?
e:[]).forEach(f=>a.add(f.field));this.transform.window.map(f=>f.field).filter(f=>void 0!==f).forEach(a.add,a);return a}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(a){let b;return null!=(b=a.as)?b:qc(a)}hash(){return`WindowTransform ${Xb(this.transform)}`}assemble(){const a=[],b=[],e=[],f=[];for(var g of this.transform.window)b.push(g.op),e.push(this.getDefaultName(g)),f.push(void 0===g.param?null:g.param),a.push(void 0===g.field?null:g.field);g=this.transform.frame;
const p=this.transform.groupby;if(g&&null===g[0]&&null===g[1]&&b.every(ta=>Ma(ta)))return Object.assign({},{type:"joinaggregate",as:e,ops:b,fields:a},void 0!==p?{groupby:p}:{});const B=[],P=[];if(void 0!==this.transform.sort)for(var X of this.transform.sort){B.push(X.field);let ta;P.push(null!=(ta=X.order)?ta:"ascending")}X=this.transform.ignorePeers;return Object.assign({},{type:"window",params:f,as:e,ops:b,fields:a,sort:{field:B,order:P}},void 0!==X?{ignorePeers:X}:{},void 0!==p?{groupby:p}:{},
void 0!==g?{frame:g}:{})}}class ee{constructor(a){R(this,"signal",void 0);Object.defineProperty(this,"signal",{enumerable:!0,get:a})}static fromName(a,b){return new ee(()=>a(b))}}class ug extends Kf{constructor(a,b){super({},{name:a});R(this,"merged",!1);this.setWithExplicit("type",b)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")?!0:Ub(this.get("domains"),a=>h.isArray(a)&&2===a.length&&h.isNumber(a[0])&&0>=a[0]&&h.isNumber(a[1])&&0<=a[1])}}const ef=["range","scheme"],pi={bins:a=>{let {model:b,
fieldOrDatumDef:e}=a;return Ia(e)?mj(b,e):void 0},interpolate:a=>{let {channel:b,fieldOrDatumDef:e}=a;a=e.type;a=Cb(["color","fill","stroke"],b)&&"nominal"!==a?"hcl":void 0;return a},nice:a=>{let {scaleType:b,channel:e,domain:f,domainMin:g,domainMax:p,fieldOrDatumDef:B}=a;{let P;a=(null==(P=xe(B))?0:P.bin)||h.isArray(f)||null!=p||null!=g||Cb([gg.TIME,gg.UTC],b)?void 0:H(e)?!0:void 0}return a},padding:a=>{let {channel:b,scaleType:e,fieldOrDatumDef:f,markDef:g,config:p}=a;a:{a=p.scale;var B=p.bar;if(H(b)){if(lg.has(e)){if(void 0!==
a.continuousPadding){a=a.continuousPadding;break a}const {type:P,orient:X}=g;if("bar"===P&&(!Ia(f)||!f.bin&&!f.timeUnit)&&("vertical"===X&&"x"===b||"horizontal"===X&&"y"===b)){a=B.continuousBandSize;break a}}if(e===gg.POINT){a=a.pointPadding;break a}}a=void 0}return a},paddingInner:a=>{let {scalePadding:b,channel:e,markDef:f,scaleType:g,config:p,hasNestedOffsetScale:B}=a;return bk(b,e,f.type,g,p.scale,B)},paddingOuter:a=>{let {scalePadding:b,channel:e,scaleType:f,scalePaddingInner:g,config:p,hasNestedOffsetScale:B}=
a;return ck(b,e,f,g,p.scale,B)},reverse:a=>{let {fieldOrDatumDef:b,scaleType:e,channel:f,config:g}=a;a=Ia(b)?b.sort:void 0;var p=g.scale;a="x"===f&&void 0!==p.xReverse?Kd(e)&&"descending"===a?Mb(p.xReverse)?{signal:`!${p.xReverse.signal}`}:!p.xReverse:p.xReverse:Kd(e)&&"descending"===a?!0:void 0;return a},zero:a=>{let {channel:b,fieldOrDatumDef:e,domain:f,markDef:g,scaleType:p,config:B,hasSecondaryRangeChannel:P}=a;a:if(a=B.scale,f&&"unaggregated"!==f&&Kd(p)){if(h.isArray(f)){a=f[0];const X=f[f.length-
1];if(h.isNumber(a)&&0>=a&&h.isNumber(X)&&0<=X){a=!0;break a}}a=!1}else if("size"!==b||"quantitative"!==e.type||ai.has(p))if(Ia(e)&&e.bin||!Cb([...Ph,...ol],b))a=!1;else{const {orient:X,type:ta}=g;a=Cb(["bar","area","line","trail"],ta)&&("horizontal"===X&&"y"===b||"vertical"===X&&"x"===b)?!1:Cb(["bar","area"],ta)&&!P?!0:null==a?void 0:a.zero}else a=!0;return a}},Wl=Ih((a,b)=>ch[a]-ch[b]);class vm{constructor(){R(this,"nameMap",void 0);this.nameMap={}}rename(a,b){this.nameMap[a]=b}has(a){return void 0!==
this.nameMap[a]}get(a){for(;this.nameMap[a]&&a!==this.nameMap[a];)a=this.nameMap[a];return a}}class wm{constructor(a,b,e,f,g,p,B){this.type=b;this.parent=e;this.config=g;R(this,"name",void 0);R(this,"size",void 0);R(this,"title",void 0);R(this,"description",void 0);R(this,"data",void 0);R(this,"transforms",void 0);R(this,"layout",void 0);R(this,"scaleNameMap",void 0);R(this,"projectionNameMap",void 0);R(this,"signalNameMap",void 0);R(this,"component",void 0);R(this,"view",void 0);R(this,"children",
void 0);R(this,"correctDataNames",ta=>{let cb;if(null==(cb=ta.from)?0:cb.data)ta.from.data=this.lookupDataSource(ta.from.data);let pb,gc;if(null==(pb=ta.from)?0:null==(gc=pb.facet)?0:gc.data)ta.from.facet.data=this.lookupDataSource(ta.from.facet.data);return ta});this.parent=e;this.config=g;this.view=Lb(B);let P;this.name=null!=(P=a.name)?P:f;this.title=$b(a.title)?{text:a.title}:a.title?Lb(a.title):void 0;this.scaleNameMap=e?e.scaleNameMap:new vm;this.projectionNameMap=e?e.projectionNameMap:new vm;
this.signalNameMap=e?e.signalNameMap:new vm;this.data=a.data;this.description=a.description;let X;this.transforms=Hh(null!=(X=a.transform)?X:[]);this.layout="layer"===b||"unit"===b?{}:Ue(a,b,g);this.component={data:{sources:e?e.component.data.sources:[],outputNodes:e?e.component.data.outputNodes:{},outputNodeRefCounts:e?e.component.data.outputNodeRefCounts:{},isFaceted:"facet"in a||(null==e?void 0:e.component.data.isFaceted)&&void 0===a.data},layoutSize:new Kf,layoutHeaders:{row:{},column:{},facet:{}},
mark:null,resolve:Object.assign({},{scale:{},axis:{},legend:{}},p?De(p):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale();this.parseLayoutSize();this.renameTopLevelLayoutSizeSignal();this.parseSelections();this.parseProjection();this.parseData();this.parseAxesAndHeaders();this.parseLegends();this.parseMarkGroup()}parseScale(){ek(this)}parseProjection(){rc(this)}renameTopLevelLayoutSizeSignal(){"width"!==
this.getName("width")&&this.renameSignal(this.getName("width"),"width");"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){qb(this)}assembleEncodeFromView(a){a=Object.assign({},a);a=(delete a.style,a);const b={};for(const e of sd(a)){const f=a[e];void 0!==f&&(b[e]=Ua(f))}return b}assembleGroupEncodeEntry(a){let b={};this.view&&(b=this.assembleEncodeFromView(this.view));if(!a&&(this.description&&(b.description=Ua(this.description)),"unit"===this.type||
"layer"===this.type)){let e;return Object.assign({},{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!=(e=b)?e:{})}return ib(b)?void 0:b}assembleLayout(){if(this.layout){var a=this.layout,b=Object.assign({},a);a=a.spacing;b=(delete b.spacing,b);var {component:e,config:f}=this,g=e.layoutHeaders,p={};for(P of sh){var B=g[P];let X;if(null==(X=B)?0:X.facetFieldDef){const {titleAnchor:ta,titleOrient:cb}=Wh(["titleAnchor","titleOrient"],B.facetFieldDef.header,f,P);B=Ag(P,
cb);const pb=El[B][ta];void 0!==pb&&(p[B]=pb)}}var P=ib(p)?void 0:p;return Object.assign({},{padding:a},this.assembleDefaultLayout(),b,P?{titleBand:P}:{})}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){var {layoutHeaders:a}=this.component,b=[];for(var e of sh)if(a[e].title){var f=b,g=f.push;var p=e;var B=this.component.layoutHeaders[p].title,P=this.config?this.config:void 0,X=this.component.layoutHeaders[p].facetFieldDef?this.component.layoutHeaders[p].facetFieldDef:void 0;const {titleAnchor:Nc,
titleAngle:Zc,titleOrient:dd}=Wh(["titleAnchor","titleAngle","titleOrient"],X.header,P,p);var ta=Ag(p,dd),cb=La(Zc);p={name:`${p}-title`,type:"group",role:`${ta}-title`,title:Object.assign({},{text:B},"row"===p?{orient:"left"}:{},{style:"guide-title"},hj(cb,ta),Lh(ta,cb,Nc),Hj(P,X,p,ok,sl))};g.call(f,p)}for(const Nc of Bj){a=b;b=a.concat;f=Nc;g=this.component.layoutHeaders[f];e=[];for(const Zc of bl)if(g[Zc])for(const dd of g[Zc]){a:{X=void 0;p=f;var pb=Zc,gc=g;if(B=dd){P=null;({facetFieldDef:kc}=
gc);ta=this.config?this.config:void 0;kc&&B.labels&&({labelOrient:cb}=Wh(["labelOrient"],kc.header,ta,p),"row"===p&&!Cb(["top","bottom"],cb)||"column"===p&&!Cb(["left","right"],cb))&&(P=jj(kc,p,ta));const ie=ih(this)&&!qe(this.facet),$d=B.axes,Ce=0<(null==$d?void 0:$d.length);if(P||Ce){const Oe="row"===p?"height":"width";ta=Object;cb=ta.assign;pb={name:this.getName(`${p}_${pb}`),type:"group",role:`${p}-${pb}`};if(gc.facetFieldDef){gc={data:this.getName(`${p}_domain`)};{var Pc=kc;const {sort:Lf}=Pc;
var kc=Ae(Lf)?{field:qc(Lf,{expr:"datum"}),order:null!=(X=Lf.order)?X:"ascending"}:h.isArray(Lf)?{field:Ri(Pc,p,{expr:"datum"}),order:"ascending"}:{field:qc(Pc,{expr:"datum"}),order:null!=Lf?Lf:"ascending"}}X={from:gc,sort:kc}}else X={};p=cb.call(ta,{},pb,X,Ce&&ie?{from:{data:this.getName(`facet_domain_${p}`)}}:{},P?{title:P}:{},B.sizeSignal?{encode:{update:{[Oe]:B.sizeSignal}}}:{},Ce?{axes:$d}:{});break a}}p=null}null!=p&&e.push(p)}b=b.call(a,e)}return b}assembleAxes(){return Uj(this.component.axes,
this.config)}assembleLegends(){return sc(this)}assembleProjections(){var a=Ti(this)||Tk(this)?cd(this):md(this);return a}assembleTitle(){var a,b=null!=(a=this.title)?a:{};a=Object.assign({},b);b=b.encoding;a=(delete a.encoding,a);b=Object.assign({},oc(this.config.title).nonMarkTitleProperties,a,b?{encode:{update:b}}:{});if(b.text)return Cb(["unit","layer"],this.type)?Cb(["middle",void 0],b.anchor)&&(null!=b.frame||(b.frame="group")):null!=b.anchor||(b.anchor="start"),ib(b)?void 0:b}assembleGroup(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];const b={};a=a.concat(this.assembleSignals());0<a.length&&(b.signals=a);if(a=this.assembleLayout())b.layout=a;b.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());a=!this.parent||ih(this.parent)?nl(this):[];0<a.length&&(b.scales=a);a=this.assembleAxes();0<a.length&&(b.axes=a);a=this.assembleLegends();0<a.length&&(b.legends=a);return b}getName(a){return ra((this.name?`${this.name}_`:"")+a)}getDataName(a){return this.getName(nf[a].toLowerCase())}requestDataName(a){a=
this.getDataName(a);const b=this.component.data.outputNodeRefCounts;b[a]=(b[a]||0)+1;return a}getSizeSignalRef(a){if(ih(this.parent)){var b=Xi(a),e=V(b);if((b=this.component.scales[e])&&!b.merged){var f=b.get("type");const g=b.get("range");if(ce(f)&&Qb(g)){a=b.get("name");f=Ui(this,e);if(f=dk(f))return e=qc({aggregate:"distinct",field:f},{expr:"datum"}),{signal:yh(a,b,e)};K(Rb(e));return null}}}return{signal:this.signalNameMap.get(this.getName(a))}}lookupDataSource(a){const b=this.component.data.outputNodes[a];
return b?b.getSource():a}getSignalName(a){return this.signalNameMap.get(a)}renameSignal(a,b){this.signalNameMap.rename(a,b)}renameScale(a,b){this.scaleNameMap.rename(a,b)}renameProjection(a,b){this.projectionNameMap.rename(a,b)}scaleName(a,b){if(b)return this.getName(a);if(Ej[a]&&Mh[a]&&this.component.scales[a]||this.scaleNameMap.has(this.getName(a)))return this.scaleNameMap.get(this.getName(a))}projectionName(a){if(a)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||
this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(a){if(!this.component.scales)throw Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const b=this.component.scales[a];return b&&!b.merged?b:this.parent?this.parent.getScaleComponent(a):void 0}getSelectionComponent(a,b){let e=this.component.selection[a];!e&&this.parent&&(e=this.parent.getSelectionComponent(a,
b));if(!e)throw Error(`Cannot find a selection named "${b}".`);return e}hasAxisOrientSignalRef(){let a,b;return(null==(a=this.component.axes.x)?void 0:a.some(e=>e.hasOrientSignalRef()))||(null==(b=this.component.axes.y)?void 0:b.some(e=>e.hasOrientSignalRef()))}}class Em extends wm{vgField(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};const e=this.fieldDef(a);if(e)return qc(e,b)}reduceFieldDef(a,b){return Wg(this.getMapping(),(e,f,g)=>(f=xe(f))?a(e,f,g):e,b)}forEachFieldDef(a,
b){Vg(this.getMapping(),(e,f)=>{(e=xe(e))&&a(e,f)},b)}}class om extends jf{clone(){return new om(null,De(this.transform))}constructor(a,b){super(a);this.transform=b;this.transform=De(b);let e;a=null!=(e=this.transform.as)?e:[void 0,void 0];let f,g;this.transform.as=[null!=(f=a[0])?f:"value",null!=(g=a[1])?g:"density"]}dependentFields(){let a;return new Set([this.transform.density,...(null!=(a=this.transform.groupby)?a:[])])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Xb(this.transform)}`}assemble(){var a=
this.transform,b=Object.assign({},a);a=a.density;b=(delete b.density,b);b=Object.assign({},{type:"kde",field:a},b);this.transform.groupby&&(b.resolve="shared");return b}}class um extends jf{clone(){return new um(null,De(this.transform))}constructor(a,b){super(a);this.transform=b;this.transform=De(b)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Xb(this.transform)}`}assemble(){const {extent:a,param:b}=this.transform;return{type:"extent",
field:a,signal:b}}}class Gl extends jf{clone(){return new Gl(null,Object.assign({},this.filter))}constructor(a,b){super(a);this.filter=b}static make(a,b){const {config:e,mark:f,markDef:g}=b;if("filter"!==Zb("invalid",g,e))return null;const p=b.reduceFieldDef((B,P,X)=>{if(X=!!Mh[X]&&b.getScaleComponent(X))X=X.get("type"),Kd(X)&&"count"!==P.aggregate&&!Oa(f)&&(B[P.field]=P);return B},{});return sd(p).length?new Gl(a,p):null}dependentFields(){return new Set(sd(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Xb(this.filter)}`}assemble(){const a=
sd(this.filter).reduce((b,e)=>{e=this.filter[e];const f=qc(e,{expr:"datum"});null!==e&&("temporal"===e.type?b.push(`(isDate(${f}) || (isValid(${f}) && isFinite(+${f})))`):"quantitative"===e.type&&(b.push(`isValid(${f})`),b.push(`isFinite(+${f})`)));return b},[]);return 0<a.length?{type:"filter",expr:a.join(" \x26\x26 ")}:null}}class nm extends jf{clone(){return new nm(this.parent,De(this.transform))}constructor(a,b){super(a);this.transform=b;this.transform=De(b);const {flatten:e,as:f=[]}=this.transform;
this.transform.as=e.map((g,p)=>{let B;return null!=(B=f[p])?B:g})}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Xb(this.transform)}`}assemble(){const {flatten:a,as:b}=this.transform;return{type:"flatten",fields:a,as:b}}}class mm extends jf{clone(){return new mm(null,De(this.transform))}constructor(a,b){super(a);this.transform=b;this.transform=De(b);let e;a=null!=(e=this.transform.as)?e:[void 0,void 0];let f,
g;this.transform.as=[null!=(f=a[0])?f:"key",null!=(g=a[1])?g:"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Xb(this.transform)}`}assemble(){const {fold:a,as:b}=this.transform;return{type:"fold",fields:a,as:b}}}class jl extends jf{clone(){return new jl(null,De(this.fields),this.geojson,this.signal)}static parseAll(a,b){if(b.component.projection&&!b.component.projection.isFit)return a;let e=0;for(var f of[["longitude",
"latitude"],["longitude2","latitude2"]]){const g=f.map(p=>{p=Fe(b.encoding[p]);return Ia(p)?p.field:nb(p)?{expr:`${p.datum}`}:fd(p)?{expr:`${p.value}`}:void 0});if(g[0]||g[1])a=new jl(a,g,null,b.getName(`geojson_${e++}`))}b.channelHasField("shape")&&(f=b.typedFieldDef("shape"),"geojson"===f.type&&(a=new jl(a,null,f.field,b.getName(`geojson_${e++}`))));return a}constructor(a,b,e,f){super(a);this.fields=b;this.geojson=e;this.signal=f}dependentFields(){let a;const b=(null!=(a=this.fields)?a:[]).filter(h.isString);
return new Set([...(this.geojson?[this.geojson]:[]),...b])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Xb(this.fields)}`}assemble(){return[...(this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[]),Object.assign({},{type:"geojson"},this.fields?{fields:this.fields}:{},this.geojson?{geojson:this.geojson}:{},{signal:this.signal})]}}class Hl extends jf{clone(){return new Hl(null,this.projection,De(this.fields),De(this.as))}constructor(a,
b,e,f){super(a);this.projection=b;this.fields=e;this.as=f}static parseAll(a,b){if(!b.projectionName())return a;for(const e of[["longitude","latitude"],["longitude2","latitude2"]]){const f=e.map(p=>{p=Fe(b.encoding[p]);return Ia(p)?p.field:nb(p)?{expr:`${p.datum}`}:fd(p)?{expr:`${p.value}`}:void 0}),g="longitude2"===e[0]?"2":"";if(f[0]||f[1])a=new Hl(a,b.projectionName(),f,[b.getName(`x${g}`),b.getName(`y${g}`)])}return a}dependentFields(){return new Set(this.fields.filter(h.isString))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Xb(this.fields)} ${Xb(this.as)}`}assemble(){return{type:"geopoint",
projection:this.projection,fields:this.fields,as:this.as}}}class Ek extends jf{clone(){return new Ek(null,De(this.transform))}constructor(a,b){super(a);this.transform=b}dependentFields(){let a;return new Set([this.transform.impute,this.transform.key,...(null!=(a=this.transform.groupby)?a:[])])}producedFields(){return new Set([this.transform.impute])}processSequence(a){const {start:b=0,stop:e,step:f}=a;return{signal:`sequence(${[b,e,...(f?[f]:[])].join()})`}}static makeFromTransform(a,b){return new Ek(a,
b)}static makeFromEncoding(a,b){const e=b.encoding;var f=e.x;const g=e.y;if(Ia(f)&&Ia(g)){const p=f.impute?f:g.impute?g:void 0;if(void 0===p)return;f=f.impute?g:g.impute?f:void 0;const {method:B,value:P,frame:X,keyvals:ta}=p.impute;b=kh(b.mark,e);return new Ek(a,Object.assign({},{impute:p.field,key:f.field},B?{method:B}:{},void 0!==P?{value:P}:{},X?{frame:X}:{},void 0!==ta?{keyvals:ta}:{},b.length?{groupby:b}:{}))}return null}hash(){return`Impute ${Xb(this.transform)}`}assemble(){const {impute:a,
key:b,keyvals:e,method:f,groupby:g,value:p,frame:B=[null,null]}=this.transform;var P=Object,X=P.assign;var ta=e?{keyvals:void 0!==(null==e?void 0:e.stop)?this.processSequence(e):e}:{};P=X.call(P,{},{type:"impute",field:a,key:b},ta,{method:"value"},g?{groupby:g}:{},{value:f&&"value"!==f?null:p});return f&&"value"!==f?(X=Object.assign({},{type:"window",as:[`imputed_${a}_value`],ops:[f],fields:[a],frame:B,ignorePeers:!1},g?{groupby:g}:{}),[P,X,{type:"formula",expr:`datum.${a} === null ? datum.imputed_${a}_value : datum.${a}`,
as:a}]):[P]}}class pm extends jf{clone(){return new pm(null,De(this.transform))}constructor(a,b){super(a);this.transform=b;this.transform=De(b);let e;a=null!=(e=this.transform.as)?e:[void 0,void 0];let f,g;this.transform.as=[null!=(f=a[0])?f:b.on,null!=(g=a[1])?g:b.loess]}dependentFields(){let a;return new Set([this.transform.loess,this.transform.on,...(null!=(a=this.transform.groupby)?a:[])])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Xb(this.transform)}`}assemble(){var a=
this.transform,b=Object.assign({},a);const e=a.loess;a=a.on;b=(delete b.loess,delete b.on,b);return Object.assign({},{type:"loess",x:a,y:e},b)}}class Il extends jf{clone(){return new Il(null,De(this.transform),this.secondary)}constructor(a,b,e){super(a);this.transform=b;this.secondary=e}static make(a,b,e,f){const g=b.component.data.sources,{from:p}=e;var B=null;if("data"in p)B=pl(p.data,g),B||(B=new da(p.data),g.push(B)),f=b.getName(`lookup_${f}`),B=new Pg(B,f,nf.Lookup,b.component.data.outputNodeRefCounts),
b.component.data.outputNodes[f]=B;else if("param"in p){f=p.param;e=Object.assign({},{as:f},e);let P;try{P=b.getSelectionComponent(ra(f),f)}catch(X){throw Error(`Lookups can only be performed on selection parameters. "${f}" is a variable parameter.`);}B=P.materialized;if(!B)throw Error(`Cannot define and lookup the "${f}" selection in the same view. `+"Try moving the lookup into a second, layered view?");}return new Il(a,e,B.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?
h.array(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Xb({transform:this.transform,secondary:this.secondary})}`}assemble(){if(this.transform.from.fields)var a=Object.assign({},{values:this.transform.from.fields},this.transform.as?{as:h.array(this.transform.as)}:{});else a=this.transform.as,h.isString(a)||(K('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),a="_lookup"),a={as:[a]};return Object.assign({},
{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},a,this.transform.default?{default:this.transform.default}:{})}}class qm extends jf{clone(){return new qm(null,De(this.transform))}constructor(a,b){super(a);this.transform=b;this.transform=De(b);let e;a=null!=(e=this.transform.as)?e:[void 0,void 0];let f,g;this.transform.as=[null!=(f=a[0])?f:"prob",null!=(g=a[1])?g:"value"]}dependentFields(){let a;return new Set([this.transform.quantile,...(null!=(a=this.transform.groupby)?
a:[])])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Xb(this.transform)}`}assemble(){var a=this.transform,b=Object.assign({},a);a=a.quantile;b=(delete b.quantile,b);return Object.assign({},{type:"quantile",field:a},b)}}class rm extends jf{clone(){return new rm(null,De(this.transform))}constructor(a,b){super(a);this.transform=b;this.transform=De(b);let e;a=null!=(e=this.transform.as)?e:[void 0,void 0];let f,g;this.transform.as=[null!=(f=a[0])?f:b.on,null!=(g=
a[1])?g:b.regression]}dependentFields(){let a;return new Set([this.transform.regression,this.transform.on,...(null!=(a=this.transform.groupby)?a:[])])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Xb(this.transform)}`}assemble(){var a=this.transform,b=Object.assign({},a);const e=a.regression;a=a.on;b=(delete b.regression,delete b.on,b);return Object.assign({},{type:"regression",x:a,y:e},b)}}class tm extends jf{clone(){return new tm(null,De(this.transform))}constructor(a,
b){super(a);this.transform=b}addDimensions(a){let b;this.transform.groupby=Za((null!=(b=this.transform.groupby)?b:[]).concat(a),e=>e)}producedFields(){}dependentFields(){let a;return new Set([this.transform.pivot,this.transform.value,...(null!=(a=this.transform.groupby)?a:[])])}hash(){return`PivotTransform ${Xb(this.transform)}`}assemble(){const {pivot:a,value:b,groupby:e,limit:f,op:g}=this.transform;return Object.assign({},{type:"pivot",field:a,value:b},void 0!==f?{limit:f}:{},void 0!==g?{op:g}:
{},void 0!==e?{groupby:e}:{})}}class sm extends jf{clone(){return new sm(null,De(this.transform))}constructor(a,b){super(a);this.transform=b}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Xb(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}class Kl extends Em{constructor(a,b,e,f){super(a,"facet",b,e,f,a.resolve);R(this,"facet",void 0);R(this,"child",void 0);R(this,"children",void 0);this.child=fl(a.spec,this,this.getName("child"),
void 0,f);this.children=[this.child];this.facet=this.initFacet(a.facet)}initFacet(a){if(!qe(a))return{facet:this.initFacetFieldDef(a,"facet")};var b=sd(a);const e={};for(const f of b){if(!["row","column"].includes(f)){K(gd(f,"facet"));break}b=a[f];if(void 0===b.field){K(od(b,f));break}e[f]=this.initFacetFieldDef(b,f)}return e}initFacetFieldDef(a,b){a=hd(a,b);a.header?a.header=Lb(a.header):null===a.header&&(a.header=null);return a}channelHasField(a){return!!this.facet[a]}fieldDef(a){return this.facet[a]}parseData(){this.component.data=
jk(this);this.child.parseData()}parseLayoutSize(){Rk(this)}parseSelections(){this.child.parseSelections();this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders();for(const f of sh){var a=void 0,b=f;const {facet:g,config:p,child:B,component:P}=this;if(this.channelHasField(b)){const X=g[b];var e=hi("title",null,p,b);e=te(X,p,{allowDisabling:!0,includeDefault:void 0===e||!!e});B.component.layoutHeaders[b].title&&
(e=h.isArray(e)?e.join(", "):e,e+=` / ${B.component.layoutHeaders[b].title}`,B.component.layoutHeaders[b].title=null);const ta=hi("labelOrient",X.header,p,b),cb=null!==X.header?T(null==(a=X.header)?void 0:a.labels,p.header.labels,!0):!1;a=Cb(["bottom","right"],ta)?"footer":"header";P.layoutHeaders[b]={title:null!==X.header?e:null,facetFieldDef:X,[a]:"facet"===b?[]:[Qk(this,b,cb)]}}}Bl(this,"x");Bl(this,"y")}assembleSelectionTopLevelSignals(a){return this.child.assembleSelectionTopLevelSignals(a)}assembleSignals(){this.child.assembleSignals();
return[]}assembleSelectionData(a){return this.child.assembleSelectionData(a)}getHeaderLayoutMixins(){const a={};for(const f of sh)for(const g of bl){const p=this.component.layoutHeaders[f];var b=p[g],{facetFieldDef:e}=p;if(e&&(e=hi("titleOrient",e.header,this.config,f),["right","bottom"].includes(e))){e=Ag(f,e);let P;null!=(P=a).titleAnchor||(P.titleAnchor={});a.titleAnchor[e]="end"}let B;if(null==(B=b)?0:B[0]){b="row"===f?"height":"width";e="header"===g?"headerBand":"footerBand";if("facet"!==f&&
!this.child.component.layoutSize.get(b)){let P,X;null!=(P=a)[X=e]||(P[X]={});a[e][f]=.5}if(p.title){let P;null!=(P=a).offset||(P.offset={});a.offset["row"===f?"rowTitle":"columnTitle"]=10}}}return a}assembleDefaultLayout(){const {column:a,row:b}=this.facet,e=a?this.columnDistinctSignal():b?1:void 0;let f="all";b||"independent"!==this.component.resolve.scale.x?a||"independent"!==this.component.resolve.scale.y||(f="none"):f="none";return Object.assign({},this.getHeaderLayoutMixins(),e?{columns:e}:{},
{bounds:"full",align:f})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Kl))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(a){return this.parent&&this.parent instanceof Kl?Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:qc(this.facet.column,{prefix:"distinct"})}}}}:{},super.assembleGroup(a)):super.assembleGroup(a)}getCardinalityAggregateForChild(){const a=
[],b=[],e=[];if(this.child instanceof Kl){if(this.child.channelHasField("column")){var f=qc(this.child.facet.column);a.push(f);b.push("distinct");e.push(`distinct_${f}`)}}else for(f of Ph){var g=this.child.component.scales[f];if(g&&!g.merged){var p=g.get("type");g=g.get("range");ce(p)&&Qb(g)&&(p=Ui(this.child,f),(p=dk(p))?(a.push(p),b.push("distinct"),e.push(`distinct_${p}`)):K(Rb(f)))}}return{fields:a,ops:b,as:e}}assembleFacet(){const {name:a,data:b}=this.component.data.facetRoot,{row:e,column:f}=
this.facet,{fields:g,ops:p,as:B}=this.getCardinalityAggregateForChild(),P=[];for(var X of sh){var ta=this.facet[X];if(ta){P.push(qc(ta));const {bin:cb,sort:pb}=ta;vb(cb)&&P.push(qc(ta,{binSuffix:"end"}));if(Ae(pb)){const {field:gc,op:Pc="min"}=pb;ta=dl(ta,pb);e&&f?(g.push(ta),p.push("max")):(g.push(gc),p.push(Pc));B.push(ta)}else h.isArray(pb)&&(ta=Ri(ta,X),g.push(ta),p.push("max"),B.push(ta))}}X=!!e&&!!f;return Object.assign({},{name:a,data:b,groupby:P},X||0<g.length?{aggregate:Object.assign({},
X?{cross:X}:{},g.length?{fields:g,ops:p,as:B}:{})}:{})}facetSortFields(a){var {facet:b}=this;return(b=b[a])?Ae(b.sort)?[dl(b,b.sort,{expr:"datum"})]:h.isArray(b.sort)?[Ri(b,a,{expr:"datum"})]:[qc(b,{expr:"datum"})]:[]}facetSortOrder(a){const {facet:b}=this;return(a=b[a])?({sort:a}=a,[(Ae(a)?a.order:!h.isArray(a)&&a)||"ascending"]):[]}assembleLabelTitle(){const {facet:a,config:b}=this;if(a.facet)return jj(a.facet,"facet",b);const e={row:["top","bottom"],column:["left","right"]};for(const f of Bj)if(a[f]){let g;
const p=hi("labelOrient",null==(g=a[f])?void 0:g.header,b,f);if(e[f].includes(p))return jj(a[f],f,b)}}assembleMarks(){const {child:a}=this,b=Xj(this.component.data.facetRoot),e=a.assembleGroupEncodeEntry(!1),f=this.assembleLabelTitle()||a.assembleTitle(),g=a.assembleGroupStyle();return[Object.assign({},{name:this.getName("cell"),type:"group"},f?{title:f}:{},g?{style:g}:{},{from:{facet:this.assembleFacet()},sort:{field:sh.map(p=>this.facetSortFields(p)).flat(),order:sh.map(p=>this.facetSortOrder(p)).flat()}},
0<b.length?{data:b}:{},e?{encode:{update:e}}:{},a.assembleGroup($g(this,[])))]}getMapping(){return this.facet}}class Jm extends wm{constructor(a,b,e,f){super(a,"concat",b,e,f,a.resolve);R(this,"children",void 0);let g,p,B,P;"shared"!==(null==(g=a.resolve)?void 0:null==(p=g.axis)?void 0:p.x)&&"shared"!==(null==(B=a.resolve)?void 0:null==(P=B.axis)?void 0:P.y)||K("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).");this.children=this.getChildren(a).map((X,
ta)=>fl(X,this,this.getName(`concat_${ta}`),void 0,f))}parseData(){this.component.data=jk(this);for(const a of this.children)a.parseData()}parseSelections(){this.component.selection={};for(const a of this.children){a.parseSelections();for(const b of sd(a.component.selection))this.component.selection[b]=a.component.selection[b]}}parseMarkGroup(){for(const a of this.children)a.parseMarkGroup()}parseAxesAndHeaders(){for(const a of this.children)a.parseAxesAndHeaders()}getChildren(a){return"vconcat"in
a?a.vconcat:"hconcat"in a?a.hconcat:a.concat}parseLayoutSize(){Rk(this);const a=void 0===this.layout.columns?"height":"childHeight";Ak(this,1===this.layout.columns?"width":"childWidth");Ak(this,a)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(a){return this.children.reduce((b,e)=>e.assembleSelectionTopLevelSignals(b),a)}assembleSignals(){this.children.forEach(a=>a.assembleSignals());return[]}assembleLayoutSignals(){const a=ij(this);for(const b of this.children)a.push(...b.assembleLayoutSignals());
return a}assembleSelectionData(a){return this.children.reduce((b,e)=>e.assembleSelectionData(b),a)}assembleMarks(){return this.children.map(a=>{const b=a.assembleTitle(),e=a.assembleGroupStyle(),f=a.assembleGroupEncodeEntry(!1);return Object.assign({},{type:"group",name:a.getName("group")},b?{title:b}:{},e?{style:e}:{},f?{encode:{update:f}}:{},a.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){const a=this.layout.columns;return Object.assign({},null!=a?{columns:a}:{},{bounds:"full",
align:"each"})}}const Km=Object.assign({},{disable:1,gridScale:1,scale:1},uf,{labelExpr:1,encode:1}),Am=sd(Km);class Bm extends Kf{constructor(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;super();this.explicit=a;this.implicit=b;this.mainExtracted=e}clone(){return new Bm(De(this.explicit),De(this.implicit),this.mainExtracted)}hasAxisPart(a){if("axis"===a)return!0;
if("grid"===a||"title"===a)return!!this.get(a);a=this.get(a);return!(!1===a||null===a)}hasOrientSignalRef(){return Mb(this.explicit.orient)}}const Lm={bottom:"top",top:"bottom",left:"right",right:"left"},Im=new Set("grid translate format formatType orient labelExpr tickCount position tickMinStep".split(" ")),Jl={arc:{vgMark:"arc",encodeEntry:a=>Object.assign({},zf(a,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),se("x",a,{defaultPos:"mid"}),se("y",
a,{defaultPos:"mid"}),Pe(a,"radius"),Pe(a,"theta"))},area:{vgMark:"area",encodeEntry:a=>Object.assign({},zf(a,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),df("x",a,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===a.markDef.orient}),df("y",a,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===a.markDef.orient}),qf(a))},bar:{vgMark:"rect",encodeEntry:a=>Object.assign({},zf(a,{align:"ignore",baseline:"ignore",color:"include",
orient:"ignore",size:"ignore",theta:"ignore"}),Pe(a,"x"),Pe(a,"y"))},circle:{vgMark:"symbol",encodeEntry:a=>el(a,"circle")},geoshape:{vgMark:"shape",encodeEntry:a=>Object.assign({},zf(a,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:a=>{var {encoding:b}=a;b=b.shape;return[Object.assign({},{type:"geoshape",projection:a.projectionName()},b&&Ia(b)&&"geojson"===b.type?{field:qc(b,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:a=>
Object.assign({},zf(a,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),Pe(a,"x"),Pe(a,"y"),sa(a,"url"))},line:{vgMark:"line",encodeEntry:a=>Object.assign({},zf(a,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),se("x",a,{defaultPos:"mid"}),se("y",a,{defaultPos:"mid"}),$c("size",a,{vgChannel:"strokeWidth"}),qf(a))},point:{vgMark:"symbol",encodeEntry:a=>el(a)},rect:{vgMark:"rect",encodeEntry:a=>Object.assign({},
zf(a,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),Pe(a,"x"),Pe(a,"y"))},rule:{vgMark:"rule",encodeEntry:a=>{var {markDef:b}=a;b=b.orient;return a.encoding.x||a.encoding.y||a.encoding.latitude||a.encoding.longitude?Object.assign({},zf(a,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),df("x",a,{defaultPos:"horizontal"===b?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==b}),df("y",a,{defaultPos:"vertical"===
b?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==b}),$c("size",a,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:a=>el(a,"square")},text:{vgMark:"text",encodeEntry:a=>{var {config:b}=a,e=Object,f=e.assign,g=zf(a,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),p=se("x",a,{defaultPos:"mid"}),B=se("y",a,{defaultPos:"mid"}),P=sa(a),X=$c("size",a,{vgChannel:"fontSize"}),ta=$c("angle",a);var cb=void 0===Zb("align",
a.markDef,b)?"center":void 0;cb=hg("align",cb);b=void 0===Zb("baseline",a.markDef,b)?"middle":void 0;return f.call(e,{},g,p,B,P,X,ta,cb,hg("baseline",b),se("radius",a,{defaultPos:null}),se("theta",a,{defaultPos:null}))}},tick:{vgMark:"rect",encodeEntry:a=>{const {config:b,markDef:e}=a;var f=e.orient;const g="horizontal"===f?"width":"height";f="horizontal"===f?"height":"width";var p=Object,B=p.assign,P=zf(a,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),
X=se("x",a,{defaultPos:"mid",vgChannel:"xc"}),ta=se("y",a,{defaultPos:"mid",vgChannel:"yc"});{const {config:Pc,markDef:kc}=a;var {orient:cb}=kc;var pb="horizontal"===cb?"width":"height";cb=a.getScaleComponent("horizontal"===cb?"x":"y");var gc;const Nc=null!=(gc=Zb("size",kc,Pc,{vgChannel:pb}))?gc:Pc.tick.bandSize;pb=void 0!==Nc?Nc:(gc=cb?cb.get("range"):void 0)&&Qb(gc)&&h.isNumber(gc.step)?3*gc.step/4:3*Wf(Pc.view,pb)/4}return B.call(p,{},P,X,ta,$c("size",a,{defaultValue:pb,vgChannel:g}),{[f]:Ua(Zb("thickness",
e,b))})}},trail:{vgMark:"trail",encodeEntry:a=>Object.assign({},zf(a,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),se("x",a,{defaultPos:"mid"}),se("y",a,{defaultPos:"mid"}),$c("size",a),qf(a))}};class Dm extends Em{constructor(a,b,e){let f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},g=4<arguments.length?arguments[4]:void 0;super(a,"unit",b,e,g,void 0,hf(a)?a.view:void 0);R(this,"markDef",void 0);R(this,"encoding",void 0);R(this,"specifiedScales",
{});R(this,"stack",void 0);R(this,"specifiedAxes",{});R(this,"specifiedLegends",{});R(this,"specifiedProjection",{});R(this,"selection",[]);R(this,"children",[]);const p=id(a.mark)?Object.assign({},a.mark):{type:a.mark},B=p.type;void 0===p.filled&&(p.filled=Sh(p,g,{graticule:a.data&&"graticule"in a.data}));const P=this.encoding=Ug(a.encoding||{},B,p.filled,g);this.markDef=jg(p,P,g);this.size=Rl({encoding:P,size:hf(a)?Object.assign({},f,a.width?{width:a.width}:{},a.height?{height:a.height}:{}):f});
this.stack=vh(this.markDef,P);this.specifiedScales=this.initScales(B,P);this.specifiedAxes=this.initAxes(P);this.specifiedLegends=this.initLegends(P);this.specifiedProjection=a.projection;let X;this.selection=(null!=(X=a.params)?X:[]).filter(ta=>Zd(ta))}get hasProjection(){const {encoding:a}=this,b=this.mark===qi,e=a&&Pl.some(f=>yc(a[f]));return b||e}scaleDomain(a){return(a=this.specifiedScales[a])?a.domain:void 0}axis(a){return this.specifiedAxes[a]}legend(a){return this.specifiedLegends[a]}initScales(a,
b){return Bk.reduce((e,f)=>{const g=Fe(b[f]);if(g){let p;e[f]=this.initScale(null!=(p=g.scale)?p:{})}return e},{})}initScale(a){const {domain:b,range:e}=a;a=Lb(a);h.isArray(b)&&(a.domain=b.map(qa));h.isArray(e)&&(a.range=e.map(qa));return a}initAxes(a){return Ph.reduce((b,e)=>{var f=a[e];if(yc(f)||"x"===e&&yc(a.x2)||"y"===e&&yc(a.y2))f=yc(f)?f.axis:void 0,b[e]=f?this.initAxis(Object.assign({},f)):f;return b},{})}initAxis(a){var b=sd(a);const e={};for(const f of b)b=a[f],e[f]=bg(b)?ed(b):qa(b);return e}initLegends(a){return hl.reduce((b,
e)=>{var f=Fe(a[e]),g;if(g=f)a:{switch(e){case "color":case "fill":case "stroke":case "size":case "shape":case "opacity":case "strokeWidth":case "strokeDash":g=!0;break a;case "fillOpacity":case "strokeOpacity":case "angle":g=!1;break a}g=void 0}g&&(f=f.legend,b[e]=f?Lb(f):f);return b},{})}parseData(){this.component.data=jk(this)}parseLayoutSize(){const {size:a,component:b}=this;for(const f of Ph){const g=N(f);if(a[g]){var e=a[g];b.layoutSize.set(g,Ge(e)?"step":e,!0)}else e=Pk(this,g),b.layoutSize.set(g,
e,!1)}}parseSelections(){var a=this.component;{var b=this.selection;var e={};const p=this.config.selection;if(b&&b.length)for(const B of b){b=ra(B.name);var f=B.select,g=h.isString(f)?f:f.type;f=h.isObject(f)?De(f):{type:g};const P=p[g];for(const X in P)if("fields"!==X&&"encodings"!==X&&("mark"===X&&(f[X]=Object.assign({},P[X],f[X])),void 0===f[X]||!0===f[X])){let ta;f[X]=De(null!=(ta=P[X])?ta:f[X])}b=e[b]=Object.assign({},f,{name:b,type:g,init:B.value,bind:B.bind,events:h.isString(f.on)?h.parseSelector(f.on,
"scope"):h.array(De(f.on))});g=De(B);for(const X of dj)X.defined(b)&&X.parse&&X.parse(this,b,g)}}a.selection=e}parseMarkGroup(){this.component.mark=ql(this)}parseAxesAndHeaders(){this.component.axes=rl(this)}assembleSelectionTopLevelSignals(a){return Jh(this,a)}assembleSignals(){var a=[...Oi(this)];var b=[];var e;for(const f of kg(null!=(e=this.component.selection)?e:{})){e=f.name;let g=`${e}${"_tuple"}, ${"global"===f.resolve?"true":`{unit: ${ag(this)}}`}`;for(const p of dj)p.defined(f)&&(p.signals&&
(b=p.signals(this,f,b)),p.modifyExpr&&(g=p.modifyExpr(this,f,g)));b.push({name:e+"_modify",on:[{events:{signal:f.name+"_tuple"},update:`modify(${h.stringValue(f.name+"_store")}, ${g})`}]})}b=wa(b);return[...a,...b]}assembleSelectionData(a){return ah(this,a)}assembleLayout(){return null}assembleLayoutSignals(){return ij(this)}assembleMarks(){let a,b=null!=(a=this.component.mark)?a:[];this.parent&&Ti(this.parent)||(b=D(this,b));return b.map(this.correctDataNames)}assembleGroupStyle(){const {style:a}=
this.view||{};return void 0!==a?a:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(a){return Re(this.encoding,a)}fieldDef(a){return xe(this.encoding[a])}typedFieldDef(a){a=this.fieldDef(a);return Rc(a)?a:null}}class Cm extends wm{constructor(a,b,e,f,g){super(a,"layer",b,e,g,a.resolve,a.view);R(this,"children",void 0);const p=Object.assign({},f,a.width?{width:a.width}:{},a.height?{height:a.height}:{});this.children=
a.layer.map((B,P)=>{if("layer"in B)return new Cm(B,this,this.getName(`layer_${P}`),p,g);if(gf(B))return new Dm(B,this,this.getName(`layer_${P}`),p,g);throw Error(va(B));})}parseData(){this.component.data=jk(this);for(const a of this.children)a.parseData()}parseLayoutSize(){Rk(this);Ak(this,"width");Ak(this,"height")}parseSelections(){this.component.selection={};for(const a of this.children){a.parseSelections();for(const b of sd(a.component.selection))this.component.selection[b]=a.component.selection[b]}}parseMarkGroup(){for(const a of this.children)a.parseMarkGroup()}parseAxesAndHeaders(){const {axes:a,
resolve:b}=this.component,e={top:0,bottom:0,right:0,left:0};for(var f of this.children){f.parseAxesAndHeaders();for(const g of sd(f.component.axes))b.axis[g]=n(this.component.resolve,g),"shared"===b.axis[g]&&(a[g]=fm(a[g],f.component.axes[g]),a[g]||(b.axis[g]="independent",delete a[g]))}for(const g of Ph){for(const p of this.children)if(p.component.axes[g]){if("independent"===b.axis[g]){let B;a[g]=(null!=(B=a[g])?B:[]).concat(p.component.axes[g]);for(const P of p.component.axes[g]){const {value:X,
explicit:ta}=P.getWithExplicit("orient");Mb(X)||(0<e[X]&&!ta&&(f=Lm[X],e[X]>e[f]&&P.set("orient",f,!1)),e[X]++)}}delete p.component.axes[g]}if("independent"===b.axis[g]&&a[g]&&1<a[g].length)for(const p of(a[g]||[]).entries()){const [B,P]=p;0<B&&P.get("grid")&&!P.explicit.grid&&(P.implicit.grid=!1)}}}assembleSelectionTopLevelSignals(a){return this.children.reduce((b,e)=>e.assembleSelectionTopLevelSignals(b),a)}assembleSignals(){return this.children.reduce((a,b)=>a.concat(b.assembleSignals()),Oi(this))}assembleLayoutSignals(){return this.children.reduce((a,
b)=>a.concat(b.assembleLayoutSignals()),ij(this))}assembleSelectionData(a){return this.children.reduce((b,e)=>e.assembleSelectionData(b),a)}assembleGroupStyle(){var a=new Set;for(const b of this.children)for(const e of h.array(b.assembleGroupStyle()))a.add(e);a=Array.from(a);return 1<a.length?a:1===a.length?a[0]:void 0}assembleTitle(){let a=super.assembleTitle();if(a)return a;for(const b of this.children)if(a=b.assembleTitle())return a}assembleLayout(){return null}assembleMarks(){return Y(this,this.children.flatMap(a=>
a.assembleMarks()))}assembleLegends(){return this.children.reduce((a,b)=>a.concat(b.assembleLegends()),sc(this))}}u.accessPathDepth=eb;u.accessPathWithDatum=Va;u.compile=function(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};b.logger&&(Ai=b.logger);b.fieldTitle&&(Cf=b.fieldTitle);try{const cb=xg(h.mergeConfig(b.config,a.config)),pb=vi(a,cb),gc=fl(pb,null,"",void 0,cb);gc.parse();var e=gc.component.data,f=gc;wd(e.sources);let Pc=0,kc=0;for(var g=0;5>g&&Ed(e,f,!0);g++)Pc++;e.sources.map(Xh);
for(g=0;5>g&&Ed(e,f,!1);g++)kc++;wd(e.sources);5===Math.max(Pc,kc)&&K("Maximum optimization runs(5) reached.");var p=pb.autosize;e=cb;f=gc;const Nc=f.component.layoutSize.get("width"),Zc=f.component.layoutSize.get("height");void 0===p?(p={type:"pad"},f.hasAxisOrientSignalRef()&&(p.resize=!0)):h.isString(p)&&(p={type:p});var B;if(B=Nc&&Zc){var P=p.type;B="fit"===P||"fit-x"===P||"fit-y"===P}if(B)if("step"===Nc&&"step"===Zc)K(kb()),p.type="pad";else if("step"===Nc||"step"===Zc){P="step"===Nc?"width":
"height";K(kb(V(P)));B=p;var X=(P="width"===P?"height":"width",`fit-${V(P)}`);B.type=X}var ta=Object.assign({},1===sd(p).length&&p.type?"pad"===p.type?{}:{autosize:p.type}:{autosize:p},nh(e,!1),nh(a,!0));return{spec:Tl(gc,ta,a.datasets,a.usermeta),normalized:pb}}finally{b.logger&&(Ai=Al),b.fieldTitle&&(Cf=vj)}};u.contains=Cb;u.deepEqual=pa;u.deleteNestedProperty=xa;u.duplicate=De;u.entries=Gi;u.every=jc;u.fieldIntersection=xb;u.flatAccessWithDatum=Ga;u.getFirstDefined=T;u.hasIntersection=ub;u.hash=
Xb;u.internalField=ca;u.isBoolean=ec;u.isEmpty=ib;u.isEqual=function(a,b){const e=sd(a),f=sd(b);if(e.length!==f.length)return!1;for(const g of e)if(a[g]!==b[g])return!1;return!0};u.isInternalField=ha;u.isNullOrFalse=mc;u.isNumeric=na;u.keys=sd;u.logicalExpr=fa;u.mergeDeep=Ba;u.never=zb;u.normalize=vi;u.normalizeAngle=La;u.omit=ac;u.pick=Yb;u.prefixGenerator=sb;u.removePathFromField=Pb;u.replaceAll=tb;u.replacePathInField=bb;u.resetIdCounter=function(){Lk=42};u.setEqual=wb;u.some=Ub;u.stringify=m;
u.titleCase=Ra;u.unique=Za;u.uniqueId=Z;u.vals=kg;u.varName=ra;u.version="5.16.3"})};
shadow$provide[55]=function(Eb,ob,Fc,Xa){function u(){throw Error("setTimeout has not been defined");}function h(){throw Error("clearTimeout has not been defined");}function ia(wb){if(mc===setTimeout)return setTimeout(wb,0);if((mc===u||!mc)&&setTimeout)return mc=setTimeout,setTimeout(wb,0);try{return mc(wb,0)}catch(ub){try{return mc.call(null,wb,0)}catch(sb){return mc.call(this,wb,0)}}}function ab(wb){if(Cb===clearTimeout)return clearTimeout(wb);if((Cb===h||!Cb)&&clearTimeout)return Cb=clearTimeout,
clearTimeout(wb);try{return Cb(wb)}catch(ub){try{return Cb.call(null,wb)}catch(sb){return Cb.call(this,wb)}}}function zb(){jc&&Ba&&(jc=!1,Ba.length?Ub=Ba.concat(Ub):Za=-1,Ub.length&&Yb())}function Yb(){if(!jc){var wb=ia(zb);jc=!0;for(var ub=Ub.length;ub;){Ba=Ub;for(Ub=[];++Za<ub;)Ba&&Ba[Za].run();Za=-1;ub=Ub.length}Ba=null;jc=!1;ab(wb)}}function ac(wb,ub){this.fun=wb;this.array=ub}function Xb(){}Eb=Fc.exports={};try{var mc="function"===typeof setTimeout?setTimeout:u}catch(wb){mc=u}try{var Cb="function"===
typeof clearTimeout?clearTimeout:h}catch(wb){Cb=h}var Ub=[],jc=!1,Ba,Za=-1;Eb.nextTick=function(wb){var ub=Array(arguments.length-1);if(1<arguments.length)for(var sb=1;sb<arguments.length;sb++)ub[sb-1]=arguments[sb];Ub.push(new ac(wb,ub));1!==Ub.length||jc||ia(Yb)};ac.prototype.run=function(){this.fun.apply(null,this.array)};Eb.title="browser";Eb.browser=!0;Eb.env={};Eb.argv=[];Eb.version="";Eb.versions={};Eb.on=Xb;Eb.addListener=Xb;Eb.once=Xb;Eb.off=Xb;Eb.removeListener=Xb;Eb.removeAllListeners=
Xb;Eb.emit=Xb;Eb.prependListener=Xb;Eb.prependOnceListener=Xb;Eb.listeners=function(wb){return[]};Eb.binding=function(wb){throw Error("process.binding is not supported");};Eb.cwd=function(){return"/"};Eb.chdir=function(wb){throw Error("process.chdir is not supported");};Eb.umask=function(){return 0}};
shadow$provide[56]=function(Eb,ob,Fc,Xa){var u=ob(55);(function(h,ia){"object"===typeof Xa&&"undefined"!==typeof Fc?Fc.exports=ia(ob(53),ob(54)):"function"===typeof define&&define.amd?define(["vega","vega-lite"],ia):(h="undefined"!==typeof globalThis?globalThis:h||self,h.vegaEmbed=ia(h.vega,h.vegaLite))})(this,function(h,ia){function ab(F){if(F&&F.__esModule)return F;var aa=Object.create(null);F&&Object.keys(F).forEach(function(Fa){if("default"!==Fa){var fb=Object.getOwnPropertyDescriptor(F,Fa);Object.defineProperty(aa,
Fa,fb.get?fb:{enumerable:!0,get:function(){return F[Fa]}})}});aa["default"]=F;return Object.freeze(aa)}function zb(F){if(Array.isArray(F)){F=Array(F.length);for(var aa=0;aa<F.length;aa++)F[aa]=""+aa;return F}if(Object.keys)return Object.keys(F);aa=[];for(var Fa in F)A.call(F,Fa)&&aa.push(Fa);return aa}function Yb(F){switch(typeof F){case "object":return JSON.parse(JSON.stringify(F));case "undefined":return null;default:return F}}function ac(F){for(var aa=0,Fa=F.length,fb;aa<Fa;)if(fb=F.charCodeAt(aa),
48<=fb&&57>=fb)aa++;else return!1;return!0}function Xb(F){return-1===F.indexOf("/")&&-1===F.indexOf("~")?F:F.replace(/~/g,"~0").replace(/\//g,"~1")}function mc(F){return F.replace(/~1/g,"/").replace(/~0/g,"~")}function Cb(F){if(void 0===F)return!0;if(F)if(Array.isArray(F))for(var aa=0,Fa=F.length;aa<Fa;aa++){if(Cb(F[aa]))return!0}else if("object"===typeof F){aa=zb(F);Fa=aa.length;for(var fb=0;fb<Fa;fb++)if(Cb(F[aa[fb]]))return!0}return!1}function Ub(F,aa){F=[F];for(var Fa in aa){var fb="object"===
typeof aa[Fa]?JSON.stringify(aa[Fa],null,2):aa[Fa];"undefined"!==typeof fb&&F.push(Fa+": "+fb)}return F.join("\n")}function jc(F,aa){if(""==aa)return F;aa={op:"_get",path:aa};Ba(F,aa);return aa.value}function Ba(F,aa,Fa,fb,Gb,pc){void 0===Fa&&(Fa=!1);void 0===fb&&(fb=!0);void 0===Gb&&(Gb=!0);void 0===pc&&(pc=0);Fa&&("function"==typeof Fa?Fa(aa,0,F,aa.path):wb(aa,0));if(""===aa.path){Gb={newDocument:F};if("add"===aa.op)return Gb.newDocument=aa.value,Gb;if("replace"===aa.op)return Gb.newDocument=aa.value,
Gb.removed=F,Gb;if("move"===aa.op||"copy"===aa.op)return Gb.newDocument=jc(F,aa.from),"move"===aa.op&&(Gb.removed=F),Gb;if("test"===aa.op){Gb.test=sb(F,aa.value);if(!1===Gb.test)throw new N("Test operation failed","TEST_OPERATION_FAILED",pc,aa,F);Gb.newDocument=F;return Gb}if("remove"===aa.op)return Gb.removed=F,Gb.newDocument=null,Gb;if("_get"===aa.op)return aa.value=F,Gb;if(Fa)throw new N("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",pc,aa,F);return Gb}fb||
(F=Yb(F));fb=(aa.path||"").split("/");var Vb=F,Ec=1,ld=fb.length,ad=void 0,Oc,Nd;for(Nd="function"==typeof Fa?Fa:wb;;){(Oc=fb[Ec])&&-1!=Oc.indexOf("~")&&(Oc=mc(Oc));if(Gb&&("__proto__"==Oc||"prototype"==Oc&&0<Ec&&"constructor"==fb[Ec-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");Fa&&
void 0===ad&&(void 0===Vb[Oc]?ad=fb.slice(0,Ec).join("/"):Ec==ld-1&&(ad=aa.path),void 0!==ad&&Nd(aa,0,F,ad));Ec++;if(Array.isArray(Vb)){if("-"===Oc)Oc=Vb.length;else{if(Fa&&!ac(Oc))throw new N("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",pc,aa,F);ac(Oc)&&(Oc=~~Oc)}if(Ec>=ld){if(Fa&&"add"===aa.op&&Oc>Vb.length)throw new N("The specified index MUST NOT be greater than the number of elements in the array",
"OPERATION_VALUE_OUT_OF_BOUNDS",pc,aa,F);Gb=C[aa.op].call(aa,Vb,Oc,F);if(!1===Gb.test)throw new N("Test operation failed","TEST_OPERATION_FAILED",pc,aa,F);return Gb}}else if(Ec>=ld){Gb=z[aa.op].call(aa,Vb,Oc,F);if(!1===Gb.test)throw new N("Test operation failed","TEST_OPERATION_FAILED",pc,aa,F);return Gb}Vb=Vb[Oc];if(Fa&&Ec<ld&&(!Vb||"object"!==typeof Vb))throw new N("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",pc,aa,F);}}function Za(F,aa,Fa,fb,Gb){void 0===fb&&(fb=
!0);void 0===Gb&&(Gb=!0);if(Fa&&!Array.isArray(aa))throw new N("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");fb||(F=Yb(F));fb=Array(aa.length);for(var pc=0,Vb=aa.length;pc<Vb;pc++)fb[pc]=Ba(F,aa[pc],Fa,!0,Gb,pc),F=fb[pc].newDocument;fb.newDocument=F;return fb}function wb(F,aa,Fa,fb){if("object"!==typeof F||null===F||Array.isArray(F))throw new N("Operation is not an object","OPERATION_NOT_AN_OBJECT",aa,F,Fa);if(z[F.op]){if("string"!==typeof F.path)throw new N("Operation `path` property is not a string",
"OPERATION_PATH_INVALID",aa,F,Fa);if(0!==F.path.indexOf("/")&&0<F.path.length)throw new N('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",aa,F,Fa);if("move"!==F.op&&"copy"!==F.op||"string"===typeof F.from)if("add"!==F.op&&"replace"!==F.op&&"test"!==F.op||void 0!==F.value){if(("add"===F.op||"replace"===F.op||"test"===F.op)&&Cb(F.value))throw new N("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",
aa,F,Fa);if(Fa)if("add"==F.op){var Gb=F.path.split("/").length;fb=fb.split("/").length;if(Gb!==fb+1&&Gb!==fb)throw new N("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",aa,F,Fa);}else if("replace"===F.op||"remove"===F.op||"_get"===F.op){if(F.path!==fb)throw new N("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",aa,F,Fa);}else if(("move"===F.op||"copy"===F.op)&&(Gb=ub([{op:"_get",path:F.from,value:void 0}],Fa))&&"OPERATION_PATH_UNRESOLVABLE"===
Gb.name)throw new N("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",aa,F,Fa);}else throw new N("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",aa,F,Fa);else throw new N("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",aa,F,Fa);}else throw new N("Operation `op` property is not one of operations defined in RFC-6902",
"OPERATION_OP_INVALID",aa,F,Fa);}function ub(F,aa,Fa){try{if(!Array.isArray(F))throw new N("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(aa)Za(Yb(aa),Yb(F),Fa||!0);else{Fa=Fa||wb;for(var fb=0;fb<F.length;fb++)Fa(F[fb],fb,aa,void 0)}}catch(Gb){if(Gb instanceof N)return Gb;throw Gb;}}function sb(F,aa){if(F===aa)return!0;if(F&&aa&&"object"==typeof F&&"object"==typeof aa){var Fa=Array.isArray(F),fb=Array.isArray(aa);if(Fa&&fb){var Gb=F.length;if(Gb!=aa.length)return!1;for(Fa=Gb;0!==Fa--;)if(!sb(F[Fa],
aa[Fa]))return!1;return!0}if(Fa!=fb)return!1;fb=Object.keys(F);Gb=fb.length;if(Gb!==Object.keys(aa).length)return!1;for(Fa=Gb;0!==Fa--;)if(!aa.hasOwnProperty(fb[Fa]))return!1;for(Fa=Gb;0!==Fa--;)if(Gb=fb[Fa],!sb(F[Gb],aa[Gb]))return!1;return!0}return F!==F&&aa!==aa}function xb(F,aa){void 0===aa&&(aa=!1);var Fa=V.get(F.object);ib(Fa.value,F.object,F.patches,"",aa);F.patches.length&&Za(Fa.value,F.patches);aa=F.patches;0<aa.length&&(F.patches=[],F.callback&&F.callback(aa));return aa}function ib(F,aa,
Fa,fb,Gb){if(aa!==F){"function"===typeof aa.toJSON&&(aa=aa.toJSON());for(var pc=zb(aa),Vb=zb(F),Ec=!1,ld=Vb.length-1;0<=ld;ld--){var ad=Vb[ld],Oc=F[ad];if(!A.call(aa,ad)||void 0===aa[ad]&&void 0!==Oc&&!1===Array.isArray(aa))Array.isArray(F)===Array.isArray(aa)?(Gb&&Fa.push({op:"test",path:fb+"/"+Xb(ad),value:Yb(Oc)}),Fa.push({op:"remove",path:fb+"/"+Xb(ad)}),Ec=!0):(Gb&&Fa.push({op:"test",path:fb,value:F}),Fa.push({op:"replace",path:fb,value:aa}));else{var Nd=aa[ad];"object"==typeof Oc&&null!=Oc&&
"object"==typeof Nd&&null!=Nd&&Array.isArray(Oc)===Array.isArray(Nd)?ib(Oc,Nd,Fa,fb+"/"+Xb(ad),Gb):Oc!==Nd&&(Gb&&Fa.push({op:"test",path:fb+"/"+Xb(ad),value:Yb(Oc)}),Fa.push({op:"replace",path:fb+"/"+Xb(ad),value:Yb(Nd)}))}}if(Ec||pc.length!=Vb.length)for(ld=0;ld<pc.length;ld++)ad=pc[ld],A.call(F,ad)||void 0===aa[ad]||Fa.push({op:"add",path:fb+"/"+Xb(ad),value:Yb(aa[ad])})}}function ec(F){var aa=this;aa instanceof ec||(aa=new ec);aa.tail=null;aa.head=null;aa.length=0;if(F&&"function"===typeof F.forEach)F.forEach(function(Gb){aa.push(Gb)});
else if(0<arguments.length)for(var Fa=0,fb=arguments.length;Fa<fb;Fa++)aa.push(arguments[Fa]);return aa}function ra(F,aa,Fa,fb){if(!(this instanceof ra))return new ra(F,aa,Fa,fb);this.list=fb;this.value=F;aa?(aa.next=this,this.prev=aa):this.prev=null;Fa?(Fa.prev=this,this.next=Fa):this.next=null}function fa(){if(Sc)return Gc;Sc=1;const F=Symbol("SemVer ANY");class aa{static get ANY(){return F}constructor(ad,Oc){Oc=Fa(Oc);if(ad instanceof aa){if(ad.loose===!!Oc.loose)return ad;ad=ad.value}Vb("comparator",
ad,Oc);this.options=Oc;this.loose=!!Oc.loose;this.parse(ad);this.value=this.semver===F?"":this.operator+this.semver.version;Vb("comp",this)}parse(ad){const Oc=ad.match(this.options.loose?fb[Gb.COMPARATORLOOSE]:fb[Gb.COMPARATOR]);if(!Oc)throw new TypeError("Invalid comparator: ".concat(ad));this.operator=void 0!==Oc[1]?Oc[1]:"";"\x3d"===this.operator&&(this.operator="");this.semver=Oc[2]?new Ec(Oc[2],this.options.loose):F}toString(){return this.value}test(ad){Vb("Comparator.test",ad,this.options.loose);
if(this.semver===F||ad===F)return!0;if("string"===typeof ad)try{ad=new Ec(ad,this.options)}catch(Oc){return!1}return pc(ad,this.operator,this.semver,this.options)}intersects(ad,Oc){if(!(ad instanceof aa))throw new TypeError("a Comparator is required");Oc&&"object"===typeof Oc||(Oc={loose:!!Oc,includePrerelease:!1});if(""===this.operator)return""===this.value?!0:(new ld(ad.value,Oc)).test(this.value);if(""===ad.operator)return""===ad.value?!0:(new ld(this.value,Oc)).test(ad.semver);const Nd=("\x3e\x3d"===
this.operator||"\x3e"===this.operator)&&("\x3e\x3d"===ad.operator||"\x3e"===ad.operator),ce=("\x3c\x3d"===this.operator||"\x3c"===this.operator)&&("\x3c\x3d"===ad.operator||"\x3c"===ad.operator),Kd=this.semver.version===ad.semver.version,Md=("\x3e\x3d"===this.operator||"\x3c\x3d"===this.operator)&&("\x3e\x3d"===ad.operator||"\x3c\x3d"===ad.operator),Wd=pc(this.semver,"\x3c",ad.semver,Oc)&&("\x3e\x3d"===this.operator||"\x3e"===this.operator)&&("\x3c\x3d"===ad.operator||"\x3c"===ad.operator);ad=pc(this.semver,
"\x3e",ad.semver,Oc)&&("\x3c\x3d"===this.operator||"\x3c"===this.operator)&&("\x3e\x3d"===ad.operator||"\x3e"===ad.operator);return Nd||ce||Kd&&Md||Wd||ad}}Gc=aa;const Fa=Zb,{re:fb,t:Gb}=ic.exports,pc=Cc,Vb=jd,Ec=Rb,ld=xa();return Gc}function xa(){if(od)return vd;od=1;class F{constructor(vc,Hc){Hc=Fa(Hc);if(vc instanceof F)return vc.loose===!!Hc.loose&&vc.includePrerelease===!!Hc.includePrerelease?vc:new F(vc.raw,Hc);if(vc instanceof fb)return this.raw=vc.value,this.set=[[vc]],this.format(),this;
this.options=Hc;this.loose=!!Hc.loose;this.includePrerelease=!!Hc.includePrerelease;this.raw=vc;this.set=vc.split("||").map(Jc=>this.parseRange(Jc.trim())).filter(Jc=>Jc.length);if(!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(vc));if(1<this.set.length)if(vc=this.set[0],this.set=this.set.filter(Jc=>"\x3c0.0.0-0"!==Jc[0].value),0===this.set.length)this.set=[vc];else if(1<this.set.length)for(const Jc of this.set)if(1===Jc.length&&""===Jc[0].value){this.set=[Jc];break}this.format()}format(){return this.range=
this.set.map(vc=>vc.join(" ").trim()).join("||").trim()}toString(){return this.range}parseRange(vc){vc=vc.trim();var Hc=Object.keys(this.options).join(",");Hc="parseRange:".concat(Hc,":").concat(vc);var Jc=aa.get(Hc);if(Jc)return Jc;Jc=this.options.loose;vc=vc.replace(Jc?Vb[Ec.HYPHENRANGELOOSE]:Vb[Ec.HYPHENRANGE],id(this.options.includePrerelease));Gb("hyphen replace",vc);vc=vc.replace(Vb[Ec.COMPARATORTRIM],ld);Gb("comparator trim",vc);vc=vc.replace(Vb[Ec.TILDETRIM],ad);vc=vc.replace(Vb[Ec.CARETTRIM],
Oc);vc=vc.split(/\s+/).join(" ");vc=vc.split(" ").map(Tc=>{var qd=Tc;Tc=this.options;Gb("comp",qd,Tc);qd=Wd(qd,Tc);Gb("caret",qd);qd=Kd(qd,Tc);Gb("tildes",qd);qd=Oa(qd,Tc);Gb("xrange",qd);Gb("replaceStars",qd,Tc);qd=qd.trim().replace(Vb[Ec.STAR],"");Gb("stars",qd);return qd}).join(" ").split(/\s+/).map(Tc=>{var qd=this.options;Gb("replaceGTE0",Tc,qd);return Tc.trim().replace(Vb[qd.includePrerelease?Ec.GTE0PRE:Ec.GTE0],"")});Jc&&(vc=vc.filter(Tc=>{Gb("loose invalid filter",Tc,this.options);return!!Tc.match(Vb[Ec.COMPARATORLOOSE])}));
Gb("range list",vc);Jc=new Map;vc=vc.map(Tc=>new fb(Tc,this.options));for(var Yc of vc){if("\x3c0.0.0-0"===Yc.value)return[Yc];Jc.set(Yc.value,Yc)}1<Jc.size&&Jc.has("")&&Jc.delete("");Yc=[...Jc.values()];aa.set(Hc,Yc);return Yc}intersects(vc,Hc){if(!(vc instanceof F))throw new TypeError("a Range is required");return this.set.some(Jc=>Nd(Jc,Hc)&&vc.set.some(Yc=>Nd(Yc,Hc)&&Jc.every(Tc=>Yc.every(qd=>Tc.intersects(qd,Hc)))))}test(vc){if(!vc)return!1;if("string"===typeof vc)try{vc=new pc(vc,this.options)}catch(qd){return!1}for(let qd=
0;qd<this.set.length;qd++){a:{var Hc=this.set[qd];var Jc=vc,Yc=this.options;for(var Tc=0;Tc<Hc.length;Tc++)if(!Hc[Tc].test(Jc)){Hc=!1;break a}if(Jc.prerelease.length&&!Yc.includePrerelease){for(Yc=0;Yc<Hc.length;Yc++)if(Gb(Hc[Yc].semver),Hc[Yc].semver!==fb.ANY&&0<Hc[Yc].semver.prerelease.length&&(Tc=Hc[Yc].semver,Tc.major===Jc.major&&Tc.minor===Jc.minor&&Tc.patch===Jc.patch)){Hc=!0;break a}Hc=!1}else Hc=!0}if(Hc)return!0}return!1}}vd=F;const aa=new Hb({max:1E3}),Fa=Zb,fb=fa(),Gb=jd,pc=Rb,{re:Vb,t:Ec,
comparatorTrimReplace:ld,tildeTrimReplace:ad,caretTrimReplace:Oc}=ic.exports,Nd=(vc,Hc)=>{let Jc=!0;vc=vc.slice();let Yc=vc.pop();for(;Jc&&vc.length;)Jc=vc.every(Tc=>Yc.intersects(Tc,Hc)),Yc=vc.pop();return Jc},ce=vc=>!vc||"x"===vc.toLowerCase()||"*"===vc,Kd=(vc,Hc)=>vc.trim().split(/\s+/).map(Jc=>Md(Jc,Hc)).join(" "),Md=(vc,Hc)=>vc.replace(Hc.loose?Vb[Ec.TILDELOOSE]:Vb[Ec.TILDE],(Jc,Yc,Tc,qd,bd)=>{Gb("tilde",vc,Jc,Yc,Tc,qd,bd);ce(Yc)?Jc="":ce(Tc)?Jc="\x3e\x3d".concat(Yc,".0.0 \x3c").concat(+Yc+1,
".0.0-0"):ce(qd)?Jc="\x3e\x3d".concat(Yc,".").concat(Tc,".0 \x3c").concat(Yc,".").concat(+Tc+1,".0-0"):bd?(Gb("replaceTilde pr",bd),Jc="\x3e\x3d".concat(Yc,".").concat(Tc,".").concat(qd,"-").concat(bd," \x3c").concat(Yc,".").concat(+Tc+1,".0-0")):Jc="\x3e\x3d".concat(Yc,".").concat(Tc,".").concat(qd," \x3c").concat(Yc,".").concat(+Tc+1,".0-0");Gb("tilde return",Jc);return Jc}),Wd=(vc,Hc)=>vc.trim().split(/\s+/).map(Jc=>ya(Jc,Hc)).join(" "),ya=(vc,Hc)=>{Gb("caret",vc,Hc);const Jc=Hc.includePrerelease?
"-0":"";return vc.replace(Hc.loose?Vb[Ec.CARETLOOSE]:Vb[Ec.CARET],(Yc,Tc,qd,bd,fe)=>{Gb("caret",vc,Yc,Tc,qd,bd,fe);ce(Tc)?Yc="":ce(qd)?Yc="\x3e\x3d".concat(Tc,".0.0").concat(Jc," \x3c").concat(+Tc+1,".0.0-0"):ce(bd)?Yc="0"===Tc?"\x3e\x3d".concat(Tc,".").concat(qd,".0").concat(Jc," \x3c").concat(Tc,".").concat(+qd+1,".0-0"):"\x3e\x3d".concat(Tc,".").concat(qd,".0").concat(Jc," \x3c").concat(+Tc+1,".0.0-0"):fe?(Gb("replaceCaret pr",fe),Yc="0"===Tc?"0"===qd?"\x3e\x3d".concat(Tc,".").concat(qd,".").concat(bd,
"-").concat(fe," \x3c").concat(Tc,".").concat(qd,".").concat(+bd+1,"-0"):"\x3e\x3d".concat(Tc,".").concat(qd,".").concat(bd,"-").concat(fe," \x3c").concat(Tc,".").concat(+qd+1,".0-0"):"\x3e\x3d".concat(Tc,".").concat(qd,".").concat(bd,"-").concat(fe," \x3c").concat(+Tc+1,".0.0-0")):(Gb("no pr"),Yc="0"===Tc?"0"===qd?"\x3e\x3d".concat(Tc,".").concat(qd,".").concat(bd).concat(Jc," \x3c").concat(Tc,".").concat(qd,".").concat(+bd+1,"-0"):"\x3e\x3d".concat(Tc,".").concat(qd,".").concat(bd).concat(Jc," \x3c").concat(Tc,
".").concat(+qd+1,".0-0"):"\x3e\x3d".concat(Tc,".").concat(qd,".").concat(bd," \x3c").concat(+Tc+1,".0.0-0"));Gb("caret return",Yc);return Yc})},Oa=(vc,Hc)=>{Gb("replaceXRanges",vc,Hc);return vc.split(/\s+/).map(Jc=>cc(Jc,Hc)).join(" ")},cc=(vc,Hc)=>{vc=vc.trim();return vc.replace(Hc.loose?Vb[Ec.XRANGELOOSE]:Vb[Ec.XRANGE],(Jc,Yc,Tc,qd,bd,fe)=>{Gb("xRange",vc,Jc,Yc,Tc,qd,bd,fe);const Qe=ce(Tc),Ke=Qe||ce(qd);bd=Ke||ce(bd);"\x3d"===Yc&&bd&&(Yc="");fe=Hc.includePrerelease?"-0":"";Qe?Jc="\x3e"===Yc||"\x3c"===
Yc?"\x3c0.0.0-0":"*":Yc&&bd?(Ke&&(qd=0),bd=0,"\x3e"===Yc?(Yc="\x3e\x3d",Ke?(Tc=+Tc+1,qd=0):qd=+qd+1,bd=0):"\x3c\x3d"===Yc&&(Yc="\x3c",Ke?Tc=+Tc+1:qd=+qd+1),"\x3c"===Yc&&(fe="-0"),Jc="".concat(Yc+Tc,".").concat(qd,".").concat(bd).concat(fe)):Ke?Jc="\x3e\x3d".concat(Tc,".0.0").concat(fe," \x3c").concat(+Tc+1,".0.0-0"):bd&&(Jc="\x3e\x3d".concat(Tc,".").concat(qd,".0").concat(fe," \x3c").concat(Tc,".").concat(+qd+1,".0-0"));Gb("xRange return",Jc);return Jc})},id=vc=>(Hc,Jc,Yc,Tc,qd,bd,fe,Qe,Ke,ne,Ye,
kf,Le)=>{Jc=ce(Yc)?"":ce(Tc)?"\x3e\x3d".concat(Yc,".0.0").concat(vc?"-0":""):ce(qd)?"\x3e\x3d".concat(Yc,".").concat(Tc,".0").concat(vc?"-0":""):bd?"\x3e\x3d".concat(Jc):"\x3e\x3d".concat(Jc).concat(vc?"-0":"");Qe=ce(Ke)?"":ce(ne)?"\x3c".concat(+Ke+1,".0.0-0"):ce(Ye)?"\x3c".concat(Ke,".").concat(+ne+1,".0-0"):kf?"\x3c\x3d".concat(Ke,".").concat(ne,".").concat(Ye,"-").concat(kf):vc?"\x3c".concat(Ke,".").concat(ne,".").concat(+Ye+1,"-0"):"\x3c\x3d".concat(Qe);return"".concat(Jc," ").concat(Qe).trim()};
return vd}function Ra(F,aa,Fa,fb,Gb,pc){const Vb=Ec=>Ka[Ec.type](Vb,Ec);Vb.memberDepth=0;Vb.fn=Object.create(aa);Vb.params=Fa;Vb.datum=fb;Vb.event=Gb;Vb.item=pc;ua.forEach(Ec=>Vb.fn[Ec]=function(){return Gb.vega[Ec](...arguments)});return Vb(F)}function Va(F){const [aa,Fa]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(F).slice(1,3);return{library:aa,version:Fa}}function Ga(F,aa,Fa){F.fields=aa||[];F.fname=Fa;return F}function hb(F){return 1===F.length?nc(F[0]):Kc(F)}function bb(F){function aa(){Fa.push(Vb+
F.substring(Ec,ld));Vb="";Ec=ld+1}const Fa=[],fb=F.length;let Gb=null,pc=0,Vb="",Ec,ld,ad;F+="";for(Ec=ld=0;ld<fb;++ld)if(ad=F[ld],"\\"===ad)Vb+=F.substring(Ec,ld),Vb+=F.substring(++ld,++ld),Ec=ld;else if(ad===Gb)aa(),Gb=null,pc=-1;else if(!Gb)if(Ec===pc&&'"'===ad)Ec=ld+1,Gb=ad;else if(Ec===pc&&"'"===ad)Ec=ld+1,Gb=ad;else if("."===ad&&!pc)ld>Ec?aa():Ec=ld+1;else if("["===ad)ld>Ec&&aa(),pc=Ec=ld+1;else if("]"===ad){if(!pc)throw Error("Access path missing open bracket: "+F);0<pc&&aa();pc=0;Ec=ld+1}if(pc)throw Error("Access path missing closing bracket: "+
F);if(Gb)throw Error("Access path missing closing quote: "+F);ld>Ec&&(ld++,aa());return Fa}function tb(F,aa){var Fa={},fb;for(fb in F)Object.prototype.hasOwnProperty.call(F,fb)&&0>aa.indexOf(fb)&&(Fa[fb]=F[fb]);if(null!=F&&"function"===typeof Object.getOwnPropertySymbols){var Gb=0;for(fb=Object.getOwnPropertySymbols(F);Gb<fb.length;Gb++)0>aa.indexOf(fb[Gb])&&Object.prototype.propertyIsEnumerable.call(F,fb[Gb])&&(Fa[fb[Gb]]=F[fb[Gb]])}return Fa}function Pb(F){const aa=[];return function(Fa,fb){if("object"!==
typeof fb||null===fb)return fb;Fa=aa.indexOf(this)+1;aa.length=Fa;if(aa.length>F)return"[Object]";if(0<=aa.indexOf(fb))return"[Circular]";aa.push(fb);return fb}}function eb(F,aa,Fa){function fb(ld){ld.source===pc&&(Ec=0,F.removeEventListener("message",fb,!1))}function Gb(){0>=Ec||(pc.postMessage(Fa,Vb),setTimeout(Gb,250),--Ec)}const pc=F.open(aa),{origin:Vb}=new URL(aa);let Ec=40;F.addEventListener("message",fb,!1);setTimeout(Gb,250)}function T(F){for(var aa=arguments.length,Fa=Array(1<aa?aa-1:0),
fb=1;fb<aa;fb++)Fa[fb-1]=arguments[fb];for(const Gb of Fa){aa=F;Fa=Gb;for(const pc of Object.keys(Fa))h.writeConfig(aa,pc,Fa[pc],!0)}return F}function Z(F,aa,Fa,fb){aa="\x3chtml\x3e\x3chead\x3e".concat(aa,'\x3c/head\x3e\x3cbody\x3e\x3cpre\x3e\x3ccode class\x3d"json"\x3e');Fa="\x3c/code\x3e\x3c/pre\x3e".concat(Fa,"\x3c/body\x3e\x3c/html\x3e");const Gb=window.open("");Gb.document.write(aa+F+Fa);Gb.document.title="".concat(He[fb]," JSON Source")}function ca(F,aa){if(F.$schema){F=Va(F.$schema);if(aa&&
aa!==F.library){var Fa;console.warn("The given visualization spec is written in ".concat(He[F.library],", but mode argument sets ").concat(null!==(Fa=He[aa])&&void 0!==Fa?Fa:aa,"."))}aa=F.library;Cd(Ie[aa],"^".concat(F.version.slice(1)))||console.warn("The input spec uses ".concat(He[aa]," ").concat(F.version,", but the current version of ").concat(He[aa]," is v").concat(Ie[aa],"."));return aa}return"mark"in F||"encoding"in F||"layer"in F||"hconcat"in F||"vconcat"in F||"facet"in F||"repeat"in F?"vega-lite":
"marks"in F||"signals"in F||"scales"in F||"axes"in F?"vega":null!==aa&&void 0!==aa?aa:"vega"}function ha(F){return F&&"load"in F?F:xd.loader(F)}function La(F,aa){const Fa=arguments;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var fb,Gb,pc=2<Fa.length&&void 0!==Fa[2]?Fa[2]:{};let Vb,Ec;h.isString(aa)?(Ec=ha(pc.loader),Vb=JSON.parse(yield Ec.load(aa))):Vb=aa;var ld,ad,Oc=null!==(ld=null===(ad=Vb.usermeta)||void 0===ad?void 0:ad.embedOptions)&&void 0!==ld?ld:{};h.isString(Oc.defaultStyle)&&
(Oc.defaultStyle=!1);ld=Oc.loader;if(!Ec||ld){var Nd;Ec=ha(null!==(Nd=pc.loader)&&void 0!==Nd?Nd:ld)}Oc=yield na(Oc,Ec);pc=yield na(pc,Ec);pc=Object.assign({},T(pc,Oc),{config:h.mergeConfig(null!==(fb=pc.config)&&void 0!==fb?fb:{},null!==(Gb=Oc.config)&&void 0!==Gb?Gb:{})});return yield m(F,Vb,pc,Ec)})}function na(F,aa){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var Fa;const fb=h.isString(F.config)?JSON.parse(yield aa.load(F.config)):null!==(Fa=F.config)&&void 0!==Fa?Fa:{};Fa=
h.isString(F.patch)?JSON.parse(yield aa.load(F.patch)):F.patch;return Object.assign({},F,Fa?{patch:Fa}:{},fb?{config:fb}:{})})}function pa(F){var aa;F=F.getRootNode?F.getRootNode():document;return F instanceof ShadowRoot?{root:F,rootContainer:F}:{root:document,rootContainer:null!==(aa=document.head)&&void 0!==aa?aa:document.body}}function m(F,aa){const Fa=arguments;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var fb,Gb,pc,Vb,Ec,ld,ad;let Oc=2<Fa.length&&void 0!==Fa[2]?Fa[2]:{};
var Nd=3<Fa.length?Fa[3]:void 0;const ce=Oc.theme?h.mergeConfig(Sb[Oc.theme],null!==(fb=Oc.config)&&void 0!==fb?fb:{}):Oc.config;fb=h.isBoolean(Oc.actions)?Oc.actions:T({},me,null!==(Gb=Oc.actions)&&void 0!==Gb?Gb:{});Gb=Object.assign({},Me,Oc.i18n);const Kd=null!==(pc=Oc.renderer)&&void 0!==pc?pc:"canvas";pc=null!==(Vb=Oc.logLevel)&&void 0!==Vb?Vb:xd.Warn;Vb=null!==(Ec=Oc.downloadFileName)&&void 0!==Ec?Ec:"visualization";Ec="string"===typeof F?document.querySelector(F):F;if(!Ec)throw Error("".concat(F,
" does not exist"));if(!1!==Oc.defaultStyle){const {root:Jc,rootContainer:Yc}=pa(Ec);if(!Jc.getElementById("vega-embed-style")){var Md=document.createElement("style");Md.id="vega-embed-style";Md.innerHTML=void 0===Oc.defaultStyle||!0===Oc.defaultStyle?'.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) \x3e :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n'.toString():
Oc.defaultStyle;Yc.appendChild(Md)}}const Wd=ca(aa,Oc.mode);let ya=tf[Wd](aa,ce);"vega-lite"===Wd&&ya.$schema&&(Md=Va(ya.$schema),Cd(Ie.vega,"^".concat(Md.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(Md.version,", but current version is v").concat(Ie.vega,".")));Ec.classList.add("vega-embed");fb&&Ec.classList.add("has-actions");Ec.innerHTML="";let Oa=Ec;fb&&(Md=document.createElement("div"),Md.classList.add("chart-wrapper"),Ec.appendChild(Md),Oa=Md);(Md=Oc.patch)&&(ya=Md instanceof
Function?Md(ya):Za(ya,Md,!0,!1).newDocument);Oc.formatLocale&&xd.formatLocale(Oc.formatLocale);Oc.timeFormatLocale&&xd.timeFormatLocale(Oc.timeFormatLocale);if(Oc.expressionFunctions)for(var cc in Oc.expressionFunctions)Md=Oc.expressionFunctions[cc],"fn"in Md?xd.expressionFunction(cc,Md.fn,Md.visitor):Md instanceof Function&&xd.expressionFunction(cc,Md);({ast:cc}=Oc);Md=xd.parse(ya,"vega-lite"===Wd?{}:ce,{ast:cc});const id=new (Oc.viewClass||xd.View)(Md,Object.assign({},{loader:Nd,logLevel:pc,renderer:Kd},
cc?{expr:null!==(ld=null!==(ad=xd.expressionInterpreter)&&void 0!==ad?ad:Oc.expr)&&void 0!==ld?ld:lb}:{}));id.addSignalListener("autosize",(Jc,Yc)=>{({type:Jc}=Yc);"fit-x"==Jc?(Oa.classList.add("fit-x"),Oa.classList.remove("fit-y")):"fit-y"==Jc?(Oa.classList.remove("fit-x"),Oa.classList.add("fit-y")):"fit"==Jc?Oa.classList.add("fit-x","fit-y"):Oa.classList.remove("fit-x","fit-y")});!1!==Oc.tooltip&&(ld="function"===typeof Oc.tooltip?Oc.tooltip:(new kd(!0===Oc.tooltip?{}:Oc.tooltip)).call,id.tooltip(ld));
({hover:ld}=Oc);void 0===ld&&(ld="vega"===Wd);if(ld){const {hoverSet:Jc,updateSet:Yc}="boolean"===typeof ld?{}:ld;id.hover(Jc,Yc)}Oc&&(null!=Oc.width&&id.width(Oc.width),null!=Oc.height&&id.height(Oc.height),null!=Oc.padding&&id.padding(Oc.padding));yield id.initialize(Oa,Oc.bind).runAsync();let vc;if(!1!==fb){ad=Ec;if(!1!==Oc.defaultStyle){const Jc=document.createElement("details");Jc.title=Gb.CLICK_TO_VIEW_ACTIONS;Ec.append(Jc);ad=Jc;ld=document.createElement("summary");ld.innerHTML='\n\x3csvg viewBox\x3d"0 0 16 16" fill\x3d"currentColor" stroke\x3d"none" stroke-width\x3d"1" stroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n  \x3ccircle r\x3d"2" cy\x3d"8" cx\x3d"2"\x3e\x3c/circle\x3e\n  \x3ccircle r\x3d"2" cy\x3d"8" cx\x3d"8"\x3e\x3c/circle\x3e\n  \x3ccircle r\x3d"2" cy\x3d"8" cx\x3d"14"\x3e\x3c/circle\x3e\n\x3c/svg\x3e';
Jc.append(ld);vc=Yc=>{Jc.contains(Yc.target)||Jc.removeAttribute("open")};document.addEventListener("click",vc)}ld=document.createElement("div");ad.append(ld);ld.classList.add("vega-actions");if(!0===fb||!1!==fb.export)for(const Jc of["svg","png"])if(!0===fb||!0===fb.export||fb.export[Jc])ad=Gb["".concat(Jc.toUpperCase(),"_ACTION")],Nd=document.createElement("a"),Nd.text=ad,Nd.href="#",Nd.target="_blank",Nd.download="".concat(Vb,".").concat(Jc),Nd.addEventListener("mousedown",function(Yc){const Tc=
this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){Yc.preventDefault();const qd=yield id.toImageURL(Jc,Oc.scaleFactor);Tc.href=qd})}),ld.append(Nd);if(!0===fb||!1!==fb.source)Vb=document.createElement("a"),Vb.text=Gb.SOURCE_ACTION,Vb.href="#",Vb.addEventListener("click",function(Jc){var Yc,Tc;Z(Ma(aa),null!==(Yc=Oc.sourceHeader)&&void 0!==Yc?Yc:"",null!==(Tc=Oc.sourceFooter)&&void 0!==Tc?Tc:"",Wd);Jc.preventDefault()}),ld.append(Vb);"vega-lite"!==Wd||!0!==fb&&!1===fb.compiled||(Vb=
document.createElement("a"),Vb.text=Gb.COMPILED_ACTION,Vb.href="#",Vb.addEventListener("click",function(Jc){var Yc,Tc;Z(Ma(ya),null!==(Yc=Oc.sourceHeader)&&void 0!==Yc?Yc:"",null!==(Tc=Oc.sourceFooter)&&void 0!==Tc?Tc:"","vega");Jc.preventDefault()}),ld.append(Vb));if(!0===fb||!1!==fb.editor){var Hc;const Jc=null!==(Hc=Oc.editorUrl)&&void 0!==Hc?Hc:"https://vega.github.io/editor/";Hc=document.createElement("a");Hc.text=Gb.EDITOR_ACTION;Hc.href="#";Hc.addEventListener("click",function(Yc){eb(window,
Jc,{config:ce,mode:Wd,renderer:Kd,spec:Ma(aa)});Yc.preventDefault()});ld.append(Hc)}}return{view:id,spec:aa,vgSpec:ya,finalize:function(){vc&&document.removeEventListener("click",vc);id.finalize()},embedOptions:Oc}})}function E(F){const aa=arguments;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var Fa;let fb=1<aa.length&&void 0!==aa[1]?aa[1]:{};const Gb=document.createElement("div");Gb.classList.add("vega-embed-wrapper");const pc=document.createElement("div");Gb.appendChild(pc);
const Vb=!0===fb.actions||!1===fb.actions?fb.actions:Object.assign({},{export:!0,source:!1,compiled:!0,editor:!0},null!==(Fa=fb.actions)&&void 0!==Fa?Fa:{});Fa=yield La(pc,F,Object.assign({},{actions:Vb},null!==fb&&void 0!==fb?fb:{}));Gb.value=Fa.view;return Gb})}var L=ab(h),w=ab(ia),Q=function(){var F=function(aa,Fa){F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(fb,Gb){fb.__proto__=Gb}||function(fb,Gb){for(var pc in Gb)Gb.hasOwnProperty(pc)&&(fb[pc]=Gb[pc])};return F(aa,Fa)};
return function(aa,Fa){function fb(){this.constructor=aa}F(aa,Fa);aa.prototype=null===Fa?Object.create(Fa):(fb.prototype=Fa.prototype,new fb)}}(),A=Object.prototype.hasOwnProperty,y=function(F){function aa(Fa,fb,Gb,pc,Vb){var Ec=this.constructor,ld=F.call(this,Ub(Fa,{name:fb,index:Gb,operation:pc,tree:Vb}))||this;ld.name=fb;ld.index=Gb;ld.operation=pc;ld.tree=Vb;Object.setPrototypeOf(ld,Ec.prototype);ld.message=Ub(Fa,{name:fb,index:Gb,operation:pc,tree:Vb});return ld}Q(aa,F);return aa}(Error),N=y,
z={add:function(F,aa,Fa){F[aa]=this.value;return{newDocument:Fa}},remove:function(F,aa,Fa){var fb=F[aa];delete F[aa];return{newDocument:Fa,removed:fb}},replace:function(F,aa,Fa){var fb=F[aa];F[aa]=this.value;return{newDocument:Fa,removed:fb}},move:function(F,aa,Fa){(F=jc(Fa,this.path))&&(F=Yb(F));aa=Ba(Fa,{op:"remove",path:this.from}).removed;Ba(Fa,{op:"add",path:this.path,value:aa});return{newDocument:Fa,removed:F}},copy:function(F,aa,Fa){F=jc(Fa,this.from);Ba(Fa,{op:"add",path:this.path,value:Yb(F)});
return{newDocument:Fa}},test:function(F,aa,Fa){return{newDocument:Fa,test:sb(F[aa],this.value)}},_get:function(F,aa,Fa){this.value=F[aa];return{newDocument:Fa}}},C={add:function(F,aa,Fa){ac(aa)?F.splice(aa,0,this.value):F[aa]=this.value;return{newDocument:Fa,index:aa}},remove:function(F,aa,Fa){F=F.splice(aa,1);return{newDocument:Fa,removed:F[0]}},replace:function(F,aa,Fa){var fb=F[aa];F[aa]=this.value;return{newDocument:Fa,removed:fb}},move:z.move,copy:z.copy,test:z.test,_get:z._get},H=Object.freeze({__proto__:null,
JsonPatchError:N,deepClone:Yb,getValueByPointer:jc,applyOperation:Ba,applyPatch:Za,applyReducer:function(F,aa,Fa){var fb=Ba(F,aa);if(!1===fb.test)throw new N("Test operation failed","TEST_OPERATION_FAILED",Fa,aa,F);return fb.newDocument},validator:wb,validate:ub,_areEquals:sb}),V=new WeakMap,Aa=function(){return function(F){this.observers=new Map;this.obj=F}}(),O=function(){return function(F,aa){this.callback=F;this.observer=aa}}(),la=Object.freeze({__proto__:null,unobserve:function(F,aa){aa.unobserve()},
observe:function(F,aa){var Fa=V.get(F);if(Fa){var fb=Fa.observers.get(aa);var Gb=fb&&fb.observer}else Fa=new Aa(F),V.set(F,Fa);if(Gb)return Gb;Gb={};Fa.value=Yb(F);if(aa){Gb.callback=aa;Gb.next=null;var pc=function(){xb(Gb)},Vb=function(){clearTimeout(Gb.next);Gb.next=setTimeout(pc)};"undefined"!==typeof window&&(window.addEventListener("mouseup",Vb),window.addEventListener("keyup",Vb),window.addEventListener("mousedown",Vb),window.addEventListener("keydown",Vb),window.addEventListener("change",Vb))}Gb.patches=
[];Gb.object=F;Gb.unobserve=function(){xb(Gb);clearTimeout(Gb.next);Fa.observers.delete(Gb.callback);"undefined"!==typeof window&&(window.removeEventListener("mouseup",Vb),window.removeEventListener("keyup",Vb),window.removeEventListener("mousedown",Vb),window.removeEventListener("keydown",Vb),window.removeEventListener("change",Vb))};Fa.observers.set(aa,new O(aa,Gb));return Gb},generate:xb,compare:function(F,aa,Fa){void 0===Fa&&(Fa=!1);var fb=[];ib(F,aa,fb,"",Fa);return fb}});Object.assign({},H,
la,{JsonPatchError:y,deepClone:Yb,escapePathComponent:Xb,unescapePathComponent:mc});var za=/("(?:[^\\"]|\\.)*")|[:,]/g,Ma=function(F,aa){aa=aa||{};var Fa=JSON.stringify([1],void 0,void 0===aa.indent?2:aa.indent).slice(2,-3);var fb=""===Fa?Infinity:void 0===aa.maxLength?80:aa.maxLength;var Gb=aa.replacer;return function ad(Vb,Ec,ld){Vb&&"function"===typeof Vb.toJSON&&(Vb=Vb.toJSON());var Oc=JSON.stringify(Vb,Gb);if(void 0===Oc)return Oc;ld=fb-Ec.length-ld;if(Oc.length<=ld){var Nd=Oc.replace(za,function(id,
vc){return vc||id+" "});if(Nd.length<=ld)return Nd}null!=Gb&&(Vb=JSON.parse(Oc),Gb=void 0);if("object"===typeof Vb&&null!==Vb){var ce=Ec+Fa;var Kd=[];var Md=0;if(Array.isArray(Vb)){var Wd="[";Nd="]";for(ld=Vb.length;Md<ld;Md++)Kd.push(ad(Vb[Md],ce,Md===ld-1?0:1)||"null")}else{Wd="{";Nd="}";var ya=Object.keys(Vb);for(ld=ya.length;Md<ld;Md++){var Oa=ya[Md];var cc=JSON.stringify(Oa)+": ";Oa=ad(Vb[Oa],ce,cc.length+(Md===ld-1?0:1));void 0!==Oa&&Kd.push(cc+Oa)}}if(0<Kd.length)return[Wd,Fa+Kd.join(",\n"+
ce),Nd].join("\n"+Ec)}return Oc}(F,"",0)};ec.Node=ra;ec.create=ec;ec.prototype.removeNode=function(F){if(F.list!==this)throw Error("removing node which does not belong to this list");var aa=F.next,Fa=F.prev;aa&&(aa.prev=Fa);Fa&&(Fa.next=aa);F===this.head&&(this.head=aa);F===this.tail&&(this.tail=Fa);F.list.length--;F.next=null;F.prev=null;F.list=null;return aa};ec.prototype.unshiftNode=function(F){if(F!==this.head){F.list&&F.list.removeNode(F);var aa=this.head;F.list=this;if(F.next=aa)aa.prev=F;this.head=
F;this.tail||(this.tail=F);this.length++}};ec.prototype.pushNode=function(F){if(F!==this.tail){F.list&&F.list.removeNode(F);var aa=this.tail;F.list=this;if(F.prev=aa)aa.next=F;this.tail=F;this.head||(this.head=F);this.length++}};ec.prototype.push=function(){for(var F=0,aa=arguments.length;F<aa;F++)this.tail=new ra(arguments[F],this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length};ec.prototype.unshift=function(){for(var F=0,aa=arguments.length;F<aa;F++)this.head=new ra(arguments[F],
null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};ec.prototype.pop=function(){if(this.tail){var F=this.tail.value;(this.tail=this.tail.prev)?this.tail.next=null:this.head=null;this.length--;return F}};ec.prototype.shift=function(){if(this.head){var F=this.head.value;(this.head=this.head.next)?this.head.prev=null:this.tail=null;this.length--;return F}};ec.prototype.forEach=function(F,aa){aa=aa||this;for(var Fa=this.head,fb=0;null!==Fa;fb++)F.call(aa,Fa.value,fb,
this),Fa=Fa.next};ec.prototype.forEachReverse=function(F,aa){aa=aa||this;for(var Fa=this.tail,fb=this.length-1;null!==Fa;fb--)F.call(aa,Fa.value,fb,this),Fa=Fa.prev};ec.prototype.get=function(F){for(var aa=0,Fa=this.head;null!==Fa&&aa<F;aa++)Fa=Fa.next;if(aa===F&&null!==Fa)return Fa.value};ec.prototype.getReverse=function(F){for(var aa=0,Fa=this.tail;null!==Fa&&aa<F;aa++)Fa=Fa.prev;if(aa===F&&null!==Fa)return Fa.value};ec.prototype.map=function(F,aa){aa=aa||this;for(var Fa=new ec,fb=this.head;null!==
fb;)Fa.push(F.call(aa,fb.value,this)),fb=fb.next;return Fa};ec.prototype.mapReverse=function(F,aa){aa=aa||this;for(var Fa=new ec,fb=this.tail;null!==fb;)Fa.push(F.call(aa,fb.value,this)),fb=fb.prev;return Fa};ec.prototype.reduce=function(F,aa){var Fa=this.head;if(1<arguments.length)var fb=aa;else if(this.head)Fa=this.head.next,fb=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var Gb=0;null!==Fa;Gb++)fb=F(fb,Fa.value,Gb),Fa=Fa.next;return fb};ec.prototype.reduceReverse=
function(F,aa){var Fa=this.tail;if(1<arguments.length)var fb=aa;else if(this.tail)Fa=this.tail.prev,fb=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var Gb=this.length-1;null!==Fa;Gb--)fb=F(fb,Fa.value,Gb),Fa=Fa.prev;return fb};ec.prototype.toArray=function(){for(var F=Array(this.length),aa=0,Fa=this.head;null!==Fa;aa++)F[aa]=Fa.value,Fa=Fa.next;return F};ec.prototype.toArrayReverse=function(){for(var F=Array(this.length),aa=0,Fa=this.tail;null!==Fa;aa++)F[aa]=
Fa.value,Fa=Fa.prev;return F};ec.prototype.slice=function(F,aa){aa=aa||this.length;0>aa&&(aa+=this.length);F=F||0;0>F&&(F+=this.length);var Fa=new ec;if(aa<F||0>aa)return Fa;0>F&&(F=0);aa>this.length&&(aa=this.length);for(var fb=0,Gb=this.head;null!==Gb&&fb<F;fb++)Gb=Gb.next;for(;null!==Gb&&fb<aa;fb++,Gb=Gb.next)Fa.push(Gb.value);return Fa};ec.prototype.sliceReverse=function(F,aa){aa=aa||this.length;0>aa&&(aa+=this.length);F=F||0;0>F&&(F+=this.length);var Fa=new ec;if(aa<F||0>aa)return Fa;0>F&&(F=
0);aa>this.length&&(aa=this.length);for(var fb=this.length,Gb=this.tail;null!==Gb&&fb>aa;fb--)Gb=Gb.prev;for(;null!==Gb&&fb>F;fb--,Gb=Gb.prev)Fa.push(Gb.value);return Fa};ec.prototype.splice=function(F,aa){F>this.length&&(F=this.length-1);0>F&&(F=this.length+F);for(var Fa=0,fb=this.head;null!==fb&&Fa<F;Fa++)fb=fb.next;var Gb=[];for(Fa=0;fb&&Fa<aa;Fa++)Gb.push(fb.value),fb=this.removeNode(fb);null===fb&&(fb=this.tail);fb!==this.head&&fb!==this.tail&&(fb=fb.prev);for(Fa=0;Fa<(2>=arguments.length?0:
arguments.length-2);Fa++){var pc=2>Fa+2||arguments.length<=Fa+2?void 0:arguments[Fa+2];fb=fb===this.head?new ra(pc,null,fb,this):new ra(pc,fb,fb.next,this);null===fb.next&&(this.tail=fb);null===fb.prev&&(this.head=fb);this.length++}return Gb};ec.prototype.reverse=function(){for(var F=this.head,aa=this.tail,Fa=F;null!==Fa;Fa=Fa.prev){var fb=Fa.prev;Fa.prev=Fa.next;Fa.next=fb}this.head=aa;this.tail=F;return this};try{ec.prototype[Symbol.iterator]=function*(){for(let F=this.head;F;F=F.next)yield F.value}}catch(F){}const Pa=
Symbol("max"),Ya=Symbol("length"),vb=Symbol("lengthCalculator"),jb=Symbol("allowStale"),Tb=Symbol("maxAge"),W=Symbol("dispose"),Ea=Symbol("noDisposeOnSet"),Lb=Symbol("lruList"),oc=Symbol("cache"),$b=Symbol("updateAgeOnGet"),Mb=()=>1;class Qb{constructor(F){"number"===typeof F&&(F={max:F});F||(F={});if(F.max&&("number"!==typeof F.max||0>F.max))throw new TypeError("max must be a non-negative number");this[Pa]=F.max||Infinity;const aa=F.length||Mb;this[vb]="function"!==typeof aa?Mb:aa;this[jb]=F.stale||
!1;if(F.maxAge&&"number"!==typeof F.maxAge)throw new TypeError("maxAge must be a number");this[Tb]=F.maxAge||0;this[W]=F.dispose;this[Ea]=F.noDisposeOnSet||!1;this[$b]=F.updateAgeOnGet||!1;this.reset()}set max(F){if("number"!==typeof F||0>F)throw new TypeError("max must be a non-negative number");this[Pa]=F||Infinity;qa(this)}get max(){return this[Pa]}set allowStale(F){this[jb]=!!F}get allowStale(){return this[jb]}set maxAge(F){if("number"!==typeof F)throw new TypeError("maxAge must be a non-negative number");
this[Tb]=F;qa(this)}get maxAge(){return this[Tb]}set lengthCalculator(F){"function"!==typeof F&&(F=Mb);F!==this[vb]&&(this[vb]=F,this[Ya]=0,this[Lb].forEach(aa=>{aa.length=this[vb](aa.value,aa.key);this[Ya]+=aa.length}));qa(this)}get lengthCalculator(){return this[vb]}get length(){return this[Ya]}get itemCount(){return this[Lb].length}rforEach(F,aa){aa=aa||this;for(let Fa=this[Lb].tail;null!==Fa;){const fb=Fa.prev;yb(this,F,Fa,aa);Fa=fb}}forEach(F,aa){aa=aa||this;for(let Fa=this[Lb].head;null!==Fa;){const fb=
Fa.next;yb(this,F,Fa,aa);Fa=fb}}keys(){return this[Lb].toArray().map(F=>F.key)}values(){return this[Lb].toArray().map(F=>F.value)}reset(){this[W]&&this[Lb]&&this[Lb].length&&this[Lb].forEach(F=>this[W](F.key,F.value));this[oc]=new Map;this[Lb]=new ec;this[Ya]=0}dump(){return this[Lb].map(F=>ed(this,F)?!1:{k:F.key,v:F.value,e:F.now+(F.maxAge||0)}).toArray().filter(F=>F)}dumpLru(){return this[Lb]}set(F,aa,Fa){if((Fa=Fa||this[Tb])&&"number"!==typeof Fa)throw new TypeError("maxAge must be a number");
const fb=Fa?Date.now():0,Gb=this[vb](aa,F);if(this[oc].has(F)){if(Gb>this[Pa])return Db(this,this[oc].get(F)),!1;const pc=this[oc].get(F).value;if(this[W]&&!this[Ea])this[W](F,pc.value);pc.now=fb;pc.maxAge=Fa;pc.value=aa;this[Ya]+=Gb-pc.length;pc.length=Gb;this.get(F);qa(this);return!0}Fa=new Ua(F,aa,Gb,fb,Fa);if(Fa.length>this[Pa]){if(this[W])this[W](F,aa);return!1}this[Ya]+=Fa.length;this[Lb].unshift(Fa);this[oc].set(F,this[Lb].head);qa(this);return!0}has(F){if(!this[oc].has(F))return!1;F=this[oc].get(F).value;
return!ed(this,F)}get(F){return xc(this,F,!0)}peek(F){return xc(this,F,!1)}pop(){const F=this[Lb].tail;if(!F)return null;Db(this,F);return F.value}del(F){Db(this,this[oc].get(F))}load(F){this.reset();const aa=Date.now();for(let fb=F.length-1;0<=fb;fb--){const Gb=F[fb];var Fa=Gb.e||0;0===Fa?this.set(Gb.k,Gb.v):(Fa-=aa,0<Fa&&this.set(Gb.k,Gb.v,Fa))}}prune(){this[oc].forEach((F,aa)=>xc(this,aa,!1))}}const xc=(F,aa,Fa)=>{if(aa=F[oc].get(aa)){const fb=aa.value;if(ed(F,fb)){if(Db(F,aa),!F[jb])return}else Fa&&
(F[$b]&&(aa.value.now=Date.now()),F[Lb].unshiftNode(aa));return fb.value}},ed=(F,aa)=>{if(!aa||!aa.maxAge&&!F[Tb])return!1;const Fa=Date.now()-aa.now;return aa.maxAge?Fa>aa.maxAge:F[Tb]&&Fa>F[Tb]},qa=F=>{if(F[Ya]>F[Pa])for(let aa=F[Lb].tail;F[Ya]>F[Pa]&&null!==aa;){const Fa=aa.prev;Db(F,aa);aa=Fa}},Db=(F,aa)=>{if(aa){const Fa=aa.value;if(F[W])F[W](Fa.key,Fa.value);F[Ya]-=Fa.length;F[oc].delete(Fa.key);F[Lb].removeNode(aa)}};class Ua{constructor(F,aa,Fa,fb,Gb){this.key=F;this.value=aa;this.length=
Fa;this.now=fb;this.maxAge=Gb||0}}const yb=(F,aa,Fa,fb)=>{let Gb=Fa.value;ed(F,Gb)&&(Db(F,Fa),F[jb]||(Gb=void 0));Gb&&aa.call(fb,Gb.value,Gb.key,F)};var Hb=Qb;const Nb=["includePrerelease","loose","rtl"];var Zb=F=>F?"object"!==typeof F?{loose:!0}:Nb.filter(aa=>F[aa]).reduce((aa,Fa)=>{aa[Fa]=!0;return aa},{}):{},ic={exports:{}},Bc={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},jd="object"===typeof u&&u.env&&u.env.NODE_DEBUG&&
/\bsemver\b/i.test(u.env.NODE_DEBUG)?function(){for(var F=arguments.length,aa=Array(F),Fa=0;Fa<F;Fa++)aa[Fa]=arguments[Fa];return console.error("SEMVER",...aa)}:()=>{};(function(F,aa){const {MAX_SAFE_COMPONENT_LENGTH:Fa}=Bc,fb=jd;aa=F.exports={};const Gb=aa.re=[],pc=aa.src=[],Vb=aa.t={};let Ec=0;F=(ld,ad,Oc)=>{const Nd=Ec++;fb(ld,Nd,ad);Vb[ld]=Nd;pc[Nd]=ad;Gb[Nd]=new RegExp(ad,Oc?"g":void 0)};F("NUMERICIDENTIFIER","0|[1-9]\\d*");F("NUMERICIDENTIFIERLOOSE","[0-9]+");F("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");
F("MAINVERSION","(".concat(pc[Vb.NUMERICIDENTIFIER],")\\.")+"(".concat(pc[Vb.NUMERICIDENTIFIER],")\\.")+"(".concat(pc[Vb.NUMERICIDENTIFIER],")"));F("MAINVERSIONLOOSE","(".concat(pc[Vb.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(pc[Vb.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(pc[Vb.NUMERICIDENTIFIERLOOSE],")"));F("PRERELEASEIDENTIFIER","(?:".concat(pc[Vb.NUMERICIDENTIFIER],"|").concat(pc[Vb.NONNUMERICIDENTIFIER],")"));F("PRERELEASEIDENTIFIERLOOSE","(?:".concat(pc[Vb.NUMERICIDENTIFIERLOOSE],"|").concat(pc[Vb.NONNUMERICIDENTIFIER],
")"));F("PRERELEASE","(?:-(".concat(pc[Vb.PRERELEASEIDENTIFIER],"(?:\\.").concat(pc[Vb.PRERELEASEIDENTIFIER],")*))"));F("PRERELEASELOOSE","(?:-?(".concat(pc[Vb.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(pc[Vb.PRERELEASEIDENTIFIERLOOSE],")*))"));F("BUILDIDENTIFIER","[0-9A-Za-z-]+");F("BUILD","(?:\\+(".concat(pc[Vb.BUILDIDENTIFIER],"(?:\\.").concat(pc[Vb.BUILDIDENTIFIER],")*))"));F("FULLPLAIN","v?".concat(pc[Vb.MAINVERSION]).concat(pc[Vb.PRERELEASE],"?").concat(pc[Vb.BUILD],"?"));F("FULL","^".concat(pc[Vb.FULLPLAIN],
"$"));F("LOOSEPLAIN","[v\x3d\\s]*".concat(pc[Vb.MAINVERSIONLOOSE]).concat(pc[Vb.PRERELEASELOOSE],"?").concat(pc[Vb.BUILD],"?"));F("LOOSE","^".concat(pc[Vb.LOOSEPLAIN],"$"));F("GTLT","((?:\x3c|\x3e)?\x3d?)");F("XRANGEIDENTIFIERLOOSE","".concat(pc[Vb.NUMERICIDENTIFIERLOOSE],"|x|X|\\*"));F("XRANGEIDENTIFIER","".concat(pc[Vb.NUMERICIDENTIFIER],"|x|X|\\*"));F("XRANGEPLAIN","[v\x3d\\s]*(".concat(pc[Vb.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(pc[Vb.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(pc[Vb.XRANGEIDENTIFIER],
")")+"(?:".concat(pc[Vb.PRERELEASE],")?").concat(pc[Vb.BUILD],"?")+")?)?");F("XRANGEPLAINLOOSE","[v\x3d\\s]*(".concat(pc[Vb.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(pc[Vb.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(pc[Vb.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(pc[Vb.PRERELEASELOOSE],")?").concat(pc[Vb.BUILD],"?")+")?)?");F("XRANGE","^".concat(pc[Vb.GTLT],"\\s*").concat(pc[Vb.XRANGEPLAIN],"$"));F("XRANGELOOSE","^".concat(pc[Vb.GTLT],"\\s*").concat(pc[Vb.XRANGEPLAINLOOSE],"$"));F("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(Fa,
"})")+"(?:\\.(\\d{1,".concat(Fa,"}))?")+"(?:\\.(\\d{1,".concat(Fa,"}))?")+"(?:$|[^\\d])");F("COERCERTL",pc[Vb.COERCE],!0);F("LONETILDE","(?:~\x3e?)");F("TILDETRIM","(\\s*)".concat(pc[Vb.LONETILDE],"\\s+"),!0);aa.tildeTrimReplace="$1~";F("TILDE","^".concat(pc[Vb.LONETILDE]).concat(pc[Vb.XRANGEPLAIN],"$"));F("TILDELOOSE","^".concat(pc[Vb.LONETILDE]).concat(pc[Vb.XRANGEPLAINLOOSE],"$"));F("LONECARET","(?:\\^)");F("CARETTRIM","(\\s*)".concat(pc[Vb.LONECARET],"\\s+"),!0);aa.caretTrimReplace="$1^";F("CARET",
"^".concat(pc[Vb.LONECARET]).concat(pc[Vb.XRANGEPLAIN],"$"));F("CARETLOOSE","^".concat(pc[Vb.LONECARET]).concat(pc[Vb.XRANGEPLAINLOOSE],"$"));F("COMPARATORLOOSE","^".concat(pc[Vb.GTLT],"\\s*(").concat(pc[Vb.LOOSEPLAIN],")$|^$"));F("COMPARATOR","^".concat(pc[Vb.GTLT],"\\s*(").concat(pc[Vb.FULLPLAIN],")$|^$"));F("COMPARATORTRIM","(\\s*)".concat(pc[Vb.GTLT],"\\s*(").concat(pc[Vb.LOOSEPLAIN],"|").concat(pc[Vb.XRANGEPLAIN],")"),!0);aa.comparatorTrimReplace="$1$2$3";F("HYPHENRANGE","^\\s*(".concat(pc[Vb.XRANGEPLAIN],
")")+"\\s+-\\s+"+"(".concat(pc[Vb.XRANGEPLAIN],")")+"\\s*$");F("HYPHENRANGELOOSE","^\\s*(".concat(pc[Vb.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(pc[Vb.XRANGEPLAINLOOSE],")")+"\\s*$");F("STAR","(\x3c|\x3e)?\x3d?\\s*\\*");F("GTE0","^\\s*\x3e\x3d\\s*0\\.0\\.0\\s*$");F("GTE0PRE","^\\s*\x3e\x3d\\s*0\\.0\\.0-0\\s*$")})(ic,ic.exports);const Vc=/^[0-9]+$/,ma=(F,aa)=>{const Fa=Vc.test(F),fb=Vc.test(aa);Fa&&fb&&(F=+F,aa=+aa);return F===aa?0:Fa&&!fb?-1:fb&&!Fa?1:F<aa?-1:1};var Ha={compareIdentifiers:ma,
rcompareIdentifiers:(F,aa)=>ma(aa,F)};const gb=jd,{MAX_LENGTH:R,MAX_SAFE_INTEGER:t}=Bc,{re:ba,t:va}=ic.exports,Ca=Zb,{compareIdentifiers:Sa}=Ha;class kb{constructor(F,aa){aa=Ca(aa);if(F instanceof kb){if(F.loose===!!aa.loose&&F.includePrerelease===!!aa.includePrerelease)return F;F=F.version}else if("string"!==typeof F)throw new TypeError("Invalid Version: ".concat(F));if(F.length>R)throw new TypeError("version is longer than ".concat(R," characters"));gb("SemVer",F,aa);this.options=aa;this.loose=
!!aa.loose;this.includePrerelease=!!aa.includePrerelease;aa=F.trim().match(aa.loose?ba[va.LOOSE]:ba[va.FULL]);if(!aa)throw new TypeError("Invalid Version: ".concat(F));this.raw=F;this.major=+aa[1];this.minor=+aa[2];this.patch=+aa[3];if(this.major>t||0>this.major)throw new TypeError("Invalid major version");if(this.minor>t||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>t||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=aa[4]?aa[4].split(".").map(Fa=>
{if(/^[0-9]+$/.test(Fa)){const fb=+Fa;if(0<=fb&&fb<t)return fb}return Fa}):[];this.build=aa[5]?aa[5].split("."):[];this.format()}format(){this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch);this.prerelease.length&&(this.version+="-".concat(this.prerelease.join(".")));return this.version}toString(){return this.version}compare(F){gb("SemVer.compare",this.version,this.options,F);if(!(F instanceof kb)){if("string"===typeof F&&F===this.version)return 0;F=new kb(F,this.options)}return F.version===
this.version?0:this.compareMain(F)||this.comparePre(F)}compareMain(F){F instanceof kb||(F=new kb(F,this.options));return Sa(this.major,F.major)||Sa(this.minor,F.minor)||Sa(this.patch,F.patch)}comparePre(F){F instanceof kb||(F=new kb(F,this.options));if(this.prerelease.length&&!F.prerelease.length)return-1;if(!this.prerelease.length&&F.prerelease.length)return 1;if(!this.prerelease.length&&!F.prerelease.length)return 0;let aa=0;do{const Fa=this.prerelease[aa],fb=F.prerelease[aa];gb("prerelease compare",
aa,Fa,fb);if(void 0===Fa&&void 0===fb)return 0;if(void 0===fb)return 1;if(void 0===Fa)return-1;if(Fa!==fb)return Sa(Fa,fb)}while(++aa)}compareBuild(F){F instanceof kb||(F=new kb(F,this.options));let aa=0;do{const Fa=this.build[aa],fb=F.build[aa];gb("prerelease compare",aa,Fa,fb);if(void 0===Fa&&void 0===fb)return 0;if(void 0===fb)return 1;if(void 0===Fa)return-1;if(Fa!==fb)return Sa(Fa,fb)}while(++aa)}inc(F,aa){switch(F){case "premajor":this.minor=this.patch=this.prerelease.length=0;this.major++;
this.inc("pre",aa);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",aa);break;case "prepatch":this.prerelease.length=0;this.inc("patch",aa);this.inc("pre",aa);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",aa);this.inc("pre",aa);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&0!==this.prerelease.length||this.minor++;this.patch=
0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(F=this.prerelease.length;0<=--F;)"number"===typeof this.prerelease[F]&&(this.prerelease[F]++,F=-2);-1===F&&this.prerelease.push(0)}aa&&(0===Sa(this.prerelease[0],aa)?isNaN(this.prerelease[1])&&(this.prerelease=[aa,0]):this.prerelease=[aa,0]);break;default:throw Error("invalid increment argument: ".concat(F));}this.format();
this.raw=this.version;return this}}var Rb=kb;const Fb=Rb;var Jb=(F,aa,Fa)=>(new Fb(F,Fa)).compare(new Fb(aa,Fa)),Cc=(F,aa,Fa,fb)=>{switch(aa){case "\x3d\x3d\x3d":return"object"===typeof F&&(F=F.version),"object"===typeof Fa&&(Fa=Fa.version),F===Fa;case "!\x3d\x3d":return"object"===typeof F&&(F=F.version),"object"===typeof Fa&&(Fa=Fa.version),F!==Fa;case "":case "\x3d":case "\x3d\x3d":return 0===Jb(F,Fa,fb);case "!\x3d":return 0!==Jb(F,Fa,fb);case "\x3e":return 0<Jb(F,Fa,fb);case "\x3e\x3d":return 0<=
Jb(F,Fa,fb);case "\x3c":return 0>Jb(F,Fa,fb);case "\x3c\x3d":return 0>=Jb(F,Fa,fb);default:throw new TypeError("Invalid operator: ".concat(aa));}},Gc,Sc,vd,od;const gd=xa();var Cd=(F,aa,Fa)=>{try{aa=new gd(aa,Fa)}catch(fb){return!1}return aa.test(F)},Dd={NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},rd={"*":(F,aa)=>F*aa,"+":(F,aa)=>F+aa,"-":(F,aa)=>F-aa,"/":(F,aa)=>
F/aa,"%":(F,aa)=>F%aa,"\x3e":(F,aa)=>F>aa,"\x3c":(F,aa)=>F<aa,"\x3c\x3d":(F,aa)=>F<=aa,"\x3e\x3d":(F,aa)=>F>=aa,"\x3d\x3d":(F,aa)=>F==aa,"!\x3d":(F,aa)=>F!=aa,"\x3d\x3d\x3d":(F,aa)=>F===aa,"!\x3d\x3d":(F,aa)=>F!==aa,"\x26":(F,aa)=>F&aa,"|":(F,aa)=>F|aa,"^":(F,aa)=>F^aa,"\x3c\x3c":(F,aa)=>F<<aa,"\x3e\x3e":(F,aa)=>F>>aa,"\x3e\x3e\x3e":(F,aa)=>F>>>aa},we={"+":F=>+F,"-":F=>-F,"~":F=>~F,"!":F=>!F};const Bd=Array.prototype.slice,x=(F,aa,Fa)=>{Fa=Fa?Fa(aa[0]):aa[0];return Fa[F].apply(Fa,Bd.call(aa,1))};
var K={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(F,aa,Fa)=>Math.max(aa,Math.min(Fa,F)),now:Date.now,utc:Date.UTC,datetime:(F,aa,Fa,fb,Gb,pc,Vb)=>new Date(F,aa||0,null!=Fa?Fa:1,fb||0,Gb||0,pc||0,Vb||0),date:F=>(new Date(F)).getDate(),
day:F=>(new Date(F)).getDay(),year:F=>(new Date(F)).getFullYear(),month:F=>(new Date(F)).getMonth(),hours:F=>(new Date(F)).getHours(),minutes:F=>(new Date(F)).getMinutes(),seconds:F=>(new Date(F)).getSeconds(),milliseconds:F=>(new Date(F)).getMilliseconds(),time:F=>(new Date(F)).getTime(),timezoneoffset:F=>(new Date(F)).getTimezoneOffset(),utcdate:F=>(new Date(F)).getUTCDate(),utcday:F=>(new Date(F)).getUTCDay(),utcyear:F=>(new Date(F)).getUTCFullYear(),utcmonth:F=>(new Date(F)).getUTCMonth(),utchours:F=>
(new Date(F)).getUTCHours(),utcminutes:F=>(new Date(F)).getUTCMinutes(),utcseconds:F=>(new Date(F)).getUTCSeconds(),utcmilliseconds:F=>(new Date(F)).getUTCMilliseconds(),length:F=>F.length,join:function(){return x("join",arguments)},indexof:function(){return x("indexOf",arguments)},lastindexof:function(){return x("lastIndexOf",arguments)},slice:function(){return x("slice",arguments)},reverse:F=>F.slice().reverse(),parseFloat,parseInt,upper:F=>String(F).toUpperCase(),lower:F=>String(F).toLowerCase(),
substring:function(){return x("substring",arguments,String)},split:function(){return x("split",arguments,String)},replace:function(){return x("replace",arguments,String)},trim:F=>String(F).trim(),regexp:RegExp,test:(F,aa)=>RegExp(F).test(aa)};const ua="view item group xy x y".split(" "),Ka={Literal:(F,aa)=>aa.value,Identifier:(F,aa)=>{aa=aa.name;return 0<F.memberDepth?aa:"datum"===aa?F.datum:"event"===aa?F.event:"item"===aa?F.item:Dd[aa]||F.params["$"+aa]},MemberExpression:(F,aa)=>{const Fa=!aa.computed,
fb=F(aa.object);Fa&&(F.memberDepth+=1);aa=F(aa.property);Fa&&--F.memberDepth;return fb[aa]},CallExpression:(F,aa)=>{const Fa=aa.arguments;aa=aa.callee.name;aa.startsWith("_")&&(aa=aa.slice(1));return"if"===aa?F(Fa[0])?F(Fa[1]):F(Fa[2]):(F.fn[aa]||K[aa]).apply(F.fn,Fa.map(F))},ArrayExpression:(F,aa)=>aa.elements.map(F),BinaryExpression:(F,aa)=>rd[aa.operator](F(aa.left),F(aa.right)),UnaryExpression:(F,aa)=>we[aa.operator](F(aa.argument)),ConditionalExpression:(F,aa)=>F(aa.test)?F(aa.consequent):F(aa.alternate),
LogicalExpression:(F,aa)=>"\x26\x26"===aa.operator?F(aa.left)&&F(aa.right):F(aa.left)||F(aa.right),ObjectExpression:(F,aa)=>aa.properties.reduce((Fa,fb)=>{F.memberDepth+=1;const Gb=F(fb.key);--F.memberDepth;Fa[Gb]=F(fb.value);return Fa},{})};var lb={operator(F,aa){const Fa=aa.ast,fb=F.functions;return Gb=>Ra(Fa,fb,Gb)},parameter(F,aa){const Fa=aa.ast,fb=F.functions;return(Gb,pc)=>Ra(Fa,fb,pc,Gb)},event(F,aa){const Fa=aa.ast,fb=F.functions;return Gb=>Ra(Fa,fb,void 0,void 0,Gb)},handler(F,aa){const Fa=
aa.ast,fb=F.functions;return(Gb,pc)=>Ra(Fa,fb,Gb,pc.item&&pc.item.datum,pc)},encode(F,aa){const {marktype:Fa,channels:fb}=aa,Gb=F.functions,pc="group"===Fa||"image"===Fa||"rect"===Fa;return(Vb,Ec)=>{const ld=Vb.datum;let ad=0,Oc;for(const Nd in fb)Oc=Ra(fb[Nd].ast,Gb,Ec,ld,void 0,Vb),Vb[Nd]!==Oc&&(Vb[Nd]=Oc,ad=1);"rule"!==Fa&&(fb.x2&&(fb.x?(pc&&Vb.x>Vb.x2&&(Ec=Vb.x,Vb.x=Vb.x2,Vb.x2=Ec),Vb.width=Vb.x2-Vb.x):Vb.x=Vb.x2-(Vb.width||0)),fb.xc&&(Vb.x=Vb.xc-(Vb.width||0)/2),fb.y2&&(fb.y?(pc&&Vb.y>Vb.y2&&
(Ec=Vb.y,Vb.y=Vb.y2,Vb.y2=Ec),Vb.height=Vb.y2-Vb.y):Vb.y=Vb.y2-(Vb.height||0)),fb.yc&&(Vb.y=Vb.yc-(Vb.height||0)/2));return ad}}};const Bb={"category-6":"#ec8431 #829eb1 #c89d29 #3580b1 #adc839 #ab7fb4".split(" "),"fire-7":"#fbf2c7 #f9e39c #f8d36e #f4bb6a #e68a4f #d15a40 #ab4232".split(" "),"fireandice-6":"#e68a4f #f4bb6a #f9e39c #dadfe2 #a6b7c6 #849eae".split(" "),"ice-7":"#edefee #dadfe2 #c4ccd2 #a6b7c6 #849eae #607785 #47525d".split(" ")},bc={"main-colors":"#1696d2 #d2d2d2 #000000 #fdbf11 #ec008b #55b748 #5c5859 #db2b27".split(" "),
"shades-blue":"#CFE8F3 #A2D4EC #73BFE2 #46ABDB #1696D2 #12719E #0A4C6A #062635".split(" "),"shades-gray":"#F5F5F5 #ECECEC #E3E3E3 #DCDBDB #D2D2D2 #9D9D9D #696969 #353535".split(" "),"shades-yellow":"#FFF2CF #FCE39E #FDD870 #FCCB41 #FDBF11 #E88E2D #CA5800 #843215".split(" "),"shades-magenta":"#F5CBDF #EB99C2 #E46AA7 #E54096 #EC008B #AF1F6B #761548 #351123".split(" "),"shades-green":"#DCEDD9 #BCDEB4 #98CF90 #78C26D #55B748 #408941 #2C5C2D #1A2E19".split(" "),"shades-black":"#D5D5D4 #ADABAC #848081 #5C5859 #332D2F #262223 #1A1717 #0E0C0D".split(" "),
"shades-red":"#F8D5D4 #F1AAA9 #E9807D #E25552 #DB2B27 #A4201D #6E1614 #370B0A".split(" "),"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11",
"#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":"#1696d2 #ec008b #fdbf11 #000000 #d2d2d2 #55b748".split(" "),"six-groups-cat-2":"#1696d2 #d2d2d2 #ec008b #fdbf11 #332d2f #0a4c6a".split(" "),"six-groups-seq":"#cfe8f3 #a2d4ec #73bfe2 #46abdb #1696d2 #12719e".split(" "),
"diverging-colors":"#ca5800 #fdbf11 #fdd870 #fff2cf #cfe8f3 #73bfe2 #1696d2 #0a4c6a".split(" ")};var Sb=Object.freeze({__proto__:null,dark:{background:"#333",title:{color:"#fff",subtitleColor:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#888",tickColor:"#fff"}},excel:{background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},
symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:"#4572a7 #aa4643 #8aa453 #71598e #4598ae #d98445 #94aace #d09393 #b9cc98 #a99cbc".split(" ")}},fivethirtyeight:{arc:{fill:"#30a2da"},area:{fill:"#30a2da"},axis:{domainColor:"#cbcbcb",grid:!0,gridColor:"#cbcbcb",
gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:"#cbcbcb",tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:"#30a2da",strokeWidth:2},path:{stroke:"#30a2da",strokeWidth:.5},rect:{fill:"#30a2da"},range:{category:"#30a2da #fc4f30 #e5ae38 #6d904f #8b8b8b #b96db8 #ff9e27 #56cc60 #52d2ca #52689e #545454 #9fe4f8".split(" "),
diverging:"#cc0020 #e77866 #f6e7e1 #d6e8ed #91bfd9 #1d78b5".split(" "),heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:"#30a2da"},bar:{binSpacing:2,fill:"#30a2da",stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ggplot2:{group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,
gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:"#000000 #7F7F7F #1A1A1A #999999 #333333 #B0B0B0 #4D4D4D #C9C9C9 #666666 #DCDCDC".split(" ")}},googlecharts:{arc:{fill:"#3366CC"},area:{fill:"#3366CC"},path:{stroke:"#3366CC"},rect:{fill:"#3366CC"},shape:{stroke:"#3366CC"},symbol:{stroke:"#3366CC"},circle:{fill:"#3366CC"},background:"#fff",
padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:"Arial, sans-serif",fontSize:12},"guide-title":{font:"Arial, sans-serif",fontSize:12},"group-title":{font:"Arial, sans-serif",fontSize:12}},title:{font:"Arial, sans-serif",fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:"#4285F4 #DB4437 #F4B400 #0F9D58 #AB47BC #00ACC1 #FF7043 #9E9D24 #5C6BC0 #F06292 #00796B #C2185B".split(" "),heatmap:["#c6dafc","#5e97f6",
"#2a56c6"]}},latimes:{background:"#ffffff",title:{anchor:"start",color:"#000000",font:"Benton Gothic Bold, sans-serif",fontSize:22,fontWeight:"normal"},arc:{fill:"#82c6df"},area:{fill:"#82c6df"},line:{stroke:"#82c6df",strokeWidth:2},path:{stroke:"#82c6df"},rect:{fill:"#82c6df"},shape:{stroke:"#82c6df"},symbol:{fill:"#82c6df",size:30},axis:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,labelFontWeight:"normal",titleFont:"Benton Gothic Bold, sans-serif",titleFontSize:13,titleFontWeight:"normal"},
axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,symbolType:"square",titleFont:"Benton Gothic Bold, sans-serif",titleFontSize:13,titleFontWeight:"normal"},range:{category:Bb["category-6"],diverging:Bb["fireandice-6"],heatmap:Bb["fire-7"],ordinal:Bb["fire-7"],ramp:Bb["fire-7"]}},quartz:{background:"#f9f9f9",arc:{fill:"#ab5787"},
area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:"#ab5787 #51b2e5 #703c5c #168dd9 #d190b6 #00609f #d365ba #154866 #666666 #c4c4c4".split(" ")}},
urbaninstitute:{background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:"Lato"},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:"Lato",labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:"Lato"},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:"Lato",labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:"Lato",titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,
labelFont:"Lato",symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:"Lato",orient:"right",offset:10},view:{stroke:"transparent"},range:{category:bc["six-groups-cat-1"],diverging:bc["diverging-colors"],heatmap:bc["diverging-colors"],ordinal:bc["six-groups-seq"],ramp:bc["shades-blue"]},area:{fill:"#1696d2"},rect:{fill:"#1696d2"},line:{color:"#1696d2",stroke:"#1696d2",strokeWidth:5},trail:{color:"#1696d2",stroke:"#1696d2",strokeWidth:0,size:1},path:{stroke:"#1696d2",strokeWidth:.5},point:{filled:!0},
text:{font:"Lato",color:"#1696d2",fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:"#1696d2",stroke:null}},arc:{fill:"#1696d2"},shape:{stroke:"#1696d2"},symbol:{fill:"#1696d2",size:30}},version:"2.10.0",vox:{background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},
axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:"#3e5c69 #6793a6 #182429 #0570b0 #3690c0 #74a9cf #a6bddb #e2ddf2".split(" ")}}});const nc=F=>function(aa){return aa[F]},Kc=F=>{const aa=F.length;return function(Fa){for(let fb=0;fb<aa;++fb)Fa=Fa[F[fb]];return Fa}};(function(F,aa,Fa){const fb=bb(F);F=1===fb.length?fb[0]:F;return Ga((Fa&&Fa.get||hb)(fb),[F],aa||F)})("id");Ga(F=>F,[],"identity");Ga(()=>0,[],
"zero");Ga(()=>1,[],"one");Ga(()=>!0,[],"true");Ga(()=>!1,[],"false");var Ac=Array.isArray;const Xc={offsetX:10,offsetY:10,id:"vg-tooltip-element",styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(F){return String(F).replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;")},maxDepth:2,formatTooltip:function(F,aa,Fa){if(Ac(F))return"[".concat(F.map(Gb=>aa("string"===typeof Gb?Gb:JSON.stringify(Gb,Pb(Fa)))).join(", "),"]");if(F===Object(F)){let Gb="";const {title:pc,image:Vb}=
F;F=tb(F,["title","image"]);pc&&(Gb+="\x3ch2\x3e".concat(aa(pc),"\x3c/h2\x3e"));Vb&&(Gb+='\x3cimg src\x3d"'.concat(aa(Vb),'"\x3e'));var fb=Object.keys(F);if(0<fb.length){Gb+="\x3ctable\x3e";for(const Ec of fb)fb=F[Ec],void 0!==fb&&(fb===Object(fb)&&(fb=JSON.stringify(fb,Pb(Fa))),Gb+='\x3ctr\x3e\x3ctd class\x3d"key"\x3e'.concat(aa(Ec),':\x3c/td\x3e\x3ctd class\x3d"value"\x3e').concat(aa(fb),"\x3c/td\x3e\x3c/tr\x3e"));Gb+="\x3c/table\x3e"}return Gb||"{}"}return aa(F)}};class kd{constructor(F){this.options=
Object.assign(Object.assign({},Xc),F);var aa=this.options.id;this.el=null;this.call=this.tooltipHandler.bind(this);if(!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){F=document.createElement("style");F.setAttribute("id",this.options.styleId);if(!/^[A-Za-z]+[-:.\w]*$/.test(aa))throw Error("Invalid HTML ID");aa="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element img {\n  max-width: 200px;\n  max-height: 200px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n".toString().replace("vg-tooltip-element",
aa);F.innerHTML=aa;aa=document.head;0<aa.childNodes.length?aa.insertBefore(F,aa.childNodes[0]):aa.appendChild(F)}}tooltipHandler(F,aa,Fa,fb){var Gb;this.el=document.getElementById(this.options.id);this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(null!==(Gb=document.fullscreenElement)&&void 0!==Gb?Gb:document.body).appendChild(this.el));if(null==fb||""===fb)this.el.classList.remove("visible","".concat(this.options.theme,
"-theme"));else{this.el.innerHTML=this.options.formatTooltip(fb,this.options.sanitize,this.options.maxDepth);this.el.classList.add("visible","".concat(this.options.theme,"-theme"));F=this.el.getBoundingClientRect();Gb=this.options.offsetX;Fa=this.options.offsetY;fb=aa.clientX+Gb;fb+F.width>window.innerWidth&&(fb=+aa.clientX-Gb-F.width);Gb=aa.clientY+Fa;Gb+F.height>window.innerHeight&&(Gb=+aa.clientY-Fa-F.height);var {x:pc,y:Vb}={x:fb,y:Gb};this.el.setAttribute("style","top: ".concat(Vb,"px; left: ").concat(pc,
"px"))}}}String.prototype.startsWith||(String.prototype.startsWith=function(F,aa){return this.substr(!aa||0>aa?0:+aa,F.length)===F});var pd;const xd=L;let nd=w;const Jd="undefined"!==typeof window?window:void 0;void 0===nd&&null!==Jd&&void 0!==Jd&&null!==(pd=Jd.vl)&&void 0!==pd&&pd.compile&&(nd=Jd.vl);const me={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Me={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",
SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},He={vega:"Vega","vega-lite":"Vega-Lite"},Ie={vega:xd.version,"vega-lite":nd?nd.version:"not available"},tf={vega:F=>F,"vega-lite":(F,aa)=>nd.compile(F,{config:aa}).spec},bf=function(){var F;if(F=1<arguments.length){if(F=h.isString(0>=arguments.length?void 0:arguments[0]))F=0>=arguments.length?void 0:arguments[0],F=!(F.startsWith("http://")||F.startsWith("https://")||F.startsWith("//"));F=F||(0>=arguments.length?void 0:arguments[0])instanceof HTMLElement||
3===arguments.length}return F?La(0>=arguments.length?void 0:arguments[0],1>=arguments.length?void 0:arguments[1],2>=arguments.length?void 0:arguments[2]):E(0>=arguments.length?void 0:arguments[0],1>=arguments.length?void 0:arguments[1])};bf.vegaLite=nd;bf.vl=nd;bf.container=E;bf.embed=La;bf.vega=xd;bf.default=La;bf.version="6.21.0";return bf})};
shadow$provide[57]=function(Eb,ob,Fc,Xa){Xa.__esModule=!0;Xa.default=function(u){const h={};return!!u&&"[object Function]"===h.toString.call(u)}};
shadow$provide[58]=function(Eb,ob,Fc,Xa){Xa.__esModule=!0;Xa.default=function(ia,ab,zb){zb&&((0,h.default)(zb)?zb(ia.data(ab)):ia.change(ab,u.vega.changeset().remove(()=>!0).insert(zb)))};var u=ob(56),h=function(ia){return ia&&ia.__esModule?ia:{default:ia}}(ob(57))};
shadow$provide[59]=function(Eb,ob,Fc,Xa){Xa.__esModule=!0;Xa.default=function(h,ia){Object.keys(ia).forEach(ab=>{(0,u.default)(h,ab,ia[ab])})};var u=function(h){return h&&h.__esModule?h:{default:h}}(ob(58))};
shadow$provide[60]=function(Eb,ob,Fc,Xa){Xa.__esModule=!0;Xa.default=function(u){const h=new Set;u.forEach(ia=>{Object.keys(ia).forEach(ab=>{h.add(ab)})});return h}};
shadow$provide[61]=function(Eb,ob,Fc,Xa){Xa.__esModule=!0;Xa.NOOP=void 0;Xa.NOOP=()=>{}};
shadow$provide[62]=function(Eb,ob,Fc,Xa){Xa.__esModule=!0;Xa.default=function(u,h){const ia=Object.keys(h);ia.forEach(ab=>{try{u.addSignalListener(ab,h[ab])}catch(zb){console.warn("Cannot add invalid signal listener.",zb)}});return 0<ia.length}};
shadow$provide[63]=function(Eb,ob,Fc,Xa){Fc.exports=function ab(h,ia){if(h===ia)return!0;if(h&&ia&&"object"==typeof h&&"object"==typeof ia){if(h.constructor!==ia.constructor)return!1;var zb;if(Array.isArray(h)){var Yb=h.length;if(Yb!=ia.length)return!1;for(zb=Yb;0!==zb--;)if(!ab(h[zb],ia[zb]))return!1;return!0}if(h.constructor===RegExp)return h.source===ia.source&&h.flags===ia.flags;if(h.valueOf!==Object.prototype.valueOf)return h.valueOf()===ia.valueOf();if(h.toString!==Object.prototype.toString)return h.toString()===
ia.toString();var ac=Object.keys(h);Yb=ac.length;if(Yb!==Object.keys(ia).length)return!1;for(zb=Yb;0!==zb--;)if(!Object.prototype.hasOwnProperty.call(ia,ac[zb]))return!1;for(zb=Yb;0!==zb--;)if(Yb=ac[zb],!ab(h[Yb],ia[Yb]))return!1;return!0}return h!==h&&ia!==ia}};
shadow$provide[64]=function(Eb,ob,Fc,Xa){function u(ab){return ab&&ab.__esModule?ab:{default:ab}}Xa.__esModule=!0;Xa.default=function(ab,zb){if(ab===zb)return!1;const Yb={width:!1,height:!1,isExpensive:!1},ac=(0,ia.default)([ab,zb]);!ac.has("width")||"width"in ab&&"width"in zb&&ab.width===zb.width||("width"in ab&&"number"===typeof ab.width?Yb.width=ab.width:Yb.isExpensive=!0);!ac.has("height")||"height"in ab&&"height"in zb&&ab.height===zb.height||("height"in ab&&"number"===typeof ab.height?Yb.height=
ab.height:Yb.isExpensive=!0);ac.delete("width");ac.delete("height");[...ac].some(Xb=>!(Xb in ab)||!(Xb in zb)||!(0,h.default)(ab[Xb],zb[Xb]))&&(Yb.isExpensive=!0);return!1!==Yb.width||!1!==Yb.height||Yb.isExpensive?Yb:!1};var h=u(ob(63)),ia=u(ob(60))};
shadow$provide[65]=function(Eb,ob,Fc,Xa){Xa.__esModule=!0;Xa.default=function(u,h){const ia=Object.keys(h);ia.forEach(ab=>{try{u.removeSignalListener(ab,h[ab])}catch(zb){console.warn("Cannot remove invalid signal listener.",zb)}});return 0<ia.length}};
shadow$provide[66]=function(Eb,ob,Fc,Xa){Xa.__esModule=!0;Xa.default=function(u){const {spec:h,width:ia,height:ab}=u;return"undefined"!==typeof ia&&"undefined"!==typeof ab?Object.assign({},h,{width:ia,height:ab}):"undefined"!==typeof ia?Object.assign({},h,{width:ia}):"undefined"!==typeof ab?Object.assign({},h,{height:ab}):h}};
shadow$provide[67]=function(Eb,ob,Fc,Xa){function u(Ba){return Ba&&Ba.__esModule?Ba:{default:Ba}}function h(Ba,Za,wb){Za in Ba?Object.defineProperty(Ba,Za,{value:wb,enumerable:!0,configurable:!0,writable:!0}):Ba[Za]=wb;return Ba}Xa.__esModule=!0;Xa.default=void 0;Eb=u(ob(19));var ia=u(ob(2)),ab=u(ob(56)),zb=u(ob(20)),Yb=u(ob(60)),ac=ob(61),Xb=u(ob(62)),mc=u(ob(64)),Cb=u(ob(65)),Ub=u(ob(66));class jc extends ia.default.PureComponent{constructor(){super(...arguments);h(this,"containerRef",ia.default.createRef());
h(this,"resultPromise",void 0);h(this,"handleError",Ba=>{const {onError:Za=ac.NOOP}=this.props;Za(Ba,this.containerRef.current);console.warn(Ba)});h(this,"modifyView",Ba=>{this.resultPromise&&this.resultPromise.then(Za=>{Za&&Ba(Za.view);return!0}).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(Ba){const Za=(0,Yb.default)([this.props,Ba]);Za.delete("className");Za.delete("signalListeners");Za.delete("spec");Za.delete("style");Za.delete("width");Za.delete("height");
if(Array.from(Za).some(wb=>this.props[wb]!==Ba[wb]))this.clearView(),this.createView();else{const wb=(0,mc.default)((0,Ub.default)(this.props),(0,Ub.default)(Ba)),{signalListeners:ub}=this.props,{signalListeners:sb}=Ba;if(wb)if(wb.isExpensive)this.clearView(),this.createView();else{const xb=!(0,zb.default)(ub,sb);this.modifyView(ib=>{!1!==wb.width&&ib.width(wb.width);!1!==wb.height&&ib.height(wb.height);xb&&(sb&&(0,Cb.default)(ib,sb),ub&&(0,Xb.default)(ib,ub));ib.run()})}else(0,zb.default)(ub,sb)||
this.modifyView(xb=>{sb&&(0,Cb.default)(xb,sb);ub&&(0,Xb.default)(xb,ub);xb.run()})}}componentWillUnmount(){this.clearView()}createView(){var Ba=this.props,Za=Object.assign({},Ba);const wb=Ba.onNewView,ub=void 0===Ba.signalListeners?{}:Ba.signalListeners;Ba=(delete Za.spec,delete Za.onNewView,delete Za.signalListeners,delete Za.width,delete Za.height,Za);this.containerRef.current&&(Za=(0,Ub.default)(this.props),this.resultPromise=(0,ab.default)(this.containerRef.current,Za,Ba).then(sb=>{if(sb){const {view:xb}=
sb;(0,Xb.default)(xb,ub)&&xb.run()}return sb}).catch(this.handleError),wb&&this.modifyView(wb))}clearView(){this.resultPromise&&this.resultPromise.then(Ba=>{Ba&&Ba.finalize()}).catch(this.handleError);this.resultPromise=void 0;return this}render(){const {className:Ba,style:Za}=this.props;return ia.default.createElement("div",{ref:this.containerRef,className:Ba,style:Za})}}Xa.default=jc;h(jc,"propTypes",{className:Eb.default.string,onError:Eb.default.func})};
shadow$provide[68]=function(Eb,ob,Fc,Xa){function u(Cb){return Cb&&Cb.__esModule?Cb:{default:Cb}}function h(){h=Object.assign||function(Cb){for(var Ub=1;Ub<arguments.length;Ub++){var jc=arguments[Ub],Ba;for(Ba in jc)Object.prototype.hasOwnProperty.call(jc,Ba)&&(Cb[Ba]=jc[Ba])}return Cb};return h.apply(this,arguments)}function ia(Cb,Ub,jc){Ub in Cb?Object.defineProperty(Cb,Ub,{value:jc,enumerable:!0,configurable:!0,writable:!0}):Cb[Ub]=jc;return Cb}Xa.__esModule=!0;Xa.default=void 0;u(ob(19));var ab=
u(ob(2)),zb=u(ob(20)),Yb=u(ob(59)),ac=u(ob(67)),Xb=ob(61);class mc extends ab.default.PureComponent{constructor(){super(...arguments);ia(this,"vegaEmbed",ab.default.createRef());ia(this,"handleNewView",Cb=>{this.update();const {onNewView:Ub=Xb.NOOP}=this.props;Ub(Cb)})}componentDidMount(){this.update()}componentDidUpdate(Cb){(0,zb.default)(this.props.data,Cb.data)||this.update()}update(){const {data:Cb}=this.props;this.vegaEmbed.current&&Cb&&0<Object.keys(Cb).length&&this.vegaEmbed.current.modifyView(Ub=>
{(0,Yb.default)(Ub,Cb);Ub.resize().run()})}render(){var Cb=Object.assign({},this.props);Cb=(delete Cb.data,Cb);return ab.default.createElement(ac.default,h({ref:this.vegaEmbed},Cb,{onNewView:this.handleNewView}))}}Xa.default=mc;ia(mc,"defaultProps",{data:{}})};
shadow$provide[69]=function(Eb,ob,Fc,Xa){function u(zb){return zb&&zb.__esModule?zb:{default:zb}}function h(){h=Object.assign||function(zb){for(var Yb=1;Yb<arguments.length;Yb++){var ac=arguments[Yb],Xb;for(Xb in ac)Object.prototype.hasOwnProperty.call(ac,Xb)&&(zb[Xb]=ac[Xb])}return zb};return h.apply(this,arguments)}Xa.__esModule=!0;Xa.default=function(zb){return ia.default.createElement(ab.default,h({},zb,{mode:"vega-lite"}))};var ia=u(ob(2)),ab=u(ob(68))};
shadow$provide[70]=function(Eb,ob,Fc,Xa){function u(Yb){return Yb&&Yb.__esModule?Yb:{default:Yb}}function h(){h=Object.assign||function(Yb){for(var ac=1;ac<arguments.length;ac++){var Xb=arguments[ac],mc;for(mc in Xb)Object.prototype.hasOwnProperty.call(Xb,mc)&&(Yb[mc]=Xb[mc])}return Yb};return h.apply(this,arguments)}function ia(Yb,ac,Xb){ac in Yb?Object.defineProperty(Yb,ac,{value:Xb,enumerable:!0,configurable:!0,writable:!0}):Yb[ac]=Xb;return Yb}Xa.__esModule=!0;Xa.default=function(Yb){let {mode:ac,
spec:Xb}=Yb;class mc extends ab.default.PureComponent{render(){return ab.default.createElement(zb.default,h({mode:ac,spec:Xb},this.props))}}ia(mc,"getSpec",function(){return Xb});return mc};var ab=u(ob(2)),zb=u(ob(68))};
shadow$provide[71]=function(Eb,ob,Fc,Xa){Xa.__esModule=!0};
shadow$provide[72]=function(Eb,ob,Fc,Xa){Xa.__esModule=!0;var u=ob(71);Object.keys(u).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in Xa&&Xa[h]===u[h]||(Xa[h]=u[h]))})};
shadow$provide[73]=function(Eb,ob,Fc,Xa){function u(ab){return ab&&ab.__esModule?ab:{default:ab}}Xa.__esModule=!0;var h={Vega:!0,VegaLite:!0,createClassFromSpec:!0};Xa.createClassFromSpec=Xa.VegaLite=Xa.Vega=void 0;Eb=u(ob(68));Xa.Vega=Eb.default;Eb=u(ob(69));Xa.VegaLite=Eb.default;Eb=u(ob(70));Xa.createClassFromSpec=Eb.default;var ia=ob(72);Object.keys(ia).forEach(function(ab){"default"!==ab&&"__esModule"!==ab&&(Object.prototype.hasOwnProperty.call(h,ab)||ab in Xa&&Xa[ab]===ia[ab]||(Xa[ab]=ia[ab]))})};
/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var g,aa=this||self;function t(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"}function ba(a){return Object.prototype.hasOwnProperty.call(a,ca)&&a[ca]||(a[ca]=++ea)}var ca="closure_uid_"+(1E9*Math.random()>>>0),ea=0;
function fa(a,b){function c(){}c.prototype=b.prototype;a.Dd=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(d,e,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[e].apply(d,h)}};function ha(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b}function ia(a,b){return null!==a&&b in a?a[b]:void 0}const ja="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ka(a,b){let c,d;for(let e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(let f=0;f<ja.length;f++)c=ja[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function la(a){if(!Array.isArray(a))for(let b=a.length-1;0<=b;b--)delete a[b];a.length=0};var ma;a:{const a=aa.navigator;if(a){const b=a.userAgent;if(b){ma=b;break a}}ma=""}let na=ma;function oa(a){return-1!=na.indexOf(a)};function pa(a,b){null!=a&&this.append.apply(this,arguments)}g=pa.prototype;g.kb="";g.set=function(a){this.kb=""+a};g.append=function(a,b,c){this.kb+=String(a);if(null!=b)for(let d=1;d<arguments.length;d++)this.kb+=arguments[d];return this};g.clear=function(){this.kb=""};g.toString=function(){return this.kb};var ra={},sa={},ta,u={},ua=null;function va(){return new v(null,5,[wa,!0,xa,!0,ya,!1,za,!1,Aa,null],null)}function x(a){return null!=a&&!1!==a}function Ba(a){return a instanceof Array}function y(a,b){return a[t(null==b?null:b)]?!0:a._?!0:!1}function A(a,b){var c=null==b?null:b.constructor;c=x(x(c)?c.Ib:c)?c.nb:t(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}function Ca(a){var b=a.nb;return x(b)?b:B.j(a)}
var Da="undefined"!==typeof Symbol&&"function"===t(Symbol)?Symbol.iterator:"@@iterator";function Ea(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function Fa(a){function b(d,e){d.push(e);return d}var c=[];return Ga?Ga(b,c,a):Ha.call(null,b,c,a)}function Ia(a){return"symbol"===t(a)||"undefined"!==typeof Symbol&&a instanceof Symbol}function Ja(){}function Ka(){}function La(){}
function Ma(a){if(null!=a&&null!=a.la)a=a.la(a);else{var b=Ma[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Ma._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("ICounted.-count",a);}return a}function Na(){}function Oa(a){if(null!=a&&null!=a.ma)a=a.ma(a);else{var b=Oa[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Oa._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IEmptyableCollection.-empty",a);}return a}function Pa(){}
function Qa(a,b){if(null!=a&&null!=a.oa)a=a.oa(a,b);else{var c=Qa[t(null==a?null:a)];if(null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else if(c=Qa._,null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else throw A("ICollection.-conj",a);}return a}function Ra(){}
var Ta=function(){function a(d,e,f){var h=Sa[t(null==d?null:d)];if(null!=h)return h.D?h.D(d,e,f):h.call(null,d,e,f);h=Sa._;if(null!=h)return h.D?h.D(d,e,f):h.call(null,d,e,f);throw A("IIndexed.-nth",d);}function b(d,e){var f=Sa[t(null==d?null:d)];if(null!=f)return f.B?f.B(d,e):f.call(null,d,e);f=Sa._;if(null!=f)return f.B?f.B(d,e):f.call(null,d,e);throw A("IIndexed.-nth",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.B=b;c.D=a;return c}(),Sa=function Sa(a){switch(arguments.length){case 2:return Sa.B(arguments[0],arguments[1]);case 3:return Sa.D(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Sa.B=function(a,b){return null!=a&&null!=a.ea?a.ea(a,b):Ta(a,b)};Sa.D=function(a,b,c){return null!=a&&null!=a.Aa?a.Aa(a,b,c):Ta(a,b,c)};Sa.$=3;function Ua(){}
function D(a){if(null!=a&&null!=a.wa)a=a.wa(a);else{var b=D[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=D._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("ISeq.-first",a);}return a}function Va(a){if(null!=a&&null!=a.xa)a=a.xa(a);else{var b=Va[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Va._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("ISeq.-rest",a);}return a}function Wa(){}function Xa(){}
var Za=function(){function a(d,e,f){var h=Ya[t(null==d?null:d)];if(null!=h)return h.D?h.D(d,e,f):h.call(null,d,e,f);h=Ya._;if(null!=h)return h.D?h.D(d,e,f):h.call(null,d,e,f);throw A("ILookup.-lookup",d);}function b(d,e){var f=Ya[t(null==d?null:d)];if(null!=f)return f.B?f.B(d,e):f.call(null,d,e);f=Ya._;if(null!=f)return f.B?f.B(d,e):f.call(null,d,e);throw A("ILookup.-lookup",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.B=b;c.D=a;return c}(),Ya=function Ya(a){switch(arguments.length){case 2:return Ya.B(arguments[0],arguments[1]);case 3:return Ya.D(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Ya.B=function(a,b){return null!=a&&null!=a.ya?a.ya(a,b):Za(a,b)};Ya.D=function(a,b,c){return null!=a&&null!=a.ca?a.ca(a,b,c):Za(a,b,c)};Ya.$=3;function $a(){}
function ab(a,b){if(null!=a&&null!=a.lb)a=a.lb(a,b);else{var c=ab[t(null==a?null:a)];if(null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else if(c=ab._,null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else throw A("IAssociative.-contains-key?",a);}return a}function bb(a,b,c){if(null!=a&&null!=a.ab)a=a.ab(a,b,c);else{var d=bb[t(null==a?null:a)];if(null!=d)a=d.D?d.D(a,b,c):d.call(null,a,b,c);else if(d=bb._,null!=d)a=d.D?d.D(a,b,c):d.call(null,a,b,c);else throw A("IAssociative.-assoc",a);}return a}
function cb(a,b){if(null!=a&&null!=a.tb)a=a.tb(a,b);else{var c=cb[t(null==a?null:a)];if(null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else if(c=cb._,null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else throw A("IFind.-find",a);}return a}function db(){}function eb(a,b){if(null!=a&&null!=a.jc)a=a.jc(a,b);else{var c=eb[t(null==a?null:a)];if(null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else if(c=eb._,null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else throw A("IMap.-dissoc",a);}return a}
function fb(a){if(null!=a&&null!=a.Xc)a=a.key;else{var b=fb[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=fb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IMapEntry.-key",a);}return a}function gb(a){if(null!=a&&null!=a.Yc)a=a.R;else{var b=gb[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=gb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IMapEntry.-val",a);}return a}function hb(){}
function ib(a,b){if(null!=a&&null!=a.zc)a=a.zc(a,b);else{var c=ib[t(null==a?null:a)];if(null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else if(c=ib._,null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else throw A("ISet.-disjoin",a);}return a}function jb(a){if(null!=a&&null!=a.vb)a=a.vb(a);else{var b=jb[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=jb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IStack.-peek",a);}return a}
function kb(a){if(null!=a&&null!=a.wb)a=a.wb(a);else{var b=kb[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=kb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IStack.-pop",a);}return a}function lb(){}function mb(a,b,c){if(null!=a&&null!=a.mb)a=a.mb(a,b,c);else{var d=mb[t(null==a?null:a)];if(null!=d)a=d.D?d.D(a,b,c):d.call(null,a,b,c);else if(d=mb._,null!=d)a=d.D?d.D(a,b,c):d.call(null,a,b,c);else throw A("IVector.-assoc-n",a);}return a}
function F(a){if(null!=a&&null!=a.fb)a=a.fb(a);else{var b=F[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=F._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IDeref.-deref",a);}return a}function nb(){}function ob(a){if(null!=a&&null!=a.ha)a=a.ha(a);else{var b=ob[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=ob._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IMeta.-meta",a);}return a}
function pb(a,b){if(null!=a&&null!=a.ka)a=a.ka(a,b);else{var c=pb[t(null==a?null:a)];if(null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else if(c=pb._,null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else throw A("IWithMeta.-with-meta",a);}return a}function qb(){}
var sb=function(){function a(d,e,f){var h=rb[t(null==d?null:d)];if(null!=h)return h.D?h.D(d,e,f):h.call(null,d,e,f);h=rb._;if(null!=h)return h.D?h.D(d,e,f):h.call(null,d,e,f);throw A("IReduce.-reduce",d);}function b(d,e){var f=rb[t(null==d?null:d)];if(null!=f)return f.B?f.B(d,e):f.call(null,d,e);f=rb._;if(null!=f)return f.B?f.B(d,e):f.call(null,d,e);throw A("IReduce.-reduce",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.B=b;c.D=a;return c}(),rb=function rb(a){switch(arguments.length){case 2:return rb.B(arguments[0],arguments[1]);case 3:return rb.D(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};rb.B=function(a,b){return null!=a&&null!=a.qa?a.qa(a,b):sb(a,b)};rb.D=function(a,b,c){return null!=a&&null!=a.ra?a.ra(a,b,c):sb(a,b,c)};rb.$=3;function tb(){}
function ub(a,b,c){if(null!=a&&null!=a.Db)a=a.Db(a,b,c);else{var d=ub[t(null==a?null:a)];if(null!=d)a=d.D?d.D(a,b,c):d.call(null,a,b,c);else if(d=ub._,null!=d)a=d.D?d.D(a,b,c):d.call(null,a,b,c);else throw A("IKVReduce.-kv-reduce",a);}return a}function vb(a,b){if(null!=a&&null!=a.fa)a=a.fa(a,b);else{var c=vb[t(null==a?null:a)];if(null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else if(c=vb._,null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else throw A("IEquiv.-equiv",a);}return a}
function wb(a){if(null!=a&&null!=a.ga)a=a.ga(a);else{var b=wb[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=wb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IHash.-hash",a);}return a}function xb(){}function yb(a){if(null!=a&&null!=a.ja)a=a.ja(a);else{var b=yb[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=yb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("ISeqable.-seq",a);}return a}function zb(){}function Ab(){}function Bb(){}
function G(a,b){if(null!=a&&null!=a.Ac)a=a.Ac(a,b);else{var c=G[t(null==a?null:a)];if(null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else if(c=G._,null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else throw A("IWriter.-write",a);}return a}function Cb(){}function Db(a,b,c){if(null!=a&&null!=a.ia)a=a.ia(a,b,c);else{var d=Db[t(null==a?null:a)];if(null!=d)a=d.D?d.D(a,b,c):d.call(null,a,b,c);else if(d=Db._,null!=d)a=d.D?d.D(a,b,c):d.call(null,a,b,c);else throw A("IPrintWithWriter.-pr-writer",a);}return a}
function Eb(a,b){var c=Fb;if(null!=a&&null!=a.Sb)a.Sb(a,b,c);else{var d=Eb[t(null==a?null:a)];if(null!=d)d.D?d.D(a,b,c):d.call(null,a,b,c);else if(d=Eb._,null!=d)d.D?d.D(a,b,c):d.call(null,a,b,c);else throw A("IWatchable.-add-watch",a);}}function Gb(a,b){if(null!=a&&null!=a.Tb)a.Tb(a,b);else{var c=Gb[t(null==a?null:a)];if(null!=c)c.B?c.B(a,b):c.call(null,a,b);else if(c=Gb._,null!=c)c.B?c.B(a,b):c.call(null,a,b);else throw A("IWatchable.-remove-watch",a);}}
function Hb(a){if(null!=a&&null!=a.sb)a=a.sb(a);else{var b=Hb[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Hb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IEditableCollection.-as-transient",a);}return a}function Ib(a,b){if(null!=a&&null!=a.yb)a=a.yb(a,b);else{var c=Ib[t(null==a?null:a)];if(null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else if(c=Ib._,null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else throw A("ITransientCollection.-conj!",a);}return a}
function Jb(a){if(null!=a&&null!=a.Hb)a=a.Hb(a);else{var b=Jb[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Jb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("ITransientCollection.-persistent!",a);}return a}function Kb(a,b,c){if(null!=a&&null!=a.xb)a=a.xb(a,b,c);else{var d=Kb[t(null==a?null:a)];if(null!=d)a=d.D?d.D(a,b,c):d.call(null,a,b,c);else if(d=Kb._,null!=d)a=d.D?d.D(a,b,c):d.call(null,a,b,c);else throw A("ITransientAssociative.-assoc!",a);}return a}
function Lb(a){if(null!=a&&null!=a.uc)a=a.uc(a);else{var b=Lb[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Lb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IChunk.-drop-first",a);}return a}function Mb(a){if(null!=a&&null!=a.hc)a=a.hc(a);else{var b=Mb[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Mb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IChunkedSeq.-chunked-first",a);}return a}
function Nb(a){if(null!=a&&null!=a.Rb)a=a.Rb(a);else{var b=Nb[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Nb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IChunkedSeq.-chunked-rest",a);}return a}function Ob(a){if(null!=a&&null!=a.Eb)a=a.Eb(a);else{var b=Ob[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Ob._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("INamed.-name",a);}return a}
function Pb(a){if(null!=a&&null!=a.Fb)a=a.Fb(a);else{var b=Pb[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Pb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("INamed.-namespace",a);}return a}function Qb(a,b){if(null!=a&&null!=a.Sa)a=a.Sa(a,b);else{var c=Qb[t(null==a?null:a)];if(null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else if(c=Qb._,null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else throw A("IReset.-reset!",a);}return a}
var Sb=function(){function a(f,h,k,l,m){var n=Rb[t(null==f?null:f)];if(null!=n)return n.aa?n.aa(f,h,k,l,m):n.call(null,f,h,k,l,m);n=Rb._;if(null!=n)return n.aa?n.aa(f,h,k,l,m):n.call(null,f,h,k,l,m);throw A("ISwap.-swap!",f);}function b(f,h,k,l){var m=Rb[t(null==f?null:f)];if(null!=m)return m.T?m.T(f,h,k,l):m.call(null,f,h,k,l);m=Rb._;if(null!=m)return m.T?m.T(f,h,k,l):m.call(null,f,h,k,l);throw A("ISwap.-swap!",f);}function c(f,h,k){var l=Rb[t(null==f?null:f)];if(null!=l)return l.D?l.D(f,h,k):l.call(null,
f,h,k);l=Rb._;if(null!=l)return l.D?l.D(f,h,k):l.call(null,f,h,k);throw A("ISwap.-swap!",f);}function d(f,h){var k=Rb[t(null==f?null:f)];if(null!=k)return k.B?k.B(f,h):k.call(null,f,h);k=Rb._;if(null!=k)return k.B?k.B(f,h):k.call(null,f,h);throw A("ISwap.-swap!",f);}var e=null;e=function(f,h,k,l,m){switch(arguments.length){case 2:return d.call(this,f,h);case 3:return c.call(this,f,h,k);case 4:return b.call(this,f,h,k,l);case 5:return a.call(this,f,h,k,l,m)}throw Error("Invalid arity: "+arguments.length);
};e.B=d;e.D=c;e.T=b;e.aa=a;return e}(),Rb=function Rb(a){switch(arguments.length){case 2:return Rb.B(arguments[0],arguments[1]);case 3:return Rb.D(arguments[0],arguments[1],arguments[2]);case 4:return Rb.T(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Rb.aa(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Rb.B=function(a,b){return null!=a&&null!=a.kc?a.kc(a,b):Sb(a,b)};
Rb.D=function(a,b,c){return null!=a&&null!=a.lc?a.lc(a,b,c):Sb(a,b,c)};Rb.T=function(a,b,c,d){return null!=a&&null!=a.mc?a.mc(a,b,c,d):Sb(a,b,c,d)};Rb.aa=function(a,b,c,d,e){return null!=a&&null!=a.nc?a.nc(a,b,c,d,e):Sb(a,b,c,d,e)};Rb.$=5;function Tb(){}function Ub(a){if(null!=a&&null!=a.Qa)a=a.Qa(a);else{var b=Ub[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Ub._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IIterable.-iterator",a);}return a}
function Vb(a){this.pd=a;this.F=1073741824;this.P=0}Vb.prototype.Ac=function(a,b){return this.pd.append(b)};function Wb(a){var b=new pa;a.ia(null,new Vb(b),va());return B.j(b)}var Xb="undefined"!==typeof Math&&"undefined"!==typeof Math.imul?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function Yb(a){a=Xb(a|0,-862048943);return Xb(a<<15|a>>>-15,461845907)}
function Zb(a,b){a=(a|0)^(b|0);return Xb(a<<13|a>>>-13,5)+-430675100|0}function $b(a,b){a=(a|0)^b;a=Xb(a^a>>>16,-2048144789);a=Xb(a^a>>>13,-1028477387);return a^a>>>16}function ac(a){a:{var b=1;for(var c=0;;)if(b<a.length)c=Zb(c,Yb(a.charCodeAt(b-1)|a.charCodeAt(b)<<16)),b+=2;else{b=c;break a}}return $b(1===(a.length&1)?b^Yb(a.charCodeAt(a.length-1)):b,Xb(2,a.length))}var bc={},cc=0;
function dc(a){255<cc&&(bc={},cc=0);if(null==a)return 0;var b=bc[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b)d=Xb(31,d)+a.charCodeAt(c),c+=1;else{b=d;break a}else b=0;else b=0;bc[a]=b;cc+=1;a=b}return a}
function ec(a){if(null!=a&&(a.F&4194304||u===a.td))return a.ga(null)^0;if("number"===typeof a){if(isFinite(a))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=dc(a),a=0===a?a:$b(Zb(0,Yb(a)),4)):a=a instanceof Date?a.valueOf()^0:null==a?0:wb(a)^0,a}function fc(a,b){return a^b+2654435769+(a<<6)+(a>>2)}
function gc(a,b,c,d,e){this.Bb=a;this.name=b;this.jb=c;this._hash=d;this.Ya=e;this.F=2154168321;this.P=4096}g=gc.prototype;g.toString=function(){return this.jb};g.fa=function(a,b){return b instanceof gc?this.jb===b.jb:!1};g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};
g.j=function(a){return H.B?H.B(a,this):H.call(null,a,this)};g.B=function(a,b){return H.D?H.D(a,this,b):H.call(null,a,this,b)};g.ha=function(){return this.Ya};g.ka=function(a,b){return new gc(this.Bb,this.name,this.jb,this._hash,b)};g.ga=function(){var a=this._hash;return null!=a?a:this._hash=a=fc(ac(this.name),dc(this.Bb))};g.Eb=function(){return this.name};g.Fb=function(){return this.Bb};g.ia=function(a,b){return G(b,this.jb)};
var hc=function hc(a){switch(arguments.length){case 1:return hc.j(arguments[0]);case 2:return hc.B(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};hc.j=function(a){for(;;){if(a instanceof gc)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?hc.B(null,a):hc.B(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof I)a=a.Ra;else throw Error("no conversion to symbol");}};
hc.B=function(a,b){var c=null!=a?[B.j(a),"/",B.j(b)].join(""):b;return new gc(a,b,c,null,null)};hc.$=2;function ic(a){return null!=a?a.P&131072||u===a.ud?!0:a.P?!1:y(Tb,a):y(Tb,a)}function J(a){if(null==a)return null;if(null!=a&&(a.F&8388608||u===a.ad))return a.ja(null);if(Ba(a)||"string"===typeof a)return 0===a.length?null:new K(a,0,null);if(null!=a&&null!=a[Da])return a=ia(a,Da).call(a),jc.j?jc.j(a):jc.call(null,a);if(y(xb,a))return yb(a);throw Error([B.j(a)," is not ISeqable"].join(""));}
function N(a){if(null==a)return null;if(null!=a&&(a.F&64||u===a.ub))return a.wa(null);a=J(a);return null==a?null:D(a)}function kc(a){return null!=a?null!=a&&(a.F&64||u===a.ub)?a.xa(null):(a=J(a))?a.xa(null):lc:lc}function O(a){return null==a?null:null!=a&&(a.F&128||u===a.Gb)?a.va():J(kc(a))}
var P=function P(a){switch(arguments.length){case 1:return P.j(arguments[0]);case 2:return P.B(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return P.K(arguments[0],arguments[1],c)}};P.j=function(){return!0};P.B=function(a,b){return null==a?null==b:a===b||vb(a,b)};P.K=function(a,b,c){for(;;)if(P.B(a,b))if(O(c))a=b,b=N(c),c=O(c);else return P.B(b,N(c));else return!1};
P.ba=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.K(b,a,c)};P.$=2;function mc(a){this.s=a}mc.prototype.next=function(){if(null!=this.s){var a=N(this.s);this.s=O(this.s);return{value:a,done:!1}}return{value:null,done:!0}};function nc(a){return new mc(J(a))}function oc(a,b){this.value=a;this.Ab=b;this.bc=null;this.F=8388672;this.P=0}oc.prototype.ja=function(){return this};oc.prototype.wa=function(){return this.value};
oc.prototype.xa=function(){null==this.bc&&(this.bc=jc.j?jc.j(this.Ab):jc.call(null,this.Ab));return this.bc};function jc(a){var b=a.next();return x(b.done)?null:new oc(b.value,a)}function pc(a){var b=0,c=1;for(a=J(a);;)if(null!=a)b+=1,c=Xb(31,c)+ec(N(a))|0,a=O(a);else return $b(Zb(0,Yb(c)),b)}var qc=$b(Zb(0,Yb(1)),0);function rc(a){var b=0,c=0;for(a=J(a);;)if(null!=a)b+=1,c=c+ec(N(a))|0,a=O(a);else return $b(Zb(0,Yb(c)),b)}var sc=$b(Zb(0,Yb(0)),0);La["null"]=!0;Ma["null"]=function(){return 0};
Date.prototype.fa=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};vb.number=function(a,b){return a===b};Ja["function"]=!0;nb["function"]=!0;ob["function"]=function(){return null};wb._=function(a){return ba(a)};function tc(a){return a+1}function uc(){this.R=!1;this.F=32768;this.P=0}uc.prototype.fb=function(){return this.R};function vc(a){return a instanceof uc}function wc(a){return F(a)}
function xc(a,b){var c=a.la(null);if(0===c)return b.O?b.O():b.call(null);for(var d=a.ea(null,0),e=1;;)if(e<c){var f=a.ea(null,e);d=b.B?b.B(d,f):b.call(null,d,f);if(vc(d))return F(d);e+=1}else return d}function yc(a,b,c){var d=a.la(null),e=c;for(c=0;;)if(c<d){var f=a.ea(null,c);e=b.B?b.B(e,f):b.call(null,e,f);if(vc(e))return F(e);c+=1}else return e}
function zc(a,b){var c=a.length;if(0===a.length)return b.O?b.O():b.call(null);for(var d=a[0],e=1;;)if(e<c){var f=a[e];d=b.B?b.B(d,f):b.call(null,d,f);if(vc(d))return F(d);e+=1}else return d}function Ac(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var f=a[c];e=b.B?b.B(e,f):b.call(null,e,f);if(vc(e))return F(e);c+=1}else return e}function Bc(a,b,c,d){for(var e=a.length;;)if(d<e){var f=a[d];c=b.B?b.B(c,f):b.call(null,c,f);if(vc(c))return F(c);d+=1}else return c}
function Cc(a){return null!=a?a.F&2||u===a.Qc?!0:a.F?!1:y(La,a):y(La,a)}function Dc(a){return null!=a?a.F&16||u===a.wc?!0:a.F?!1:y(Ra,a):y(Ra,a)}function Q(a,b,c){var d=R.j?R.j(a):R.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(P.B(Ec?Ec(a,c):Fc.call(null,a,c),b))return c;c+=1}else return-1}
function S(a,b,c){var d=R.j?R.j(a):R.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(P.B(Ec?Ec(a,c):Fc.call(null,a,c),b))return c;--c}else return-1}function Gc(a,b){this.C=a;this.i=b}Gc.prototype.pa=function(){return this.i<this.C.length};Gc.prototype.next=function(){var a=this.C[this.i];this.i+=1;return a};function K(a,b,c){this.C=a;this.i=b;this.meta=c;this.F=166592766;this.P=139264}g=K.prototype;g.toString=function(){return Wb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R.j?R.j(this):R.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ea=function(a,b){a=b+this.i;if(0<=a&&a<this.C.length)return this.C[a];throw Error("Index out of bounds");};g.Aa=function(a,b,c){a=b+this.i;return 0<=a&&a<this.C.length?this.C[a]:c};
g.Qa=function(){return new Gc(this.C,this.i)};g.ha=function(){return this.meta};g.va=function(){return this.i+1<this.C.length?new K(this.C,this.i+1,null):null};g.la=function(){var a=this.C.length-this.i;return 0>a?0:a};g.ga=function(){return pc(this)};g.fa=function(a,b){return Hc.B?Hc.B(this,b):Hc.call(null,this,b)};g.ma=function(){return lc};g.qa=function(a,b){return Bc(this.C,b,this.C[this.i],this.i+1)};g.ra=function(a,b,c){return Bc(this.C,b,c,this.i)};g.wa=function(){return this.C[this.i]};
g.xa=function(){return this.i+1<this.C.length?new K(this.C,this.i+1,null):lc};g.ja=function(){return this.i<this.C.length?this:null};g.ka=function(a,b){return b===this.meta?this:new K(this.C,this.i,b)};g.oa=function(a,b){return U.B?U.B(b,this):U.call(null,b,this)};K.prototype[Da]=function(){return nc(this)};function Ic(a){return 0<a.length?new K(a,0,null):null}vb._=function(a,b){return a===b};
var Jc=function Jc(a){switch(arguments.length){case 0:return Jc.O();case 1:return Jc.j(arguments[0]);case 2:return Jc.B(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return Jc.K(arguments[0],arguments[1],c)}};Jc.O=function(){return Kc};Jc.j=function(a){return a};Jc.B=function(a,b){return null!=a?Qa(a,b):new Lc(null,b,null,1,null)};
Jc.K=function(a,b,c){for(;;)if(x(c))a=Jc.B(a,b),b=N(c),c=O(c);else return Jc.B(a,b)};Jc.ba=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.K(b,a,c)};Jc.$=2;function R(a){if(null!=a)if(null!=a&&(a.F&2||u===a.Qc))a=a.la(null);else if(Ba(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.F&8388608||u===a.ad))a:{a=J(a);for(var b=0;;){if(Cc(a)){a=b+Ma(a);break a}a=O(a);b+=1}}else a=Ma(a);else a=0;return a}
function Mc(a,b,c){for(;;){if(null==a)return c;if(0===b)return J(a)?N(a):c;if(Dc(a))return Sa(a,b,c);if(J(a))a=O(a),--b;else return c}}function Fc(a){switch(arguments.length){case 2:return Ec(arguments[0],arguments[1]);case 3:return V(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}
function Ec(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.F&16||u===a.wc))return a.ea(null,b);if(Ba(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.F&64||u===a.ub)||null!=a&&(a.F&16777216||u===a.yc)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(J(a)){a=N(a);break a}throw Error("Index out of bounds");}if(Dc(a)){a=Sa(a,b);break a}if(J(a))a=O(a),--b;else throw Error("Index out of bounds");}return a}if(y(Ra,a))return Sa(a,b);throw Error(["nth not supported on this type ",B.j(Ca(null==a?null:a.constructor))].join(""));}
function V(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.F&16||u===a.wc))return a.Aa(null,b,c);if(Ba(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.F&64||u===a.ub)||null!=a&&(a.F&16777216||u===a.yc))return 0>b?c:Mc(a,b,c);if(y(Ra,a))return Sa(a,b,c);throw Error(["nth not supported on this type ",B.j(Ca(null==a?null:a.constructor))].join(""));}
var H=function H(a){switch(arguments.length){case 2:return H.B(arguments[0],arguments[1]);case 3:return H.D(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};H.B=function(a,b){return null==a?null:null!=a&&(a.F&256||u===a.Wc)?a.ya(null,b):Ba(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:y(Xa,a)?Ya(a,b):null};
H.D=function(a,b,c){return null!=a?null!=a&&(a.F&256||u===a.Wc)?a.ca(null,b,c):Ba(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:y(Xa,a)?Ya(a,b,c):c:c};H.$=3;var W=function W(a){switch(arguments.length){case 3:return W.D(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(3),0,null);return W.K(arguments[0],arguments[1],arguments[2],c)}};
W.D=function(a,b,c){return null!=a&&(a.F&512||u===a.Pc)?a.ab(null,b,c):null!=a?bb(a,b,c):Nc([b,c])};W.K=function(a,b,c,d){for(;;)if(a=W.D(a,b,c),x(d))b=N(d),c=N(O(d)),d=O(O(d));else return a};W.ba=function(a){var b=N(a),c=O(a);a=N(c);var d=O(c);c=N(d);d=O(d);return this.K(b,a,c,d)};W.$=3;
var Oc=function Oc(a){switch(arguments.length){case 1:return Oc.j(arguments[0]);case 2:return Oc.B(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return Oc.K(arguments[0],arguments[1],c)}};Oc.j=function(a){return a};Oc.B=function(a,b){return null==a?null:eb(a,b)};Oc.K=function(a,b,c){for(;;){if(null==a)return null;a=Oc.B(a,b);if(x(c))b=N(c),c=O(c);else return a}};
Oc.ba=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.K(b,a,c)};Oc.$=2;function Pc(a){var b="function"===typeof a;return b?b:null!=a?u===a.Oc?!0:a.Bc?!1:y(Ja,a):y(Ja,a)}function Qc(a,b){this.I=a;this.meta=b;this.F=393217;this.P=0}g=Qc.prototype;g.ha=function(){return this.meta};g.ka=function(a,b){return new Qc(this.I,b)};g.Oc=u;
g.call=function(a){switch(arguments.length-1){case 0:return this.O();case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);case 3:return this.D(arguments[1],arguments[2],arguments[3]);case 4:return this.T(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.Na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Oa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Ca(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Da(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ia(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Ka(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Ma(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.ic(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};g.O=function(){return this.I.O?this.I.O():this.I.call(null)};g.j=function(a){return this.I.j?this.I.j(a):this.I.call(null,a)};g.B=function(a,b){return this.I.B?this.I.B(a,b):this.I.call(null,a,b)};g.D=function(a,b,c){return this.I.D?this.I.D(a,b,c):this.I.call(null,a,b,c)};
g.T=function(a,b,c,d){return this.I.T?this.I.T(a,b,c,d):this.I.call(null,a,b,c,d)};g.aa=function(a,b,c,d,e){return this.I.aa?this.I.aa(a,b,c,d,e):this.I.call(null,a,b,c,d,e)};g.Na=function(a,b,c,d,e,f){return this.I.Na?this.I.Na(a,b,c,d,e,f):this.I.call(null,a,b,c,d,e,f)};g.Oa=function(a,b,c,d,e,f,h){return this.I.Oa?this.I.Oa(a,b,c,d,e,f,h):this.I.call(null,a,b,c,d,e,f,h)};g.za=function(a,b,c,d,e,f,h,k){return this.I.za?this.I.za(a,b,c,d,e,f,h,k):this.I.call(null,a,b,c,d,e,f,h,k)};
g.Pa=function(a,b,c,d,e,f,h,k,l){return this.I.Pa?this.I.Pa(a,b,c,d,e,f,h,k,l):this.I.call(null,a,b,c,d,e,f,h,k,l)};g.Ca=function(a,b,c,d,e,f,h,k,l,m){return this.I.Ca?this.I.Ca(a,b,c,d,e,f,h,k,l,m):this.I.call(null,a,b,c,d,e,f,h,k,l,m)};g.Da=function(a,b,c,d,e,f,h,k,l,m,n){return this.I.Da?this.I.Da(a,b,c,d,e,f,h,k,l,m,n):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.Ea=function(a,b,c,d,e,f,h,k,l,m,n,p){return this.I.Ea?this.I.Ea(a,b,c,d,e,f,h,k,l,m,n,p):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.Fa=function(a,b,c,d,e,f,h,k,l,m,n,p,q){return this.I.Fa?this.I.Fa(a,b,c,d,e,f,h,k,l,m,n,p,q):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q)};g.Ga=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){return this.I.Ga?this.I.Ga(a,b,c,d,e,f,h,k,l,m,n,p,q,r):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r)};g.Ha=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w){return this.I.Ha?this.I.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w)};
g.Ia=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z){return this.I.Ia?this.I.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z)};g.Ja=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C){return this.I.Ja?this.I.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C)};g.Ka=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E){return this.I.Ka?this.I.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E)};
g.La=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M){return this.I.La?this.I.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M)};g.Ma=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T){return this.I.Ma?this.I.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T)};
g.ic=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T,da){return Rc.Vc?Rc.Vc(this.I,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T,da):Rc.call(null,this.I,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T,da)};function Sc(a,b){return"function"===typeof a?new Qc(a,b):null==a?null:pb(a,b)}function Tc(a){var b=null!=a;return(b?null!=a?a.F&131072||u===a.Zc||(a.F?0:y(nb,a)):y(nb,a):b)?ob(a):null}
var Uc=function Uc(a){switch(arguments.length){case 1:return Uc.j(arguments[0]);case 2:return Uc.B(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return Uc.K(arguments[0],arguments[1],c)}};Uc.j=function(a){return a};Uc.B=function(a,b){return null==a?null:ib(a,b)};Uc.K=function(a,b,c){for(;;){if(null==a)return null;a=Uc.B(a,b);if(x(c))b=N(c),c=O(c);else return a}};
Uc.ba=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.K(b,a,c)};Uc.$=2;function Vc(a){var b;(b=null==a)||(a=J(a),b=null==a?!0:!1===a?!0:!1);return b}function Wc(a){return null==a?!1:null!=a?a.F&8||u===a.rd?!0:a.F?!1:y(Pa,a):y(Pa,a)}function Xc(a){return null==a?!1:null!=a?a.F&4096||u===a.Ad?!0:a.F?!1:y(hb,a):y(hb,a)}function Yc(a){return null!=a?a.F&16777216||u===a.yc?!0:a.F?!1:y(zb,a):y(zb,a)}function $c(a){return null==a?!1:null!=a?a.F&1024||u===a.xd?!0:a.F?!1:y(db,a):y(db,a)}
function ad(a){return null!=a?a.F&67108864||u===a.zd?!0:a.F?!1:y(Bb,a):y(Bb,a)}function bd(a){return null!=a?a.F&16384||u===a.Bd?!0:a.F?!1:y(lb,a):y(lb,a)}function cd(a){return null!=a?a.P&512||u===a.qd?!0:!1:!1}function dd(a,b,c,d,e){for(;;){if(0===e)return c;c[d]=a[b];d+=1;--e;b+=1}}var ed={};function fd(a){return null==a?!1:!1===a?!1:!0}function gd(a){var b=Pc(a);return b?b:null!=a?a.F&1||u===a.sd?!0:a.F?!1:y(Ka,a):y(Ka,a)}
function hd(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&parseFloat(a)===parseInt(a,10)}function id(a,b){return null!=a&&(a.F&512||u===a.Pc)?a.lb(null,b):y($a,a)?ab(a,b):H.D(a,b,ed)===ed?!1:!0}function jd(a,b){var c=J(b);return c?(b=N(c),c=O(c),Ga?Ga(a,b,c):Ha.call(null,a,b,c)):a.O?a.O():a.call(null)}function kd(a,b,c){for(c=J(c);;)if(c){var d=N(c);b=a.B?a.B(b,d):a.call(null,b,d);if(vc(b))return F(b);c=O(c)}else return b}
function ld(a,b){a=Ub(a);if(x(a.pa()))for(var c=a.next();;)if(a.pa()){var d=a.next();c=b.B?b.B(c,d):b.call(null,c,d);if(vc(c))return F(c)}else return c;else return b.O?b.O():b.call(null)}function md(a,b,c){for(a=Ub(a);;)if(a.pa()){var d=a.next();c=b.B?b.B(c,d):b.call(null,c,d);if(vc(c))return F(c)}else return c}
function Ha(a){switch(arguments.length){case 2:return nd(arguments[0],arguments[1]);case 3:return Ga(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function nd(a,b){return null!=b&&(b.F&524288||u===b.$c)?b.qa(null,a):Ba(b)?zc(b,a):"string"===typeof b?zc(b,a):y(qb,b)?rb(b,a):ic(b)?ld(b,a):jd(a,b)}
function Ga(a,b,c){return null!=c&&(c.F&524288||u===c.$c)?c.ra(null,a,b):Ba(c)?Ac(c,a,b):"string"===typeof c?Ac(c,a,b):y(qb,c)?rb(c,a,b):ic(c)?md(c,a,b):kd(a,b,c)}function od(a,b,c){return null!=c?ub(c,a,b):b}function pd(a){return a}function qd(a,b,c,d){a=a.j?a.j(b):a.call(null,b);c=Ga(a,c,d);return a.j?a.j(c):a.call(null,c)}
var rd=function rd(a){switch(arguments.length){case 0:return rd.O();case 1:return rd.j(arguments[0]);case 2:return rd.B(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return rd.K(arguments[0],arguments[1],c)}};rd.O=function(){return 0};rd.j=function(a){return a};rd.B=function(a,b){return a+b};rd.K=function(a,b,c){return Ga(rd,a+b,c)};
rd.ba=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.K(b,a,c)};rd.$=2;var sd=function sd(a){switch(arguments.length){case 1:return sd.j(arguments[0]);case 2:return sd.B(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return sd.K(arguments[0],arguments[1],c)}};sd.j=function(a){return-a};sd.B=function(a,b){return a-b};sd.K=function(a,b,c){return Ga(sd,a-b,c)};
sd.ba=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.K(b,a,c)};sd.$=2;function td(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)}function ud(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}var B=function B(a){switch(arguments.length){case 0:return B.O();case 1:return B.j(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(1),0,null);return B.K(arguments[0],c)}};B.O=function(){return""};
B.j=function(a){return null==a?"":[a].join("")};B.K=function(a,b){for(a=new pa(B.j(a));;)if(x(b))a=a.append(B.j(N(b))),b=O(b);else return a.toString()};B.ba=function(a){var b=N(a);a=O(a);return this.K(b,a)};B.$=1;function Hc(a,b){if(Yc(b))if(Cc(a)&&Cc(b)&&R(a)!==R(b))a=!1;else a:for(a=J(a),b=J(b);;){if(null==a){a=null==b;break a}if(null!=b&&P.B(N(a),N(b)))a=O(a),b=O(b);else{a=!1;break a}}else a=null;return fd(a)}
function Lc(a,b,c,d,e){this.meta=a;this.first=b;this.eb=c;this.count=d;this.N=e;this.F=65937646;this.P=8192}g=Lc.prototype;g.toString=function(){return Wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ha=function(){return this.meta};g.va=function(){return 1===this.count?null:this.eb};g.la=function(){return this.count};g.vb=function(){return this.first};g.wb=function(){return this.xa(null)};
g.ga=function(){var a=this.N;return null!=a?a:this.N=a=pc(this)};g.fa=function(a,b){return Hc(this,b)};g.ma=function(){return pb(lc,this.meta)};g.qa=function(a,b){return jd(b,this)};g.ra=function(a,b,c){return kd(b,c,this)};g.wa=function(){return this.first};g.xa=function(){return 1===this.count?lc:this.eb};g.ja=function(){return this};g.ka=function(a,b){return b===this.meta?this:new Lc(b,this.first,this.eb,this.count,this.N)};g.oa=function(a,b){return new Lc(this.meta,b,this,this.count+1,null)};
Lc.prototype[Da]=function(){return nc(this)};function vd(a){this.meta=a;this.F=65937614;this.P=8192}g=vd.prototype;g.toString=function(){return Wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ha=function(){return this.meta};g.va=function(){return null};g.la=function(){return 0};g.vb=function(){return null};g.wb=function(){throw Error("Can't pop empty list");};g.ga=function(){return qc};
g.fa=function(a,b){return(null!=b?b.F&33554432||u===b.wd||(b.F?0:y(Ab,b)):y(Ab,b))||Yc(b)?null==J(b):!1};g.ma=function(){return this};g.qa=function(a,b){return jd(b,this)};g.ra=function(a,b,c){return kd(b,c,this)};g.wa=function(){return null};g.xa=function(){return lc};g.ja=function(){return null};g.ka=function(a,b){return b===this.meta?this:new vd(b)};g.oa=function(a,b){return new Lc(this.meta,b,null,1,null)};var lc=new vd(null);vd.prototype[Da]=function(){return nc(this)};
function wd(a,b,c,d){this.meta=a;this.first=b;this.eb=c;this.N=d;this.F=65929452;this.P=8192}g=wd.prototype;g.toString=function(){return Wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ha=function(){return this.meta};g.va=function(){return null==this.eb?null:J(this.eb)};g.ga=function(){var a=this.N;return null!=a?a:this.N=a=pc(this)};g.fa=function(a,b){return Hc(this,b)};g.ma=function(){return lc};
g.qa=function(a,b){return jd(b,this)};g.ra=function(a,b,c){return kd(b,c,this)};g.wa=function(){return this.first};g.xa=function(){return null==this.eb?lc:this.eb};g.ja=function(){return this};g.ka=function(a,b){return b===this.meta?this:new wd(b,this.first,this.eb,this.N)};g.oa=function(a,b){return new wd(null,b,this,null)};wd.prototype[Da]=function(){return nc(this)};
function U(a,b){return null==b?new Lc(null,a,null,1,null):null!=b&&(b.F&64||u===b.ub)?new wd(null,a,b,null):new wd(null,a,J(b),null)}function I(a,b,c,d){this.Bb=a;this.name=b;this.Ra=c;this._hash=d;this.F=2153775105;this.P=4096}g=I.prototype;g.toString=function(){return[":",B.j(this.Ra)].join("")};g.fa=function(a,b){return b instanceof I?this.Ra===b.Ra:!1};
g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};g.j=function(a){return H.B(a,this)};g.B=function(a,b){return H.D(a,this,b)};g.ga=function(){var a=this._hash;return null!=a?a:this._hash=a=fc(ac(this.name),dc(this.Bb))+2654435769|0};g.Eb=function(){return this.name};
g.Fb=function(){return this.Bb};g.ia=function(a,b){return G(b,[":",B.j(this.Ra)].join(""))};function xd(a){if(null!=a&&(a.P&4096||u===a.xc))return a.Fb(null);throw Error(["Doesn't support namespace: ",B.j(a)].join(""));}var yd=function yd(a){switch(arguments.length){case 1:return yd.j(arguments[0]);case 2:return yd.B(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};
yd.j=function(a){if(a instanceof I)return a;if(a instanceof gc)return new I(xd(a),X.j?X.j(a):X.call(null,a),a.jb,null);if(P.B("/",a))return new I(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new I(b[0],b[1],a,null):new I(null,b[0],a,null)}return null};
yd.B=function(a,b){a=a instanceof I?X.j?X.j(a):X.call(null,a):a instanceof gc?X.j?X.j(a):X.call(null,a):a;b=b instanceof I?X.j?X.j(b):X.call(null,b):b instanceof gc?X.j?X.j(b):X.call(null,b):b;return new I(a,b,[x(a)?[B.j(a),"/"].join(""):null,B.j(b)].join(""),null)};yd.$=2;function zd(a,b,c){this.meta=a;this.fn=b;this.s=null;this.N=c;this.F=32374988;this.P=1}g=zd.prototype;g.toString=function(){return Wb(this)};
function Ad(a){null!=a.fn&&(a.s=a.fn.O?a.fn.O():a.fn.call(null),a.fn=null);return a.s}g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ha=function(){return this.meta};g.va=function(){this.ja(null);return null==this.s?null:O(this.s)};g.ga=function(){var a=this.N;return null!=a?a:this.N=a=pc(this)};g.fa=function(a,b){return Hc(this,b)};
g.ma=function(){return pb(lc,this.meta)};g.qa=function(a,b){return jd(b,this)};g.ra=function(a,b,c){return kd(b,c,this)};g.wa=function(){this.ja(null);return null==this.s?null:N(this.s)};g.xa=function(){this.ja(null);return null!=this.s?kc(this.s):lc};g.ja=function(){Ad(this);if(null==this.s)return null;for(var a=this.s;;)if(a instanceof zd)a=Ad(a);else return this.s=a,J(this.s)};g.ka=function(a,b){var c=this;return b===this.meta?c:new zd(b,function(){return c.ja(null)},this.N)};
g.oa=function(a,b){return U(b,this)};zd.prototype[Da]=function(){return nc(this)};function Bd(a){this.cc=a;this.end=0;this.F=2;this.P=0}Bd.prototype.add=function(a){this.cc[this.end]=a;return this.end+=1};Bd.prototype.$a=function(){var a=new Cd(this.cc,0,this.end);this.cc=null;return a};Bd.prototype.la=function(){return this.end};function Cd(a,b,c){this.C=a;this.off=b;this.end=c;this.F=524306;this.P=0}g=Cd.prototype;g.la=function(){return this.end-this.off};
g.ea=function(a,b){return this.C[this.off+b]};g.Aa=function(a,b,c){return 0<=b&&b<this.end-this.off?this.C[this.off+b]:c};g.uc=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new Cd(this.C,this.off+1,this.end)};g.qa=function(a,b){return Bc(this.C,b,this.C[this.off],this.off+1)};g.ra=function(a,b,c){return Bc(this.C,b,c,this.off)};function Dd(a,b,c,d){this.$a=a;this.Va=b;this.meta=c;this.N=d;this.F=31850732;this.P=1536}g=Dd.prototype;g.toString=function(){return Wb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ha=function(){return this.meta};g.va=function(){return 1<Ma(this.$a)?new Dd(Lb(this.$a),this.Va,null,null):null==this.Va?null:yb(this.Va)};g.ga=function(){var a=this.N;return null!=a?a:this.N=a=pc(this)};
g.fa=function(a,b){return Hc(this,b)};g.ma=function(){return lc};g.wa=function(){return Sa(this.$a,0)};g.xa=function(){return 1<Ma(this.$a)?new Dd(Lb(this.$a),this.Va,null,null):null==this.Va?lc:this.Va};g.ja=function(){return this};g.hc=function(){return this.$a};g.Rb=function(){return null==this.Va?lc:this.Va};g.ka=function(a,b){return b===this.meta?this:new Dd(this.$a,this.Va,b,this.N)};g.oa=function(a,b){return U(b,this)};g.vc=function(){return null==this.Va?null:this.Va};Dd.prototype[Da]=function(){return nc(this)};
function Ed(a,b){return 0===Ma(a)?b:new Dd(a,b,null,null)}function Fd(a,b){a.add(b)}function Gd(a,b){if(Cc(b))return R(b);var c=0;for(b=J(b);;)if(null!=b&&c<a)c+=1,b=O(b);else return c}var Hd=function Hd(a){if(null==a)return null;var c=O(a);return null==c?J(N(a)):U(N(a),Hd.j?Hd.j(c):Hd.call(null,c))};
function Id(a,b,c){var d=J(c);if(0===b)return a.O?a.O():a.call(null);c=D(d);var e=Va(d);if(1===b)return a.j?a.j(c):a.call(null,c);d=D(e);var f=Va(e);if(2===b)return a.B?a.B(c,d):a.call(null,c,d);e=D(f);var h=Va(f);if(3===b)return a.D?a.D(c,d,e):a.call(null,c,d,e);f=D(h);var k=Va(h);if(4===b)return a.T?a.T(c,d,e,f):a.call(null,c,d,e,f);h=D(k);var l=Va(k);if(5===b)return a.aa?a.aa(c,d,e,f,h):a.call(null,c,d,e,f,h);k=D(l);var m=Va(l);if(6===b)return a.Na?a.Na(c,d,e,f,h,k):a.call(null,c,d,e,f,h,k);l=
D(m);var n=Va(m);if(7===b)return a.Oa?a.Oa(c,d,e,f,h,k,l):a.call(null,c,d,e,f,h,k,l);m=D(n);var p=Va(n);if(8===b)return a.za?a.za(c,d,e,f,h,k,l,m):a.call(null,c,d,e,f,h,k,l,m);n=D(p);var q=Va(p);if(9===b)return a.Pa?a.Pa(c,d,e,f,h,k,l,m,n):a.call(null,c,d,e,f,h,k,l,m,n);p=D(q);var r=Va(q);if(10===b)return a.Ca?a.Ca(c,d,e,f,h,k,l,m,n,p):a.call(null,c,d,e,f,h,k,l,m,n,p);q=D(r);var w=Va(r);if(11===b)return a.Da?a.Da(c,d,e,f,h,k,l,m,n,p,q):a.call(null,c,d,e,f,h,k,l,m,n,p,q);r=D(w);var z=Va(w);if(12===
b)return a.Ea?a.Ea(c,d,e,f,h,k,l,m,n,p,q,r):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r);w=D(z);var C=Va(z);if(13===b)return a.Fa?a.Fa(c,d,e,f,h,k,l,m,n,p,q,r,w):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w);z=D(C);var E=Va(C);if(14===b)return a.Ga?a.Ga(c,d,e,f,h,k,l,m,n,p,q,r,w,z):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,z);C=D(E);var M=Va(E);if(15===b)return a.Ha?a.Ha(c,d,e,f,h,k,l,m,n,p,q,r,w,z,C):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C);E=D(M);var T=Va(M);if(16===b)return a.Ia?a.Ia(c,d,e,f,h,k,l,m,n,p,q,r,w,
z,C,E):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E);M=D(T);var da=Va(T);if(17===b)return a.Ja?a.Ja(c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M);T=D(da);var qa=Va(da);if(18===b)return a.Ka?a.Ka(c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T);da=D(qa);qa=Va(qa);if(19===b)return a.La?a.La(c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T,da):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T,da);var Zc=D(qa);Va(qa);if(20===b)return a.Ma?a.Ma(c,
d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T,da,Zc):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T,da,Zc);throw Error("Only up to 20 arguments supported on functions");}function Jd(a){return null!=a&&(a.F&128||u===a.Gb)?a.va():J(kc(a))}function Kd(a,b,c){return null==c?a.j?a.j(b):a.call(a,b):Ld(a,b,D(c),Jd(c))}function Ld(a,b,c,d){return null==d?a.B?a.B(b,c):a.call(a,b,c):Md(a,b,c,D(d),Jd(d))}function Md(a,b,c,d,e){return null==e?a.D?a.D(b,c,d):a.call(a,b,c,d):Nd(a,b,c,d,D(e),Jd(e))}
function Nd(a,b,c,d,e,f){if(null==f)return a.T?a.T(b,c,d,e):a.call(a,b,c,d,e);var h=D(f),k=O(f);if(null==k)return a.aa?a.aa(b,c,d,e,h):a.call(a,b,c,d,e,h);f=D(k);var l=O(k);if(null==l)return a.Na?a.Na(b,c,d,e,h,f):a.call(a,b,c,d,e,h,f);k=D(l);var m=O(l);if(null==m)return a.Oa?a.Oa(b,c,d,e,h,f,k):a.call(a,b,c,d,e,h,f,k);l=D(m);var n=O(m);if(null==n)return a.za?a.za(b,c,d,e,h,f,k,l):a.call(a,b,c,d,e,h,f,k,l);m=D(n);var p=O(n);if(null==p)return a.Pa?a.Pa(b,c,d,e,h,f,k,l,m):a.call(a,b,c,d,e,h,f,k,l,m);
n=D(p);var q=O(p);if(null==q)return a.Ca?a.Ca(b,c,d,e,h,f,k,l,m,n):a.call(a,b,c,d,e,h,f,k,l,m,n);p=D(q);var r=O(q);if(null==r)return a.Da?a.Da(b,c,d,e,h,f,k,l,m,n,p):a.call(a,b,c,d,e,h,f,k,l,m,n,p);q=D(r);var w=O(r);if(null==w)return a.Ea?a.Ea(b,c,d,e,h,f,k,l,m,n,p,q):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q);r=D(w);var z=O(w);if(null==z)return a.Fa?a.Fa(b,c,d,e,h,f,k,l,m,n,p,q,r):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r);w=D(z);var C=O(z);if(null==C)return a.Ga?a.Ga(b,c,d,e,h,f,k,l,m,n,p,q,r,w):a.call(a,b,c,d,
e,h,f,k,l,m,n,p,q,r,w);z=D(C);var E=O(C);if(null==E)return a.Ha?a.Ha(b,c,d,e,h,f,k,l,m,n,p,q,r,w,z):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,z);C=D(E);var M=O(E);if(null==M)return a.Ia?a.Ia(b,c,d,e,h,f,k,l,m,n,p,q,r,w,z,C):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,z,C);E=D(M);var T=O(M);if(null==T)return a.Ja?a.Ja(b,c,d,e,h,f,k,l,m,n,p,q,r,w,z,C,E):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,z,C,E);M=D(T);var da=O(T);if(null==da)return a.Ka?a.Ka(b,c,d,e,h,f,k,l,m,n,p,q,r,w,z,C,E,M):a.call(a,b,c,d,e,h,f,k,l,m,n,p,
q,r,w,z,C,E,M);T=D(da);var qa=O(da);if(null==qa)return a.La?a.La(b,c,d,e,h,f,k,l,m,n,p,q,r,w,z,C,E,M,T):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,z,C,E,M,T);da=D(qa);qa=O(qa);if(null==qa)return a.Ma?a.Ma(b,c,d,e,h,f,k,l,m,n,p,q,r,w,z,C,E,M,T,da):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,z,C,E,M,T,da);b=[b,c,d,e,h,f,k,l,m,n,p,q,r,w,z,C,E,M,T,da];for(c=qa;;)if(c)b.push(D(c)),c=O(c);else break;return a.apply(a,b)}
function Rc(a){switch(arguments.length){case 2:return Od(arguments[0],arguments[1]);case 3:return Pd(arguments[0],arguments[1],arguments[2]);case 4:var b=arguments[0];var c=arguments[1],d=arguments[2],e=arguments[3];b.ba?(c=U(c,U(d,e)),d=b.$,e=2+Gd(d-1,e),b=e<=d?Id(b,e,c):b.ba(c)):b=Ld(b,c,d,J(e));return b;case 5:return Qd(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:b=[];e=arguments.length;for(c=0;;)if(c<e)b.push(arguments[c]),c+=1;else break;b=new K(b.slice(5),0,null);
return Rd(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],b)}}function Od(a,b){if(a.ba){var c=a.$,d=Gd(c+1,b);return d<=c?Id(a,d,b):a.ba(b)}b=J(b);return null==b?a.O?a.O():a.call(a):Kd(a,D(b),Jd(b))}function Pd(a,b,c){if(a.ba){b=U(b,c);var d=a.$;c=Gd(d,c)+1;return c<=d?Id(a,c,b):a.ba(b)}return Kd(a,b,J(c))}function Qd(a,b,c,d,e){return a.ba?(b=U(b,U(c,U(d,e))),c=a.$,e=3+Gd(c-2,e),e<=c?Id(a,e,b):a.ba(b)):Md(a,b,c,d,J(e))}
function Rd(a,b,c,d,e,f){return a.ba?(f=Hd(f),b=U(b,U(c,U(d,U(e,f)))),c=a.$,f=4+Gd(c-3,f),f<=c?Id(a,f,b):a.ba(b)):Nd(a,b,c,d,e,Hd(f))}function Sd(a){if(null!=a&&(a.F&64||u===a.ub))if(O(a)){a:{var b=[];for(a=J(a);;)if(null!=a)b.push(N(a)),a=O(a);else break a}b=Nc(b)}else b=J(a)?N(a):Td;else b=a;return b}
function Ud(){if("undefined"===typeof ra||"undefined"===typeof sa||"undefined"===typeof ta)ta=function(a){this.gd=a;this.F=393216;this.P=0},ta.prototype.ka=function(a,b){return new ta(b)},ta.prototype.ha=function(){return this.gd},ta.prototype.pa=function(){return!1},ta.prototype.next=function(){return Error("No such element")},ta.prototype.remove=function(){return Error("Unsupported operation")},ta.Ib=!0,ta.nb="cljs.core/t_cljs$core20121",ta.Ub=function(a){return G(a,"cljs.core/t_cljs$core20121")};
return new ta(Td)}var Vd={},Wd={};function Xd(a){this.Cb=Vd;this._next=a}Xd.prototype.pa=function(){this.Cb===Vd?(this.Cb=Wd,this._next=J(this._next)):this.Cb===this._next&&(this._next=O(this.Cb));return null!=this._next};Xd.prototype.next=function(){if(this.pa())return this.Cb=this._next,N(this._next);throw Error("No such element");};Xd.prototype.remove=function(){return Error("Unsupported operation")};
function Yd(a,b){for(;;){if(null==J(b))return!0;var c=N(b);c=a.j?a.j(c):a.call(null,c);if(x(c))b=O(b);else return!1}}function Zd(a){for(var b=pd;;)if(a=J(a)){var c=N(a);c=b.j?b.j(c):b.call(null,c);if(x(c))return c;a=O(a)}else return null}
function $d(a,b){return new zd(null,function(){var c=J(b);if(c){if(cd(c)){for(var d=Mb(c),e=R(d),f=new Bd(Array(e)),h=0;;)if(h<e){var k=function(){var l=Sa(d,h);return a.j?a.j(l):a.call(null,l)}();null!=k&&f.add(k);h+=1}else break;return Ed(f.$a(),$d(a,Nb(c)))}e=function(){var l=N(c);return a.j?a.j(l):a.call(null,l)}();return null==e?$d(a,kc(c)):U(e,$d(a,kc(c)))}return null},null)}function ae(a){this.state=a;this.ua=this.validator=this.meta=null;this.P=16386;this.F=6455296}g=ae.prototype;
g.fa=function(a,b){return this===b};g.fb=function(){return this.state};g.ha=function(){return this.meta};g.oc=function(a,b){for(var c=J(this.ua),d=null,e=0,f=0;;)if(f<e){var h=d.ea(null,f),k=V(h,0,null);h=V(h,1,null);h.T?h.T(k,this,a,b):h.call(null,k,this,a,b);f+=1}else if(c=J(c))cd(c)?(d=Mb(c),c=Nb(c),k=d,e=R(d),d=k):(d=N(c),k=V(d,0,null),h=V(d,1,null),h.T?h.T(k,this,a,b):h.call(null,k,this,a,b),c=O(c),d=null,e=0),f=0;else break};g.Sb=function(a,b,c){this.ua=W.D(this.ua,b,c);return this};
g.Tb=function(a,b){return this.ua=Oc.B(this.ua,b)};g.ga=function(){return ba(this)};function be(a,b){if(a instanceof ae){var c=a.validator;if(null!=c&&!x(c.j?c.j(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;null!=a.ua&&a.oc(c,b);return b}return Qb(a,b)}
var ce=function ce(a){switch(arguments.length){case 2:return ce.B(arguments[0],arguments[1]);case 3:return ce.D(arguments[0],arguments[1],arguments[2]);case 4:return ce.T(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(4),0,null);return ce.K(arguments[0],arguments[1],arguments[2],arguments[3],c)}};
ce.B=function(a,b){if(a instanceof ae){var c=a.state;b=b.j?b.j(c):b.call(null,c);a=be(a,b)}else a=Rb(a,b);return a};ce.D=function(a,b,c){if(a instanceof ae){var d=a.state;b=b.B?b.B(d,c):b.call(null,d,c);a=be(a,b)}else a=Rb(a,b,c);return a};ce.T=function(a,b,c,d){if(a instanceof ae){var e=a.state;b=b.D?b.D(e,c,d):b.call(null,e,c,d);a=be(a,b)}else a=Rb(a,b,c,d);return a};ce.K=function(a,b,c,d,e){return a instanceof ae?be(a,Qd(b,a.state,c,d,e)):Rb(a,b,c,d,e)};
ce.ba=function(a){var b=N(a),c=O(a);a=N(c);var d=O(c);c=N(d);var e=O(d);d=N(e);e=O(e);return this.K(b,a,c,d,e)};ce.$=4;
var de=function de(a){switch(arguments.length){case 1:return de.j(arguments[0]);case 2:return de.B(arguments[0],arguments[1]);case 3:return de.D(arguments[0],arguments[1],arguments[2]);case 4:return de.T(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(4),0,null);return de.K(arguments[0],arguments[1],arguments[2],arguments[3],c)}};
de.j=function(a){return function(b){return function(){function c(k,l){l=a.j?a.j(l):a.call(null,l);return b.B?b.B(k,l):b.call(null,k,l)}function d(k){return b.j?b.j(k):b.call(null,k)}function e(){return b.O?b.O():b.call(null)}var f=null,h=function(){function k(m,n,p){var q=null;if(2<arguments.length){q=0;for(var r=Array(arguments.length-2);q<r.length;)r[q]=arguments[q+2],++q;q=new K(r,0,null)}return l.call(this,m,n,q)}function l(m,n,p){n=Pd(a,n,p);return b.B?b.B(m,n):b.call(null,m,n)}k.$=2;k.ba=function(m){var n=
N(m);m=O(m);var p=N(m);m=kc(m);return l(n,p,m)};k.K=l;return k}();f=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new K(p,0,null)}return h.K(k,l,n)}throw Error("Invalid arity: "+arguments.length);};f.$=2;f.ba=h.ba;f.O=e;f.j=d;f.B=c;f.K=h.K;return f}()}};
de.B=function(a,b){return new zd(null,function(){var c=J(b);if(c){if(cd(c)){for(var d=Mb(c),e=R(d),f=new Bd(Array(e)),h=0;;)if(h<e)Fd(f,function(){var k=Sa(d,h);return a.j?a.j(k):a.call(null,k)}()),h+=1;else break;return Ed(f.$a(),de.B(a,Nb(c)))}return U(function(){var k=N(c);return a.j?a.j(k):a.call(null,k)}(),de.B(a,kc(c)))}return null},null)};
de.D=function(a,b,c){return new zd(null,function(){var d=J(b),e=J(c);if(d&&e){var f=N(d);var h=N(e);f=a.B?a.B(f,h):a.call(null,f,h);d=U(f,de.D(a,kc(d),kc(e)))}else d=null;return d},null)};de.T=function(a,b,c,d){return new zd(null,function(){var e=J(b),f=J(c),h=J(d);if(e&&f&&h){var k=N(e);var l=N(f),m=N(h);k=a.D?a.D(k,l,m):a.call(null,k,l,m);e=U(k,de.T(a,kc(e),kc(f),kc(h)))}else e=null;return e},null)};
de.K=function(a,b,c,d,e){return de.B(function(f){return Od(a,f)},function k(h){return new zd(null,function(){var l=de.B(J,h);return Yd(pd,l)?U(de.B(N,l),k(de.B(kc,l))):null},null)}(Jc.K(e,d,Ic([c,b]))))};de.ba=function(a){var b=N(a),c=O(a);a=N(c);var d=O(c);c=N(d);var e=O(d);d=N(e);e=O(e);return this.K(b,a,c,d,e)};de.$=4;function ee(a,b){return new zd(null,function(){if(0<a){var c=J(b);return c?U(N(c),ee(a-1,kc(c))):null}return null},null)}
function fe(a,b){return new zd(null,function(){a:for(var c=a,d=b;;)if(d=J(d),0<c&&d)--c,d=kc(d);else break a;return d},null)}function ge(a){return de.D(function(b){return b},a,fe(2,a))}function he(a,b,c,d){this.meta=a;this.count=b;this.R=c;this.next=d;this.N=null;this.F=32374988;this.P=1}g=he.prototype;g.toString=function(){return Wb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ha=function(){return this.meta};g.va=function(){return null==this.next?1<this.count?this.next=new he(null,this.count-1,this.R,null):-1===this.count?this:null:this.next};
g.ga=function(){var a=this.N;return null!=a?a:this.N=a=pc(this)};g.fa=function(a,b){return Hc(this,b)};g.ma=function(){return lc};g.qa=function(a,b){if(-1===this.count)for(var c=b.B?b.B(this.R,this.R):b.call(null,this.R,this.R);;){if(vc(c))return F(c);c=b.B?b.B(c,this.R):b.call(null,c,this.R)}else for(a=1,c=this.R;;)if(a<this.count){c=b.B?b.B(c,this.R):b.call(null,c,this.R);if(vc(c))return F(c);a+=1}else return c};
g.ra=function(a,b,c){if(-1===this.count)for(c=b.B?b.B(c,this.R):b.call(null,c,this.R);;){if(vc(c))return F(c);c=b.B?b.B(c,this.R):b.call(null,c,this.R)}else for(a=0;;)if(a<this.count){c=b.B?b.B(c,this.R):b.call(null,c,this.R);if(vc(c))return F(c);a+=1}else return c};g.wa=function(){return this.R};g.xa=function(){return null==this.next?1<this.count?this.next=new he(null,this.count-1,this.R,null):-1===this.count?this:lc:this.next};g.ja=function(){return this};
g.ka=function(a,b){return b===this.meta?this:new he(b,this.count,this.R,this.next)};g.oa=function(a,b){return U(b,this)};var ie=function ie(a){switch(arguments.length){case 0:return ie.O();case 1:return ie.j(arguments[0]);case 2:return ie.B(arguments[0],arguments[1]);case 3:return ie.D(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};ie.O=function(){return Kc};ie.j=function(a){return a};
ie.B=function(a,b){return null!=a?null!=a&&(a.P&4||u===a.Rc)?pb(Jb(Ga(Ib,Hb(a),b)),Tc(a)):Ga(Qa,a,b):Ga(Jc,a,b)};ie.D=function(a,b,c){if(null!=a&&(a.P&4||u===a.Rc)){var d=Tc(a);return qd(b,function(){function e(h){return pb(Jb(h),d)}var f=null;f=function(h,k){switch(arguments.length){case 1:return e.call(this,h);case 2:return Ib(h,k)}throw Error("Invalid arity: "+arguments.length);};f.j=e;f.B=function(h,k){return Ib(h,k)};return f}(),Hb(a),c)}return qd(b,Jc,a,c)};ie.$=3;
function je(a,b,c){var d=W.D,e=H.B(a,b);c=c.j?c.j(e):c.call(null,e);return d.call(W,a,b,c)}function ke(a,b,c,d){var e=W.D,f=H.B(a,b);c=c.B?c.B(f,d):c.call(null,f,d);return e.call(W,a,b,c)}function le(a,b){this.da=a;this.C=b}function me(a){return new le(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function ne(a){return new le(a.da,Ea(a.C))}
function oe(a){a=a.G;return 32>a?0:a-1>>>5<<5}function pe(a,b,c){for(;;){if(0===b)return c;var d=me(a);d.C[0]=c;c=d;b-=5}}var qe=function qe(a,b,c,d){var f=ne(c),h=a.G-1>>>b&31;5===b?f.C[h]=d:(c=c.C[h],null!=c?(b-=5,a=qe.T?qe.T(a,b,c,d):qe.call(null,a,b,c,d)):a=pe(null,b-5,d),f.C[h]=a);return f};function re(a,b){throw Error(["No item ",B.j(a)," in vector of length ",B.j(b)].join(""));}
function se(a,b){if(b>=oe(a))return a.tail;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.C[b>>>a&31];a=d}else return c.C}function te(a,b){return 0<=b&&b<a.G?se(a,b):re(b,a.G)}
var ue=function ue(a,b,c,d,e){var h=ne(c);if(0===b)h.C[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.C[k];a=ue.aa?ue.aa(a,b,c,d,e):ue.call(null,a,b,c,d,e);h.C[k]=a}return h},ve=function ve(a,b,c){var e=a.G-2>>>b&31;if(5<b){b-=5;var f=c.C[e];a=ve.D?ve.D(a,b,f):ve.call(null,a,b,f);if(null==a&&0===e)return null;c=ne(c);c.C[e]=a;return c}if(0===e)return null;c=ne(c);c.C[e]=null;return c};function we(a,b,c,d,e,f){this.i=a;this.base=b;this.C=c;this.v=d;this.start=e;this.end=f}
we.prototype.pa=function(){return this.i<this.end};we.prototype.next=function(){32===this.i-this.base&&(this.C=se(this.v,this.i),this.base+=32);var a=this.C[this.i&31];this.i+=1;return a};function xe(a,b,c){return new we(b,b-b%32,b<R(a)?se(a,b):null,a,b,c)}function ye(a,b,c,d){return c<d?ze(a,b,Ec(a,c),c+1,d):b.O?b.O():b.call(null)}
function ze(a,b,c,d,e){var f=c;c=d;for(d=se(a,d);;)if(c<e){var h=c&31;d=0===h?se(a,c):d;h=d[h];f=b.B?b.B(f,h):b.call(null,f,h);if(vc(f))return F(f);c+=1}else return f}function Y(a,b,c,d,e,f){this.meta=a;this.G=b;this.shift=c;this.root=d;this.tail=e;this.N=f;this.F=167666463;this.P=139268}g=Y.prototype;g.tb=function(a,b){return 0<=b&&b<this.G?new Ae(b,se(this,b)[b&31]):null};g.toString=function(){return Wb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ya=function(a,b){return this.ca(null,b,null)};g.ca=function(a,b,c){return"number"===typeof b?this.Aa(null,b,c):c};
g.Db=function(a,b,c){a=0;for(var d=c;;)if(a<this.G){var e=se(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=f+a,k=e[f];d=b.D?b.D(d,h,k):b.call(null,d,h,k);if(vc(d)){e=d;break a}f+=1}else{e=d;break a}if(vc(e))return F(e);a+=c;d=e}else return d};g.fc=u;g.ea=function(a,b){return te(this,b)[b&31]};g.Aa=function(a,b,c){return 0<=b&&b<this.G?se(this,b)[b&31]:c};
g.mb=function(a,b,c){if(0<=b&&b<this.G)return oe(this)<=b?(a=Ea(this.tail),a[b&31]=c,new Y(this.meta,this.G,this.shift,this.root,a,null)):new Y(this.meta,this.G,this.shift,ue(this,this.shift,this.root,b,c),this.tail,null);if(b===this.G)return this.oa(null,c);throw Error(["Index ",B.j(b)," out of bounds  [0,",B.j(this.G),"]"].join(""));};g.Qa=function(){return xe(this,0,this.G)};g.ha=function(){return this.meta};g.la=function(){return this.G};
g.vb=function(){return 0<this.G?this.ea(null,this.G-1):null};g.wb=function(){if(0===this.G)throw Error("Can't pop empty vector");if(1===this.G)return pb(Kc,this.meta);if(1<this.G-oe(this))return new Y(this.meta,this.G-1,this.shift,this.root,this.tail.slice(0,-1),null);var a=se(this,this.G-2),b=ve(this,this.shift,this.root);b=null==b?Z:b;var c=this.G-1;return 5<this.shift&&null==b.C[1]?new Y(this.meta,c,this.shift-5,b.C[0],a,null):new Y(this.meta,c,this.shift,b,a,null)};
g.ga=function(){var a=this.N;return null!=a?a:this.N=a=pc(this)};g.fa=function(a,b){if(b instanceof Y)if(this.G===R(b))for(a=this.Qa(null),b=b.Qa(null);;)if(a.pa()){var c=a.next(),d=b.next();if(!P.B(c,d))return!1}else return!0;else return!1;else return Hc(this,b)};g.sb=function(){return new Be(this.G,this.shift,Ce.j?Ce.j(this.root):Ce.call(null,this.root),De.j?De.j(this.tail):De.call(null,this.tail))};g.ma=function(){return pb(Kc,this.meta)};g.qa=function(a,b){return ye(this,b,0,this.G)};
g.ra=function(a,b,c){a=0;for(var d=c;;)if(a<this.G){var e=se(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=e[f];d=b.B?b.B(d,h):b.call(null,d,h);if(vc(d)){e=d;break a}f+=1}else{e=d;break a}if(vc(e))return F(e);a+=c;d=e}else return d};g.ab=function(a,b,c){if("number"===typeof b)return this.mb(null,b,c);throw Error("Vector's key for assoc must be a number.");};g.lb=function(a,b){return hd(b)?0<=b&&b<this.G:!1};
g.ja=function(){if(0===this.G)return null;if(32>=this.G)return new K(this.tail,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.C[0];else{a=a.C;break a}}return Ee?Ee(this,a,0,0):Fe.call(null,this,a,0,0)};g.ka=function(a,b){return b===this.meta?this:new Y(b,this.G,this.shift,this.root,this.tail,this.N)};
g.oa=function(a,b){if(32>this.G-oe(this)){a=this.tail.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.tail[d],d+=1;else break;c[a]=b;return new Y(this.meta,this.G+1,this.shift,this.root,c,null)}a=(c=this.G>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=me(null),c.C[0]=this.root,d=pe(null,this.shift,new le(null,this.tail)),c.C[1]=d):c=qe(this,this.shift,this.root,new le(null,this.tail));return new Y(this.meta,this.G+1,a,c,[b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};g.j=function(a){if("number"===typeof a)return this.ea(null,a);throw Error("Key must be integer");};
var Z=new le(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),Kc=new Y(null,0,5,Z,[],qc);function Ge(a,b){var c=a.length;a=b?a:Ea(a);if(32>c)return new Y(null,c,5,Z,a,null);var d=a.slice(0,32);b=32;for(var e=(new Y(null,32,5,Z,d,null)).sb(null);;)if(b<c)d=b+1,e=Ib(e,a[b]),b=d;else return Jb(e)}Y.prototype[Da]=function(){return nc(this)};
function He(a){return x(Ie.j?Ie.j(a):Ie.call(null,a))?new Y(null,2,5,Z,[Je.j?Je.j(a):Je.call(null,a),Ke.j?Ke.j(a):Ke.call(null,a)],null):bd(a)?Sc(a,null):Ba(a)?Ge(a,!0):Jb(Ga(Ib,Hb(Kc),a))}var Le=function Le(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new K(c.slice(0),0,null):null;return Le.K(c)};Le.K=function(a){return a instanceof K&&0===a.i?Ge(a.C,!Ba(a.C)):He(a)};Le.$=0;Le.ba=function(a){return this.K(J(a))};
function Me(a,b,c,d,e){this.Ba=a;this.node=b;this.i=c;this.off=d;this.meta=e;this.N=null;this.F=32375020;this.P=1536}g=Me.prototype;g.toString=function(){return Wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ha=function(){return this.meta};g.va=function(){if(this.off+1<this.node.length){var a=this.Ba;var b=this.node,c=this.i,d=this.off+1;a=Ee?Ee(a,b,c,d):Fe.call(null,a,b,c,d);return null==a?null:a}return this.vc()};
g.ga=function(){var a=this.N;return null!=a?a:this.N=a=pc(this)};g.fa=function(a,b){return Hc(this,b)};g.ma=function(){return lc};g.qa=function(a,b){return ye(this.Ba,b,this.i+this.off,R(this.Ba))};g.ra=function(a,b,c){return ze(this.Ba,b,c,this.i+this.off,R(this.Ba))};g.wa=function(){return this.node[this.off]};g.xa=function(){if(this.off+1<this.node.length){var a=this.Ba;var b=this.node,c=this.i,d=this.off+1;a=Ee?Ee(a,b,c,d):Fe.call(null,a,b,c,d);return null==a?lc:a}return this.Rb(null)};g.ja=function(){return this};
g.hc=function(){var a=this.node;return new Cd(a,this.off,a.length)};g.Rb=function(){var a=this.i+this.node.length;if(a<Ma(this.Ba)){var b=this.Ba,c=se(this.Ba,a);return Ee?Ee(b,c,a,0):Fe.call(null,b,c,a,0)}return lc};g.ka=function(a,b){return b===this.meta?this:Ne?Ne(this.Ba,this.node,this.i,this.off,b):Fe.call(null,this.Ba,this.node,this.i,this.off,b)};g.oa=function(a,b){return U(b,this)};
g.vc=function(){var a=this.i+this.node.length;if(a<Ma(this.Ba)){var b=this.Ba,c=se(this.Ba,a);return Ee?Ee(b,c,a,0):Fe.call(null,b,c,a,0)}return null};Me.prototype[Da]=function(){return nc(this)};
function Fe(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new Me(b,te(b,c),c,d,null);case 4:return Ee(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Ne(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function Ee(a,b,c,d){return new Me(a,b,c,d,null)}function Ne(a,b,c,d,e){return new Me(a,b,c,d,e)}
function Oe(a,b,c,d,e){this.meta=a;this.v=b;this.start=c;this.end=d;this.N=e;this.F=167666463;this.P=139264}g=Oe.prototype;g.tb=function(a,b){if(0>b)return null;a=this.start+b;return a<this.end?new Ae(b,Ya(this.v,a)):null};g.toString=function(){return Wb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ya=function(a,b){return this.ca(null,b,null)};g.ca=function(a,b,c){return"number"===typeof b?this.Aa(null,b,c):c};
g.Db=function(a,b,c){a=this.start;for(var d=0;;)if(a<this.end){var e=d,f=Sa(this.v,a);c=b.D?b.D(c,e,f):b.call(null,c,e,f);if(vc(c))return F(c);d+=1;a+=1}else return c};g.ea=function(a,b){return 0>b||this.end<=this.start+b?re(b,this.end-this.start):Sa(this.v,this.start+b)};g.Aa=function(a,b,c){return 0>b||this.end<=this.start+b?c:Sa(this.v,this.start+b,c)};
g.mb=function(a,b,c){a=this.start+b;if(0>b||this.end+1<=a)throw Error(["Index ",B.j(b)," out of bounds [0,",B.j(this.la(null)),"]"].join(""));b=this.meta;c=W.D(this.v,a,c);var d=this.start,e=this.end;a+=1;a=e>a?e:a;return Pe.aa?Pe.aa(b,c,d,a,null):Pe.call(null,b,c,d,a,null)};g.Qa=function(){return null!=this.v&&u===this.v.fc?xe(this.v,this.start,this.end):new Xd(this)};g.ha=function(){return this.meta};g.la=function(){return this.end-this.start};
g.vb=function(){return this.start===this.end?null:Sa(this.v,this.end-1)};g.wb=function(){if(this.start===this.end)throw Error("Can't pop empty vector");var a=this.meta,b=this.v,c=this.start,d=this.end-1;return Pe.aa?Pe.aa(a,b,c,d,null):Pe.call(null,a,b,c,d,null)};g.ga=function(){var a=this.N;return null!=a?a:this.N=a=pc(this)};g.fa=function(a,b){return Hc(this,b)};g.ma=function(){return pb(Kc,this.meta)};
g.qa=function(a,b){return null!=this.v&&u===this.v.fc?ye(this.v,b,this.start,this.end):xc(this,b)};g.ra=function(a,b,c){return null!=this.v&&u===this.v.fc?ze(this.v,b,c,this.start,this.end):yc(this,b,c)};g.ab=function(a,b,c){if("number"===typeof b)return this.mb(null,b,c);throw Error("Subvec's key for assoc must be a number.");};g.lb=function(a,b){return hd(b)?0<=b&&b<this.end-this.start:!1};
g.ja=function(){var a=this;return function d(c){return c===a.end?null:U(Sa(a.v,c),new zd(null,function(){return d(c+1)},null))}(a.start)};g.ka=function(a,b){return b===this.meta?this:Pe.aa?Pe.aa(b,this.v,this.start,this.end,this.N):Pe.call(null,b,this.v,this.start,this.end,this.N)};g.oa=function(a,b){a=this.meta;b=mb(this.v,this.end,b);var c=this.start,d=this.end+1;return Pe.aa?Pe.aa(a,b,c,d,null):Pe.call(null,a,b,c,d,null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};g.j=function(a){return this.ea(null,a)};g.B=function(a,b){return this.Aa(null,a,b)};Oe.prototype[Da]=function(){return nc(this)};
function Pe(a,b,c,d,e){for(;;)if(b instanceof Oe)c=b.start+c,d=b.start+d,b=b.v;else{if(!bd(b))throw Error("v must satisfy IVector");if(0>c||d<c||d>R(b))throw Error("Index out of bounds");return new Oe(a,b,c,d,e)}}function Qe(a,b){return a===b.da?b:new le(a,Ea(b.C))}function Ce(a){return new le({},Ea(a.C))}
function De(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];dd(a,0,b,0,a.length);return b}var Re=function Re(a,b,c,d){c=Qe(a.root.da,c);var f=a.G-1>>>b&31;if(5===b)a=d;else{var h=c.C[f];null!=h?(b-=5,a=Re.T?Re.T(a,b,h,d):Re.call(null,a,b,h,d)):a=pe(a.root.da,b-5,d)}c.C[f]=a;return c};function Be(a,b,c,d){this.G=a;this.shift=b;this.root=c;this.tail=d;this.P=88;this.F=275}g=Be.prototype;
g.yb=function(a,b){if(this.root.da){if(32>this.G-oe(this))this.tail[this.G&31]=b;else{a=new le(this.root.da,this.tail);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.tail=c;this.G>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=pe(this.root.da,this.shift,a),this.root=new le(this.root.da,b),this.shift=c):this.root=Re(this,this.shift,this.root,a)}this.G+=1;return this}throw Error("conj! after persistent!");};g.Hb=function(){if(this.root.da){this.root.da=null;var a=this.G-oe(this),b=Array(a);dd(this.tail,0,b,0,a);return new Y(null,this.G,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
g.xb=function(a,b,c){if("number"===typeof b)return Se(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
function Se(a,b,c){if(a.root.da){if(0<=b&&b<a.G){if(oe(a)<=b)a.tail[b&31]=c;else{var d=function k(f,h){h=Qe(a.root.da,h);if(0===f)h.C[b&31]=c;else{var l=b>>>f&31;f=k(f-5,h.C[l]);h.C[l]=f}return h}(a.shift,a.root);a.root=d}return a}if(b===a.G)return a.yb(null,c);throw Error(["Index ",B.j(b)," out of bounds for TransientVector of length",B.j(a.G)].join(""));}throw Error("assoc! after persistent!");}g.la=function(){if(this.root.da)return this.G;throw Error("count after persistent!");};
g.ea=function(a,b){if(this.root.da)return te(this,b)[b&31];throw Error("nth after persistent!");};g.Aa=function(a,b,c){return 0<=b&&b<this.G?this.ea(null,b):c};g.ya=function(a,b){return this.ca(null,b,null)};g.ca=function(a,b,c){if(this.root.da)return"number"===typeof b?this.Aa(null,b,c):c;throw Error("lookup after persistent!");};
g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};g.j=function(a){return this.ya(null,a)};g.B=function(a,b){return this.ca(null,a,b)};function Te(){this.F=2097152;this.P=0}Te.prototype.fa=function(){return!1};var Ue=new Te;
function Ve(a,b){return fd($c(b)&&!ad(b)?R(a)===R(b)?(null!=a?a.F&1048576||u===a.vd||(a.F?0:y(tb,a)):y(tb,a))?od(function(c,d,e){return P.B(H.D(b,d,Ue),e)?!0:new uc},!0,a):Yd(function(c){return P.B(H.D(b,N(c),Ue),N(O(c)))},a):null:null)}function We(a){this.s=a}We.prototype.next=function(){if(null!=this.s){var a=N(this.s),b=V(a,0,null);a=V(a,1,null);this.s=O(this.s);return{value:[b,a],done:!1}}return{value:null,done:!0}};function Xe(a){this.s=a}
Xe.prototype.next=function(){if(null!=this.s){var a=N(this.s);this.s=O(this.s);return{value:[a,a],done:!1}}return{value:null,done:!0}};
function Ye(a,b){if(b instanceof I)a:{var c=a.length;b=b.Ra;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof I&&b===a[d].Ra){a=d;break a}d+=2}}else if("string"===typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof gc)a:for(c=a.length,b=b.jb,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof gc&&b===a[d].jb){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(P.B(b,a[d])){a=d;break a}d+=2}return a}function Ae(a,b){this.key=a;this.R=b;this.N=null;this.F=166619935;this.P=0}g=Ae.prototype;g.tb=function(a,b){switch(b){case 0:return new Ae(0,this.key);case 1:return new Ae(1,this.R);default:return null}};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ya=function(a,b){return this.Aa(null,b,null)};g.ca=function(a,b,c){return this.Aa(null,b,c)};g.ea=function(a,b){if(0===b)return this.key;if(1===b)return this.R;throw Error("Index out of bounds");};
g.Aa=function(a,b,c){return 0===b?this.key:1===b?this.R:c};g.mb=function(a,b,c){return(new Y(null,2,5,Z,[this.key,this.R],null)).mb(null,b,c)};g.ha=function(){return null};g.la=function(){return 2};g.Xc=function(){return this.key};g.Yc=function(){return this.R};g.vb=function(){return this.R};g.wb=function(){return new Y(null,1,5,Z,[this.key],null)};g.ga=function(){var a=this.N;return null!=a?a:this.N=a=pc(this)};g.fa=function(a,b){return Hc(this,b)};g.ma=function(){return null};
g.qa=function(a,b){return xc(this,b)};g.ra=function(a,b,c){return yc(this,b,c)};g.ab=function(a,b,c){return W.D(new Y(null,2,5,Z,[this.key,this.R],null),b,c)};g.lb=function(a,b){return 0===b||1===b};g.ja=function(){return new K([this.key,this.R],0,null)};g.ka=function(a,b){return Sc(new Y(null,2,5,Z,[this.key,this.R],null),b)};g.oa=function(a,b){return new Y(null,3,5,Z,[this.key,this.R,b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};g.j=function(a){return this.ea(null,a)};g.B=function(a,b){return this.Aa(null,a,b)};function Ie(a){return null!=a?a.F&2048||u===a.yd?!0:!1:!1}function Ze(a,b,c){this.C=a;this.i=b;this.Ya=c;this.F=32374990;this.P=0}g=Ze.prototype;
g.toString=function(){return Wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ha=function(){return this.Ya};g.va=function(){return this.i<this.C.length-2?new Ze(this.C,this.i+2,null):null};g.la=function(){return(this.C.length-this.i)/2};g.ga=function(){return pc(this)};
g.fa=function(a,b){return Hc(this,b)};g.ma=function(){return lc};g.qa=function(a,b){return jd(b,this)};g.ra=function(a,b,c){return kd(b,c,this)};g.wa=function(){return new Ae(this.C[this.i],this.C[this.i+1])};g.xa=function(){return this.i<this.C.length-2?new Ze(this.C,this.i+2,null):lc};g.ja=function(){return this};g.ka=function(a,b){return b===this.Ya?this:new Ze(this.C,this.i,b)};g.oa=function(a,b){return U(b,this)};Ze.prototype[Da]=function(){return nc(this)};
function $e(a,b){this.C=a;this.i=0;this.G=b}$e.prototype.pa=function(){return this.i<this.G};$e.prototype.next=function(){var a=new Ae(this.C[this.i],this.C[this.i+1]);this.i+=2;return a};function v(a,b,c,d){this.meta=a;this.G=b;this.C=c;this.N=d;this.F=16647951;this.P=139268}g=v.prototype;g.tb=function(a,b){a=Ye(this.C,b);return-1===a?null:new Ae(this.C[a],this.C[a+1])};g.toString=function(){return Wb(this)};g.keys=function(){return nc(af.j?af.j(this):af.call(null,this))};g.entries=function(){return new We(J(J(this)))};
g.values=function(){return nc(bf.j?bf.j(this):bf.call(null,this))};g.has=function(a){return id(this,a)};g.get=function(a,b){return this.ca(null,a,b)};g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.ea(null,e),h=V(f,0,null);f=V(f,1,null);a.B?a.B(f,h):a.call(null,f,h);e+=1}else if(b=J(b))cd(b)?(c=Mb(b),b=Nb(b),h=c,d=R(c),c=h):(c=N(b),h=V(c,0,null),f=V(c,1,null),a.B?a.B(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};g.ya=function(a,b){return this.ca(null,b,null)};
g.ca=function(a,b,c){a=Ye(this.C,b);return-1===a?c:this.C[a+1]};g.Db=function(a,b,c){a=this.C.length;for(var d=0;;)if(d<a){var e=this.C[d],f=this.C[d+1];c=b.D?b.D(c,e,f):b.call(null,c,e,f);if(vc(c))return F(c);d+=2}else return c};g.Qa=function(){return new $e(this.C,2*this.G)};g.ha=function(){return this.meta};g.la=function(){return this.G};g.ga=function(){var a=this.N;return null!=a?a:this.N=a=rc(this)};
g.fa=function(a,b){if($c(b)&&!ad(b))if(a=this.C.length,this.G===b.la(null))for(var c=0;;)if(c<a){var d=b.ca(null,this.C[c],ed);if(d!==ed)if(P.B(this.C[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};g.sb=function(){return new cf(this.C.length,Ea(this.C))};g.ma=function(){return pb(Td,this.meta)};g.qa=function(a,b){return ld(this,b)};g.ra=function(a,b,c){return md(this,b,c)};
g.jc=function(a,b){if(0<=Ye(this.C,b)){a=this.C.length;var c=a-2;if(0===c)return this.ma(null);c=Array(c);for(var d=0,e=0;;){if(d>=a)return new v(this.meta,this.G-1,c,null);P.B(b,this.C[d])?d+=2:(c[e]=this.C[d],c[e+1]=this.C[d+1],e+=2,d+=2)}}else return this};
g.ab=function(a,b,c){a=Ye(this.C,b);if(-1===a){if(this.G<df){a=this.C;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new v(this.meta,this.G+1,e,null)}return pb(bb(ie.B(ef,this),b,c),this.meta)}if(c===this.C[a+1])return this;b=Ea(this.C);b[a+1]=c;return new v(this.meta,this.G,b,null)};g.lb=function(a,b){return-1!==Ye(this.C,b)};g.ja=function(){var a=this.C;return 0<=a.length-2?new Ze(a,0,null):null};
g.ka=function(a,b){return b===this.meta?this:new v(b,this.G,this.C,this.N)};g.oa=function(a,b){if(bd(b))return this.ab(null,Sa(b,0),Sa(b,1));a=this;for(b=J(b);;){if(null==b)return a;var c=N(b);if(bd(c))a=bb(a,Sa(c,0),Sa(c,1)),b=O(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};g.j=function(a){return this.ya(null,a)};g.B=function(a,b){return this.ca(null,a,b)};var Td=new v(null,0,[],sc),df=8;function ff(a,b){return a===b?!0:a===b||a instanceof I&&b instanceof I&&a.Ra===b.Ra?!0:P.B(a,b)}
function gf(a){for(var b=0,c=0;;)if(b<a.length){var d;a:for(d=0;;)if(d<b){var e=ff(a[b],a[d]);if(e){d=e;break a}d=2+d}else{d=!1;break a}c=d?c:c+2;b=2+b}else return c}function hf(a,b){var c=a.length-1,d=J(b);b=Array(c+2*R(d));a=dd(a,0,b,0,c);for(b=c;;)if(d){var e=N(d);a[b]=fb(e);a[b+1]=gb(e);b=2+c;d=O(d)}else return a}
function Nc(a){var b=a.length,c=1===(b&1),d;if(!(d=c))a:for(d=0;;)if(d<a.length){var e;b:for(e=0;;)if(e<d){var f=ff(a[d],a[e]);if(f){e=f;break b}e=2+e}else{e=!1;break b}if(e){d=e;break a}d=2+d}else{d=!1;break a}return d?jf(a,c):new v(null,b/2,a,null)}
function jf(a,b){var c=b?hf(a,ie.B(Td,a[a.length-1])):a;a=gf(c);var d=c.length;if(a<d){a=Array(a);for(var e=0,f=0;;)if(e<d)(function(){for(var h=0;;)if(h<f){var k=ff(c[e],c[h]);if(k)return k;h=2+h}else return!1})()?(b=f,e=2+e,f=b):(b=function(){for(var h=d-2;;)if(h>=e){if(ff(c[e],c[h]))return h;h-=2}else return h}(),a[f]=c[e],a[f+1]=c[b+1],b=2+f,e=2+e,f=b);else break;return new v(null,a.length/2,a,null)}return new v(null,c.length/2,c,null)}v.prototype[Da]=function(){return nc(this)};
function cf(a,b){this.zb={};this.pb=a;this.C=b;this.F=259;this.P=56}g=cf.prototype;g.la=function(){if(this.zb)return td(this.pb);throw Error("count after persistent!");};g.ya=function(a,b){return this.ca(null,b,null)};g.ca=function(a,b,c){if(this.zb)return a=Ye(this.C,b),-1===a?c:this.C[a+1];throw Error("lookup after persistent!");};
g.yb=function(a,b){if(this.zb){if(Ie(b))return this.xb(null,Je.j?Je.j(b):Je.call(null,b),Ke.j?Ke.j(b):Ke.call(null,b));if(bd(b))return this.xb(null,b.j?b.j(0):b.call(null,0),b.j?b.j(1):b.call(null,1));a=J(b);for(b=this;;){var c=N(a);if(x(c))a=O(a),b=Kb(b,Je.j?Je.j(c):Je.call(null,c),Ke.j?Ke.j(c):Ke.call(null,c));else return b}}else throw Error("conj! after persistent!");};g.Hb=function(){if(this.zb)return this.zb=!1,new v(null,td(this.pb),this.C,null);throw Error("persistent! called twice");};
g.xb=function(a,b,c){if(this.zb){a=Ye(this.C,b);if(-1===a){if(this.pb+2<=2*df)return this.pb+=2,this.C.push(b),this.C.push(c),this;a=kf.B?kf.B(this.pb,this.C):kf.call(null,this.pb,this.C);return Kb(a,b,c)}c!==this.C[a+1]&&(this.C[a+1]=c);return this}throw Error("assoc! after persistent!");};g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};g.j=function(a){return this.ca(null,a,null)};g.B=function(a,b){return this.ca(null,a,b)};function kf(a,b){for(var c=Hb(ef),d=0;;)if(d<a)c=Kb(c,b[d],b[d+1]),d+=2;else return c}function lf(){this.R=!1}function mf(a,b,c){a=Ea(a);a[b]=c;return a}function nf(a,b){var c=Array(a.length-2);dd(a,0,c,0,2*b);dd(a,2*(b+1),c,2*b,c.length-2*b);return c}function of(a,b,c,d){a=a.ob(b);a.C[c]=d;return a}
function pf(a,b,c){for(var d=a.length,e=0,f=c;;)if(e<d){c=a[e];if(null!=c){var h=a[e+1];c=b.D?b.D(f,c,h):b.call(null,f,c,h)}else c=a[e+1],c=null!=c?c.Mb(b,f):f;if(vc(c))return c;e+=2;f=c}else return f}function qf(a){this.C=a;this.i=0;this.Wa=this.Nb=null}qf.prototype.advance=function(){for(var a=this.C.length;;)if(this.i<a){var b=this.C[this.i],c=this.C[this.i+1];null!=b?b=this.Nb=new Ae(b,c):null!=c?(b=Ub(c),b=b.pa()?this.Wa=b:!1):b=!1;this.i+=2;if(b)return!0}else return!1};
qf.prototype.pa=function(){var a=null!=this.Nb;return a?a:(a=null!=this.Wa)?a:this.advance()};qf.prototype.next=function(){if(null!=this.Nb){var a=this.Nb;this.Nb=null;return a}if(null!=this.Wa)return a=this.Wa.next(),this.Wa.pa()||(this.Wa=null),a;if(this.advance())return this.next();throw Error("No such element");};qf.prototype.remove=function(){return Error("Unsupported operation")};function rf(a,b,c){this.da=a;this.bitmap=b;this.C=c;this.P=131072;this.F=0}g=rf.prototype;
g.ob=function(a){if(a===this.da)return this;var b=ud(this.bitmap),c=Array(0>b?4:2*(b+1));dd(this.C,0,c,0,2*b);return new rf(a,this.bitmap,c)};g.Kb=function(){return sf?sf(this.C):tf.call(null,this.C)};g.Mb=function(a,b){return pf(this.C,a,b)};g.hb=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.bitmap&e))return d;var f=ud(this.bitmap&e-1);e=this.C[2*f];f=this.C[2*f+1];return null==e?f.hb(a+5,b,c,d):ff(c,e)?f:d};
g.Ua=function(a,b,c,d,e,f){var h=1<<(c>>>b&31),k=ud(this.bitmap&h-1);if(0===(this.bitmap&h)){var l=ud(this.bitmap);if(2*l<this.C.length){a=this.ob(a);b=a.C;f.R=!0;c=2*(l-k);f=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[f],--l,--c,--f;b[2*k]=d;b[2*k+1]=e;a.bitmap|=h;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=uf.Ua(a,b+5,c,d,e,f);for(e=d=0;;)if(32>d)0===
(this.bitmap>>>d&1)?d+=1:(k[d]=null!=this.C[e]?uf.Ua(a,b+5,ec(this.C[e]),this.C[e],this.C[e+1],f):this.C[e+1],e+=2,d+=1);else break;return new vf(a,l+1,k)}b=Array(2*(l+4));dd(this.C,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;dd(this.C,2*k,b,2*(k+1),2*(l-k));f.R=!0;a=this.ob(a);a.C=b;a.bitmap|=h;return a}l=this.C[2*k];h=this.C[2*k+1];if(null==l)return l=h.Ua(a,b+5,c,d,e,f),l===h?this:of(this,a,2*k+1,l);if(ff(d,l))return e===h?this:of(this,a,2*k+1,e);f.R=!0;f=b+5;d=wf?wf(a,f,l,h,c,d,e):xf.call(null,a,f,l,h,c,d,
e);e=2*k;k=2*k+1;a=this.ob(a);a.C[e]=null;a.C[k]=d;return a};
g.Ta=function(a,b,c,d,e){var f=1<<(b>>>a&31),h=ud(this.bitmap&f-1);if(0===(this.bitmap&f)){var k=ud(this.bitmap);if(16<=k){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=uf.Ta(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.bitmap>>>c&1)?c+=1:(h[c]=null!=this.C[d]?uf.Ta(a+5,ec(this.C[d]),this.C[d],this.C[d+1],e):this.C[d+1],d+=2,c+=1);else break;return new vf(null,k+1,h)}a=Array(2*
(k+1));dd(this.C,0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;dd(this.C,2*h,a,2*(h+1),2*(k-h));e.R=!0;return new rf(null,this.bitmap|f,a)}var l=this.C[2*h];f=this.C[2*h+1];if(null==l)return k=f.Ta(a+5,b,c,d,e),k===f?this:new rf(null,this.bitmap,mf(this.C,2*h+1,k));if(ff(c,l))return d===f?this:new rf(null,this.bitmap,mf(this.C,2*h+1,d));e.R=!0;e=this.bitmap;k=this.C;a+=5;a=yf?yf(a,l,f,b,c,d):xf.call(null,a,l,f,b,c,d);c=2*h;h=2*h+1;d=Ea(k);d[c]=null;d[h]=a;return new rf(null,e,d)};
g.Jb=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.bitmap&e))return d;var f=ud(this.bitmap&e-1);e=this.C[2*f];f=this.C[2*f+1];return null==e?f.Jb(a+5,b,c,d):ff(c,e)?new Ae(e,f):d};
g.Lb=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.bitmap&d))return this;var e=ud(this.bitmap&d-1),f=this.C[2*e],h=this.C[2*e+1];return null==f?(a=h.Lb(a+5,b,c),a===h?this:null!=a?new rf(null,this.bitmap,mf(this.C,2*e+1,a)):this.bitmap===d?null:new rf(null,this.bitmap^d,nf(this.C,e))):ff(c,f)?this.bitmap===d?null:new rf(null,this.bitmap^d,nf(this.C,e)):this};g.Qa=function(){return new qf(this.C)};var uf=new rf(null,0,[]);function zf(a){this.C=a;this.i=0;this.Wa=null}
zf.prototype.pa=function(){for(var a=this.C.length;;){if(null!=this.Wa&&this.Wa.pa())return!0;if(this.i<a){var b=this.C[this.i];this.i+=1;null!=b&&(this.Wa=Ub(b))}else return!1}};zf.prototype.next=function(){if(this.pa())return this.Wa.next();throw Error("No such element");};zf.prototype.remove=function(){return Error("Unsupported operation")};function vf(a,b,c){this.da=a;this.G=b;this.C=c;this.P=131072;this.F=0}g=vf.prototype;g.ob=function(a){return a===this.da?this:new vf(a,this.G,Ea(this.C))};
g.Kb=function(){return Af?Af(this.C):Bf.call(null,this.C)};g.Mb=function(a,b){for(var c=this.C.length,d=0;;)if(d<c){var e=this.C[d];if(null!=e){b=e.Mb(a,b);if(vc(b))return b;d+=1}else d+=1}else return b};g.hb=function(a,b,c,d){var e=this.C[b>>>a&31];return null!=e?e.hb(a+5,b,c,d):d};g.Ua=function(a,b,c,d,e,f){var h=c>>>b&31,k=this.C[h];if(null==k)return a=of(this,a,h,uf.Ua(a,b+5,c,d,e,f)),a.G+=1,a;b=k.Ua(a,b+5,c,d,e,f);return b===k?this:of(this,a,h,b)};
g.Ta=function(a,b,c,d,e){var f=b>>>a&31,h=this.C[f];if(null==h)return new vf(null,this.G+1,mf(this.C,f,uf.Ta(a+5,b,c,d,e)));a=h.Ta(a+5,b,c,d,e);return a===h?this:new vf(null,this.G,mf(this.C,f,a))};g.Jb=function(a,b,c,d){var e=this.C[b>>>a&31];return null!=e?e.Jb(a+5,b,c,d):d};
g.Lb=function(a,b,c){var d=b>>>a&31,e=this.C[d];if(null!=e){a=e.Lb(a+5,b,c);if(a===e)d=this;else if(null==a)if(8>=this.G)a:{e=this.C;a=e.length;b=Array(2*(this.G-1));c=0;for(var f=1,h=0;;)if(c<a)c!==d&&null!=e[c]?(b[f]=e[c],f+=2,h|=1<<c,c+=1):c+=1;else{d=new rf(null,h,b);break a}}else d=new vf(null,this.G-1,mf(this.C,d,a));else d=new vf(null,this.G,mf(this.C,d,a));return d}return this};g.Qa=function(){return new zf(this.C)};
function Cf(a,b,c){b*=2;for(var d=0;;)if(d<b){if(ff(c,a[d]))return d;d+=2}else return-1}function Df(a,b,c,d){this.da=a;this.bb=b;this.G=c;this.C=d;this.P=131072;this.F=0}g=Df.prototype;g.ob=function(a){if(a===this.da)return this;var b=Array(2*(this.G+1));dd(this.C,0,b,0,2*this.G);return new Df(a,this.bb,this.G,b)};g.Kb=function(){return sf?sf(this.C):tf.call(null,this.C)};g.Mb=function(a,b){return pf(this.C,a,b)};
g.hb=function(a,b,c,d){a=Cf(this.C,this.G,c);return 0>a?d:ff(c,this.C[a])?this.C[a+1]:d};
g.Ua=function(a,b,c,d,e,f){if(c===this.bb){b=Cf(this.C,this.G,d);if(-1===b){if(this.C.length>2*this.G)return b=2*this.G,c=2*this.G+1,a=this.ob(a),a.C[b]=d,a.C[c]=e,f.R=!0,a.G+=1,a;c=this.C.length;b=Array(c+2);dd(this.C,0,b,0,c);b[c]=d;b[c+1]=e;f.R=!0;d=this.G+1;a===this.da?(this.C=b,this.G=d,a=this):a=new Df(this.da,this.bb,d,b);return a}return this.C[b+1]===e?this:of(this,a,b+1,e)}return(new rf(a,1<<(this.bb>>>b&31),[null,this,null,null])).Ua(a,b,c,d,e,f)};
g.Ta=function(a,b,c,d,e){return b===this.bb?(a=Cf(this.C,this.G,c),-1===a?(a=2*this.G,b=Array(a+2),dd(this.C,0,b,0,a),b[a]=c,b[a+1]=d,e.R=!0,new Df(null,this.bb,this.G+1,b)):P.B(this.C[a+1],d)?this:new Df(null,this.bb,this.G,mf(this.C,a+1,d))):(new rf(null,1<<(this.bb>>>a&31),[null,this])).Ta(a,b,c,d,e)};g.Jb=function(a,b,c,d){a=Cf(this.C,this.G,c);return 0>a?d:ff(c,this.C[a])?new Ae(this.C[a],this.C[a+1]):d};
g.Lb=function(a,b,c){a=Cf(this.C,this.G,c);return-1===a?this:1===this.G?null:new Df(null,this.bb,this.G-1,nf(this.C,td(a)))};g.Qa=function(){return new qf(this.C)};function xf(a){switch(arguments.length){case 6:return yf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return wf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}
function yf(a,b,c,d,e,f){var h=ec(b);if(h===d)return new Df(null,h,2,[b,c,e,f]);var k=new lf;return uf.Ta(a,h,b,c,k).Ta(a,d,e,f,k)}function wf(a,b,c,d,e,f,h){var k=ec(c);if(k===e)return new Df(null,k,2,[c,d,f,h]);var l=new lf;return uf.Ua(a,b,k,c,d,l).Ua(a,b,e,f,h,l)}function Ef(a,b,c,d,e){this.meta=a;this.nodes=b;this.i=c;this.s=d;this.N=e;this.F=32374988;this.P=0}g=Ef.prototype;g.toString=function(){return Wb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ha=function(){return this.meta};g.va=function(){if(null==this.s){var a=this.nodes,b=this.i+2;return Ff?Ff(a,b,null):tf.call(null,a,b,null)}a=this.nodes;b=this.i;var c=O(this.s);return Ff?Ff(a,b,c):tf.call(null,a,b,c)};
g.ga=function(){var a=this.N;return null!=a?a:this.N=a=pc(this)};g.fa=function(a,b){return Hc(this,b)};g.ma=function(){return lc};g.qa=function(a,b){return jd(b,this)};g.ra=function(a,b,c){return kd(b,c,this)};g.wa=function(){return null==this.s?new Ae(this.nodes[this.i],this.nodes[this.i+1]):N(this.s)};
g.xa=function(){var a=this,b=null==a.s?function(){var c=a.nodes,d=a.i+2;return Ff?Ff(c,d,null):tf.call(null,c,d,null)}():function(){var c=a.nodes,d=a.i,e=O(a.s);return Ff?Ff(c,d,e):tf.call(null,c,d,e)}();return null!=b?b:lc};g.ja=function(){return this};g.ka=function(a,b){return b===this.meta?this:new Ef(b,this.nodes,this.i,this.s,this.N)};g.oa=function(a,b){return U(b,this)};Ef.prototype[Da]=function(){return nc(this)};
function tf(a){switch(arguments.length){case 1:return sf(arguments[0]);case 3:return Ff(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function sf(a){return Ff(a,0,null)}function Ff(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new Ef(null,a,b,null,null);var d=a[b+1];if(x(d)&&(d=d.Kb(),x(d)))return new Ef(null,a,b+2,d,null);b+=2}else return null;else return new Ef(null,a,b,c,null)}
function Gf(a,b,c,d,e){this.meta=a;this.nodes=b;this.i=c;this.s=d;this.N=e;this.F=32374988;this.P=0}g=Gf.prototype;g.toString=function(){return Wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ha=function(){return this.meta};g.va=function(){var a=this.nodes,b=this.i,c=O(this.s);return Hf?Hf(a,b,c):Bf.call(null,a,b,c)};g.ga=function(){var a=this.N;return null!=a?a:this.N=a=pc(this)};
g.fa=function(a,b){return Hc(this,b)};g.ma=function(){return lc};g.qa=function(a,b){return jd(b,this)};g.ra=function(a,b,c){return kd(b,c,this)};g.wa=function(){return N(this.s)};g.xa=function(){var a=this.nodes;var b=this.i,c=O(this.s);a=Hf?Hf(a,b,c):Bf.call(null,a,b,c);return null!=a?a:lc};g.ja=function(){return this};g.ka=function(a,b){return b===this.meta?this:new Gf(b,this.nodes,this.i,this.s,this.N)};g.oa=function(a,b){return U(b,this)};Gf.prototype[Da]=function(){return nc(this)};
function Bf(a){switch(arguments.length){case 1:return Af(arguments[0]);case 3:return Hf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function Af(a){return Hf(a,0,null)}function Hf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(x(d)&&(d=d.Kb(),x(d)))return new Gf(null,a,b+1,d,null);b+=1}else return null;else return new Gf(null,a,b,c,null)}function If(a,b){this.ta=a;this.Lc=b;this.seen=!1}
If.prototype.pa=function(){return!this.seen||this.Lc.pa()};If.prototype.next=function(){if(this.seen)return this.Lc.next();this.seen=!0;return new Ae(null,this.ta)};If.prototype.remove=function(){return Error("Unsupported operation")};function Jf(a,b,c,d,e,f){this.meta=a;this.G=b;this.root=c;this.sa=d;this.ta=e;this.N=f;this.F=16123663;this.P=139268}g=Jf.prototype;g.tb=function(a,b){return null==b?this.sa?new Ae(null,this.ta):null:null==this.root?null:this.root.Jb(0,ec(b),b,null)};g.toString=function(){return Wb(this)};
g.keys=function(){return nc(af.j?af.j(this):af.call(null,this))};g.entries=function(){return new We(J(J(this)))};g.values=function(){return nc(bf.j?bf.j(this):bf.call(null,this))};g.has=function(a){return id(this,a)};g.get=function(a,b){return this.ca(null,a,b)};
g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.ea(null,e),h=V(f,0,null);f=V(f,1,null);a.B?a.B(f,h):a.call(null,f,h);e+=1}else if(b=J(b))cd(b)?(c=Mb(b),b=Nb(b),h=c,d=R(c),c=h):(c=N(b),h=V(c,0,null),f=V(c,1,null),a.B?a.B(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};g.ya=function(a,b){return this.ca(null,b,null)};g.ca=function(a,b,c){return null==b?this.sa?this.ta:c:null==this.root?c:this.root.hb(0,ec(b),b,c)};
g.Db=function(a,b,c){a=this.sa?b.D?b.D(c,null,this.ta):b.call(null,c,null,this.ta):c;vc(a)?b=F(a):null!=this.root?(b=this.root.Mb(b,a),b=vc(b)?wc.j?wc.j(b):wc.call(null,b):b):b=a;return b};g.Qa=function(){var a=this.root?Ub(this.root):Ud();return this.sa?new If(this.ta,a):a};g.ha=function(){return this.meta};g.la=function(){return this.G};g.ga=function(){var a=this.N;return null!=a?a:this.N=a=rc(this)};g.fa=function(a,b){return Ve(this,b)};g.sb=function(){return new Kf(this.root,this.G,this.sa,this.ta)};
g.ma=function(){return pb(ef,this.meta)};g.jc=function(a,b){if(null==b)return this.sa?new Jf(this.meta,this.G-1,this.root,!1,null,null):this;if(null==this.root)return this;a=this.root.Lb(0,ec(b),b);return a===this.root?this:new Jf(this.meta,this.G-1,a,this.sa,this.ta,null)};
g.ab=function(a,b,c){if(null==b)return this.sa&&c===this.ta?this:new Jf(this.meta,this.sa?this.G:this.G+1,this.root,!0,c,null);a=new lf;b=(null==this.root?uf:this.root).Ta(0,ec(b),b,c,a);return b===this.root?this:new Jf(this.meta,a.R?this.G+1:this.G,b,this.sa,this.ta,null)};g.lb=function(a,b){return null==b?this.sa:null==this.root?!1:this.root.hb(0,ec(b),b,ed)!==ed};g.ja=function(){if(0<this.G){var a=null!=this.root?this.root.Kb():null;return this.sa?U(new Ae(null,this.ta),a):a}return null};
g.ka=function(a,b){return b===this.meta?this:new Jf(b,this.G,this.root,this.sa,this.ta,this.N)};g.oa=function(a,b){if(bd(b))return this.ab(null,Sa(b,0),Sa(b,1));a=this;for(b=J(b);;){if(null==b)return a;var c=N(b);if(bd(c))a=bb(a,Sa(c,0),Sa(c,1)),b=O(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};g.j=function(a){return this.ya(null,a)};g.B=function(a,b){return this.ca(null,a,b)};var ef=new Jf(null,0,null,!1,null,sc);Jf.prototype[Da]=function(){return nc(this)};
function Kf(a,b,c,d){this.da={};this.root=a;this.count=b;this.sa=c;this.ta=d;this.F=259;this.P=56}function Lf(a,b,c){if(a.da){if(null==b)a.ta!==c&&(a.ta=c),a.sa||(a.count+=1,a.sa=!0);else{var d=new lf;b=(null==a.root?uf:a.root).Ua(a.da,0,ec(b),b,c,d);b!==a.root&&(a.root=b);d.R&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}g=Kf.prototype;g.la=function(){if(this.da)return this.count;throw Error("count after persistent!");};
g.ya=function(a,b){return null==b?this.sa?this.ta:null:null==this.root?null:this.root.hb(0,ec(b),b)};g.ca=function(a,b,c){return null==b?this.sa?this.ta:c:null==this.root?c:this.root.hb(0,ec(b),b,c)};
g.yb=function(a,b){a:if(this.da)if(Ie(b))a=Lf(this,Je.j?Je.j(b):Je.call(null,b),Ke.j?Ke.j(b):Ke.call(null,b));else if(bd(b))a=Lf(this,b.j?b.j(0):b.call(null,0),b.j?b.j(1):b.call(null,1));else for(a=J(b),b=this;;){var c=N(a);if(x(c))a=O(a),b=Lf(b,Je.j?Je.j(c):Je.call(null,c),Ke.j?Ke.j(c):Ke.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
g.Hb=function(){if(this.da){this.da=null;var a=new Jf(null,this.count,this.root,this.sa,this.ta,null)}else throw Error("persistent! called twice");return a};g.xb=function(a,b,c){return Lf(this,b,c)};g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};
g.j=function(a){return this.ya(null,a)};g.B=function(a,b){return this.ca(null,a,b)};function Mf(a,b){this.Y=a;this.Ya=b;this.F=32374988;this.P=0}g=Mf.prototype;g.toString=function(){return Wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ha=function(){return this.Ya};g.va=function(){var a=(null!=this.Y?this.Y.F&128||u===this.Y.Gb||(this.Y.F?0:y(Wa,this.Y)):y(Wa,this.Y))?this.Y.va():O(this.Y);return null==a?null:new Mf(a,null)};g.ga=function(){return pc(this)};
g.fa=function(a,b){return Hc(this,b)};g.ma=function(){return lc};g.qa=function(a,b){return jd(b,this)};g.ra=function(a,b,c){return kd(b,c,this)};g.wa=function(){return this.Y.wa(null).key};g.xa=function(){var a=(null!=this.Y?this.Y.F&128||u===this.Y.Gb||(this.Y.F?0:y(Wa,this.Y)):y(Wa,this.Y))?this.Y.va():O(this.Y);return null!=a?new Mf(a,null):lc};g.ja=function(){return this};g.ka=function(a,b){return b===this.Ya?this:new Mf(this.Y,b)};g.oa=function(a,b){return U(b,this)};Mf.prototype[Da]=function(){return nc(this)};
function af(a){return(a=J(a))?new Mf(a,null):null}function Je(a){return fb(a)}function Nf(a,b){this.Y=a;this.Ya=b;this.F=32374988;this.P=0}g=Nf.prototype;g.toString=function(){return Wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return Q(this,b,0)};a.B=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.B=function(c,d){return S(this,c,d)};return b}();g.ha=function(){return this.Ya};g.va=function(){var a=(null!=this.Y?this.Y.F&128||u===this.Y.Gb||(this.Y.F?0:y(Wa,this.Y)):y(Wa,this.Y))?this.Y.va():O(this.Y);return null==a?null:new Nf(a,null)};g.ga=function(){return pc(this)};
g.fa=function(a,b){return Hc(this,b)};g.ma=function(){return lc};g.qa=function(a,b){return jd(b,this)};g.ra=function(a,b,c){return kd(b,c,this)};g.wa=function(){return this.Y.wa(null).R};g.xa=function(){var a=(null!=this.Y?this.Y.F&128||u===this.Y.Gb||(this.Y.F?0:y(Wa,this.Y)):y(Wa,this.Y))?this.Y.va():O(this.Y);return null!=a?new Nf(a,null):lc};g.ja=function(){return this};g.ka=function(a,b){return b===this.Ya?this:new Nf(this.Y,b)};g.oa=function(a,b){return U(b,this)};Nf.prototype[Da]=function(){return nc(this)};
function bf(a){return(a=J(a))?new Nf(a,null):null}function Ke(a){return gb(a)}var Of=function Of(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new K(c.slice(0),0,null):null;return Of.K(c)};Of.K=function(a){return x(Zd(a))?nd(function(b,c){return Jc.B(x(b)?b:Td,c)},a):null};Of.$=0;Of.ba=function(a){return this.K(J(a))};function Pf(a){for(var b=Td,c=J(Qf);;)if(c){var d=N(c),e=H.D(a,d,Rf);b=P.B(e,Rf)?b:W.D(b,d,e);c=O(c)}else return pb(b,Tc(a))}
function Sf(a){this.Ab=a}Sf.prototype.pa=function(){return this.Ab.pa()};Sf.prototype.next=function(){if(this.Ab.pa())return this.Ab.next().key;throw Error("No such element");};Sf.prototype.remove=function(){return Error("Unsupported operation")};function Tf(a,b,c){this.meta=a;this.cb=b;this.N=c;this.F=15077647;this.P=139268}g=Tf.prototype;g.toString=function(){return Wb(this)};g.keys=function(){return nc(J(this))};g.entries=function(){return new Xe(J(J(this)))};g.values=function(){return nc(J(this))};
g.has=function(a){return id(this,a)};g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.ea(null,e),h=V(f,0,null);f=V(f,1,null);a.B?a.B(f,h):a.call(null,f,h);e+=1}else if(b=J(b))cd(b)?(c=Mb(b),b=Nb(b),h=c,d=R(c),c=h):(c=N(b),h=V(c,0,null),f=V(c,1,null),a.B?a.B(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};g.ya=function(a,b){return this.ca(null,b,null)};g.ca=function(a,b,c){a=cb(this.cb,b);return x(a)?fb(a):c};g.Qa=function(){return new Sf(Ub(this.cb))};g.ha=function(){return this.meta};
g.la=function(){return Ma(this.cb)};g.ga=function(){var a=this.N;return null!=a?a:this.N=a=rc(this)};g.fa=function(a,b){if(a=Xc(b))if(a=R(this)===R(b))try{return od(function(c,d){return(c=id(b,d))?c:new uc},!0,this.cb)}catch(c){if(c instanceof Error)return!1;throw c;}else return a;else return a};g.sb=function(){return new Uf(Hb(this.cb))};g.ma=function(){return pb(Vf,this.meta)};g.zc=function(a,b){return new Tf(this.meta,eb(this.cb,b),null)};g.ja=function(){return af(this.cb)};
g.ka=function(a,b){return b===this.meta?this:new Tf(b,this.cb,this.N)};g.oa=function(a,b){return new Tf(this.meta,W.D(this.cb,b,null),null)};g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};g.j=function(a){return this.ya(null,a)};g.B=function(a,b){return this.ca(null,a,b)};
var Vf=new Tf(null,Td,sc);Tf.prototype[Da]=function(){return nc(this)};function Uf(a){this.qb=a;this.P=136;this.F=259}g=Uf.prototype;g.yb=function(a,b){this.qb=Kb(this.qb,b,null);return this};g.Hb=function(){return new Tf(null,Jb(this.qb),null)};g.la=function(){return R(this.qb)};g.ya=function(a,b){return this.ca(null,b,null)};g.ca=function(a,b,c){return Ya(this.qb,b,ed)===ed?c:b};
g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};g.j=function(a){return Ya(this.qb,a,ed)===ed?null:a};g.B=function(a,b){return Ya(this.qb,a,ed)===ed?b:a};
function Wf(a){if(Xc(a))return Sc(a,null);a=J(a);if(null==a)return Vf;if(a instanceof K&&0===a.i){a=a.C;for(var b=a.length,c=Hb(Vf),d=0;;)if(d<b)Ib(c,a[d]),d+=1;else break;return Jb(c)}for(c=Hb(Vf);;)if(null!=a)b=O(a),c=Ib(c,D(a)),a=b;else return Jb(c)}function X(a){if(null!=a&&(a.P&4096||u===a.xc))return a.Eb(null);if("string"===typeof a)return a;throw Error(["Doesn't support name: ",B.j(a)].join(""));}
function Xf(a,b){if("string"===typeof b)return a=a.exec(b),null!=a&&P.B(a[0],b)?1===a.length?a[0]:He(a):null;throw new TypeError("re-matches must match against a string.");}
function Yf(a,b,c,d,e,f,h){var k=ua;ua=null==ua?null:ua-1;try{if(null!=ua&&0>ua)return G(a,"#");G(a,c);if(0===Aa.j(f))J(h)&&G(a,function(){var r=Zf.j(f);return x(r)?r:"..."}());else{if(J(h)){var l=N(h);b.D?b.D(l,a,f):b.call(null,l,a,f)}for(var m=O(h),n=Aa.j(f)-1;;)if(!m||null!=n&&0===n){J(m)&&0===n&&(G(a,d),G(a,function(){var r=Zf.j(f);return x(r)?r:"..."}()));break}else{G(a,d);var p=N(m);c=a;h=f;b.D?b.D(p,c,h):b.call(null,p,c,h);var q=O(m);c=n-1;m=q;n=c}}return G(a,e)}finally{ua=k}}
function $f(a,b){b=J(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.ea(null,e);G(a,f);e+=1}else if(b=J(b))c=b,cd(c)?(b=Mb(c),d=Nb(c),c=b,f=R(b),b=d,d=f):(f=N(c),G(a,f),b=O(c),c=null,d=0),e=0;else return null}var ag={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function bg(a){return['"',B.j(a.replace(RegExp('[\\\\"\b\f\n\r\t]',"g"),function(b){return ag[b]})),'"'].join("")}
function cg(a,b){return(a=fd(H.B(a,ya)))?(a=null!=b?b.F&131072||u===b.Zc?!0:!1:!1)?null!=Tc(b):a:a}
function dg(a,b,c){if(null==a)return G(b,"nil");if(cg(c,a)){G(b,"^");var d=Tc(a);eg.D?eg.D(d,b,c):eg.call(null,d,b,c);G(b," ")}if(a.Ib)return a.Ub(b);if(null!=a?a.F&2147483648||u===a.na||(a.F?0:y(Cb,a)):y(Cb,a))return Db(a,b,c);if(!0===a||!1===a)return G(b,B.j(a));if("number"===typeof a)return G(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":B.j(a));if(null!=a&&a.constructor===Object)return G(b,"#js "),d=de.B(function(f){return new Ae(null!=Xf(/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/,
f)?yd.j(f):f,a[f])},ha(a)),fg.T?fg.T(d,eg,b,c):fg.call(null,d,eg,b,c);if(Ba(a))return Yf(b,eg,"#js ["," ","]",c,a);if("string"===typeof a)return x(xa.j(c))?G(b,bg(a)):G(b,a);if("function"===typeof a){var e=a.name;c=x(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Function":e;return $f(b,Ic(["#object[",c,x(!1)?[' "',B.j(a),'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(f,h){for(f=B.j(f);;)if(f.length<h)f=["0",f].join("");else return f},$f(b,Ic(['#inst "',c(a.getUTCFullYear(),
4),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return $f(b,Ic(['#"',a.source,'"']));if(Ia(a))return $f(b,Ic(["#object[",a.toString(),"]"]));if(x(function(){var f=null==a?null:a.constructor;return null==f?null:f.nb}()))return $f(b,Ic(["#object[",a.constructor.nb.replace(RegExp("/","g"),"."),"]"]));e=function(){var f=null==a?null:a.constructor;
return null==f?null:f.name}();c=x(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Object":e;return null==a.constructor?$f(b,Ic(["#object[",c,"]"])):$f(b,Ic(["#object[",c," ",B.j(a),"]"]))}function eg(a,b,c){var d=gg.j(c);return x(d)?(c=W.D(c,hg,dg),d.D?d.D(a,b,c):d.call(null,a,b,c)):dg(a,b,c)}
function ig(a){var b=va();if(Vc(a))b="";else{var c=B,d=c.j,e=new pa,f=new Vb(e);eg(N(a),f,b);a=J(O(a));for(var h=null,k=0,l=0;;)if(l<k){var m=h.ea(null,l);G(f," ");eg(m,f,b);l+=1}else if(a=J(a))h=a,cd(h)?(a=Mb(h),k=Nb(h),h=a,m=R(a),a=k,k=m):(m=N(h),G(f," "),eg(m,f,b),a=O(h),h=null,k=0),l=0;else break;b=d.call(c,e)}return b}function jg(a){return a instanceof gc?hc.B(null,X(a)):yd.B(null,X(a))}
function kg(a){if(x(!1)){var b=J(a),c=J(b),d=N(c);O(c);V(d,0,null);V(d,1,null);c=null==a?null:null!=a&&(a.F&4||u===a.Sc)?a.ma(null):(null!=a?a.F&4||u===a.Sc||(a.F?0:y(Na,a)):y(Na,a))?Oa(a):null;for(a=null;;){d=a;b=J(b);a=N(b);var e=O(b),f=a;a=V(f,0,null);b=V(f,1,null);if(x(f))if(a instanceof I||a instanceof gc)if(x(d))if(P.B(d,xd(a)))c=W.D(c,jg(a),b),a=d,b=e;else return null;else if(d=xd(a),x(d))c=W.D(c,jg(a),b),a=d,b=e;else return null;else return null;else return new Y(null,2,5,Z,[d,c],null)}}else return null}
function lg(a,b,c,d,e){return Yf(d,function(f,h,k){var l=fb(f);c.D?c.D(l,h,k):c.call(null,l,h,k);G(h," ");f=gb(f);return c.D?c.D(f,h,k):c.call(null,f,h,k)},[B.j(a),"{"].join(""),", ","}",e,J(b))}function fg(a,b,c,d){var e=$c(a)?kg(a):null,f=V(e,0,null);e=V(e,1,null);return x(f)?lg(["#:",B.j(f)].join(""),e,b,c,d):lg(null,a,b,c,d)}K.prototype.na=u;K.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};zd.prototype.na=u;zd.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};
Ae.prototype.na=u;Ae.prototype.ia=function(a,b,c){return Yf(b,eg,"["," ","]",c,this)};Ef.prototype.na=u;Ef.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};Ze.prototype.na=u;Ze.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};oc.prototype.na=u;oc.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};Me.prototype.na=u;Me.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};wd.prototype.na=u;
wd.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};Jf.prototype.na=u;Jf.prototype.ia=function(a,b,c){return fg(this,eg,b,c)};Gf.prototype.na=u;Gf.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};Oe.prototype.na=u;Oe.prototype.ia=function(a,b,c){return Yf(b,eg,"["," ","]",c,this)};Tf.prototype.na=u;Tf.prototype.ia=function(a,b,c){return Yf(b,eg,"#{"," ","}",c,this)};Dd.prototype.na=u;Dd.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};
ae.prototype.na=u;ae.prototype.ia=function(a,b,c){G(b,"#object[cljs.core.Atom ");eg(new v(null,1,[mg,this.state],null),b,c);return G(b,"]")};Nf.prototype.na=u;Nf.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};he.prototype.na=u;he.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};Y.prototype.na=u;Y.prototype.ia=function(a,b,c){return Yf(b,eg,"["," ","]",c,this)};vd.prototype.na=u;vd.prototype.ia=function(a,b){return G(b,"()")};v.prototype.na=u;
v.prototype.ia=function(a,b,c){return fg(this,eg,b,c)};Mf.prototype.na=u;Mf.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};Lc.prototype.na=u;Lc.prototype.ia=function(a,b,c){return Yf(b,eg,"("," ",")",c,this)};var ng=null;function og(a){null==ng&&(ng=new ae(0));return hc.j([B.j(a),B.j(ce.B(ng,tc))].join(""))}function pg(){}
function qg(a){if(null!=a&&null!=a.Uc)a=a.Uc(a);else{var b=qg[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=qg._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IEncodeJS.-clj-\x3ejs",a);}return a}function rg(a,b){return(null!=a?u===a.Tc||(a.Bc?0:y(pg,a)):y(pg,a))?qg(a):"string"===typeof a||"number"===typeof a||a instanceof I||a instanceof gc?b.j?b.j(a):b.call(null,a):ig(Ic([a]))}
var sg=function sg(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new K(c.slice(1),0,null):null;return sg.K(arguments[0],c)};
sg.K=function(a,b){b=Sd(b);var c=H.D(b,tg,X),d=function h(f){if(null==f)return null;if(null!=f?u===f.Tc||(f.Bc?0:y(pg,f)):y(pg,f))return qg(f);if(f instanceof I)return c.j?c.j(f):c.call(null,f);if(f instanceof gc)return B.j(f);if($c(f)){var k={};f=J(f);for(var l=null,m=0,n=0;;)if(n<m){var p=l.ea(null,n),q=V(p,0,null);p=V(p,1,null);q=rg(q,d);p=h(p);k[q]=p;n+=1}else if(f=J(f))cd(f)?(m=Mb(f),f=Nb(f),l=m,m=R(m)):(m=N(f),l=V(m,0,null),m=V(m,1,null),l=rg(l,d),m=h(m),k[l]=m,f=O(f),l=null,m=0),n=0;else break;
return k}if(Wc(f)){k=[];f=J(de.B(h,f));l=null;for(n=m=0;;)if(n<m)q=l.ea(null,n),k.push(q),n+=1;else if(f=J(f))l=f,cd(l)?(f=Mb(l),n=Nb(l),l=f,m=R(f),f=n):(f=N(l),k.push(f),f=O(l),l=null,m=0),n=0;else break;return k}return f};return d(a)};sg.$=1;sg.ba=function(a){var b=N(a);a=O(a);return this.K(b,a)};var ug=null;function vg(){null==ug&&(ug=new ae(new v(null,3,[wg,Td,xg,Td,yg,Td],null)));return ug}
function zg(a,b,c){var d=P.B(b,c);if(d)return d;d=yg.j(a);d=d.j?d.j(b):d.call(null,b);if(!(d=id(d,c))&&(d=bd(c)))if(d=bd(b))if(d=R(c)===R(b)){d=!0;for(var e=0;;)if(d&&e!==R(c))d=zg(a,b.j?b.j(e):b.call(null,e),c.j?c.j(e):c.call(null,e)),e+=1;else return d}else return d;else return d;else return d}function Ag(a){var b=F(vg());a=H.B(wg.j(b),a);return J(a)?a:null}function Bg(a,b,c,d){ce.B(a,function(){return F(b)});ce.B(c,function(){return F(d)})}
var Cg=function Cg(a,b,c){var e=function(){var f=F(c);return f.j?f.j(a):f.call(null,a)}();e=x(x(e)?e.j?e.j(b):e.call(null,b):e)?!0:null;if(x(e))return e;e=function(){for(var f=Ag(b);;)if(0<R(f)){var h=N(f);Cg.D?Cg.D(a,h,c):Cg.call(null,a,h,c);f=kc(f)}else return null}();if(x(e))return e;e=function(){for(var f=Ag(a);;)if(0<R(f)){var h=N(f);Cg.D?Cg.D(h,b,c):Cg.call(null,h,b,c);f=kc(f)}else return null}();return x(e)?e:!1};function Dg(a,b,c,d){c=Cg(a,b,c);return x(c)?c:zg(d,a,b)}
var Eg=function Eg(a,b,c,d,e,f,h,k){var m=Ga(function(p,q){var r=V(q,0,null);V(q,1,null);if(zg(F(c),b,r)){p=null==p||Dg(r,N(p),e,F(c))?q:p;if(!Dg(N(p),r,e,F(c)))throw Error(["Multiple methods in multimethod '",B.j(a),"' match dispatch value: ",B.j(b)," -\x3e ",B.j(r)," and ",B.j(N(p)),", and neither is preferred"].join(""));return p}return p},null,F(d)),n=function(){var p;if(p=null==m)p=F(d),p=p.j?p.j(k):p.call(null,k);return x(p)?new Y(null,2,5,Z,[k,p],null):m}();if(x(n)){if(P.B(F(h),F(c)))return ce.T(f,
W,b,N(O(n))),N(O(n));Bg(f,d,h,c);return Eg.za?Eg.za(a,b,c,d,e,f,h,k):Eg.call(null,a,b,c,d,e,f,h,k)}return null};function Fg(a,b){throw Error(["No method in multimethod '",B.j(a),"' for dispatch value: ",B.j(b)].join(""));}function Gg(a,b,c,d,e,f,h){var k=Hg;this.name=a;this.J=b;this.fd=k;this.Xb=c;this.Zb=d;this.md=e;this.Yb=f;this.Qb=h;this.F=4194305;this.P=4352}g=Gg.prototype;
g.call=function(a){switch(arguments.length-1){case 0:return this.O();case 1:return this.j(arguments[1]);case 2:return this.B(arguments[1],arguments[2]);case 3:return this.D(arguments[1],arguments[2],arguments[3]);case 4:return this.T(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.Na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Oa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Ca(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Da(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ia(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Ka(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Ma(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.ic(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ea(b)))};g.O=function(){var a=this.J.O?this.J.O():this.J.call(null),b=Ig(this,a);x(b)||Fg(this.name,a);return b.O?b.O():b.call(null)};g.j=function(a){var b=this.J.j?this.J.j(a):this.J.call(null,a),c=Ig(this,b);x(c)||Fg(this.name,b);return c.j?c.j(a):c.call(null,a)};
g.B=function(a,b){var c=this.J.B?this.J.B(a,b):this.J.call(null,a,b),d=Ig(this,c);x(d)||Fg(this.name,c);return d.B?d.B(a,b):d.call(null,a,b)};g.D=function(a,b,c){var d=this.J.D?this.J.D(a,b,c):this.J.call(null,a,b,c),e=Ig(this,d);x(e)||Fg(this.name,d);return e.D?e.D(a,b,c):e.call(null,a,b,c)};g.T=function(a,b,c,d){var e=this.J.T?this.J.T(a,b,c,d):this.J.call(null,a,b,c,d),f=Ig(this,e);x(f)||Fg(this.name,e);return f.T?f.T(a,b,c,d):f.call(null,a,b,c,d)};
g.aa=function(a,b,c,d,e){var f=this.J.aa?this.J.aa(a,b,c,d,e):this.J.call(null,a,b,c,d,e),h=Ig(this,f);x(h)||Fg(this.name,f);return h.aa?h.aa(a,b,c,d,e):h.call(null,a,b,c,d,e)};g.Na=function(a,b,c,d,e,f){var h=this.J.Na?this.J.Na(a,b,c,d,e,f):this.J.call(null,a,b,c,d,e,f),k=Ig(this,h);x(k)||Fg(this.name,h);return k.Na?k.Na(a,b,c,d,e,f):k.call(null,a,b,c,d,e,f)};
g.Oa=function(a,b,c,d,e,f,h){var k=this.J.Oa?this.J.Oa(a,b,c,d,e,f,h):this.J.call(null,a,b,c,d,e,f,h),l=Ig(this,k);x(l)||Fg(this.name,k);return l.Oa?l.Oa(a,b,c,d,e,f,h):l.call(null,a,b,c,d,e,f,h)};g.za=function(a,b,c,d,e,f,h,k){var l=this.J.za?this.J.za(a,b,c,d,e,f,h,k):this.J.call(null,a,b,c,d,e,f,h,k),m=Ig(this,l);x(m)||Fg(this.name,l);return m.za?m.za(a,b,c,d,e,f,h,k):m.call(null,a,b,c,d,e,f,h,k)};
g.Pa=function(a,b,c,d,e,f,h,k,l){var m=this.J.Pa?this.J.Pa(a,b,c,d,e,f,h,k,l):this.J.call(null,a,b,c,d,e,f,h,k,l),n=Ig(this,m);x(n)||Fg(this.name,m);return n.Pa?n.Pa(a,b,c,d,e,f,h,k,l):n.call(null,a,b,c,d,e,f,h,k,l)};g.Ca=function(a,b,c,d,e,f,h,k,l,m){var n=this.J.Ca?this.J.Ca(a,b,c,d,e,f,h,k,l,m):this.J.call(null,a,b,c,d,e,f,h,k,l,m),p=Ig(this,n);x(p)||Fg(this.name,n);return p.Ca?p.Ca(a,b,c,d,e,f,h,k,l,m):p.call(null,a,b,c,d,e,f,h,k,l,m)};
g.Da=function(a,b,c,d,e,f,h,k,l,m,n){var p=this.J.Da?this.J.Da(a,b,c,d,e,f,h,k,l,m,n):this.J.call(null,a,b,c,d,e,f,h,k,l,m,n),q=Ig(this,p);x(q)||Fg(this.name,p);return q.Da?q.Da(a,b,c,d,e,f,h,k,l,m,n):q.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.Ea=function(a,b,c,d,e,f,h,k,l,m,n,p){var q=this.J.Ea?this.J.Ea(a,b,c,d,e,f,h,k,l,m,n,p):this.J.call(null,a,b,c,d,e,f,h,k,l,m,n,p),r=Ig(this,q);x(r)||Fg(this.name,q);return r.Ea?r.Ea(a,b,c,d,e,f,h,k,l,m,n,p):r.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.Fa=function(a,b,c,d,e,f,h,k,l,m,n,p,q){var r=this.J.Fa?this.J.Fa(a,b,c,d,e,f,h,k,l,m,n,p,q):this.J.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q),w=Ig(this,r);x(w)||Fg(this.name,r);return w.Fa?w.Fa(a,b,c,d,e,f,h,k,l,m,n,p,q):w.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q)};
g.Ga=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){var w=this.J.Ga?this.J.Ga(a,b,c,d,e,f,h,k,l,m,n,p,q,r):this.J.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r),z=Ig(this,w);x(z)||Fg(this.name,w);return z.Ga?z.Ga(a,b,c,d,e,f,h,k,l,m,n,p,q,r):z.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r)};
g.Ha=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w){var z=this.J.Ha?this.J.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w):this.J.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w),C=Ig(this,z);x(C)||Fg(this.name,z);return C.Ha?C.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w):C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w)};
g.Ia=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z){var C=this.J.Ia?this.J.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z):this.J.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z),E=Ig(this,C);x(E)||Fg(this.name,C);return E.Ia?E.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z):E.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z)};
g.Ja=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C){var E=this.J.Ja?this.J.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C):this.J.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C),M=Ig(this,E);x(M)||Fg(this.name,E);return M.Ja?M.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C):M.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C)};
g.Ka=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E){var M=this.J.Ka?this.J.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E):this.J.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E),T=Ig(this,M);x(T)||Fg(this.name,M);return T.Ka?T.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E):T.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E)};
g.La=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M){var T=this.J.La?this.J.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M):this.J.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M),da=Ig(this,T);x(da)||Fg(this.name,T);return da.La?da.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M):da.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M)};
g.Ma=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T){var da=this.J.Ma?this.J.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T):this.J.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T),qa=Ig(this,da);x(qa)||Fg(this.name,da);return qa.Ma?qa.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T):qa.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T)};
g.ic=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T,da){var qa=Rd(this.J,a,b,c,d,Ic([e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T,da])),Zc=Ig(this,qa);x(Zc)||Fg(this.name,qa);return Rd(Zc,a,b,c,d,Ic([e,f,h,k,l,m,n,p,q,r,w,z,C,E,M,T,da]))};function Jg(a,b){var c=Kg;ce.T(c.Zb,W,a,b);Bg(c.Yb,c.Zb,c.Qb,c.Xb)}function Ig(a,b){P.B(F(a.Qb),F(a.Xb))||Bg(a.Yb,a.Zb,a.Qb,a.Xb);var c=F(a.Yb);c=c.j?c.j(b):c.call(null,b);return x(c)?c:Eg(a.name,b,a.Xb,a.Zb,a.md,a.Yb,a.Qb,a.fd)}g.Eb=function(){return Ob(this.name)};g.Fb=function(){return Pb(this.name)};
g.ga=function(){return ba(this)};var Lg=new I(null,"button.button.is-primary","button.button.is-primary",-883309392),Mg=new I("skier","leaves-lift","skier/leaves-lift",-1306134627),Ng=new I(null,"div.buttons.is-centered","div.buttons.is-centered",1442792514),mg=new I(null,"val","val",128701612),Og=new I(null,"render","render",-1408033454),Pg=new I(null,"mu","mu",1146469241),Qg=new I(null,"fold","fold",-887461332),Rg=new I(null,"auto-run","auto-run",1958400437),ya=new I(null,"meta","meta",1499536964),Sg=new I(null,"displayName","displayName",
-809144601),Tg=new I(null,"on-dispose","on-dispose",2105306360),Ug=new I(null,"data","data",-232669377),Vg=new I(null,"getDerivedStateFromError","getDerivedStateFromError",166658477),Wg=new I(null,"sigma","sigma",-63715703),Xg=new I(null,"spec","spec",347520401),Yg=new I(null,"constructor","constructor",-1953928811),Zg=new I(null,"div.column","div.column",-1380853326),$g=new I(null,"actions","actions",-812656882),ah=new I(null,"childContextTypes","childContextTypes",578717991),bh=new I(null,"transform",
"transform",1381301764),ch=new I(null,"field","field",-1302436500),dh=new I(null,"\x3e","\x3e",-555517146),xg=new I(null,"descendants","descendants",1824886031),eh=new I(null,"running","running",1554969103),fh=new I(null,"class","class",-2030961996),gh=new I(null,"description","description",-1428560544),hh=new I(null,"title","title",636505583),ih=new I(null,"on-click","on-click",1632826543),jh=new I(null,"cljsLegacyRender","cljsLegacyRender",-1527295613),kh=new I(null,"color","color",1011675173),
lh=new I(null,"stack","stack",-793405930),mh=new I(null,"as","as",1148689641),nh=new I(null,"reagentRender","reagentRender",-358306383),oh=new I(null,"name","name",1843675177),ph=new I(null,"getInitialState","getInitialState",1541760916),gg=new I(null,"alt-impl","alt-impl",670969595),qh=new I(null,"on-set","on-set",-140953470),Rf=new I("cljs.core","not-found","cljs.core/not-found",-1572889185),Hg=new I(null,"default","default",-1987822328),rh=new I("skier","joins-queue","skier/joins-queue",-1286647213),
sh=new I(null,"no-cache","no-cache",1588056370),th=new I(null,"\x3c\x3e","\x3c\x3e",1280186386),uh=new I(null,"div.columns","div.columns",-437221213),za=new I(null,"dup","dup",556298533),Aa=new I(null,"print-length","print-length",1931866356),wa=new I(null,"flush-on-newline","flush-on-newline",-151457939),vh=new I("lift","leaves","lift/leaves",-2138482165),wh=new I(null,"component-did-update","component-did-update",-1468549173),xh=new I("sim","end-time","sim/end-time",-1849965709),yh=new I(null,"reagent-render",
"reagent-render",-985383853),zh=new I(null,"encoding","encoding",1728578272),Ah=new I(null,"function-components","function-components",1492814963),Bh=new I(null,"hierarchy","hierarchy",-1053470341),Ch=new I(null,"on-write","on-write",31519475),Dh=new I("skiers","skiing","skiers/skiing",-957605270),Eh=new I(null,"key","key",-1516042587),Fh=new I(null,"zero","zero",-858964576),Gh=new I("lift","ride-time","lift/ride-time",78775400),Hh=new I(null,"y","y",-1757859776),Ih=new I(null,"x","x",2099068185),
Jh=new I(null,"t","t",-1397832519),Kh=new I(null,"componentWillUnmount","componentWillUnmount",1573788814),Lh=new I(null,"scale","scale",-230427353),Mh=new I(null,"contextType","contextType",1033066077),Nh=new I("skiers","waiting","skiers/waiting",1070582748),Oh=new I(null,"mark","mark",-373816345),Ph=new I(null,"event","event",301435442),wg=new I(null,"parents","parents",-2027538891),Qh=new I(null,"getDerivedStateFromProps","getDerivedStateFromProps",-991834739),Rh=new I(null,"validator","validator",
-1966190681),hg=new I(null,"fallback-impl","fallback-impl",-1501286995),Sh=new I(null,"display-name","display-name",694513143),Th=new I(null,"button.button.is-danger","button.button.is-danger",-948547713),Uh=new I("slope","length","slope/length",1017254753),Vh=new I(null,"section.section","section.section",-416807119),xa=new I(null,"readably","readably",1129599760),Wh=new I(null,"contextTypes","contextTypes",-2023853910),tg=new I(null,"keyword-fn","keyword-fn",-64566675),Xh=new I(null,"shouldComponentUpdate",
"shouldComponentUpdate",1795750960),Yh=new I(null,"unit","unit",375175175),Zh=new I(null,"id","id",-1388402092),$h=new I(null,"$schema","$schema",1635092088),ai=new I(null,"component-will-unmount","component-will-unmount",-2058314698),bi=new I("lift","chair-width","lift/chair-width",1126373462),ci=new I(null,"results","results",-1134170113),di=new I(null,"className","className",-1983287057),ei=new I(null,"h1.title","h1.title",-2139952071),fi=new I("lift","chair-period","lift/chair-period",169813739),
gi=new I(null,"events","events",1792552201),hi=new I("skiers","riding-lift","skiers/riding-lift",1574761189),ii=new I(null,"parse-tag","parse-tag",1427313738),ji=new I(null,"type","type",1174270348),ki=new I("skiers","speed","skiers/speed",88597428),yg=new I(null,"ancestors","ancestors",-776045424),Zf=new I(null,"more-marker","more-marker",-14717935);var li={},mi;function ni(){return oa("iPhone")&&!oa("iPod")&&!oa("iPad")};oa("Opera");oa("Trident")||oa("MSIE");oa("Edge");!oa("Gecko")||-1!=na.toLowerCase().indexOf("webkit")&&!oa("Edge")||oa("Trident")||oa("MSIE")||oa("Edge");-1!=na.toLowerCase().indexOf("webkit")&&!oa("Edge")&&oa("Mobile");oa("Macintosh");oa("Windows");oa("Linux")||oa("CrOS");var oi=aa.navigator||null;oi&&(oi.appVersion||"").indexOf("X11");oa("Android");ni();oa("iPad");oa("iPod");ni()||oa("iPad")||oa("iPod");na.toLowerCase().indexOf("kaios");(function(a){if("undefined"===typeof ra||"undefined"===typeof sa||"undefined"===typeof li||"undefined"===typeof mi)mi=function(b,c,d){this.f=b;this.Nc=c;this.hd=d;this.F=393216;this.P=0},mi.prototype.ka=function(b,c){return new mi(this.f,this.Nc,c)},mi.prototype.ha=function(){return this.hd},mi.Ib=!0,mi.nb="cljs.core.async/t_cljs$core$async22986",mi.Ub=function(b){return G(b,"cljs.core.async/t_cljs$core$async22986")};return new mi(a,!0,Td)})(function(){return null});var pi={},qi={},ri=[];function si(a,b){var c=qi[a];if(void 0!==c)return c;try{ri.push(a);var d=pi[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};pi[a]=d}if(e){delete shadow$provide[a];try{e.call(d,aa,si,d,d.exports)}catch(h){throw console.warn("shadow-cljs - failed to load",a),h;}if(b){var f=b.globals;if(f)for(a=0;a<f.length;a++)window[f[a]]=d.exports}}}finally{ri.pop()}return d.exports}si.cache={};si.resolve=function(a){return a};var ti=si(2,{});function ui(a,b,c){var d=RegExp,e=b.source,f=x(b.ignoreCase)?"gi":"g";f=x(b.multiline)?[f,"m"].join(""):f;b=x(b.unicode)?[f,"u"].join(""):f;return a.replace(new d(e,b),c)}
function vi(a){return function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new K(f,0,null)}return c.call(this,e)}function c(d){d=ge(d);if(P.B(R(d),1))return d=N(d),a.j?a.j(d):a.call(null,d);d=He(d);return a.j?a.j(d):a.call(null,d)}b.$=0;b.ba=function(d){d=J(d);return c(d)};b.K=c;return b}()}
function wi(a,b,c){if("string"===typeof b)return a.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),c);if(b instanceof RegExp)return"string"===typeof c?ui(a,b,c):ui(a,b,vi(c));throw["Invalid match arg: ",B.j(b)].join("");}function xi(a){var b=new pa;for(a=J(a);;)if(null!=a)b.append(B.j(N(a))),a=O(a),null!=a&&b.append(" ");else return b.toString()}
function yi(a){var b=/-/;a="/(?:)/"===B.j(b)?Jc.B(He(U("",de.B(B,J(a)))),""):He(B.j(a).split(b));if(1<R(a))a:for(;;)if(""===(null==a?null:jb(a)))a=null==a?null:kb(a);else break a;return a};var zi={};var Ai={},Bi="undefined"!==typeof window&&null!=window.document,Ci=new Tf(null,new v(null,2,["aria",null,"data",null],null),null);function Di(a){return 2>R(a)?a.toUpperCase():[a.substring(0,1).toUpperCase(),a.substring(1)].join("")}function Ei(a){if("string"===typeof a)return a;a=X(a);var b=yi(a),c=J(b);b=N(c);c=O(c);return x(Ci.j?Ci.j(b):Ci.call(null,b))?a:Pd(B,b,de.B(Di,c))}
function Fi(a){var b=function(){var c=function(){var d=Pc(a);if(d){d=a.displayName;if(x(d))return d;d=a.name;return"string"===typeof d&&J(d)?d:null}return d}();if(x(c))return c;c=function(){var d=null!=a?a.P&4096||u===a.xc?!0:!1:!1;return d?X(a):d}();if(x(c))return c;c=Tc(a);return $c(c)?oh.j(c):null}();return x(b)?wi(B.j(b),"$","."):null}function Gi(a){return a instanceof I||a instanceof gc}
var Hi=function Hi(a){switch(arguments.length){case 0:return Hi.O();case 1:return Hi.j(arguments[0]);case 2:return Hi.B(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return Hi.K(arguments[0],arguments[1],c)}};Hi.O=function(){return null};Hi.j=function(a){return Wc(a)?(a=$d(function(b){return x(b)?Gi(b)?X(b):b:null},a),J(a)?xi(a):null):Gi(a)?X(a):a};
Hi.B=function(a,b){return x(a)?x(b)?[B.j(Hi.j(a))," ",B.j(Hi.j(b))].join(""):Hi.j(a):Hi.j(b)};Hi.K=function(a,b,c){return Ga(Hi,Hi.B(a,b),c)};Hi.ba=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.K(b,a,c)};Hi.$=2;var Ii=!1;function Ji(a){if($c(a))try{var b=H.B(a,Eh)}catch(c){b=null}else b=null;return b}
function Ki(a){var b=Eh.j(Tc(a));if(null!=b)return b;b=V(a,0,null);switch(b instanceof I?b.Ra:null){case "\x3e":case "f\x3e":return Ji(V(a,2,null));case "r\x3e":return a=V(a,2,null),null==a?null:a.key;default:return Ji(V(a,1,null))}};var Li=0;function Mi(a){return setTimeout(a,16)}var Ni=Bi?function(){var a=window;return function(){var b=a.requestAnimationFrame;if(x(b))return b;b=a.webkitRequestAnimationFrame;if(x(b))return b;b=a.mozRequestAnimationFrame;if(x(b))return b;b=a.msRequestAnimationFrame;return x(b)?b:Mi}().bind(a)}():Mi;function Oi(a,b){return a.qc-b.qc}function Pi(){return null}function Qi(a){for(var b=a.length,c=0;;)if(c<b){var d=a[c];d.O?d.O():d.call(null);c+=1}else return null}
function Ri(a,b,c){b.push(c);return a.schedule()}function Si(){this.ac=!1}g=Si.prototype;g.flush_after_render=function(){var a=this.Ob;if(null==a)return null;this.Ob=null;return Qi(a)};g.queue_render=function(a){null==this.Wb&&(this.Wb=[]);return Ri(this,this.Wb,a)};g.schedule=function(){function a(){return b.run_queues()}var b=this;if(this.ac)return null;this.ac=!0;return Ni.j?Ni.j(a):Ni.call(null,a)};g.flush_before_flush=function(){var a=this.Pb;if(null==a)return null;this.Pb=null;return Qi(a)};
g.flush_queues=function(){this.flush_before_flush();Pi();this.flush_render();return this.flush_after_render()};g.run_queues=function(){this.ac=!1;return this.flush_queues()};g.add_before_flush=function(a){null==this.Pb&&(this.Pb=[]);return Ri(this,this.Pb,a)};g.add_after_render=function(a){null==this.Ob&&(this.Ob=[]);return Ri(this,this.Ob,a)};
g.flush_render=function(){var a=this.Wb;if(null==a)return null;this.Wb=null;a:{a.sort(Oi);for(var b=a.length,c=0;;)if(c<b){var d=a[c];!0===d.cljsIsDirty&&d.forceUpdate();c+=1}else break a}return null};var Ti=new Si;function Ui(a){if(x(a.cljsIsDirty))return null;a.cljsIsDirty=!0;return Ti.queue_render(a)};function Vi(a){if(null!=a&&null!=a.nd)a=a.id;else{var b=Vi[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Vi._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("Compiler.get-id",a);}return a}function Wi(a,b,c){if(null!=a&&null!=a.Jc)a=a.Jc(a,b,c);else{var d=Wi[t(null==a?null:a)];if(null!=d)a=d.D?d.D(a,b,c):d.call(null,a,b,c);else if(d=Wi._,null!=d)a=d.D?d.D(a,b,c):d.call(null,a,b,c);else throw A("Compiler.parse-tag",a);}return a}
function Xi(a,b){if(null!=a&&null!=a.Hc)a=a.Hc(a,b);else{var c=Xi[t(null==a?null:a)];if(null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else if(c=Xi._,null!=c)a=c.B?c.B(a,b):c.call(null,a,b);else throw A("Compiler.as-element",a);}return a}
function Yi(a,b,c,d,e){if(null!=a&&null!=a.Ic)a=a.Ic(a,b,c,d,e);else{var f=Yi[t(null==a?null:a)];if(null!=f)a=f.aa?f.aa(a,b,c,d,e):f.call(null,a,b,c,d,e);else if(f=Yi._,null!=f)a=f.aa?f.aa(a,b,c,d,e):f.call(null,a,b,c,d,e);else throw A("Compiler.make-element",a);}return a};var Zi=function Zi(a){switch(arguments.length){case 1:return Zi.j(arguments[0]);case 2:return Zi.B(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return Zi.K(arguments[0],arguments[1],c)}};Zi.j=function(a){return a};Zi.B=function(a,b){return R(a)<R(b)?Ga(function(c,d){return id(b,d)?Uc.B(c,d):c},a,a):Ga(Uc,a,b)};Zi.K=function(a,b,c){return Ga(Zi,a,Jc.B(c,b))};
Zi.ba=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.K(b,a,c)};Zi.$=2;var $i;function aj(a,b){b.dc=null;a:{var c=$i;$i=b;try{var d=a.O?a.O():a.call(null);break a}finally{$i=c}d=void 0}a=b.dc;b.gb=!1;a:{c=b.rb;var e=null==a?0:a.length,f=e===(null==c?0:c.length);if(f)for(f=0;;){var h=f===e;if(h){c=h;break a}if(a[f]===c[f])f+=1;else{c=!1;break a}}else c=f}c||b._update_watching(a);return d}function bj(a){var b=$i;if(null!=b){var c=b.dc;null==c?b.dc=[a]:c.push(a)}}function cj(a,b,c){a.ua=W.D(a.ua,b,c);return a.tc=null}
function dj(a,b){a.ua=Oc.B(a.ua,b);return a.tc=null}function ej(a,b,c){var d=a.tc;d=null==d?a.tc=od(function(l,m,n){l.push(m);l.push(n);return l},[],a.ua):d;for(var e=d.length,f=0;;)if(f<e){var h=d[f],k=d[f+1];k.T?k.T(h,a,b,c):k.call(null,h,a,b,c);f=2+f}else break}function fj(a,b,c,d){G(a,["#object[reagent.ratom.",B.j(c)," "].join(""));a:{c=$i;$i=null;try{var e=d;break a}finally{$i=c}e=void 0}eg(e,a,b);return G(a,"]")}var gj=null;
function hj(a,b,c,d){this.state=a;this.meta=b;this.validator=c;this.ua=d;this.F=2154201088;this.P=114690}g=hj.prototype;g.ia=function(a,b,c){return fj(b,c,"RAtom",new v(null,1,[mg,this.fb(null)],null))};g.ha=function(){return this.meta};g.ga=function(){return ba(this)};g.fa=function(a,b){return this===b};g.Sa=function(a,b){a=this.state;this.state=b;null!=this.ua&&ej(this,a,b);return b};g.kc=function(a,b){return this.Sa(null,b.j?b.j(this.state):b.call(null,this.state))};
g.lc=function(a,b,c){return this.Sa(null,b.B?b.B(this.state,c):b.call(null,this.state,c))};g.mc=function(a,b,c,d){return this.Sa(null,b.D?b.D(this.state,c,d):b.call(null,this.state,c,d))};g.nc=function(a,b,c,d,e){return this.Sa(null,Qd(b,this.state,c,d,e))};g.oc=function(a,b){ej(this,a,b)};g.Sb=function(a,b,c){return cj(this,b,c)};g.Tb=function(a,b){return dj(this,b)};g.ka=function(a,b){return new hj(this.state,b,this.validator,this.ua)};g.fb=function(){bj(this);return this.state};
var ij=function ij(a){switch(arguments.length){case 1:return ij.j(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(1),0,null);return ij.K(arguments[0],c)}};ij.j=function(a){return new hj(a,null,null,null)};ij.K=function(a,b){var c=Sd(b);b=H.B(c,ya);c=H.B(c,Rh);return new hj(a,b,c,null)};ij.ba=function(a){var b=N(a);a=O(a);return this.K(b,a)};ij.$=1;
function jj(a){if(null!=a&&null!=a.sc)a=a.sc(a);else{var b=jj[t(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=jj._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw A("IDisposable.dispose!",a);}return a}function Fb(a,b,c,d){return a._handle_change(b,c,d)}function kj(a){this.f=a;this.state=null;this.gb=!0;this.Fc=!1;this.ec=this.Za=this.ua=this.rb=null;this.F=2153807872;this.P=114690}g=kj.prototype;g._peek_at=function(){var a=$i;$i=null;try{return this.fb(null)}finally{$i=a}};
g._handle_change=function(a,b,c){return b===c||this.gb?null:null==this.Za?(this.gb=!0,null==gj&&(gj=[],!1===Ti.ac&&Ti.schedule()),gj.push(this)):!0===this.Za?this._run(!1):this.Za.j?this.Za.j(this):this.Za.call(null,this)};
g._update_watching=function(a){var b=Wf(a),c=Wf(this.rb);this.rb=a;a=J(Zi.B(b,c));for(var d=null,e=0,f=0;;)if(f<e){var h=d.ea(null,f);Eb(h,this);f+=1}else if(a=J(a))d=a,cd(d)?(a=Mb(d),f=Nb(d),d=a,e=R(a),a=f):(a=N(d),Eb(a,this),a=O(d),d=null,e=0),f=0;else break;b=J(Zi.B(c,b));c=null;for(e=d=0;;)if(e<d)a=c.ea(null,e),Gb(a,this),e+=1;else if(b=J(b))c=b,cd(c)?(b=Mb(c),d=Nb(c),c=b,a=R(b),b=d,d=a):(a=N(c),Gb(a,this),b=O(c),c=null,d=0),e=0;else return null};
g._queued_run=function(){return this.gb&&null!=this.rb?this._run(!0):null};g._try_capture=function(a){try{return this.ec=null,aj(a,this)}catch(b){return this.ec=this.state=a=b,this.gb=!1}};g._run=function(a){var b=this.state;a=x(a)?this._try_capture(this.f):aj(this.f,this);this.Fc||(this.state=a,null==this.ua||P.B(b,a)||ej(this,b,a));return a};
g._set_opts=function(a){var b=Sd(a);a=H.B(b,Rg);var c=H.B(b,qh),d=H.B(b,Tg);b=H.B(b,sh);null!=a&&(this.Za=a);null!=c&&(this.kd=c);null!=d&&(this.Gc=d);return null!=b?this.Fc=b:null};g.ia=function(a,b,c){return fj(b,c,"Reaction",new v(null,1,[mg,this.fb(null)],null))};g.ga=function(){return ba(this)};g.fa=function(a,b){return this===b};
g.sc=function(){var a=this.state,b=this.rb;this.Za=this.state=this.rb=null;this.gb=!0;b=J(Wf(b));for(var c=null,d=0,e=0;;)if(e<d){var f=c.ea(null,e);Gb(f,this);e+=1}else if(b=J(b))c=b,cd(c)?(b=Mb(c),e=Nb(c),c=b,d=R(b),b=e):(b=N(c),Gb(b,this),b=O(c),c=null,d=0),e=0;else break;null!=this.Gc&&this.Gc(a);a=this.Cd;if(null==a)return null;b=a.length;for(c=0;;)if(c<b)d=a[c],d.j?d.j(this):d.call(null,this),c+=1;else return null};g.Sa=function(a,b){a=this.state;this.state=b;this.kd(a,b);ej(this,a,b);return b};
g.kc=function(a,b){a=this.Sa;var c=this._peek_at();b=b.j?b.j(c):b.call(null,c);return a.call(this,null,b)};g.lc=function(a,b,c){a=this.Sa;var d=this._peek_at();b=b.B?b.B(d,c):b.call(null,d,c);return a.call(this,null,b)};g.mc=function(a,b,c,d){a=this.Sa;var e=this._peek_at();b=b.D?b.D(e,c,d):b.call(null,e,c,d);return a.call(this,null,b)};g.nc=function(a,b,c,d,e){return this.Sa(null,Qd(b,this._peek_at(),c,d,e))};g.oc=function(a,b){ej(this,a,b)};g.Sb=function(a,b,c){return cj(this,b,c)};
g.Tb=function(a,b){a=Vc(this.ua);dj(this,b);return!a&&Vc(this.ua)&&null==this.Za?this.sc(null):null};g.fb=function(){var a=this.ec;if(null!=a)throw a;(a=null==$i)&&(lj.O?lj.O():lj.call(null));a&&null==this.Za?this.gb&&(a=this.state,this.state=this.f.O?this.f.O():this.f.call(null),null==this.ua||P.B(a,this.state)||ej(this,a,this.state)):(bj(this),this.gb&&this._run(!1));return this.state};
function lj(){for(;;){var a=gj;if(null==a)return null;gj=null;for(var b=a.length,c=0;;)if(c<b)a[c]._queued_run(),c+=1;else break}}Pi=lj;function mj(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=1<b.length?new K(b.slice(1),0,null):null;b=arguments[0];var e=Sd(c);c=H.B(e,Rg);d=H.B(e,qh);e=H.B(e,Tg);b=new kj(b);b._set_opts(new v(null,3,[Rg,c,qh,d,Tg,e],null));return b}var nj=mj(null);
function oj(a,b){var c=pj,d=nj,e=aj(a,d);null!=d.rb&&(nj=mj(null),d._set_opts(c),d.f=a,d.Za=function(){return Ui.j?Ui.j(b):Ui.call(null,b)},b.cljsRatom=d);return e};var qj;function rj(a,b){var c=b.argv;if(null==c){c=Z;a=a.constructor;a:for(var d=ha(b),e=d.length,f=Td,h=0;;)if(h<e){var k=d[h];f=W.D(f,yd.j(k),ia(b,k));h+=1}else break a;b=new Y(null,2,5,c,[a,f],null)}else b=c;return b}function sj(a){var b;if(b=Pc(a))a=null==a?null:a.prototype,b=null!=(null==a?null:a.ib);return b}
function tj(a,b){for(;;){var c=a.ib,d=!0===a.bd?c.call(a,a):function(){var e=rj(a,a.props);switch(R(e)){case 1:return c.call(a);case 2:return c.call(a,Ec(e,1));case 3:return c.call(a,Ec(e,1),Ec(e,2));case 4:return c.call(a,Ec(e,1),Ec(e,2),Ec(e,3));case 5:return c.call(a,Ec(e,1),Ec(e,2),Ec(e,3),Ec(e,4));default:return c.apply(a,Fa(e).slice(1))}}();if(bd(d))return Xi(b,d);if(gd(d))d=sj(d)?function(e,f,h,k,l){return function(){function m(p){var q=null;if(0<arguments.length){q=0;for(var r=Array(arguments.length-
0);q<r.length;)r[q]=arguments[q+0],++q;q=new K(r,0,null)}return n.call(this,q)}function n(p){return Xi(f,Pd(Le,l,p))}m.$=0;m.ba=function(p){p=J(p);return n(p)};m.K=n;return m}()}(a,b,c,null,d):d,a.ib=d;else return d}}var pj=new v(null,1,[sh,!0],null);
function uj(a,b){switch(a instanceof I?a.Ra:null){case "getDefaultProps":throw Error("getDefaultProps not supported");case "getDerivedStateFromProps":return function(c,d){var e=b.call,f=c.argv;null!=f&&(c=V(f,1,null),c=$c(c)?c:null);return e.call(b,null,c,d)};case "getInitialState":return function(c){var d=c.dd;d=null!=d?d:c.dd=ij.j(null);return be(d,b.call(c,c))};case "getSnapshotBeforeUpdate":return function(c,d){return b.call(this,this,rj(this,c),d)};case "componentWillReceiveProps":return function(c){return b.call(this,
this,rj(this,c))};case "UNSAFE_componentWillReceiveProps":return function(c){return b.call(this,this,rj(this,c))};case "shouldComponentUpdate":return function(c){var d=Ii;if(x(d))return d;d=this.props.argv;var e=c.argv,f=null==d||null==e;if(null==b){if(f)return f;try{return!P.B(d,e)}catch(h){return!1}}else return f?b.call(this,this,rj(this,this.props),rj(this,c)):b.call(this,this,d,e)};case "componentWillUpdate":return function(c,d){return b.call(this,this,rj(this,c),d)};case "UNSAFE_componentWillUpdate":return function(c,
d){return b.call(this,this,rj(this,c),d)};case "componentDidUpdate":return function(c,d,e){return b.call(this,this,rj(this,c),d,e)};case "componentWillMount":return function(){return b.call(this,this)};case "UNSAFE_componentWillMount":return function(){return b.call(this,this)};case "componentDidMount":return function(){return b.call(this,this)};case "componentWillUnmount":return function(){var c=ia(this,"cljsRatom");null!=c&&jj(c);this.cljsIsDirty=!1;return null==b?null:b.call(this,this)};case "componentDidCatch":return function(c,
d){return b.call(this,this,c,d)};default:return null}}var vj=new v(null,2,[Xh,null,Kh,null],null),wj=function(a){var b=new ae(Td);return function(c){var d=H.B(F(b),c);if(null!=d)return d;d=a.j?a.j(c):a.call(null,c);ce.T(b,W,c,d);return d}}(function(a){if("string"===typeof a)return a;a=X(a);a=wi(a,/(unsafe|UNSAFE)[-_]/,"UNSAFE_");a=yi(a);var b=J(a);a=N(b);b=O(b);return Pd(B,a,de.B(Di,b))});function xj(a){return od(function(b,c,d){return W.D(b,yd.j(wj(c)),d)},Td,a)}
function yj(a,b){var c=function(){var h=nh.j(a);return x(h)?h:Og.j(a)}(),d=null==nh.j(a),e=function(){var h=Sg.j(a);if(x(h))return h;h=Fi(c);return x(h)?h:B.j(og("reagent"))}(),f=od(function(h,k,l){var m=W.D,n=uj(k,l);return m.call(W,h,k,x(n)?n:l)},Td,a);return W.K(f,Sg,e,Ic([jh,d,nh,c,Og,function(){var h=this,k=ia(h,"cljsRatom");h.cljsIsDirty=!1;return null==k?oj(function(){a:{var l=qj;qj=h;try{var m=tj(h,b);break a}finally{qj=l}m=void 0}return m},h):k._run(!1)}]))}
function zj(a){return od(function(b,c,d){c=X(c);b[c]=d;return b},{},a)}function Aj(a,b){return yj(Of.K(Ic([vj,xj(a)])),b)}var Qf=new Y(null,5,5,Z,[ah,Wh,Mh,Qh,Vg],null);
function Bj(a,b){function c(k,l,m){ti.Component.call(this,k,l,m);x(h)&&(h.B?h.B(this,k):h.call(null,this,k));x(f)&&(this.state=f.j?f.j(this):f.call(null,this));this.qc=Li+=1;return this}a=Aj(a,b);b=zj(Rd(Oc,a,Sg,ph,Yg,Ic([Og,nh,Qf])));var d=zj(Pf(a)),e=Sg.j(a),f=ph.j(a),h=Yg.j(a);ka(c.prototype,ti.Component.prototype,b);x(Og.j(a))&&(c.prototype.render=Og.j(a));x(nh.j(a))&&(c.prototype.ib=nh.j(a));x(jh.j(a))&&(c.prototype.bd=jh.j(a));ka(c,ti.Component,d);x(e)&&(c.displayName=e,c.nb=e,c.Ub=function(k){return G(k,
e)},Object.defineProperty(c,"name",{value:e,writable:!1}));c.Ib=!0;return c.prototype.constructor=c}function Cj(a,b,c){a=Vi(a);return b[a]=c}
function Dj(a,b){for(;;){var c=b.ib,d=b.argv,e=Od(c,d);if(bd(e))return Xi(a,e);if(gd(e))c=sj(e)?function(f,h,k,l,m,n){return function(){function p(r){var w=null;if(0<arguments.length){w=0;for(var z=Array(arguments.length-0);w<z.length;)z[w]=arguments[w+0],++w;w=new K(z,0,null)}return q.call(this,w)}function q(r){return Xi(f,Pd(Le,n,r))}p.$=0;p.ba=function(r){r=J(r);return q(r)};p.K=q;return p}()}(a,b,c,null,d,e):e,b.ib=c;else return e}}
function Ej(a,b){var c=b.argv,d=b.ib;b=ti.useState(0);V(b,0,null);var e=V(b,1,null),f=ti.useRef();x(f.current)||function(){var k={forceUpdate:function(){return e.j?e.j(tc):e.call(null,tc)}};k.qc=Li+=1;k.constructor=d;k.ib=d;return f.current=k}();var h=f.current;b=ia(h,"cljsRatom");ti.useEffect(function(){return function(){var k=ia(h,"cljsRatom");return null==k?null:jj(k)}},[]);h.argv=c;h.cljsIsDirty=!1;return null==b?oj(function(){a:{var k=qj;qj=h;try{var l=Dj(a,h);break a}finally{qj=k}l=void 0}return l},
h):b._run(!1)}function Fj(a,b){a=a.argv;b=b.argv;var c=!1===Ii;if(c)try{return P.B(a,b)}catch(d){return!1}else return c}function Gj(a,b){function c(e){return Ej(a,e)}var d=ia(b,Vi(a));if(x(d))return d;d=Fi(b);c.displayName=d;Object.defineProperty(c,"name",{value:d,writable:!1});d=ti.memo(c,Fj);Cj(a,b,d);return d};var Hj=new Tf(null,new v(null,6,["url",null,"tel",null,"text",null,"textarea",null,"password",null,"search",null],null),null),Ij=!1;
function Jj(a,b,c,d){var e=Sd(Td);e=H.B(e,Ch);if(x(function(){var h=!(a===document.activeElement&&id(Hj,a.type)&&"string"===typeof b&&"string"===typeof c);return h?h:Ij}()))return d.Vb=b,a.value=b,Pc(e)?e.j?e.j(b):e.call(null,b):null;var f=a.value;if(!P.B(f,c))return Ti.add_after_render(function(){var h=Ij;Ij=!0;try{return Kj.j?Kj.j(d):Kj.call(null,d)}finally{Ij=h}});f=R(f)-a.selectionStart;f=R(b)-f;d.Vb=b;a.value=b;Pc(e)&&(e.j?e.j(b):e.call(null,b));a.selectionStart=f;return a.selectionEnd=f}
function Kj(a){if(x(a.pc)){a.Cc=!1;var b=a.cd,c=a.Vb,d=a.rc;return P.B(b,c)?null:Jj(d,b,c,a)}return null}function Lj(a,b,c){a.Vb=c.target.value;x(a.Cc)||(a.Cc=!0,Ti.add_after_render(function(){return Kj(a)}));return b.j?b.j(c):b.call(null,c)}
function Mj(a){var b=qj;if(x(function(){var f=null!=a;return f?(f=a.hasOwnProperty("onChange"),x(f)?a.hasOwnProperty("value"):f):f}())){var c=a.value;c=null==c?"":c;var d=a.onChange,e=a.ref;x(b.pc)||(b.pc=!0,b.Vb=c);x(b.Kc)||(b.Kc=Pc(e)?function(f){b.rc=f;return e.j?e.j(f):e.call(null,f)}:x(x(e)?e.hasOwnProperty("current"):e)?function(f){b.rc=f;return e.current=f}:function(f){return b.rc=f});b.cd=c;delete a.value;a.defaultValue=c;a.onChange=function(f){return Lj(b,d,f)};a.ref=b.Kc}}
var Nj=new v(null,4,[Sh,"ReagentInput",wh,Kj,ai,function(a){return a.pc=null},yh,function(a,b,c,d,e){Mj(c);return Yi(e,a,b,c,d)}],null);var Oj={},Pj,Qj=/([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?/,Rj={"class":"className","for":"htmlFor",charset:"charSet"};function Sj(a,b){return a.hasOwnProperty(b)?ia(a,b):null}function Tj(a,b,c){if(Gi(b)){var d=Sj(Rj,X(b));null==d?(d=Ei(b),b=X(b),b=Rj[b]=d):b=d}c=Uj.j?Uj.j(c):Uj.call(null,c);a[b]=c;return a}
function Uj(a){return"object"!==t(a)?a:Gi(a)?X(a):$c(a)?od(Tj,{},a):Wc(a)?sg(a):gd(a)?function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new K(f,0,null)}return c.call(this,e)}function c(d){return Od(a,d)}b.$=0;b.ba=function(d){d=J(d);return c(d)};b.K=c;return b}():sg(a)}var Vj={};function Wj(a,b,c){if(Gi(b)){var d=Sj(Vj,X(b));null==d?(d=Ei(b),b=X(b),b=Vj[b]=d):b=d}c=Uj(c);a[b]=c;return a}
function Xj(a){return"object"!==t(a)?a:Gi(a)?X(a):$c(a)?od(Wj,{},a):Wc(a)?sg(a):gd(a)?function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new K(f,0,null)}return c.call(this,e)}function c(d){return Od(a,d)}b.$=0;b.ba=function(d){d=J(d);return c(d)};b.K=c;return b}():sg(a)}
function Yj(a,b,c,d,e){switch(R(b)-e){case 0:return ti.createElement(c,d);case 1:return ti.createElement(c,d,Xi(a,V(b,e,null)));default:return ti.createElement.apply(null,od(function(f,h,k){h>=e&&f.push(Xi(a,k));return f},[c,d],b))}}function Zj(a,b,c,d){this.tag=a;this.id=b;this.className=c;this.ed=d}function ak(a,b,c){var d=ia(a,Vi(c));null==d?sj(a)?a=Cj(c,a,a):(d=Tc(a),d=W.D(d,yh,a),d=Bj(d,c),a=Cj(c,a,d)):a=d;c={};c.argv=b;b=Ki(b);null!=b&&(c.key=b);return ti.createElement(a,c)}
function bk(a,b,c,d){var e={};e.ib=a;var f=R(b);c=Pe(null,b,c|0,f|0,null);e.argv=c;b=Ki(b);null!=b&&(e.key=b);return ti.createElement(Gj(d,a),e)}function ck(a,b,c){var d;if(d=Pc(a))d=null==a?null:a.prototype,d=null!=(null==d?null:d.render);return d?ak(a,b,c):bk(a,b,1,c)}var dk={};function ek(a,b){a=Sj(dk,b);if(null==a){var c=O(Xf(Qj,X(b)));a=V(c,0,null);var d=V(c,1,null);c=V(c,2,null);c=null==c?null:wi(c,/\./," ");var e=a.indexOf("-");e=!P.B(-1,e);a=new Zj(a,d,c,e);return dk[b]=a}return a}
function fk(a,b,c,d){var e=a.tag,f=V(b,c,null),h=null==f||$c(f),k=function(){var n=h?f:null;var p=fh.j(n);p=x(p)?W.D(n,fh,Hi.j(p)):n;var q=a.id;n=a.className;q=null!=q&&null==Zh.j(p)?W.D(p,Zh,q):p;if(x(n)){var r=W.D,w=Hi.B,z=fh.j(p);p=x(z)?z:di.j(p);n=r.call(W,q,fh,w.call(Hi,n,p))}else n=q;n=x(a.ed)?Xj(n):Uj(n);return x(n)?n:{}}();c+=h?1:0;a:switch(e){case "input":case "textarea":var l=!0;break a;default:l=!1}if(l){l=Ji(f);var m=function(){var n=d.od;if(x(n))return n;n=Bj(Nj,d);return d.od=n}();return Xi(d,
Sc(new Y(null,6,5,Z,[m,b,e,k,c,d],null),Of.K(Ic([x(l)?new v(null,1,[Eh,l],null):null,Tc(b)]))))}l=Ji(Tc(b));null!=l&&(k.key=l);return Yi(d,b,e,k,c)}function gk(a,b){return Fa(de.B(function(c){return Xi(b,c)},a))}
function hk(a,b,c){null==b&&console.error("vec-to-elem",ig(Ic([a])));var d=V(a,0,null);switch(d instanceof I?d.Ra:null){case "\x3e":return c=V(a,1,null),fk(new Zj(c,null,null,null),a,2,b);case "r\x3e":c=V(a,1,null);d=V(a,2,null);d=x(d)?d:{};var e=Ji(Tc(a));null!=e&&(d.key=e);return Yi(b,a,c,d,3);case "f\x3e":return bk(V(a,1,null),a,2,b);case "\x3c\x3e":return d=V(a,1,null),c=null==d||$c(d),d=Uj(c?d:null),d=x(d)?d:{},c=1+(c?1:0),e=Ki(a),null!=e&&(d.key=e),Yi(b,a,ti.Fragment,d,c);default:if(Gi(d)||
"string"===typeof d)a:for(;;)switch(c=V(a,0,null),d=X(c),e=d.indexOf("\x3e"),e){case -1:b=fk(Wi(b,d,c),a,1,b);break a;case 0:b=null;break a;default:a=Sc(new Y(null,2,5,Z,[d.substring(0,e),W.D(Sc(a,null),0,d.substring(e+1))],null),Tc(a))}else b=c.D?c.D(d,a,b):c.call(null,d,a,b);return b}}
var ik=function(a){var b=og("reagent-compiler"),c=x(Ah.j(a))?ck:ak,d=H.D(a,ii,ek);if("undefined"===typeof zi||"undefined"===typeof Ai||"undefined"===typeof Oj||"undefined"===typeof Pj)Pj=function(e,f,h,k,l){this.ld=e;this.id=f;this.Dc=h;this.$b=k;this.jd=l;this.F=393216;this.P=0},Pj.prototype.ka=function(e,f){return new Pj(this.ld,this.id,this.Dc,this.$b,f)},Pj.prototype.ha=function(){return this.jd},Pj.prototype.nd=function(){return this.id},Pj.prototype.Jc=function(e,f,h){return this.$b.D?this.$b.D(this,
f,h):this.$b.call(null,this,f,h)},Pj.prototype.Hc=function(e,f){e=this.Dc;return"object"!==t(f)?f:bd(f)?hk(f,this,e):(null==f?0:null!=f?f.F&64||u===f.ub||(f.F?0:y(Ua,f)):y(Ua,f))?gk(f,this):Gi(f)?X(f):(null!=f?f.F&2147483648||u===f.na||(f.F?0:y(Cb,f)):y(Cb,f))?ig(Ic([f])):f},Pj.prototype.Ic=function(e,f,h,k,l){return Yj(this,f,h,k,l)},Pj.Ib=!0,Pj.nb="reagent.impl.template/t_reagent$impl$template25872",Pj.Ub=function(e){return G(e,"reagent.impl.template/t_reagent$impl$template25872")};return new Pj(a,
b,c,d,Td)}(Td);var jk=si(9,{});function kk(a){a=ia(a,"comp");ti.useEffect(function(){var c=Ii;Ii=!1;try{Ti.flush_after_render()}finally{Ii=c}});var b=Ii;Ii=!0;try{return a.O?a.O():a.call(null)}finally{Ii=b}}function lk(){var a=new Y(null,1,5,Z,[mk],null);nk.render(ti.createElement(kk,{comp:function(){return Xi(ik,a)}}))};var ok=si(73,{});function pk(a,b){this.Ec=a;this.Mc=b}pk.prototype.getKey=function(){return this.Ec};pk.prototype.getValue=function(){return this.Mc};pk.prototype.clone=function(){return new pk(this.Ec,this.Mc)};function qk(a){this.Xa=[];if(a)a:{if(a instanceof qk){var b=a.Xa;for(var c=[],d=b.length,e=0;e<d;e++)c.push(b[e].getKey());b=c;a=a.Xa;c=[];d=a.length;for(e=0;e<d;e++)c.push(a[e].getValue());a=c;if(0>=this.Xa.length){c=this.Xa;for(d=0;d<b.length;d++)c.push(new pk(b[d],a[d]));break a}}else{b=ha(a);c=[];d=0;for(e in a)c[d++]=a[e];a=c}for(d=0;d<b.length;d++)this.insert(b[d],a[d])}}g=qk.prototype;
g.insert=function(a,b){var c=this.Xa;c.push(new pk(a,b));a=c.length-1;b=this.Xa;for(c=b[a];0<a;){var d=a-1>>1;if(b[d].getKey()>c.getKey())b[a]=b[d],a=d;else break}b[a]=c};g.remove=function(){var a=this.Xa,b=a.length,c=a[0];if(!(0>=b)){if(1==b)la(a);else{a[0]=a.pop();a=0;b=this.Xa;for(var d=b.length,e=b[a];a<d>>1;){var f=2*a+1,h=2*a+2;f=h<d&&b[h].getKey()<b[f].getKey()?h:f;if(b[f].getKey()>e.getKey())break;b[a]=b[f];a=f}b[a]=e}return c.getValue()}};g.peek=function(){var a=this.Xa;if(0!=a.length)return a[0].getValue()};
g.clone=function(){return new qk(this)};g.isEmpty=function(){return 0===this.Xa.length};g.clear=function(){la(this.Xa)};function rk(){qk.call(this)}fa(rk,qk);rk.prototype.enqueue=function(a,b){this.insert(a,b)};rk.prototype.dequeue=function(){return this.remove()};function sk(a){--a;return 0<a?a:0}function tk(a){a=Sd(a);var b=H.B(a,Pg);return H.B(a,Wg)*Math.sqrt(-2*Math.log(1-Math.random()))*Math.cos(2*Math.PI*Math.random())+b}var Kg=function(){var a=new ae(Td),b=new ae(Td),c=new ae(Td),d=new ae(Td),e=H.D(Td,Bh,vg.O?vg.O():vg.call(null));return new Gg(hc.B("net.thewagner.skiers.core","handle-event"),function(f,h){return Ph.j(h)},e,a,b,c,d)}();Jg(Hg,function(a){return a});Jg(rh,function(a){return je(je(a,Dh,sk),Nh,tc)});
Jg(Mg,function(a,b){a=Sd(a);var c=H.B(a,ki),d=H.B(a,Uh);b=Sd(b);b=H.B(b,Jh);c=d/tk(c);return ke(je(je(a,hi,sk),Dh,tc),gi,Jc,new v(null,2,[Ph,rh,Jh,b+c],null))});Jg(vh,function(a,b){var c=Sd(a),d=H.B(c,Gh),e=H.B(c,bi);a=H.B(c,fi);b=Sd(b);b=H.B(b,Jh);var f=Nh.j(c);e=0>f?0:0<=f&&f<=e?f:e<f?e:null;c=ke(ke(c,Nh,sd,e),hi,rd,e);d=new v(null,2,[Ph,Mg,Jh,b+tk(d)],null);return ke(ke(c,gi,ie,ee(e,new he(null,-1,d,null))),gi,Jc,new v(null,2,[Ph,vh,Jh,b+a],null))});var uk;
a:for(var vk=[Uh,hi,Gh,gi,Dh,fi,xh,ki,bi,Jh,Nh],wk=[3E3,0,new v(null,2,[Pg,300,Wg,30],null),new Y(null,1,5,Z,[new v(null,2,[Ph,vh,Jh,0],null)],null),0,7,1E4,new v(null,3,[Pg,5,Wg,1,Yh,"m/s"],null),4,0,25],xk=vk.length,yk=0,zk=Hb(ef);;)if(yk<xk){if(wk.length<=yk)throw Error(["No value supplied for key: ",B.j(vk[yk])].join(""));var Ak=yk+1,Bk=Kb(zk,vk[yk],wk[yk]);yk=Ak;zk=Bk}else{uk=Jb(zk);break a};var Ck=new v(null,6,[$h,"https://vega.github.io/schema/vega-lite/v5.json",gh,"A simple bar chart with embedded data.",Ug,new v(null,1,[oh,ci],null),bh,new Y(null,1,5,Z,[new v(null,2,[Qg,new Y(null,3,5,Z,[Dh,Nh,hi],null),mh,new Y(null,2,5,Z,["state","number-of-skiers"],null)],null)],null),Oh,"line",zh,new v(null,3,[Ih,new v(null,4,[ch,Jh,ji,"quantitative",hh,"time",Lh,new v(null,1,[Fh,!1],null)],null),Hh,new v(null,3,[ch,"number-of-skiers",ji,"quantitative",hh,"Number of skiers"],null),kh,new v(null,
1,[ch,"state"],null)],null)],null),Dk=new v(null,6,[$h,"https://vega.github.io/schema/vega-lite/v5.json",gh,"A simple bar chart with embedded data.",Ug,new v(null,1,[oh,ci],null),bh,new Y(null,1,5,Z,[new v(null,2,[Qg,new Y(null,3,5,Z,[Dh,Nh,hi],null),mh,new Y(null,2,5,Z,["state","number-of-skiers"],null)],null)],null),Oh,"bar",zh,new v(null,3,[Ih,new v(null,4,[ch,Jh,ji,"quantitative",hh,"time",Lh,new v(null,1,[Fh,!1],null)],null),Hh,new v(null,4,[ch,"number-of-skiers",ji,"quantitative",lh,"normalize",
hh,"Percentage of skiers"],null),kh,new v(null,1,[ch,"state"],null)],null)],null),Ek=ij.j(new v(null,1,[ci,new Y(null,1,5,Z,[uk],null)],null)),Fk=ij.j(new v(null,1,[eh,!0],null));
function Gk(){return ce.B(Ek,function(a){var b=W.D,c=Jc.B,d=ci.j(a),e;a:for(e=ci.j(a);;){var f=O(e);if(null!=f)e=f;else{e=N(e);break a}}a:{f=e;e=Kg;var h=gi.j(f),k=new rk;h=J(h);for(var l=null,m=0,n=0;;)if(n<m){var p=l.ea(null,n);k.enqueue(Jh.j(p),p);n+=1}else if(h=J(h))l=h,cd(l)?(h=Mb(l),n=Nb(l),l=h,m=R(h),h=n):(h=N(l),k.enqueue(Jh.j(h),h),h=O(l),l=null,m=0),n=0;else break;h=k.dequeue();if(x(h)){m=l=W.D;b:for(n=Kc;;){if(x(k.isEmpty()))break b;p=k.dequeue();n=Jc.B(n,p)}f=m.call(W,f,gi,n);e=e.B?e.B(f,
h):e.call(null,f,h);e=l.call(W,e,Jh,h.j?h.j(Jh):h.call(null,Jh))}else e=f;d=c.call(Jc,d,e);c=J(d);for(d=J(fe(200,d));;)if(d)c=O(c),d=O(d);else break a}return b.call(W,a,ci,He(c))})}function Hk(){return x(eh.j(F(Fk)))?new Y(null,3,5,Z,[Lg,new v(null,1,[ih,function(){return ce.T(Fk,W,eh,!1)}],null),"Pause"],null):new Y(null,3,5,Z,[Lg,new v(null,1,[ih,function(){return ce.T(Fk,W,eh,!0)}],null),"Resume"],null)}
function Ik(){return new Y(null,3,5,Z,[Th,new v(null,2,[ji,"reset",ih,function(){be(Ek,new v(null,1,[ci,new Y(null,1,5,Z,[uk],null)],null));return be(Fk,new v(null,1,[eh,!0],null))}],null),"Restart"],null)}
function mk(){x(eh.j(F(Fk)))&&setTimeout(function(){return Gk()},100);return new Y(null,4,5,Z,[th,new Y(null,2,5,Z,[Vh,new Y(null,2,5,Z,[ei,"Skiers simulation"],null)],null),new Y(null,2,5,Z,[Vh,new Y(null,3,5,Z,[Ng,new Y(null,1,5,Z,[Hk],null),new Y(null,1,5,Z,[Ik],null)],null)],null),new Y(null,2,5,Z,[Vh,new Y(null,3,5,Z,[uh,new Y(null,2,5,Z,[Zg,new Y(null,3,5,Z,[dh,ok.VegaLite,new v(null,3,[Xg,Ck,Ug,F(Ek),$g,!1],null)],null)],null),new Y(null,2,5,Z,[Zg,new Y(null,3,5,Z,[dh,ok.VegaLite,new v(null,
3,[Xg,Dk,Ug,F(Ek),$g,!1],null)],null)],null)],null)],null)],null)}var Jk=jk.createRoot,Kk;Kk=document.getElementById("app");var nk=Jk.call(jk,Kk);try{lk()}catch(a){throw console.error("An error occurred when calling (net.thewagner.skiers.web/init)"),a;};
}).call(this);